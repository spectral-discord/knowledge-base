(function(){
shadow$provide[584]=function(va,V,Sa,I){function q(r,A,C){var x,J={},p=null,f=null;void 0!==C&&(p=""+C);void 0!==A.key&&(p=""+A.key);void 0!==A.ref&&(f=A.ref);for(x in A)n.call(A,x)&&!b.hasOwnProperty(x)&&(J[x]=A[x]);if(r&&r.defaultProps)for(x in A=r.defaultProps,A)void 0===J[x]&&(J[x]=A[x]);return{$$typeof:P,type:r,key:p,ref:f,props:J,_owner:z.current}}V(19);va=V(22);var P=60103;I.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(V=Symbol.for,P=V("react.element"),I.Fragment=V("react.fragment"));
var z=va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};I.jsx=q;I.jsxs=q};
shadow$provide[586]=function(va,V,Sa,I){Sa.exports=V(584)};
shadow$provide[587]=function(va,V,Sa,I){function q(nc){for(var Dd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+nc,od=1;od<arguments.length;od++)Dd+="\x26args[]\x3d"+encodeURIComponent(arguments[od]);return"Minified React error #"+nc+"; visit "+Dd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function P(nc){if(null==nc)return null;if("function"===typeof nc)return nc.displayName||nc.name||null;if("string"===typeof nc)return nc;
switch(nc){case N:return"Fragment";case aa:return"Portal";case B:return"Profiler";case Q:return"StrictMode";case Z:return"Suspense";case G:return"SuspenseList"}if("object"===typeof nc)switch(nc.$$typeof){case R:return(nc.displayName||"Context")+".Consumer";case O:return(nc._context.displayName||"Context")+".Provider";case ba:var Dd=nc.render;Dd=Dd.displayName||Dd.name||"";return nc.displayName||(""!==Dd?"ForwardRef("+Dd+")":"ForwardRef");case ia:return P(nc.type);case ca:return P(nc._render);case M:Dd=
nc._payload;nc=nc._init;try{return P(nc(Dd))}catch(od){}}return null}function z(nc,Dd){for(var od=nc._threadCount|0;od<=Dd;od++)nc[od]=nc._currentValue2,nc._threadCount=od+1}function n(nc,Dd,od,ge){if(ge&&(ge=nc.contextType,"object"===typeof ge&&null!==ge))return z(ge,od),ge[od];if(nc=nc.contextTypes){od={};for(var jd in nc)od[jd]=Dd[jd];Dd=od}else Dd=xa;return Dd}function b(nc){if(Da.call(Va,nc))return!0;if(Da.call(Oa,nc))return!1;if(Ta.test(nc))return Va[nc]=!0;Oa[nc]=!0;return!1}function r(nc,
Dd,od,ge){if(null!==od&&0===od.type)return!1;switch(typeof Dd){case "function":case "symbol":return!0;case "boolean":if(ge)return!1;if(null!==od)return!od.acceptsBooleans;nc=nc.toLowerCase().slice(0,5);return"data-"!==nc&&"aria-"!==nc;default:return!1}}function A(nc,Dd,od,ge){if(null===Dd||"undefined"===typeof Dd||r(nc,Dd,od,ge))return!0;if(ge)return!1;if(null!==od)switch(od.type){case 3:return!Dd;case 4:return!1===Dd;case 5:return isNaN(Dd);case 6:return isNaN(Dd)||1>Dd}return!1}function C(nc,Dd,
od,ge,jd,Wd,fd){this.acceptsBooleans=2===Dd||3===Dd||4===Dd;this.attributeName=ge;this.attributeNamespace=jd;this.mustUseProperty=od;this.propertyName=nc;this.type=Dd;this.sanitizeURL=Wd;this.removeEmptyString=fd}function x(nc){return nc[1].toUpperCase()}function J(nc){if("boolean"===typeof nc||"number"===typeof nc)return""+nc;nc=""+nc;var Dd=ab.exec(nc);if(Dd){var od="",ge,jd=0;for(ge=Dd.index;ge<nc.length;ge++){switch(nc.charCodeAt(ge)){case 34:Dd="\x26quot;";break;case 38:Dd="\x26amp;";break;case 39:Dd=
"\x26#x27;";break;case 60:Dd="\x26lt;";break;case 62:Dd="\x26gt;";break;default:continue}jd!==ge&&(od+=nc.substring(jd,ge));jd=ge+1;od+=Dd}nc=jd!==ge?od+nc.substring(jd,ge):od}return nc}function p(nc,Dd){var od=Ma.hasOwnProperty(nc)?Ma[nc]:null,ge;if(ge="style"!==nc)ge=null!==od?0===od.type:!(2<nc.length)||"o"!==nc[0]&&"O"!==nc[0]||"n"!==nc[1]&&"N"!==nc[1]?!1:!0;if(ge||A(nc,Dd,od,!1))return"";if(null!==od){nc=od.attributeName;ge=od.type;if(3===ge||4===ge&&!0===Dd)return nc+'\x3d""';od.sanitizeURL&&
(Dd=""+Dd);return nc+'\x3d"'+(J(Dd)+'"')}return b(nc)?nc+'\x3d"'+(J(Dd)+'"'):""}function f(nc,Dd){return nc===Dd&&(0!==nc||1/nc===1/Dd)||nc!==nc&&Dd!==Dd}function g(){if(null===na)throw Error(q(321));return na}function c(){if(0<zb)throw Error(q(312));return{memoizedState:null,queue:null,next:null}}function u(){null===qa?null===Aa?(za=!1,Aa=qa=c()):(za=!0,qa=Aa):null===qa.next?(za=!1,qa=qa.next=c()):(za=!0,qa=qa.next);return qa}function v(nc,Dd,od,ge){for(;Ia;)Ia=!1,zb+=1,qa=null,od=nc(Dd,ge);L();
return od}function L(){na=null;Ia=!1;Aa=null;zb=0;qa=Ra=null}function y(nc,Dd){return"function"===typeof Dd?Dd(nc):Dd}function t(nc,Dd,od){na=g();qa=u();if(za){var ge=qa.queue;Dd=ge.dispatch;if(null!==Ra&&(od=Ra.get(ge),void 0!==od)){Ra.delete(ge);ge=qa.memoizedState;do ge=nc(ge,od.action),od=od.next;while(null!==od);qa.memoizedState=ge;return[ge,Dd]}return[qa.memoizedState,Dd]}nc=nc===y?"function"===typeof Dd?Dd():Dd:void 0!==od?od(Dd):Dd;qa.memoizedState=nc;nc=qa.queue={last:null,dispatch:null};
nc=nc.dispatch=h.bind(null,na,nc);return[qa.memoizedState,nc]}function k(nc,Dd){na=g();qa=u();Dd=void 0===Dd?null:Dd;if(null!==qa){var od=qa.memoizedState;if(null!==od&&null!==Dd){var ge=od[1];a:if(null===ge)ge=!1;else{for(var jd=0;jd<ge.length&&jd<Dd.length;jd++)if(!Na(Dd[jd],ge[jd])){ge=!1;break a}ge=!0}if(ge)return od[0]}}nc=nc();qa.memoizedState=[nc,Dd];return nc}function h(nc,Dd,od){if(!(25>zb))throw Error(q(301));if(nc===na)if(Ia=!0,nc={action:od,next:null},null===Ra&&(Ra=new Map),od=Ra.get(Dd),
void 0===od)Ra.set(Dd,nc);else{for(Dd=od;null!==Dd.next;)Dd=Dd.next;Dd.next=nc}}function K(){}function Y(nc){switch(nc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F(nc){if(void 0===nc||null===nc)return nc;var Dd="";D.Children.forEach(nc,function(od){null!=od&&(Dd+=od)});return Dd}function ha(nc,Dd){if(void 0===nc)throw Error(q(152,P(Dd)||"Component"));}function S(nc,Dd,od){function ge(fd,
Sd){var Sb=Sd.prototype&&Sd.prototype.isReactComponent,hc=n(Sd,Dd,od,Sb),$b=[],jb=!1,nb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===$b)return null},enqueueReplaceState:function(ve,vd){jb=!0;$b=[vd]},enqueueSetState:function(ve,vd){if(null===$b)return null;$b.push(vd)}};if(Sb){if(Sb=new Sd(fd.props,hc,nb),"function"===typeof Sd.getDerivedStateFromProps){var ec=Sd.getDerivedStateFromProps.call(null,fd.props,Sb.state);null!=ec&&(Sb.state=X({},Sb.state,ec))}}else if(na={},
Sb=Sd(fd.props,hc,nb),Sb=v(Sd,fd.props,Sb,hc),null==Sb||null==Sb.render){nc=Sb;ha(nc,Sd);return}Sb.props=fd.props;Sb.context=hc;Sb.updater=nb;nb=Sb.state;void 0===nb&&(Sb.state=nb=null);if("function"===typeof Sb.UNSAFE_componentWillMount||"function"===typeof Sb.componentWillMount)if("function"===typeof Sb.componentWillMount&&"function"!==typeof Sd.getDerivedStateFromProps&&Sb.componentWillMount(),"function"===typeof Sb.UNSAFE_componentWillMount&&"function"!==typeof Sd.getDerivedStateFromProps&&Sb.UNSAFE_componentWillMount(),
$b.length){nb=$b;var vc=jb;$b=null;jb=!1;if(vc&&1===nb.length)Sb.state=nb[0];else{ec=vc?nb[0]:Sb.state;var Rc=!0;for(vc=vc?1:0;vc<nb.length;vc++){var Zc=nb[vc];Zc="function"===typeof Zc?Zc.call(Sb,ec,fd.props,hc):Zc;null!=Zc&&(Rc?(Rc=!1,ec=X({},ec,Zc)):X(ec,Zc))}Sb.state=ec}}else $b=null;nc=Sb.render();ha(nc,Sd);if("function"===typeof Sb.getChildContext&&(fd=Sd.childContextTypes,"object"===typeof fd)){var Ld=Sb.getChildContext(),ee;for(ee in Ld)if(!(ee in fd))throw Error(q(108,P(Sd)||"Unknown",ee));
}Ld&&(Dd=X({},Dd,Ld))}for(;D.isValidElement(nc);){var jd=nc,Wd=jd.type;if("function"!==typeof Wd)break;ge(jd,Wd)}return{child:nc,context:Dd}}var X=V(19),D=V(22),aa=60106,N=60107,Q=60108,B=60114,O=60109,R=60110,ba=60112,Z=60113,G=60120,ia=60115,M=60116,ca=60121,fa=60117,da=60119,pa=60129,ya=60131;"function"===typeof Symbol&&Symbol.for&&(va=Symbol.for,aa=va("react.portal"),N=va("react.fragment"),Q=va("react.strict_mode"),B=va("react.profiler"),O=va("react.provider"),R=va("react.context"),ba=va("react.forward_ref"),
Z=va("react.suspense"),G=va("react.suspense_list"),ia=va("react.memo"),M=va("react.lazy"),ca=va("react.block"),fa=va("react.fundamental"),da=va("react.scope"),pa=va("react.debug_trace_mode"),ya=va("react.legacy_hidden"));va=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var xa={},Ga=new Uint16Array(16);for(V=0;15>V;V++)Ga[V]=V+1;Ga[15]=0;var Ta=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Da=Object.prototype.hasOwnProperty,Oa={},Va={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(nc){Ma[nc]=new C(nc,0,!1,nc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(nc){var Dd=nc[0];Ma[Dd]=new C(Dd,1,!1,nc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(nc){Ma[nc]=
new C(nc,2,!1,nc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(nc){Ma[nc]=new C(nc,2,!1,nc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(nc){Ma[nc]=new C(nc,3,!1,nc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(nc){Ma[nc]=new C(nc,3,!0,nc,null,!1,!1)});["capture","download"].forEach(function(nc){Ma[nc]=new C(nc,4,!1,nc,null,!1,!1)});["cols","rows","size","span"].forEach(function(nc){Ma[nc]=new C(nc,6,!1,nc,null,!1,!1)});["rowSpan","start"].forEach(function(nc){Ma[nc]=new C(nc,5,!1,nc.toLowerCase(),null,!1,!1)});var bb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(nc){var Dd=
nc.replace(bb,x);Ma[Dd]=new C(Dd,1,!1,nc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(nc){var Dd=nc.replace(bb,x);Ma[Dd]=new C(Dd,1,!1,nc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(nc){var Dd=nc.replace(bb,x);Ma[Dd]=new C(Dd,1,!1,nc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(nc){Ma[nc]=new C(nc,1,!1,nc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(nc){Ma[nc]=new C(nc,1,!1,nc.toLowerCase(),null,!0,!0)});var ab=/["'&<>]/,Na="function"===typeof Object.is?Object.is:f,na=null,Aa=null,qa=null,za=!1,Ia=!1,Ra=null,zb=0,hb=null,Mb={readContext:function(nc){var Dd=hb.threadID;z(nc,Dd);return nc[Dd]},useContext:function(nc){g();var Dd=hb.threadID;z(nc,Dd);return nc[Dd]},useMemo:k,useReducer:t,useRef:function(nc){na=
g();qa=u();var Dd=qa.memoizedState;return null===Dd?(nc={current:nc},qa.memoizedState=nc):Dd},useState:function(nc){return t(y,nc)},useLayoutEffect:function(){},useCallback:function(nc,Dd){return k(function(){return nc},Dd)},useImperativeHandle:K,useEffect:K,useDebugValue:K,useDeferredValue:function(nc){g();return nc},useTransition:function(){g();return[function(nc){nc()},!1]},useOpaqueIdentifier:function(){return(hb.identifierPrefix||"")+"R:"+(hb.uniqueID++).toString(36)},useMutableSource:function(nc,
Dd){g();return Dd(nc._source)}},Yb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},kc=X({menuitem:!0},Yb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(nc){lb.forEach(function(Dd){Dd=Dd+nc.charAt(0).toUpperCase()+nc.substring(1);Pa[Dd]=Pa[nc]})});var mb=/([A-Z])/g,bc=/^ms-/,Ec=D.Children.toArray,
$c=va.ReactCurrentDispatcher,Kc={listing:!0,pre:!0,textarea:!0},Gb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,zc={},Uc={},cd=Object.prototype.hasOwnProperty,Jd={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Fd=function(){function nc(od,ge,jd){D.isValidElement(od)?od.type!==N?od=[od]:(od=od.props.children,od=D.isValidElement(od)?[od]:Ec(od)):od=Ec(od);od={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:od,childIndex:0,context:xa,footer:""};
var Wd=Ga[0];if(0===Wd){var fd=Ga;Wd=fd.length;var Sd=2*Wd;if(!(65536>=Sd))throw Error(q(304));var Sb=new Uint16Array(Sd);Sb.set(fd);Ga=Sb;Ga[0]=Wd+1;for(fd=Wd;fd<Sd-1;fd++)Ga[fd]=fd+1;Ga[Sd-1]=0}else Ga[0]=Ga[Wd];this.threadID=Wd;this.stack=[od];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=ge;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=jd&&jd.identifierPrefix||""}
var Dd=nc.prototype;Dd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var od=this.threadID;Ga[od]=Ga[0];Ga[0]=od}};Dd.pushProvider=function(od){var ge=++this.contextIndex,jd=od.type._context,Wd=this.threadID;z(jd,Wd);var fd=jd[Wd];this.contextStack[ge]=jd;this.contextValueStack[ge]=fd;jd[Wd]=od.props.value};Dd.popProvider=function(){var od=this.contextIndex,ge=this.contextStack[od],jd=this.contextValueStack[od];this.contextStack[od]=null;this.contextValueStack[od]=
null;this.contextIndex--;ge[this.threadID]=jd};Dd.clearProviders=function(){for(var od=this.contextIndex;0<=od;od--)this.contextStack[od][this.threadID]=this.contextValueStack[od]};Dd.read=function(od){if(this.exhausted)return null;var ge=hb;hb=this;var jd=$c.current;$c.current=Mb;try{for(var Wd=[""],fd=!1;Wd[0].length<od;){if(0===this.stack.length){this.exhausted=!0;var Sd=this.threadID;Ga[Sd]=Ga[0];Ga[0]=Sd;break}var Sb=this.stack[this.stack.length-1];if(fd||Sb.childIndex>=Sb.children.length){var hc=
Sb.footer;""!==hc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Sb.type)this.currentSelectValue=null;else if(null!=Sb.type&&null!=Sb.type.type&&Sb.type.type.$$typeof===O)this.popProvider(Sb.type);else if(Sb.type===Z){this.suspenseDepth--;var $b=Wd.pop();if(fd){fd=!1;var jb=Sb.fallbackFrame;if(!jb)throw Error(q(303));this.stack.push(jb);Wd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Wd[this.suspenseDepth]+=$b}Wd[this.suspenseDepth]+=hc}else{var nb=Sb.children[Sb.childIndex++],
ec="";try{ec+=this.render(nb,Sb.context,Sb.domNamespace)}catch(vc){if(null!=vc&&"function"===typeof vc.then)throw Error(q(294));throw vc;}finally{}Wd.length<=this.suspenseDepth&&Wd.push("");Wd[this.suspenseDepth]+=ec}}return Wd[0]}finally{$c.current=jd,hb=ge,L()}};Dd.render=function(od,ge,jd){if("string"===typeof od||"number"===typeof od){jd=""+od;if(""===jd)return"";if(this.makeStaticMarkup)return J(jd);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+J(jd);this.previousWasTextNode=!0;return J(jd)}ge=
S(od,ge,this.threadID);od=ge.child;ge=ge.context;if(null===od||!1===od)return"";if(!D.isValidElement(od)){if(null!=od&&null!=od.$$typeof){jd=od.$$typeof;if(jd===aa)throw Error(q(257));throw Error(q(258,jd.toString()));}od=Ec(od);this.stack.push({type:null,domNamespace:jd,children:od,childIndex:0,context:ge,footer:""});return""}var Wd=od.type;if("string"===typeof Wd)return this.renderDOM(od,ge,jd);switch(Wd){case ya:case pa:case Q:case B:case G:case N:return od=Ec(od.props.children),this.stack.push({type:null,
domNamespace:jd,children:od,childIndex:0,context:ge,footer:""}),"";case Z:throw Error(q(294));case da:throw Error(q(343));}if("object"===typeof Wd&&null!==Wd)switch(Wd.$$typeof){case ba:na={};var fd=Wd.render(od.props,od.ref);fd=v(Wd.render,od.props,fd,od.ref);fd=Ec(fd);this.stack.push({type:null,domNamespace:jd,children:fd,childIndex:0,context:ge,footer:""});return"";case ia:return od=[D.createElement(Wd.type,X({ref:od.ref},od.props))],this.stack.push({type:null,domNamespace:jd,children:od,childIndex:0,
context:ge,footer:""}),"";case O:return Wd=Ec(od.props.children),jd={type:od,domNamespace:jd,children:Wd,childIndex:0,context:ge,footer:""},this.pushProvider(od),this.stack.push(jd),"";case R:Wd=od.type;fd=od.props;var Sd=this.threadID;z(Wd,Sd);Wd=Ec(fd.children(Wd[Sd]));this.stack.push({type:od,domNamespace:jd,children:Wd,childIndex:0,context:ge,footer:""});return"";case fa:throw Error(q(338));case M:return Wd=od.type,fd=Wd._init,Wd=fd(Wd._payload),od=[D.createElement(Wd,X({ref:od.ref},od.props))],
this.stack.push({type:null,domNamespace:jd,children:od,childIndex:0,context:ge,footer:""}),""}throw Error(q(130,null==Wd?Wd:typeof Wd,""));};Dd.renderDOM=function(od,ge,jd){var Wd=od.type.toLowerCase();"http://www.w3.org/1999/xhtml"===jd&&Y(Wd);if(!zc.hasOwnProperty(Wd)){if(!Gb.test(Wd))throw Error(q(65,Wd));zc[Wd]=!0}var fd=od.props;if("input"===Wd)fd=X({type:void 0},fd,{defaultChecked:void 0,defaultValue:void 0,value:null!=fd.value?fd.value:fd.defaultValue,checked:null!=fd.checked?fd.checked:fd.defaultChecked});
else if("textarea"===Wd){var Sd=fd.value;if(null==Sd){Sd=fd.defaultValue;var Sb=fd.children;if(null!=Sb){if(null!=Sd)throw Error(q(92));if(Array.isArray(Sb)){if(!(1>=Sb.length))throw Error(q(93));Sb=Sb[0]}Sd=""+Sb}null==Sd&&(Sd="")}fd=X({},fd,{value:void 0,children:""+Sd})}else if("select"===Wd)this.currentSelectValue=null!=fd.value?fd.value:fd.defaultValue,fd=X({},fd,{value:void 0});else if("option"===Wd){Sb=this.currentSelectValue;var hc=F(fd.children);if(null!=Sb){var $b=null!=fd.value?fd.value+
"":hc;Sd=!1;if(Array.isArray(Sb))for(var jb=0;jb<Sb.length;jb++){if(""+Sb[jb]===$b){Sd=!0;break}}else Sd=""+Sb===$b;fd=X({selected:void 0,children:void 0},fd,{selected:Sd,children:hc})}}if(Sd=fd){if(kc[Wd]&&(null!=Sd.children||null!=Sd.dangerouslySetInnerHTML))throw Error(q(137,Wd));if(null!=Sd.dangerouslySetInnerHTML){if(null!=Sd.children)throw Error(q(60));if(!("object"===typeof Sd.dangerouslySetInnerHTML&&"__html"in Sd.dangerouslySetInnerHTML))throw Error(q(61));}if(null!=Sd.style&&"object"!==
typeof Sd.style)throw Error(q(62));}Sd=fd;Sb=this.makeStaticMarkup;hc=1===this.stack.length;$b="\x3c"+od.type;a:if(-1===Wd.indexOf("-"))jb="string"===typeof Sd.is;else switch(Wd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":jb=!1;break a;default:jb=!0}for(vd in Sd)if(cd.call(Sd,vd)){var nb=Sd[vd];if(null!=nb){if("style"===vd){var ec=void 0,vc="",Rc="";for(ec in nb)if(nb.hasOwnProperty(ec)){var Zc=
0===ec.indexOf("--"),Ld=nb[ec];if(null!=Ld){if(Zc)var ee=ec;else if(ee=ec,Uc.hasOwnProperty(ee))ee=Uc[ee];else{var ve=ee.replace(mb,"-$1").toLowerCase().replace(bc,"-ms-");ee=Uc[ee]=ve}vc+=Rc+ee+":";Rc=ec;Zc=null==Ld||"boolean"===typeof Ld||""===Ld?"":Zc||"number"!==typeof Ld||0===Ld||Pa.hasOwnProperty(Rc)&&Pa[Rc]?(""+Ld).trim():Ld+"px";vc+=Zc;Rc=";"}}nb=vc||null}ec=null;jb?Jd.hasOwnProperty(vd)||(ec=vd,ec=b(ec)&&null!=nb?ec+'\x3d"'+(J(nb)+'"'):""):ec=p(vd,nb);ec&&($b+=" "+ec)}}Sb||hc&&($b+=' data-reactroot\x3d""');
var vd=$b;Sd="";Yb.hasOwnProperty(Wd)?vd+="/\x3e":(vd+="\x3e",Sd="\x3c/"+od.type+"\x3e");a:{Sb=fd.dangerouslySetInnerHTML;if(null!=Sb){if(null!=Sb.__html){Sb=Sb.__html;break a}}else if(Sb=fd.children,"string"===typeof Sb||"number"===typeof Sb){Sb=J(Sb);break a}Sb=null}null!=Sb?(fd=[],Kc.hasOwnProperty(Wd)&&"\n"===Sb.charAt(0)&&(vd+="\n"),vd+=Sb):fd=Ec(fd.children);od=od.type;jd=null==jd||"http://www.w3.org/1999/xhtml"===jd?Y(od):"http://www.w3.org/2000/svg"===jd&&"foreignObject"===od?"http://www.w3.org/1999/xhtml":
jd;this.stack.push({domNamespace:jd,type:Wd,children:fd,childIndex:0,context:ge,footer:Sd});this.previousWasTextNode=!1;return vd};return nc}();I.renderToNodeStream=function(){throw Error(q(207));};I.renderToStaticMarkup=function(nc,Dd){nc=new Fd(nc,!0,Dd);try{return nc.read(Infinity)}finally{nc.destroy()}};I.renderToStaticNodeStream=function(){throw Error(q(208));};I.renderToString=function(nc,Dd){nc=new Fd(nc,!1,Dd);try{return nc.read(Infinity)}finally{nc.destroy()}};I.version="17.0.2"};
shadow$provide[589]=function(va,V,Sa,I){Sa.exports=V(587)};
shadow$provide[590]=function(va,V,Sa,I){function q(){if(!Sq&&(Sq="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Sq))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sq(Tt)}function P(a,d=0){return(km[a[d+0]]+km[a[d+1]]+km[a[d+2]]+km[a[d+3]]+"-"+km[a[d+4]]+km[a[d+5]]+"-"+km[a[d+6]]+km[a[d+7]]+"-"+km[a[d+8]]+km[a[d+9]]+"-"+km[a[d+10]]+km[a[d+11]]+km[a[d+12]]+km[a[d+13]]+km[a[d+14]]+
km[a[d+15]]).toLowerCase()}function z(a){let d=0;var l=0;for(var E of a)d+=E.w*E.h,l=Math.max(l,E.w);a.sort((oa,Fa)=>Fa.h-oa.h);l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),l),h:Infinity}];let W=E=0;for(const oa of a)for(a=l.length-1;0<=a;a--){var ka=l[a];if(!(oa.w>ka.w||oa.h>ka.h)){oa.x=ka.x;oa.y=ka.y;W=Math.max(W,oa.y+oa.h);E=Math.max(E,oa.x+oa.w);oa.w===ka.w&&oa.h===ka.h?(ka=l.pop(),a<l.length&&(l[a]=ka)):oa.h===ka.h?(ka.x+=oa.w,ka.w-=oa.w):(oa.w!==ka.w&&l.push({x:ka.x+oa.w,y:ka.y,w:ka.w-
oa.w,h:oa.h}),ka.y+=oa.h,ka.h-=oa.h);break}}return{w:E,h:W,fill:d/(E*W)||0}}function n(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function b(a,d,l=0){const E=[a[0]+d[0]/2,a[1]+d[1]/2],W=Hd.rotWith(a,E,l),ka=Hd.rotWith(Hd.add(a,[d[0],0]),E,l),oa=Hd.rotWith(Hd.add(a,d),E,l);a=Hd.rotWith(Hd.add(a,[0,d[1]]),E,l);return[["top",[W,ka]],["right",[ka,oa]],["bottom",[oa,a]],["left",[a,W]]]}function r(a,d,l,E){const [W,ka]=a,[oa,Fa]=d,[Qa,Xa]=l,[db,kb]=E;return Fa/oa!==(kb-Xa)/(db-Qa)&&(d=oa*
(kb-Xa)-Fa*(db-Qa),0!==d&&(a=((ka-Xa)*(db-Qa)-(W-Qa)*(kb-Xa))/d,d=((ka-Xa)*oa-(W-Qa)*Fa)/d,0<=a&&0<=d&&1>=d))?n("intersection",[W+a*oa,ka+a*Fa]):n("no intersection")}function A(a,d,l,E,W=0){return g(l,E,W,a,d)}function C(a,d,l,E=0){const {minX:W,minY:ka,width:oa,height:Fa}=l;return A(a,d,[W,ka],[oa,Fa],E)}function x(a,d,l,E){var W=Hd.sub(a,l);l=Hd.sub(E,l);d=Hd.sub(d,a);E=l[0]*W[1]-l[1]*W[0];W=d[0]*W[1]-d[1]*W[0];l=l[1]*d[0]-l[0]*d[1];return 0===E||0===W?n("coincident"):0===l?n("parallel"):0!==l&&
(E/=l,W/=l,0<=E&&1>=E&&0<=W&&1>=W)?n("intersection",Hd.add(a,Hd.mul(d,E))):n("no intersection")}function J(a,d,l,E){var W=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),ka=2*((d[0]-a[0])*(a[0]-l[0])+(d[1]-a[1])*(a[1]-l[1]));l=ka*ka-4*W*(l[0]*l[0]+l[1]*l[1]+a[0]*a[0]+a[1]*a[1]-2*(l[0]*a[0]+l[1]*a[1])-E*E);if(0>l)return n("outside");if(0===l)return n("tangent");E=Math.sqrt(l);l=(-ka+E)/(2*W);W=(-ka-E)/(2*W);if((0>l||1<l)&&(0>W||1<W))return 0>l&&0>W||1<l&&1<W?n("outside"):n("inside");ka=[];0<=l&&1>=
l&&ka.push(Hd.lrp(a,d,l));0<=W&&1>=W&&ka.push(Hd.lrp(a,d,W));return n("intersection",...ka)}function p(a,d,l,E,W,ka=0){if(0===E||0===W||Hd.isEqual(a,d))return n("no intersection");E=0>E?E:-E;W=0>W?W:-W;a=Hd.sub(Hd.rotWith(a,l,-ka),l);d=Hd.sub(Hd.rotWith(d,l,-ka),l);var oa=Hd.sub(d,a),Fa=oa[0]*oa[0]/E/E+oa[1]*oa[1]/W/W;oa=2*a[0]*oa[0]/E/E+2*a[1]*oa[1]/W/W;const Qa=[];E=oa*oa-4*Fa*(a[0]*a[0]/E/E+a[1]*a[1]/W/W-1);0===E?Qa.push(-oa/2/Fa):0<E&&(E=Math.sqrt(E),Qa.push((-oa+E)/2/Fa),Qa.push((-oa-E)/2/Fa));
Fa=Qa.filter(Xa=>0<=Xa&&1>=Xa).map(Xa=>Hd.add(l,Hd.add(a,Hd.mul(Hd.sub(d,a),Xa)))).map(Xa=>Hd.rotWith(Xa,l,ka));return n("intersection",...Fa)}function f(a,d,l){const E=[];for(let W=1;W<l.length;W++){const ka=x(a,d,l[W-1],l[W]);ka&&E.push(...ka.points)}return 0===E.length?n("no intersection"):n("intersection",...l)}function g(a,d,l,E,W){return b(a,d,l).reduce((ka,[oa,[Fa,Qa]])=>{(Fa=r(E,W,Fa,Qa))&&ka.push(n(oa,...Fa.points));return ka},[]).filter(ka=>ka.didIntersect)}function c(a,d,l,E){return b(a,
d).reduce((W,[ka,[oa,Fa]])=>{(oa=x(l,E,oa,Fa))&&W.push(n(ka,...oa.points));return W},[]).filter(W=>W.didIntersect)}function u(a,d,l,E){return b(a,d).reduce((W,[ka,[oa,Fa]])=>{(oa=J(oa,Fa,l,E))&&W.push(of(oe({},oa),{message:ka}));return W},[]).filter(W=>W.didIntersect)}function v(a,d,l,E,W,ka=0){return b(a,d).reduce((oa,[Fa,[Qa,Xa]])=>{(Qa=p(Qa,Xa,l,E,W,ka))&&oa.push(of(oe({},Qa),{message:Fa}));return oa},[]).filter(oa=>oa.didIntersect)}function L(a,d,l){return b(a,d).reduce((E,[W,[ka,oa]])=>{ka=f(ka,
oa,l);ka.didIntersect&&E.push(n(W,...ka.points));return E},[]).filter(E=>E.didIntersect)}function y(a,d,l){return b(a,d).reduce((E,[W,[ka,oa]])=>{{const Fa=[];for(let Qa=1;Qa<l.length+1;Qa++){const Xa=x(ka,oa,l[Qa-1],l[Qa%l.length]);Xa&&Fa.push(...Xa.points)}ka=0===Fa.length?n("no intersection"):n("intersection",...l)}ka.didIntersect&&E.push(n(W,...ka.points));return E},[]).filter(E=>E.didIntersect)}function t(a,d,l,E=0,W,ka){return d===l?u(W,ka,a,d):v(W,ka,a,d,l,E)}function k(a,d,l){const {minX:E,
minY:W,width:ka,height:oa}=a;return c([E,W],[ka,oa],d,l)}function h(a){for(var d=arguments.length,l=Array(1<d?d-1:0),E=1;E<d;E++)l[E-1]=arguments[E];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(l.length?" "+l.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function K(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof va?va:"undefined"!==
typeof self?self:ww}function Y(){Ca||h("Proxy not available")}function F(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function ha(a){return"function"===typeof a}function S(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function X(a){return null!==a&&"object"===typeof a}function D(a){if(!X(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return"function"===typeof a&&a.toString()===
eb}function aa(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function N(a,d,l){Ap(a,d,{enumerable:!1,writable:!0,configurable:!0,value:l})}function Q(a,d,l){Ap(a,d,{enumerable:!1,writable:!1,configurable:!0,value:l})}function B(a,d){var l="isMobX"+a;d.prototype[l]=!0;return function(E){return X(E)&&!0===E[l]}}function O(a){return a instanceof Map}function R(a){return a instanceof Set}function ba(a){var d=Object.keys(a);if(!oc)return d;
var l=Object.getOwnPropertySymbols(a);return l.length?[].concat(d,l.filter(function(E){return Wp.propertyIsEnumerable.call(a,E)})):d}function Z(a){return null===a?null:"object"===typeof a?""+a:a}function G(a,d){return Wp.hasOwnProperty.call(a,d)}function ia(a,d){for(var l=0;l<d.length;l++){var E=d[l];E.enumerable=E.enumerable||!1;E.configurable=!0;"value"in E&&(E.writable=!0);Object.defineProperty(a,E.key,E)}}function M(a,d,l){d&&ia(a.prototype,d);l&&ia(a,l);Object.defineProperty(a,"prototype",{writable:!1});
return a}function ca(){ca=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var l=arguments[d],E;for(E in l)Object.prototype.hasOwnProperty.call(l,E)&&(a[E]=l[E])}return a};return ca.apply(this,arguments)}function fa(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;da(a,d)}function da(a,d){da=Object.setPrototypeOf||function(l,E){l.__proto__=E;return l};return da(a,d)}function pa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function ya(a,d){if(a){if("string"===typeof a)return xa(a,d);var l=Object.prototype.toString.call(a).slice(8,-1);"Object"===l&&a.constructor&&(l=a.constructor.name);if("Map"===l||"Set"===l)return Array.from(a);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return xa(a,d)}}function xa(a,d){if(null==d||d>a.length)d=a.length;for(var l=0,E=Array(d);l<d;l++)E[l]=a[l];return E}function Ga(a,d){var l="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(l)return(l=
l.call(a)).next.bind(l);if(Array.isArray(a)||(l=ya(a))||d&&a&&"number"===typeof a.length){l&&(a=l);var E=0;return function(){return E>=a.length?{done:!0}:{done:!1,value:a[E++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ta(a){return Object.assign(function(d,l){Da(d,l,a)},a)}function Da(a,d,l){G(a,Pd)||N(a,Pd,ca({},a[Pd]));l.annotationType_!==Yg&&(a[Pd][d]=l)}function Oa(a){G(a,
Pd)||N(a,Pd,ca({},a[Pd]));return a[Pd]}function Va(a,d,l){void 0===d&&(d=Hb);void 0===l&&(l=Hb);a=new pg(a);d!==Hb&&dd(hD,a,d,void 0);l!==Hb&&Nc(a,l);return a}function Ma(a,d,l){return id(a)?a:Array.isArray(a)?Se.array(a,{name:l}):D(a)?Se.object(a,void 0,{name:l}):O(a)?Se.map(a,{name:l}):R(a)?Se.set(a,{name:l}):"function"!==typeof a||Zc(a)||Cc(a)?a:aa(a)?cu(a):bu(l,a)}function bb(a){return a}function ab(a,d){return{annotationType_:a,options_:d,make_:Na,extend_:na}}function Na(a,d,l,E){var W;if(null!=
(W=this.options_)&&W.bound)return null===this.extend_(a,d,l,!1)?0:1;if(E===a.target_)return null===this.extend_(a,d,l,!1)?0:2;if(Zc(l.value))return 1;a=Aa(a,this,d,l,!1);Ap(E,d,a);return 2}function na(a,d,l,E){l=Aa(a,this,d,l);return a.defineProperty_(d,l,E)}function Aa(a,d,l,E,W){var ka,oa,Fa,Qa,Xa,db,kb;void 0===W&&(W=Nf.safeDescriptors);E=E.value;if(null!=(ka=d.options_)&&ka.bound){var Lb;E=E.bind(null!=(Lb=a.proxy_)?Lb:a.target_)}return{value:Kc(null!=(oa=null==(Fa=d.options_)?void 0:Fa.name)?
oa:l.toString(),E,null!=(Qa=null==(Xa=d.options_)?void 0:Xa.autoAction)?Qa:!1,null!=(db=d.options_)&&db.bound?null!=(kb=a.proxy_)?kb:a.target_:void 0),configurable:W?a.isPlainObject_:!0,enumerable:!1,writable:W?!1:!0}}function qa(a,d){return{annotationType_:a,options_:d,make_:za,extend_:Ia}}function za(a,d,l,E){var W;if(E===a.target_)return null===this.extend_(a,d,l,!1)?0:2;if(null!=(W=this.options_)&&W.bound&&(!G(a.target_,d)||!Cc(a.target_[d]))&&null===this.extend_(a,d,l,!1))return 0;if(Cc(l.value))return 1;
a=Ra(a,this,d,l,!1,!1);Ap(E,d,a);return 2}function Ia(a,d,l,E){var W;l=Ra(a,this,d,l,null==(W=this.options_)?void 0:W.bound);return a.defineProperty_(d,l,E)}function Ra(a,d,l,E,W,ka){void 0===ka&&(ka=Nf.safeDescriptors);d=E.value;Cc(d)||(d=cu(d));if(W){var oa;d=d.bind(null!=(oa=a.proxy_)?oa:a.target_);d.isMobXFlow=!0}return{value:d,configurable:ka?a.isPlainObject_:!0,enumerable:!1,writable:ka?!1:!0}}function zb(a,d){return{annotationType_:a,options_:d,make_:hb,extend_:Mb}}function hb(a,d,l){return null===
this.extend_(a,d,l,!1)?0:1}function Mb(a,d,l,E){return a.defineComputedProperty_(d,ca({},this.options_,{get:l.get,set:l.set}),E)}function Yb(a,d){return{annotationType_:a,options_:d,make_:kc,extend_:Pa}}function kc(a,d,l){return null===this.extend_(a,d,l,!1)?0:1}function Pa(a,d,l,E){var W,ka;return a.defineObservableProperty_(d,l.value,null!=(W=null==(ka=this.options_)?void 0:ka.enhancer)?W:Ma,E)}function lb(a){return{annotationType_:"true",options_:a,make_:mb,extend_:bc}}function mb(a,d,l,E){var W,
ka;if(l.get)return Ef.make_(a,d,l,E);if(l.set){l=Kc(d.toString(),l.set);if(E===a.target_)return null===a.defineProperty_(d,{configurable:Nf.safeDescriptors?a.isPlainObject_:!0,set:l})?0:2;Ap(E,d,{configurable:!0,set:l});return 2}if(E!==a.target_&&"function"===typeof l.value){var oa;if(aa(l.value)){var Fa;return(null!=(Fa=this.options_)&&Fa.autoBind?cu.bound:cu).make_(a,d,l,E)}return(null!=(oa=this.options_)&&oa.autoBind?bu.bound:bu).make_(a,d,l,E)}oa=!1===(null==(W=this.options_)?void 0:W.deep)?Se.ref:
Se;if("function"===typeof l.value&&null!=(ka=this.options_)&&ka.autoBind){var Qa;l.value=l.value.bind(null!=(Qa=a.proxy_)?Qa:a.target_)}return oa.make_(a,d,l,E)}function bc(a,d,l,E){var W,ka;if(l.get)return Ef.extend_(a,d,l,E);if(l.set)return a.defineProperty_(d,{configurable:Nf.safeDescriptors?a.isPlainObject_:!0,set:Kc(d.toString(),l.set)},E);if("function"===typeof l.value&&null!=(W=this.options_)&&W.autoBind){var oa;l.value=l.value.bind(null!=(oa=a.proxy_)?oa:a.target_)}return(!1===(null==(ka=
this.options_)?void 0:ka.deep)?Se.ref:Se).extend_(a,d,l,E)}function Ec(a){if(!0===a.deep)var d=Ma;else{if(!1===a.deep)a=bb;else{a=a.defaultDecorator;var l;a=a?null!=(d=null==(l=a.options_)?void 0:l.enhancer)?d:Ma:Ma}d=a}return d}function $c(a,d,l){if(S(d))Da(a,d,se);else return id(a)?a:D(a)?Se.object(a,d,l):Array.isArray(a)?Se.array(a,d):O(a)?Se.map(a,d):R(a)?Se.set(a,d):"object"===typeof a&&null!==a?a:Se.box(a,d)}function Kc(a,d,l,E){function W(){a:{var ka=E||this,oa=arguments,Fa=Nf.trackingDerivation,
Qa=!l||!Fa;fd();var Xa=Nf.allowStateChanges;Qa&&(nc(),Xa=zc(!0));var db=Dd(!0),kb=ZC++,Lb=dv;dv=kb;try{var Vb=d.apply(ka,oa);break a}catch(lc){var Qb=lc;throw lc;}finally{dv!==kb&&h(30),dv=Lb,void 0!==Qb&&(Nf.suppressReactionErrors=!0),Nf.allowStateChanges=Xa,Nf.allowStateReads=db,Sd(),Qa&&(Nf.trackingDerivation=Fa),Nf.suppressReactionErrors=!1}Vb=void 0}return Vb}void 0===l&&(l=!1);W.isMobxAction=!0;$C&&(Ly.value=a,Object.defineProperty(W,"name",Ly));return W}function Gb(a,d){a=zc(a);try{return d()}finally{Nf.allowStateChanges=
a}}function zc(a){var d=Nf.allowStateChanges;Nf.allowStateChanges=a;return d}function Uc(a){switch(a.dependenciesState_){case Zj.UP_TO_DATE_:return!1;case Zj.NOT_TRACKING_:case Zj.STALE_:return!0;case Zj.POSSIBLY_STALE_:for(var d=Dd(!0),l=nc(),E=a.observing_,W=E.length,ka=0;ka<W;ka++){var oa=E[ka];if(au(oa)){if(Nf.disableErrorBoundaries)oa.get();else try{oa.get()}catch(Fa){return Nf.trackingDerivation=l,Nf.allowStateReads=d,!0}if(a.dependenciesState_===Zj.STALE_)return Nf.trackingDerivation=l,Nf.allowStateReads=
d,!0}}od(a);Nf.trackingDerivation=l;Nf.allowStateReads=d;return!1}}function cd(a,d,l){var E=Dd(!0);od(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++Nf.runId;var W=Nf.trackingDerivation;Nf.trackingDerivation=a;Nf.inBatch++;if(!0===Nf.disableErrorBoundaries)var ka=d.call(l);else try{ka=d.call(l)}catch(db){ka=new ks(db)}Nf.inBatch--;Nf.trackingDerivation=W;var oa=a.observing_;d=a.observing_=a.newObserving_;l=Zj.UP_TO_DATE_;W=0;for(var Fa=a.unboundDepsCount_,Qa=0;Qa<
Fa;Qa++){var Xa=d[Qa];0===Xa.diffValue_&&(Xa.diffValue_=1,W!==Qa&&(d[W]=Xa),W++);Xa.dependenciesState_>l&&(l=Xa.dependenciesState_)}d.length=W;a.newObserving_=null;for(Fa=oa.length;Fa--;)Qa=oa[Fa],0===Qa.diffValue_&&jd(Qa,a),Qa.diffValue_=0;for(;W--;)oa=d[W],1===oa.diffValue_&&(oa.diffValue_=0,Fa=a,oa.observers_.add(Fa),oa.lowestObserverState_>Fa.dependenciesState_&&(oa.lowestObserverState_=Fa.dependenciesState_));l!==Zj.UP_TO_DATE_&&(a.dependenciesState_=l,a.onBecomeStale_());Nf.allowStateReads=
E;return ka}function Jd(a){var d=a.observing_;a.observing_=[];for(var l=d.length;l--;)jd(d[l],a);a.dependenciesState_=Zj.NOT_TRACKING_}function Fd(a){var d=nc();try{return a()}finally{Nf.trackingDerivation=d}}function nc(){var a=Nf.trackingDerivation;Nf.trackingDerivation=null;return a}function Dd(a){var d=Nf.allowStateReads;Nf.allowStateReads=a;return d}function od(a){if(a.dependenciesState_!==Zj.UP_TO_DATE_){a.dependenciesState_=Zj.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
Zj.UP_TO_DATE_}}function ge(){(Nf.pendingReactions.length||Nf.inBatch||Nf.isRunningReactions)&&h(36);My=!0;if(fv){var a=K();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);Nf=new ev}}function jd(a,d){a.observers_["delete"](d);0===a.observers_.size&&Wd(a)}function Wd(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,Nf.pendingUnobservations.push(a))}function fd(){Nf.inBatch++}function Sd(){if(0===--Nf.inBatch){0<Nf.inBatch||Nf.isRunningReactions||gv(nb);for(var a=Nf.pendingUnobservations,
d=0;d<a.length;d++){var l=a[d];l.isPendingUnobservation_=!1;0===l.observers_.size&&(l.isBeingObserved_&&(l.isBeingObserved_=!1,l.onBUO()),l instanceof $t&&l.suspend_())}Nf.pendingUnobservations=[]}}function Sb(a){var d=Nf.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&Nf.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<Nf.inBatch&&Wd(a);return!1}
function hc(a){a.lowestObserverState_!==Zj.STALE_&&(a.lowestObserverState_=Zj.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===Zj.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=Zj.STALE_}))}function $b(a){a.lowestObserverState_!==Zj.STALE_&&(a.lowestObserverState_=Zj.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Zj.POSSIBLY_STALE_?d.dependenciesState_=Zj.STALE_:d.dependenciesState_===Zj.UP_TO_DATE_&&(a.lowestObserverState_=Zj.UP_TO_DATE_)}))}function jb(a){a.lowestObserverState_===
Zj.UP_TO_DATE_&&(a.lowestObserverState_=Zj.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Zj.UP_TO_DATE_&&(d.dependenciesState_=Zj.POSSIBLY_STALE_,d.onBecomeStale_())}))}function nb(){Nf.isRunningReactions=!0;for(var a=Nf.pendingReactions,d=0;0<a.length;){++d===dD&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var l=a.splice(0),E=0,W=l.length;E<W;E++)l[E].runReaction_()}Nf.isRunningReactions=!1}function ec(a){var d=gv;gv=function(l){return a(function(){return d(l)})}}
function vc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Rc(a){return function(d,l){if(ha(d))return Kc(d.name||"\x3cunnamed action\x3e",d,a);if(ha(l))return Kc(d,l,a);if(S(l))return Da(d,l,a?Py:Oy);if(S(d))return Ta(ab(a?"autoAction":Ny,{name:d,autoAction:a}))}}function Zc(a){return ha(a)&&!0===a.isMobxAction}function Ld(a,d){function l(){a(Qa)}var E,W;void 0===d&&(d=la);var ka=null!=(E=null==(W=d)?void 0:W.name)?E:"Autorun";if(d.scheduler||d.delay){var oa=
ee(d),Fa=!1;var Qa=new et(ka,function(){Fa||(Fa=!0,oa(function(){Fa=!1;Qa.isDisposed_||Qa.track(l)}))},d.onError,d.requiresObservable)}else Qa=new et(ka,function(){this.track(l)},d.onError,d.requiresObservable);Qa.schedule_();return Qa.getDisposer_()}function ee(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:gD}function ve(a,d,l){function E(){db=!1;if(!Qb.isDisposed_){var lc=!1;Qb.track(function(){var xc=Gb(!1,function(){return a(Qb)});lc=Xa||!Vb(kb,xc);Lb=kb;
kb=xc});Xa&&l.fireImmediately?oa(kb,Lb,Qb):!Xa&&lc&&oa(kb,Lb,Qb);Xa=!1}}var W;void 0===l&&(l=la);var ka=null!=(W=l.name)?W:"Reaction",oa=wg(ka,l.onError?vd(l.onError,d):d),Fa=!l.scheduler&&!l.delay,Qa=ee(l),Xa=!0,db=!1,kb,Lb,Vb=l.compareStructural?lf.structural:l.equals||lf["default"],Qb=new et(ka,function(){Xa||Fa?E():db||(db=!0,Qa(E))},l.onError,l.requiresObservable);Qb.schedule_();return Qb.getDisposer_()}function vd(a,d){return function(){try{return d.apply(this,arguments)}catch(l){a.call(this,
l)}}}function Nc(a,d,l){return dd(iD,a,d,l)}function dd(a,d,l,E){var W="function"===typeof E?Hg(d,l):Hg(d),ka=ha(E)?E:l,oa=a+"L";W[oa]?W[oa].add(ka):W[oa]=new Set([ka]);return function(){var Fa=W[oa];Fa&&(Fa["delete"](ka),0===Fa.size&&delete W[oa])}}function Gc(a){!0===a.isolateGlobalState&&ge();var d=a.useProxies,l=a.enforceActions;void 0!==d&&(Nf.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(Nf.verifyProxies=!0);void 0!==l&&(d="always"===l?"always":"observed"===
l,Nf.enforceActions=d,Nf.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(E){E in a&&(Nf[E]=!!a[E])});Nf.allowStateReads=!Nf.observableRequiresReaction;a.reactionScheduler&&ec(a.reactionScheduler)}function qc(a,d,l,E){var W=ad(d),ka=Ad(a,E)[de];fd();try{Ic(W).forEach(function(oa){ka.extend_(oa,W[oa],l?oa in l?l[oa]:!0:!0)})}finally{Sd()}return a}function Qf(a){var d=
{name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(Qf));return d}function Xb(){this.message="FLOW_CANCELLED"}function Cc(a){return!0===(null==a?void 0:a.isMobXFlow)}function id(a,d){return a?void 0!==d?te(a)?a[de].values_.has(d):!1:te(a)||!!a[de]||Oh(a)||hv(a)||au(a):!1}function fe(a){if(te(a))return a[de].ownKeys_();h(38)}function Df(a,d,l){a.set(d,l);return l}function Je(a,d){if(null==a||"object"!==typeof a||a instanceof Date||!id(a))return a;
if(bD(a)||au(a))return Je(a.get(),d);if(d.has(a))return d.get(a);if(ib(a)){var l=Df(d,a,Array(a.length));a.forEach(function(oa,Fa){l[Fa]=Je(oa,d)});return l}if(ls(a)){var E=Df(d,a,new Set);a.forEach(function(oa){E.add(Je(oa,d))});return E}if(fr(a)){var W=Df(d,a,new Map);a.forEach(function(oa,Fa){W.set(Fa,Je(oa,d))});return W}var ka=Df(d,a,{});fe(a).forEach(function(oa){Wp.propertyIsEnumerable.call(a,oa)&&(ka[oa]=Je(a[oa],d))});return ka}function Bb(a,d){return Je(a,new Map)}function Ab(){h("trace() is not available in production builds");
for(var a=!1,d=arguments.length,l=Array(d),E=0;E<d;E++)l[E]=arguments[E];"boolean"===typeof l[l.length-1]&&(a=l.pop());a:{switch(l.length){case 0:d=Nf.trackingDerivation;break a;case 1:d=Hg(l[0]);break a;case 2:d=Hg(l[0],l[1]);break a}d=void 0}if(!d)return h("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===dt.NONE&&console.log("[mobx.trace] '"+d.name_+"' tracing enabled");d.isTracing_=a?
dt.BREAK:dt.LOG}function zd(a,d){void 0===d&&(d=void 0);fd();try{return a.apply(d)}finally{Sd()}}function ce(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Wc(a,d){var l=a.interceptors_||(a.interceptors_=[]);l.push(d);return F(function(){var E=l.indexOf(d);-1!==E&&l.splice(E,1)})}function rc(a,d){var l=nc();try{var E=[].concat(a.interceptors_||[]);a=0;for(var W=E.length;a<W&&((d=E[a](d))&&!d.type&&h(14),d);a++);return d}finally{Nf.trackingDerivation=l}}function sf(a){return void 0!==
a.changeListeners_&&0<a.changeListeners_.length}function Rf(a,d){var l=a.changeListeners_||(a.changeListeners_=[]);l.push(d);return F(function(){var E=l.indexOf(d);-1!==E&&l.splice(E,1)})}function Ie(a,d){var l=nc();if(a=a.changeListeners_){a=a.slice();for(var E=0,W=a.length;E<W;E++)a[E](d);Nf.trackingDerivation=l}}function Og(a,d,l){var E=Ad(a,l)[de];fd();try{var W;null!=(W=d)?W:d=Oa(a);Ic(d).forEach(function(ka){return E.make_(ka,d[ka])})}finally{Sd()}return a}function ob(a,d,l,E){void 0===l&&(l=
"ObservableArray");void 0===E&&(E=!1);Y();d=new Aw(l,d,E,!1);Q(d.values_,de,d);l=new Proxy(d.values_,mD);d.proxy_=l;a&&a.length&&(E=zc(!0),d.spliceWithArray_(0,0,a),Nf.allowStateChanges=E);return l}function xb(a,d){"function"===typeof Array.prototype[a]&&(iv[a]=d(a))}function $a(a){return function(){var d=this[de];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function Eb(a){return function(d,l){var E=this,W=this[de];W.atom_.reportObserved();return W.dehanceValues_(W.values_)[a](function(ka,
oa){return d.call(l,ka,oa,E)})}}function Db(a){return function(){var d=this,l=this[de];l.atom_.reportObserved();l=l.dehanceValues_(l.values_);var E=arguments[0];arguments[0]=function(W,ka,oa){return E(W,ka,oa,d)};return l[a].apply(l,arguments)}}function ib(a){return X(a)&&nD(a[de])}function bd(a){if(O(a)||fr(a))return a;if(Array.isArray(a))return new Map(a);if(D(a)){var d=new Map,l;for(l in a)d.set(l,a[l]);return d}return h(21,a)}function Ad(a,d){var l;if(G(a,de))return a;var E=null!=(l=null==d?void 0:
d.name)?l:"ObservableObject";l=Uy;var W=new Map;E=String(E);var ka;var oa=d?null!=(ka=d.defaultDecorator)?ka:lb(d):void 0;d=new l(a,W,E,oa);N(a,de,d);return a}function Zd(a){return Ty[a]||(Ty[a]={get:function(){return this[de].getObservablePropValue_(a)},set:function(d){return this[de].setObservablePropValue_(a,d)}})}function te(a){return X(a)?uD(a[de]):!1}function af(a){return{enumerable:!1,configurable:!0,get:function(){return this[de].get_(a)},set:function(d){this[de].set_(a,d)}}}function Ae(a){if(a>
Bw){for(var d=Bw;d<a+100;d++)Ap(Cw.prototype,""+d,af(d));Bw=a}}function tf(a,d,l){return new Cw(a,d,l)}function Hg(a,d){if("object"===typeof a&&null!==a){if(ib(a))return void 0!==d&&h(23),a[de].atom_;if(ls(a))return a[de];if(fr(a)){if(void 0===d)return a.keysAtom_;var l=a.data_.get(d)||a.hasMap_.get(d);l||h(25,d,vb(a));return l}if(te(a)){if(!d)return h(26);(l=a[de].values_.get(d))||h(27,d,vb(a));return l}if(Oh(a)||au(a)||hv(a))return a}else if(ha(a)&&hv(a[de]))return a[de];h(28)}function qg(a,d){a||
h(29);if(void 0!==d)return qg(Hg(a,d));if(Oh(a)||au(a)||hv(a)||fr(a)||ls(a))return a;if(a[de])return a[de];h(24,a)}function vb(a,d){if(void 0!==d)a=Hg(a,d);else{if(Zc(a))return a.name;a=te(a)||fr(a)||ls(a)?qg(a):Hg(a)}return a.name_}function ta(a,d,l){void 0===l&&(l=-1);return ra(a,d,l)}function ra(a,d,l,E,W){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var ka=typeof a;if("function"!==ka&&"object"!==ka&&"object"!=typeof d)return!1;ka=Wy.call(a);if(ka!==Wy.call(d))return!1;
switch(ka){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=l&&l++}a=Ha(a);d=Ha(d);ka="[object Array]"===ka;if(!ka){if("object"!=typeof a||"object"!=typeof d)return!1;var oa=a.constructor,Fa=d.constructor;if(oa!==
Fa&&!(ha(oa)&&oa instanceof oa&&ha(Fa)&&Fa instanceof Fa)&&"constructor"in a&&"constructor"in d)return!1}if(0===l)return!1;0>l&&(l=-1);E=E||[];W=W||[];for(oa=E.length;oa--;)if(E[oa]===a)return W[oa]===d;E.push(a);W.push(d);if(ka){oa=a.length;if(oa!==d.length)return!1;for(;oa--;)if(!ra(a[oa],d[oa],l-1,E,W))return!1}else{ka=Object.keys(a);oa=ka.length;if(Object.keys(d).length!==oa)return!1;for(;oa--;)if(Fa=ka[oa],!G(d,Fa)||!ra(a[Fa],d[Fa],l-1,E,W))return!1}E.pop();W.pop();return!0}function Ha(a){return ib(a)?
a.slice():O(a)||fr(a)||R(a)||ls(a)?Array.from(a.entries()):a}function Za(a){a[Symbol.iterator]=Ib;return a}function Ib(){return this}function tc(a,d){const l=new Set(d),E=Object.values(a),W=new Set(E.filter(ka=>l.has(ka.toId)||l.has(ka.fromId)));a=W.size;for(d=-1;0!==d;)W.forEach(ka=>{ka=ka.fromId;for(const oa of E)oa.fromId===ka&&W.add(oa),oa.toId===ka&&W.add(oa)}),d=W.size-a,a=W.size;return Array.from(W.values())}function Oc(a,d,l,E,W,ka,oa,Fa){if(W=d.getBindingPoint(W,ka,oa,Fa))return{id:E,type:"line",
fromId:a.id,toId:d.id,handleId:l,point:me.toFixed(W.point),distance:W.distance}}function gd(a,d){const l=a.getCenter(),E=d.getCenter();var W=el();W=of(oe({},du.defaultProps),{id:W,type:du.id,parentId:a.props.parentId,point:l});a=Oc(W,a,"start",el(),l,l,me.uni(me.sub(E,l)),!1);d=Oc(W,d,"end",el(),E,E,me.uni(me.sub(l,E)),!1);return a&&d?(W.handles.start.point=[0,0],W.handles.end.point=me.sub(E,l),W.handles.start.bindingId=a.id,W.handles.end.bindingId=d.id,[W,[a,d]]):null}function De(){return new CD}
function bf(){return new WeakMap}function Me(a){if(!a)return Kw(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:Kw(a);if(~AD.call(d).indexOf("[native code]"))try{return new d}catch(l){}return Kw(a)}function jg(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function Wf(a){return a.flags}function Lg(a){a=BD.call(a);return a.substring(8,a.length-1)}function Xf(a){return a[Symbol.toStringTag]||Lg(a)}function hh(a){return Iz(a).concat(Lw(a))}
function Ci(a,d,l){for(var E=JD(a),W=0,ka=E.length,oa,Fa;W<ka;++W)if(oa=E[W],"callee"!==oa&&"caller"!==oa)if(Fa=HD(a,oa)){Fa.get||Fa.set||(Fa.value=l.copier(Fa.value,l));try{GD(d,oa,Fa)}catch(Qa){d[oa]=Fa.value}}else d[oa]=l.copier(a[oa],l);return d}function zh(a,d){var l=new d.Constructor;d.cache.set(a,l);a.forEach(function(E,W){l.set(W,d.copier(E,d))});return l}function kg(a,d){var l=Me(d.prototype);d.cache.set(a,l);for(var E in a)Kz.call(a,E)&&(l[E]=d.copier(a[E],d));return l}function ri(a,d){var l=
Me(d.prototype);d.cache.set(a,l);for(var E in a)Kz.call(a,E)&&(l[E]=d.copier(a[E],d));E=Lw(a);for(var W=0,ka=E.length,oa;W<ka;++W)oa=E[W],ID.call(a,oa)&&(l[oa]=d.copier(a[oa],d));return l}function pk(a,d){return new d.Constructor(a.valueOf())}function cj(a,d){return a}function fk(a,d){var l=new d.Constructor;d.cache.set(a,l);a.forEach(function(E){l.add(d.copier(E,d))});return l}function Di(a){function d(ka,oa){oa.prototype=oa.Constructor=void 0;if(!ka||"object"!==typeof ka)return ka;if(oa.cache.has(ka))return oa.cache.get(ka);
oa.prototype=ka.__proto__||LD(ka);oa.Constructor=oa.prototype&&oa.prototype.constructor;if(!oa.Constructor||oa.Constructor===Object)return W(ka,oa);if(KD(ka))return E(ka,oa);var Fa=l[FD(ka)];return Fa?Fa(ka,oa):"function"===typeof ka.then?ka:W(ka,oa)}a=Mw({},Mz,a);var l={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,Boolean:pk,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,
Int32Array:a.arrayBuffer,Map:a.map,Number:pk,Object:a.object,Promise:cj,RegExp:a.regExp,Set:a.set,String:pk,WeakMap:cj,WeakSet:cj,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},E=l.Array,W=l.Object;return function(ka){return d(ka,{Constructor:void 0,cache:DD(),copier:d,prototype:void 0})}}function Uk(a,d){return(0,PD.default)(a,d,{arrayMerge:(l,E,W)=>E})}function Ql(a,d,l,E=!1){const [W,ka]=d,[oa,Fa]=l;a=oa+(a-
W)/(ka-W)*(Fa-oa);return E?oa<Fa?Math.max(Math.min(a,Fa),oa):Math.max(Math.min(a,oa),Fa):a}function jj(a,d){return new Promise((l,E)=>{if(d){const W=document.createElement("video");W.addEventListener("loadedmetadata",function(){l([this.videoWidth,this.videoHeight])},!1);W.src=a}else{const W=new Image;W.onload=()=>l([W.width,W.height]);W.src=a;W.onerror=ka=>E(ka)}})}function Vi(a){return Object.values(Qr).includes(a)}function ah(a,d){return Vi(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:
a}function ol(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);
return a}function Hj(a,d,l=0){var E,W,ka;if(!a)return[16,32];let oa;oa="string"===typeof d?d:`${null!=(E=d.fontStyle)?E:"normal"} ${null!=(W=d.fontVariant)?W:"normal"} ${null!=(ka=d.fontWeight)?ka:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Nw.has(`${a}-${oa}-${l}`)){if(!ir)return[10,10];ir.parentNode||document.body.appendChild(ir);ir.innerHTML=`${a}&#8203;`;ir.style.font=oa;ir.style.padding=l+"px";d=ir.getBoundingClientRect();Nw.set(`${a}-${oa}-${l}`,[Math.ceil(d.width||
1),Math.ceil(d.height||1)])}return Nw.get(`${a}-${oa}-${l}`)}function Gk(a){try{if("string"!==typeof a||!Eg.test(a))throw TypeError("Invalid UUID");let d;const l=new Uint8Array(16);l[0]=(d=parseInt(a.slice(0,8),16))>>>24;l[1]=d>>>16&255;l[2]=d>>>8&255;l[3]=d&255;l[4]=(d=parseInt(a.slice(9,13),16))>>>8;l[5]=d&255;l[6]=(d=parseInt(a.slice(14,18),16))>>>8;l[7]=d&255;l[8]=(d=parseInt(a.slice(19,23),16))>>>8;l[9]=d&255;l[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;l[11]=d/4294967296&255;l[12]=
d>>>24&255;l[13]=d>>>16&255;l[14]=d>>>8&255;l[15]=d&255;return!0}catch(d){return!1}}function Vk(a,d=0,l){let E;return function(...W){null==l?void 0:l(...W);clearTimeout(E);E=setTimeout(()=>a.apply(W),d)}}function Ih(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Hf(){var a,d,l;return(null==(l=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:l.call(d,"ui/developer-mode?"))||!1}function fg(a){return!!a}function Cl(a=0){return new Promise(d=>
setTimeout(d,a))}function Qm(a="noid"){Ow[a]||(Ow[a]=Pz.createContext({}));return Ow[a]}function nh(a="noid"){return Pz.useContext(Qm(a))}function Uj(a){const {callbacks:d}=nh(),l=Oz.useRef(-1);return Oz.useMemo(()=>{const E=W=>{var ka,oa;const {order:Fa=0}=W;if(!Fa){var Qa=W.target;Qa.removeEventListener("pointerup",E);Qa.releasePointerCapture(W.pointerId);null==(ka=d.onPointerUp)?void 0:ka.call(d,{type:"selection",handle:a,order:Fa},W);ka=Date.now();Qa=ka-l.current;300<Qa?l.current=ka:300>=Qa&&
(null==(oa=d.onDoubleClick)?void 0:oa.call(d,{type:"selection",handle:a,order:Fa},W),l.current=-1);W.order=Fa+1}};return{onPointerDown:W=>{var ka;const {order:oa=0}=W;if(!oa){var Fa=Ik(W.currentTarget);Fa.setPointerCapture(W.pointerId);Fa.addEventListener("pointerup",E);null==(ka=d.onPointerDown)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},W);W.order=oa+1}},onPointerMove:W=>{var ka;const {order:oa=0}=W;oa||(null==(ka=d.onPointerMove)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},
W),W.order=oa+1)},onPointerEnter:W=>{var ka;const {order:oa=0}=W;oa||(null==(ka=d.onPointerEnter)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},W),W.order=oa+1)},onPointerLeave:W=>{var ka;const {order:oa=0}=W;oa||(null==(ka=d.onPointerLeave)?void 0:ka.call(d,{type:"selection",handle:a,order:oa},W),W.order=oa+1)},onKeyDown:W=>{var ka;null==(ka=d.onKeyDown)?void 0:ka.call(d,{type:"selection",handle:a,order:-1},W)},onKeyUp:W=>{var ka;null==(ka=d.onKeyUp)?void 0:ka.call(d,{type:"selection",handle:a,
order:-1},W)}}},[d])}function Ik(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return Ik(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function Jk(a,d,l){const E=gu.useRef(!1),W=gu.useCallback(()=>{var ka;if(E.current){const oa=null==(ka=a.current)?void 0:ka.getBoundingClientRect();oa&&(ka={minX:oa.left,maxX:oa.left+oa.width,minY:oa.top,maxY:oa.top+oa.height,width:oa.width,height:oa.height},d.updateBounds(ka),null==l?void 0:
l(ka))}else E.current=!0},[a,l]);gu.useEffect(()=>{const ka=a.current?SD(a.current):document,oa=Vk(W,100);ka.addEventListener("scroll",oa);window.addEventListener("resize",oa);return()=>{ka.removeEventListener("scroll",oa);window.removeEventListener("resize",oa)}},[]);gu.useLayoutEffect(()=>{const ka=new ResizeObserver(oa=>{oa[0].contentRect&&W()});a.current&&ka.observe(a.current);return()=>{ka.disconnect()}},[a]);gu.useEffect(()=>{W();setTimeout(()=>{var ka,oa;null==(oa=null==(ka=a.current)?void 0:
ka.querySelector(".tl-canvas"))?void 0:oa.focus()})},[a])}function Rl(a,d){return Object.keys(d).reduce((l,E)=>{const W=d[E];return W?l+`${`--${a}-${E}`}: ${W};
`:l},"")}function si(a,d,l=".logseq-tldraw"){Pw.useLayoutEffect(()=>{const E=document.createElement("style"),W=Rl(a,d);E.setAttribute("id",`${a}-theme`);E.setAttribute("data-selector",l);E.innerHTML=`
        ${l} {
          ${W}
        }
      `;document.head.appendChild(E);return()=>{E&&document.head.contains(E)&&document.head.removeChild(E)}},[a,d,l])}function ql(a,d){Pw.useLayoutEffect(()=>{if(Qw.get(a))return()=>{};const l=document.createElement("style");l.innerHTML=d;l.setAttribute("id",a);document.head.appendChild(l);Qw.set(a,l);return()=>{l&&document.head.contains(l)&&(document.head.removeChild(l),Qw.delete(a))}},[a,d])}function qk(a,d){const l=Pw.useMemo(()=>oe(oe({},TD),a),[a]);si("tl",l,d);ql("tl-canvas",UD)}function rk(a=
"noid"){Rw[a]||(Rw[a]=Rz.createContext({}));return Rw[a]}function ef(a="noid"){return Rz.useContext(rk(a))}function rg(){const a=ef(),{callbacks:d}=nh(),l=Qz.useRef(-1);return Qz.useMemo(()=>({onPointerDown:E=>{var W,ka,oa;const {order:Fa=0}=E;Fa||(null==(W=E.currentTarget)?void 0:W.setPointerCapture(E.pointerId));E.isPrimary&&(null==(ka=d.onPointerDown)?void 0:ka.call(d,{type:"canvas",order:Fa},E),W=Date.now(),ka=W-l.current,300<ka?l.current=W:300>=ka&&(null==(oa=d.onDoubleClick)?void 0:oa.call(d,
{type:"canvas",order:Fa},E),l.current=-1))},onPointerMove:E=>{var W;const {order:ka=0}=E;null==(W=d.onPointerMove)?void 0:W.call(d,{type:"canvas",order:ka},E)},onPointerUp:E=>{var W,ka;const {order:oa=0}=E;oa||(null==(W=E.currentTarget)?void 0:W.releasePointerCapture(E.pointerId));null==(ka=d.onPointerUp)?void 0:ka.call(d,{type:"canvas",order:oa},E)},onPointerEnter:E=>{var W;const {order:ka=0}=E;null==(W=d.onPointerEnter)?void 0:W.call(d,{type:"canvas",order:ka},E)},onPointerLeave:E=>{var W;const {order:ka=
0}=E;null==(W=d.onPointerLeave)?void 0:W.call(d,{type:"canvas",order:ka},E)},onDrop:E=>yi(this,null,function*(){E.preventDefault();"clientX"in E&&a.drop(E.dataTransfer,[E.clientX,E.clientY])}),onDragOver:E=>{E.preventDefault()},onTouchEnd:E=>{let W=a.selectedTool.id;"pencil"!==W&&"highlighter"!==W||E.preventDefault()}}),[d])}function kj(a,d,l){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*l):a*d*l/(d+l*a)}function Rh(a,d,l,E=.15){return 0===E?Math.max(d,Math.min(a,l)):a<d?-kj(d-a,l-d,E)+d:a>l?
+kj(a-l,l-d,E)+l:a}function Wi(a,[d,l],[E,W]){const [[ka,oa],[Fa,Qa]]=a;return[Rh(d,ka,oa,E),Rh(l,Fa,Qa,W)]}function di(a,d,l){d in a?Object.defineProperty(a,d,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[d]=l;return a}function gk(a,d){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(a);d&&(E=E.filter(function(W){return Object.getOwnPropertyDescriptor(a,W).enumerable}));l.push.apply(l,E)}return l}function Ig(a){for(var d=1;d<arguments.length;d++){var l=
null!=arguments[d]?arguments[d]:{};d%2?gk(Object(l),!0).forEach(function(E){di(a,E,l[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):gk(Object(l)).forEach(function(E){Object.defineProperty(a,E,Object.getOwnPropertyDescriptor(l,E))})}return a}function Sh(a){return a?a[0].toUpperCase()+a.slice(1):""}function xj(a=!1,d){return a&&!VD.includes(d)}function Kk(a,d="",l=!1){const E=Sz[a];d=E?E[d]||d:d;return"on"+Sh(a)+Sh(d)+(xj(l,d)?"Capture":"")}function wf(a){a=
a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var l=WD.includes(a)?"capturecapture":"capture";(l=!!~a.indexOf(l))&&(a=a.replace("capture",""));return{device:a,capture:l,passive:d}}function Qi(a,d=""){const l=Sz[a];return a+(l?l[d]||d:d)}function Jh(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function Wk(a){return Array.from(a.touches).filter(d=>{var l,E;return d.target===a.currentTarget||(null===(l=a.currentTarget)||void 0===
l?void 0:null===(E=l.contains)||void 0===E?void 0:E.call(l,d.target))})}function sk(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function Dl(a,d){const l=d.clientX-a.clientX,E=d.clientY-a.clientY;return{angle:-(180*Math.atan2(l,E))/Math.PI,distance:Math.hypot(l,E),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function Cm(a){return Wk(a).map(d=>d.identifier)}function Ri(a,d){const [l,E]=Array.from(a.touches).filter(W=>d.includes(W.identifier));
return Dl(l,E)}function El(a){const d=sk(a);return"touches"in a?d.identifier:d.pointerId}function Ij(a){a=sk(a);return[a.clientX,a.clientY]}function Ei(a){let {deltaX:d,deltaY:l,deltaMode:E}=a;1===E?(d*=40,l*=40):2===E&&(d*=800,l*=800);return[d,l]}function oh(a,...d){return"function"===typeof a?a(...d):a}function Si(){}function lj(...a){return 0===a.length?Si:1===a.length?a[0]:function(){let d;for(const l of a)d=l.apply(this,arguments)||d;return d}}function Xk([a,d],l){a=Math.abs(a);d=Math.abs(d);
if(a>d&&a>l)return"x";if(d>a&&d>l)return"y"}function tm(a){const [d,l]=a.overflow,[E,W]=a._delta,[ka,oa]=a._direction;if(0>d&&0<E&&0>ka||0<d&&0>E&&0<ka)a._movement[0]=a._movementBound[0];if(0>l&&0<W&&0>oa||0<l&&0>W&&0<oa)a._movement[1]=a._movementBound[1]}function Gi(a){Sw.set(a.key,a.engine);Tw.set(a.key,a.resolver)}function Xi(a={},d){const l={};for(const [E,W]of Object.entries(d))switch(typeof W){case "function":l[E]=W.call(l,a[E],E,a);break;case "object":l[E]=Xi(a[E],W);break;case "boolean":W&&
(l[E]=a[E])}return l}function Yi(a,d,l={}){const {target:E,eventOptions:W,window:ka,enabled:oa,transform:Fa}=a;var Qa=sE;if(null==a)a={};else{if(null==a)var Xa={};else{Xa={};var db=Object.keys(a),kb;for(kb=0;kb<db.length;kb++){var Lb=db[kb];0<=Qa.indexOf(Lb)||(Xa[Lb]=a[Lb])}}if(Object.getOwnPropertySymbols)for(kb=Object.getOwnPropertySymbols(a),Lb=0;Lb<kb.length;Lb++)db=kb[Lb],0<=Qa.indexOf(db)||Object.prototype.propertyIsEnumerable.call(a,db)&&(Xa[db]=a[db]);a=Xa}l.shared=Xi({target:E,eventOptions:W,
window:ka,enabled:oa,transform:Fa},rE);if(d){var Vb=Tw.get(d);l[d]=Xi(Ig({shared:l.shared},a),Vb)}else for(Vb in a)(d=Tw.get(Vb))&&(l[Vb]=Xi(Ig({shared:l.shared},a[Vb]),d));return l}function dj(a,d){a.gestures.add(d);a.gestureEventStores[d]=new $z(a,d);a.gestureTimeoutStores[d]=new tE}function ti(a,d,l,E,W,ka){if(a.has(l)&&Sw.has(E)){var oa=l+"Start",Fa=l+"End";W[E]=Qa=>{let Xa=void 0;if(Qa.first&&oa in d)d[oa](Qa);l in d&&(Xa=d[l](Qa));if(Qa.last&&Fa in d)d[Fa](Qa);return Xa};ka[E]=ka[E]||{}}}function wk(a,
d={},l,E){const W=Uw.default.useMemo(()=>new uE(a),[]);W.applyHandlers(a,E);W.applyConfig(d,l);Uw.default.useEffect(W.effect.bind(W));Uw.default.useEffect(()=>W.clean.bind(W),[]);if(void 0===d.target)return W.bind.bind(W)}function ei(a){a.forEach(Gi);return function(d,l){l=l||{};const E={},W={},ka=new Set;for(let Lb in d)vE.test(Lb)?(ka.add(RegExp.lastMatch),W[Lb]=d[Lb]):E[Lb]=d[Lb];const [oa,Fa,Qa]=[W,E,ka];d={};ti(Qa,oa,"onDrag","drag",d,l);ti(Qa,oa,"onWheel","wheel",d,l);ti(Qa,oa,"onScroll","scroll",
d,l);ti(Qa,oa,"onPinch","pinch",d,l);ti(Qa,oa,"onMove","move",d,l);ti(Qa,oa,"onHover","hover",d,l);const {handlers:Xa,nativeHandlers:db,config:kb}={handlers:d,config:l,nativeHandlers:Fa};return wk(Xa,kb,void 0,db)}}function Zi(a,d){return ei([lE,oE,pE,qE,nE,mE])(a,d||{})}function rj(a){const {viewport:d,inputs:l,callbacks:E}=nh(),W=nv.useRef(void 0),ka=nv.useRef([0,0]),oa=nv.useRef(0),Fa=nv.useMemo(()=>({onWheel:Qa=>{var Xa;({event:Qa}=Qa);Qa.preventDefault();const {deltaY:db,deltaX:kb}=Qa;var Lb=
0;if(Qa.ctrlKey||Qa.metaKey){Lb=Math.sign(Qa.deltaY);let xc=db;10<Math.abs(Qa.deltaY)&&(xc=10*Lb);Lb=xc}const [Vb,Qb,lc]=[kb,db,Lb];"pinching"===l.state||oa.current>=Qa.timeStamp||(oa.current=Qa.timeStamp,(Qa.altKey||Qa.ctrlKey||Qa.metaKey)&&0===Qa.buttons?(Lb=d.bounds,Qa=null!=(Xa=l.currentScreenPoint)?Xa:[Lb.width/2,Lb.height/2],Xa=d.camera.zoom,d.onZoom(Qa,Xa-lc/100*Xa)):(Xa=me.mul(Qa.shiftKey&&!Ih()?[Qb,0]:[Vb,Qb],.8),me.isEqual(Xa,[0,0])||d.panCamera(Xa)))},onPinchStart:({event:Qa,delta:Xa,offset:db,
origin:kb})=>{var Lb;const Vb=a.current;Qa instanceof WheelEvent||!(Qa.target===Vb||null!=Vb&&Vb.contains(Qa.target))||(null==(Lb=E.onPinchStart)?void 0:Lb.call(E,{type:"canvas",order:0,delta:[...Xa,db[0]],offset:db,point:me.sub(kb,l.containerOffset)},Qa),W.current=kb,ka.current=[0,0])},onPinchEnd:({event:Qa,offset:Xa,origin:db})=>{var kb;const Lb=a.current;Qa instanceof WheelEvent||!(Qa.target===Lb||null!=Lb&&Lb.contains(Qa.target))||"pinching"!==l.state||(null==(kb=E.onPinchEnd)?void 0:kb.call(E,
{type:"canvas",order:0,delta:[0,0,Xa[0]],offset:Xa,point:me.sub(db,l.containerOffset)},Qa),ka.current=[0,0])},onPinch:({event:Qa,offset:Xa,origin:db})=>{var kb,Lb=a.current;if(!(Qa instanceof WheelEvent)&&(Qa.target===Lb||null!=Lb&&Lb.contains(Qa.target))){W.current||(W.current=db);Lb=me.sub(W.current,db);var Vb=me.sub(Lb,ka.current);null==(kb=E.onPinch)?void 0:kb.call(E,{type:"canvas",order:0,delta:[...Vb,Xa[0]],offset:Xa,point:me.sub(db,l.containerOffset)},Qa);ka.current=Lb}}}),[E]);Zi(Fa,{target:a,
eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:Dp.maxZoom,min:Dp.minZoom})}})}function rl(a,d,l,E){Vw.useLayoutEffect(()=>{a.current.style.transform=`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,l,d.rotation]);Vw.useLayoutEffect(()=>{const W=a.current;W.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;W.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Vw.useLayoutEffect(()=>{const W=a.current;void 0!==E&&(W.style.zIndex=E.toString())},[E])}function Zk(a,d){const {onPersist:l,onError:E,onMount:W,onCreateAssets:ka,onCreateShapes:oa,onDeleteAssets:Fa,onDeleteShapes:Qa,onDrop:Xa,
onPaste:db,onCopy:kb,onCanvasDBClick:Lb}=d;bA.useLayoutEffect(()=>{const Vb=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,W&&W(a,null),()=>{Vb.forEach(Qb=>Qb());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);bA.useLayoutEffect(()=>{const Vb=[];l&&Vb.push(a.subscribe("persist",l));E&&Vb.push(a.subscribe("error",E));oa&&Vb.push(a.subscribe("create-shapes",oa));ka&&Vb.push(a.subscribe("create-assets",ka));Qa&&Vb.push(a.subscribe("delete-shapes",Qa));Fa&&Vb.push(a.subscribe("delete-assets",
Fa));Xa&&Vb.push(a.subscribe("drop",Xa));db&&Vb.push(a.subscribe("paste",db));kb&&Vb.push(a.subscribe("copy",kb));Lb&&Vb.push(a.subscribe("canvas-dbclick",Lb));return()=>Vb.forEach(Qb=>Qb())},[a,l,E])}function Kn(a){if("app"in a)return a.app;const [d]=cA.useState(()=>new QD(a.model,a.Shapes,a.Tools,a.readOnly));cA.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function Lk(a,d){wE.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function Rm(a){const d=nh(),{viewport:{bounds:l}}=
d;xE.useEffect(()=>{const E=oa=>{oa.preventDefault()},W=oa=>{if(0!==oa.touches.length){var Fa=oa.touches[0].pageX,Qa=oa.touches[0].radiusX||0;(10>Fa-Qa||Fa+Qa>l.width-10)&&oa.preventDefault()}},ka=a.current;if(!ka)return()=>{};ka.addEventListener("touchstart",E,{passive:!0});ka.addEventListener("gestureend",E,{passive:!0});ka.addEventListener("gesturechange",E,{passive:!0});ka.addEventListener("gesturestart",E,{passive:!0});ka.addEventListener("touchstart",W,{passive:!0});return()=>{ka&&(ka.removeEventListener("touchstart",
E),ka.removeEventListener("gestureend",E),ka.removeEventListener("gesturechange",E),ka.removeEventListener("gesturestart",E),ka.removeEventListener("touchstart",W))}},[a,l.width])}function fn(a,d){const {inputs:l,callbacks:E}=nh();return yE.useMemo(()=>({onPointerDown:W=>{var ka,oa;const {order:Fa=0}=W;Fa||(null==(ka=W.currentTarget)?void 0:ka.setPointerCapture(W.pointerId));ka=a.props.handles[d];null==(oa=E.onPointerDown)?void 0:oa.call(E,{type:"handle",shape:a,handle:ka,id:d,order:Fa},W);W.order=
Fa+1},onPointerMove:W=>{var ka;const {order:oa=0}=W,Fa=a.props.handles[d];null==(ka=E.onPointerMove)?void 0:ka.call(E,{type:"handle",shape:a,handle:Fa,id:d,order:oa},W);W.order=oa+1},onPointerUp:W=>{var ka,oa;const {order:Fa=0}=W;Fa||(null==(ka=W.currentTarget)?void 0:ka.releasePointerCapture(W.pointerId));ka=a.props.handles[d];null==(oa=E.onPointerUp)?void 0:oa.call(E,{type:"handle",shape:a,handle:ka,id:d,order:Fa},W);W.order=Fa+1},onPointerEnter:W=>{var ka;const {order:oa=0}=W,Fa=a.props.handles[d];
null==(ka=E.onPointerEnter)?void 0:ka.call(E,{type:"handle",shape:a,handle:Fa,id:d,order:oa},W);W.order=oa+1},onPointerLeave:W=>{var ka;const {order:oa=0}=W,Fa=a.props.handles[d];null==(ka=E.onPointerLeave)?void 0:ka.call(E,{type:"handle",shape:a,handle:Fa,id:d,order:oa},W);W.order=oa+1},onKeyUp:W=>{var ka;const oa=a.props.handles[d];null==(ka=E.onKeyUp)?void 0:ka.call(E,{type:"handle",shape:a,handle:oa,id:d,order:-1},W)},onKeyDown:W=>{var ka;const oa=a.props.handles[d];null==(ka=E.onKeyDown)?void 0:
ka.call(E,{type:"handle",shape:a,handle:oa,id:d,order:-1},W)}}),[a.id,l,E])}function Aj(a,d,l=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${l?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function gn(a,d,l=0){zE.useEffect(()=>{const E=a.current;E&&(E.style.cursor=AE[d](Mm.radiansToDegrees(l)))},
[d,l])}function yk(a){const {viewport:d}=nh(),l=ef();BE.useLayoutEffect(()=>Ld(()=>{const E=Vk(()=>{var W;null==(W=a.current)?void 0:W.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==l.inputs.state&&null!=d.camera.zoom&&E()}),[])}function Sm(a,d=0){const [l,E]=(0,dA.useState)(a);(0,dA.useEffect)(()=>{let W=!1;const ka=setTimeout(()=>{W||E(a)},d);return()=>{W=!0;clearTimeout(ka)}},[a,d]);return l}function hk(){const a=ef();eA.useEffect(()=>{ve(()=>oe({},a.viewport.camera),
()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);eA.useEffect(()=>{var d;const l=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");l?a.viewport.update(l):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function hn(a){a()}function xk(a){return Qf(Hg(a,void 0))}function xi(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+
DE}}function fi(a){var d=new Map,l=1,E=new a(function(W){var ka=d.get(W);ka&&(ka.reaction.dispose(),d.delete(W))});return{addReactionToTrack:function(W,ka,oa){var Fa=l++;E.register(oa,Fa,W);W.current=xi(ka);W.current.finalizationRegistryCleanupToken=Fa;d.set(Fa,W.current);return W.current},recordReactionAsCommitted:function(W){E.unregister(W);W.current&&W.current.finalizationRegistryCleanupToken&&d.delete(W.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function jn(){function a(){void 0===E&&(E=setTimeout(d,1E4))}function d(){E=void 0;var W=Date.now();l.forEach(function(ka){var oa=ka.current;oa&&W>=oa.cleanAt&&(oa.reaction.dispose(),ka.current=null,l.delete(ka))});0<l.size&&a()}var l=new Set,E;return{addReactionToTrack:function(W,ka,oa){W.current=xi(ka);l.add(W);a();return W.current},recordReactionAsCommitted:function(W){l.delete(W)},forceCleanupTimerToRunNowForTests:function(){E&&(clearTimeout(E),d())},
resetCleanupScheduleForTests:function(){var W;if(0<l.size){try{for(var ka=EE(l),oa=ka.next();!oa.done;oa=ka.next()){var Fa=oa.value,Qa=Fa.current;Qa&&(Qa.reaction.dispose(),Fa.current=null)}}catch(db){var Xa={error:db}}finally{try{oa&&!oa.done&&(W=ka.return)&&W.call(ka)}finally{if(Xa)throw Xa.error;}}l.clear()}E&&(clearTimeout(E),E=void 0)}}}function ph(){return new HE}function sj(a,d){void 0===d&&(d="observed");var l=hA(ju.default.useState(ph),1)[0],E=hA(ju.default.useState(),2)[1],W=ju.default.useRef(null);
if(!W.current)var ka=new et("observer".concat(d),function(){oa.mounted?E([]):oa.changedBeforeMount=!0}),oa=FE(W,ka,l);l=W.current.reaction;ju.default.useDebugValue(l,xk);ju.default.useEffect(function(){GE(W);W.current?(W.current.mounted=!0,W.current.changedBeforeMount&&(W.current.changedBeforeMount=!1,E([]))):(W.current={reaction:new et("observer".concat(d),function(){E([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},E([]));return function(){W.current.reaction.dispose();W.current=null}},
[]);var Fa,Qa;l.track(function(){try{Fa=a()}catch(Xa){Qa=Xa}});if(Qa)throw Qa;return Fa}function ff(a,d){var l;if(kA&&a.$$typeof===kA)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(l=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==l?l:!1;var E=a,W=a.displayName||a.name;if(jA&&a.$$typeof===jA&&(d=!0,E=a.render,"function"!==typeof E))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
l=function(ka,oa){return sj(function(){return E(ka,oa)},W)};""!==W&&(l.displayName=W);a.contextTypes&&(l.contextTypes=a.contextTypes);d&&(l=(0,ot.forwardRef)(l));l=(0,ot.memo)(l);Bj(a,l);return l}function Bj(a,d){Object.keys(a).forEach(function(l){IE[l]||Object.defineProperty(d,l,Object.getOwnPropertyDescriptor(a,l))})}function tk(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:sj(a)}function kn(a){const d=ef(),{callbacks:l}=nh(),E=lA.useRef(!1);lA.useEffect(()=>{const W=Qa=>{var Xa,
db;if(null==(Xa=a.current)?0:Xa.contains(document.activeElement))null==(db=l.onKeyDown)?void 0:db.call(l,{type:"canvas",order:-1},Qa),E.current=Qa.shiftKey},ka=Qa=>{var Xa,db;if(null==(Xa=a.current)?0:Xa.contains(document.activeElement))null==(db=l.onKeyUp)?void 0:db.call(l,{type:"canvas",order:-1},Qa),E.current=Qa.shiftKey},oa=Qa=>{var Xa,db,kb;!d.editingShape&&(null==(Xa=a.current)?0:Xa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(kb=null==(db=document.activeElement)?
void 0:db.tagName)?kb:"")&&(Qa.preventDefault(),d.paste(Qa,E.current))},Fa=Qa=>{var Xa,db,kb;!d.editingShape&&0<d.selectedShapes.size&&(null==(Xa=a.current)?0:Xa.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(kb=null==(db=document.activeElement)?void 0:db.tagName)?kb:"")&&(Qa.preventDefault(),d.copy())};window.addEventListener("keydown",W);window.addEventListener("keyup",ka);document.addEventListener("paste",oa);document.addEventListener("copy",Fa);return()=>{window.removeEventListener("keydown",
W);window.removeEventListener("keyup",ka);document.removeEventListener("paste",oa);document.removeEventListener("copy",Fa)}},[])}function lm(a){const {inputs:d,callbacks:l}=nh(),E=pA.useRef(-1);return pA.useMemo(()=>({onPointerDown:W=>{var ka,oa;const {order:Fa=0}=W;Fa||(null==(ka=W.currentTarget)?void 0:ka.setPointerCapture(W.pointerId));null==(oa=l.onPointerDown)?void 0:oa.call(l,{type:"shape",shape:a,order:Fa},W);W.order=Fa+1},onPointerMove:W=>{var ka;const {order:oa=0}=W;null==(ka=l.onPointerMove)?
void 0:ka.call(l,{type:"shape",shape:a,order:oa},W);W.order=oa+1},onPointerUp:W=>{var ka,oa,Fa;const {order:Qa=0}=W;Qa||(null==(ka=W.currentTarget)?void 0:ka.releasePointerCapture(W.pointerId));null==(oa=l.onPointerUp)?void 0:oa.call(l,{type:"shape",shape:a,order:Qa},W);ka=Date.now();oa=ka-E.current;300<oa?E.current=ka:300>=oa&&(null==(Fa=l.onDoubleClick)?void 0:Fa.call(l,{type:"shape",shape:a,order:Qa},W),E.current=-1);W.order=Qa+1},onPointerEnter:W=>{var ka;const {order:oa=0}=W;null==(ka=l.onPointerEnter)?
void 0:ka.call(l,{type:"shape",shape:a,order:oa},W);W.order=oa+1},onPointerLeave:W=>{var ka;const {order:oa=0}=W;null==(ka=l.onPointerLeave)?void 0:ka.call(l,{type:"shape",shape:a,order:oa},W);W.order=oa+1},onKeyUp:W=>{var ka;null==(ka=l.onKeyUp)?void 0:ka.call(l,{type:"shape",shape:a,order:-1},W)},onKeyDown:W=>{var ka;null==(ka=l.onKeyDown)?void 0:ka.call(l,{type:"shape",shape:a,order:-1},W)}}),[a.id,d,l])}function Dg(a){var {viewport:d,inputs:l,callbacks:E,components:W}=a;a=If(a,["viewport","inputs",
"callbacks","components"]);return(0,sb.jsx)(XE,{id:a.id,viewport:d,inputs:l,callbacks:E,components:W,meta:a.meta,children:(0,sb.jsx)(VE,oe({},a))})}function Ze(){Ze=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var l=arguments[d],E;for(E in l)Object.prototype.hasOwnProperty.call(l,E)&&(a[E]=l[E])}return a};return Ze.apply(this,arguments)}function Vf(a,d,{checkForDefaultPrevented:l=!0}={}){return function(E){null===a||void 0===a||a(E);if(!1===l||!E.defaultPrevented)return null===
d||void 0===d?void 0:d(E)}}function Ng(...a){return d=>a.forEach(l=>{"function"===typeof l?l(d):null!==l&&void 0!==l&&(l.current=d)})}function jh(...a){return(0,$E.useCallback)(Ng(...a),a)}function jk(a,d=[]){let l=[];const E=()=>{const W=l.map(ka=>(0,ps.createContext)(ka));return function(ka){const oa=(null===ka||void 0===ka?void 0:ka[a])||W;return(0,ps.useMemo)(()=>({[`__scope${a}`]:of(oe({},ka),{[a]:oa})}),[ka,oa])}};E.scopeName=a;return[function(W,ka){function oa(Xa){const {scope:db,children:kb}=
Xa,Lb=If(Xa,["scope","children"]);Xa=(null===db||void 0===db?void 0:db[a][Qa])||Fa;const Vb=(0,ps.useMemo)(()=>Lb,Object.values(Lb));return(0,ps.createElement)(Xa.Provider,{value:Vb},kb)}const Fa=(0,ps.createContext)(ka),Qa=l.length;l=[...l,ka];oa.displayName=W+"Provider";return[oa,function(Xa,db){if(db=(0,ps.useContext)((null===db||void 0===db?void 0:db[a][Qa])||Fa))return db;if(void 0!==ka)return ka;throw Error(`\`${Xa}\` must be used within \`${W}\``);}]},Mk(E,...d)]}function Mk(...a){const d=
a[0];if(1===a.length)return d;const l=()=>{const E=a.map(W=>({useScope:W(),scopeName:W.scopeName}));return function(W){const ka=E.reduce((oa,{useScope:Fa,scopeName:Qa})=>{Fa=Fa(W)[`__scope${Qa}`];return oe(oe({},oa),Fa)},{});return(0,ps.useMemo)(()=>({[`__scope${d.scopeName}`]:ka}),[ka])}};l.scopeName=d.scopeName;return l}function xg(a){return(0,Dn.isValidElement)(a)&&a.type===AA}function Cj(a,d){const l=oe({},d);for(const E in d){const W=a[E],ka=d[E];/^on[A-Z]/.test(E)?W&&ka?l[E]=(...oa)=>{ka(...oa);
W(...oa)}:W&&(l[E]=W):"style"===E?l[E]=oe(oe({},W),ka):"className"===E&&(l[E]=[W,ka].filter(Boolean).join(" "))}return oe(oe({},a),l)}function Tl(a,d){a&&(0,aF.flushSync)(()=>a.dispatchEvent(d))}function Gf(a){const d=(0,Zw.useRef)(a);(0,Zw.useEffect)(()=>{d.current=a});return(0,Zw.useMemo)(()=>(...l)=>{var E;return null===(E=d.current)||void 0===E?void 0:E.call(d,...l)},[])}function Ak(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a);(0,bF.useEffect)(()=>{const E=
W=>{"Escape"===W.key&&l(W)};d.addEventListener("keydown",E);return()=>d.removeEventListener("keydown",E)},[l,d])}function Vj(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a),E=(0,yo.useRef)(!1),W=(0,yo.useRef)(()=>{});(0,yo.useEffect)(()=>{const ka=Fa=>{if(Fa.target&&!E.current){let Qa=function(){Dm("dismissableLayer.pointerDownOutside",l,Xa,{discrete:!0})};const Xa={originalEvent:Fa};"touch"===Fa.pointerType?(d.removeEventListener("click",W.current),W.current=
Qa,d.addEventListener("click",W.current,{once:!0})):Qa()}E.current=!1},oa=window.setTimeout(()=>{d.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(oa);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",W.current)}},[d,l]);return{onPointerDownCapture:()=>E.current=!0}}function Sl(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a),E=(0,yo.useRef)(!1);(0,yo.useEffect)(()=>{const W=ka=>{ka.target&&!E.current&&Dm("dismissableLayer.focusOutside",
l,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",W);return()=>d.removeEventListener("focusin",W)},[d,l]);return{onFocusCapture:()=>E.current=!0,onBlurCapture:()=>E.current=!1}}function Yk(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Dm(a,d,l,{discrete:E}){const W=l.originalEvent.target;l=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:l});d&&W.addEventListener(a,d,{once:!0});E?Tl(W,l):W.dispatchEvent(l)}function gi(a){const [d,l]=CA.useState(eF());
pn(()=>{a||l(E=>null!==E&&void 0!==E?E:String(fF++))},[a]);return a||(d?`radix-${d}`:"")}function $i(a){return a.split("-")[0]}function al(a){return["top","bottom"].includes($i(a))?"x":"y"}function Bk(a){return"y"===a?"height":"width"}function sl(a,d,l){let {reference:E,floating:W}=a;var ka=E.x+E.width/2-W.width/2;const oa=E.y+E.height/2-W.height/2;a=al(d);var Fa=Bk(a);Fa=E[Fa]/2-W[Fa]/2;const Qa="x"===a;switch($i(d)){case "top":ka={x:ka,y:E.y-W.height};break;case "bottom":ka={x:ka,y:E.y+E.height};
break;case "right":ka={x:E.x+E.width,y:oa};break;case "left":ka={x:E.x-W.width,y:oa};break;default:ka={x:E.x,y:E.y}}switch(d.split("-")[1]){case "start":ka[a]-=Fa*(l&&Qa?-1:1);break;case "end":ka[a]+=Fa*(l&&Qa?-1:1)}return ka}function Ln(a){return"number"!=typeof a?oe({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function ln(a){return of(oe({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function im(a,d){return yi(this,null,function*(){var l;void 0===d&&(d={});
const {x:E,y:W,platform:ka,rects:oa,elements:Fa,strategy:Qa}=a,{boundary:Xa="clippingAncestors",rootBoundary:db="viewport",elementContext:kb="floating",altBoundary:Lb=!1,padding:Vb=0}=d,Qb=Ln(Vb),lc=Fa[Lb?"floating"===kb?"reference":"floating":kb],xc=ln(yield ka.getClippingRect({element:null==(l=yield null==ka.isElement?void 0:ka.isElement(lc))||l?lc:lc.contextElement||(yield null==ka.getDocumentElement?void 0:ka.getDocumentElement(Fa.floating)),boundary:Xa,rootBoundary:db,strategy:Qa}));l=ln(ka.convertOffsetParentRelativeRectToViewportRelativeRect?
yield ka.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===kb?of(oe({},oa.floating),{x:E,y:W}):oa.reference,offsetParent:yield null==ka.getOffsetParent?void 0:ka.getOffsetParent(Fa.floating),strategy:Qa}):oa[kb]);return{top:xc.top-l.top+Qb.top,bottom:l.bottom-xc.bottom+Qb.bottom,left:xc.left-l.left+Qb.left,right:l.right-xc.right+Qb.right}})}function Um(a){return a.replace(/left|right|bottom|top/g,d=>hF[d])}function Ul(a,d,l){void 0===l&&(l=!1);const E=a.split("-")[1],W=al(a);
a=Bk(W);l="x"===W?E===(l?"end":"start")?"right":"left":"start"===E?"bottom":"top";return d.reference[a]>d.floating[a]&&(l=Um(l)),{main:l,cross:Um(l)}}function Ck(a){return a.replace(/start|end/g,d=>iF[d])}function Fl(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function dl(a){return EA.some(d=>0<=a[d])}function cl(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function Wl(a){return cl(a).getComputedStyle(a)}
function Lj(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||"").toLowerCase():""}function nj(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function ul(a){return a instanceof cl(a).HTMLElement}function Nk(a){return a instanceof cl(a).Element}function Kj(a){return"undefined"==typeof ShadowRoot?!1:a instanceof cl(a).ShadowRoot||a instanceof ShadowRoot}function mj(a){const {overflow:d,overflowX:l,
overflowY:E}=Wl(a);return/auto|scroll|overlay|hidden/.test(d+E+l)}function um(a){const d=/firefox/i.test(nj());a=Wl(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function fl(){return!/^((?!chrome|android).)*safari/i.test(nj())}function Wj(a,d,l){var E,W,ka,oa;void 0===d&&(d=!1);void 0===l&&(l=!1);var Fa=a.getBoundingClientRect();let Qa=1,Xa=1;d&&ul(a)&&(Qa=
0<a.offsetWidth&&tv(Fa.width)/a.offsetWidth||1,Xa=0<a.offsetHeight&&tv(Fa.height)/a.offsetHeight||1);a=Nk(a)?cl(a):window;d=!fl()&&l;l=(Fa.left+(d&&null!=(E=null==(W=a.visualViewport)?void 0:W.offsetLeft)?E:0))/Qa;E=(Fa.top+(d&&null!=(ka=null==(oa=a.visualViewport)?void 0:oa.offsetTop)?ka:0))/Xa;ka=Fa.width/Qa;Fa=Fa.height/Xa;return{width:ka,height:Fa,top:E,right:l+ka,bottom:E+Fa,left:l,x:l,y:E}}function kk(a){return(d=a,(d instanceof cl(d).Node?a.ownerDocument:a.document)||window.document).documentElement;
var d}function uk(a){return Nk(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function lk(a){return Wj(kk(a)).left+uk(a).scrollLeft}function Ph(a){return"html"===Lj(a)?a:a.assignedSlot||a.parentNode||(Kj(a)?a.host:null)||kk(a)}function zj(a){return ul(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function oj(a){for(var d=cl(a),l=zj(a);l&&["table","td","th"].includes(Lj(l))&&"static"===getComputedStyle(l).position;)l=zj(l);if(!l||
"html"!==Lj(l)&&("body"!==Lj(l)||"static"!==getComputedStyle(l).position||um(l))){if(!l)a:{a=Ph(a);for(Kj(a)&&(a=a.host);ul(a)&&!["html","body"].includes(Lj(a));){if(um(a)){l=a;break a}a=a.parentNode}l=null}d=l||d}return d}function Hk(a){if(ul(a))return{width:a.offsetWidth,height:a.offsetHeight};a=Wj(a);return{width:a.width,height:a.height}}function pl(a){const d=Ph(a);return["html","body","#document"].includes(Lj(d))?a.ownerDocument.body:ul(d)&&mj(d)?d:pl(d)}function mi(a,d){var l;void 0===d&&(d=
[]);var E=pl(a);a=E===(null==(l=a.ownerDocument)?void 0:l.body);l=cl(E);E=a?[l].concat(l.visualViewport||[],mj(E)?E:[]):E;d=d.concat(E);return a?d:d.concat(mi(E))}function ui(a,d,l){return"viewport"===d?ln(function(E,W){var ka=cl(E),oa=kk(E);ka=ka.visualViewport;E=oa.clientWidth;oa=oa.clientHeight;let Fa=0,Qa=0;if(ka){E=ka.width;oa=ka.height;const Xa=fl();(Xa||!Xa&&"fixed"===W)&&(Fa=ka.offsetLeft,Qa=ka.offsetTop)}return{width:E,height:oa,x:Fa,y:Qa}}(a,l)):Nk(d)?function(E,W){var ka=Wj(E,!1,"fixed"===
W);W=ka.top+E.clientTop;ka=ka.left+E.clientLeft;return{top:W,left:ka,x:ka,y:W,right:ka+E.clientWidth,bottom:W+E.clientHeight,width:E.clientWidth,height:E.clientHeight}}(d,l):ln(function(E){var W;const ka=kk(E);var oa=uk(E);const Fa=null==(W=E.ownerDocument)?void 0:W.body;W=lu(ka.scrollWidth,ka.clientWidth,Fa?Fa.scrollWidth:0,Fa?Fa.clientWidth:0);const Qa=lu(ka.scrollHeight,ka.clientHeight,Fa?Fa.scrollHeight:0,Fa?Fa.clientHeight:0);E=-oa.scrollLeft+lk(E);oa=-oa.scrollTop;return"rtl"===Wl(Fa||ka).direction&&
(E+=lu(ka.clientWidth,Fa?Fa.clientWidth:0)-W),{width:W,height:Qa,x:E,y:oa}}(kk(a)))}function hm(a){const d=mi(a),l=["absolute","fixed"].includes(Wl(a).position)&&ul(a)?oj(a):a;return Nk(l)?d.filter(E=>{var W;if(W=Nk(E))a:if(W=null==l.getRootNode?void 0:l.getRootNode(),E.contains(l))W=!0;else{if(W&&Kj(W)){W=l;do{if(W&&E===W){W=!0;break a}W=W.parentNode||W.host}while(W)}W=!1}return W&&"body"!==Lj(E)}):[]}function Pi(a,d,l,E){void 0===E&&(E={});const {ancestorScroll:W=!0,ancestorResize:ka=!0,elementResize:oa=
!0,animationFrame:Fa=!1}=E,Qa=W&&!Fa,Xa=ka&&!Fa,db=Qa||Xa?[...(Nk(a)?mi(a):[]),...mi(d)]:[];db.forEach(Qb=>{Qa&&Qb.addEventListener("scroll",l,{passive:!0});Xa&&Qb.addEventListener("resize",l)});let kb,Lb=null;if(oa){let Qb=!0;Lb=new ResizeObserver(()=>{Qb||l();Qb=!1});Nk(a)&&!Fa&&Lb.observe(a);Lb.observe(d)}let Vb=Fa?Wj(a):null;return Fa&&function lc(){const xc=Wj(a);!Vb||xc.x===Vb.x&&xc.y===Vb.y&&xc.width===Vb.width&&xc.height===Vb.height||l();Vb=xc;kb=requestAnimationFrame(lc)}(),l(),()=>{var lc;
db.forEach(xc=>{Qa&&xc.removeEventListener("scroll",l);Xa&&xc.removeEventListener("resize",l)});null==(lc=Lb)||lc.disconnect();Lb=null;Fa&&cancelAnimationFrame(kb)}}function Dk(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let l,E;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var W=a.length;if(W!=d.length)return!1;for(l=W;0!==l--;)if(!Dk(a[l],d[l]))return!1;return!0}E=Object.keys(a);W=E.length;if(W!==Object.keys(d).length)return!1;
for(l=W;0!==l--;)if(!Object.prototype.hasOwnProperty.call(d,E[l]))return!1;for(l=W;0!==l--;)if(W=E[l],!("_owner"===W&&a.$$typeof||Dk(a[W],d[W])))return!1;return!0}return a!==a&&d!==d}function ni(a){const d=No.useRef(a);bx(()=>{d.current=a});return d}function ig(a){let {middleware:d,placement:l="bottom",strategy:E="absolute",whileElementsMounted:W}=void 0===a?{}:a;const ka=No.useRef(null),oa=No.useRef(null),Fa=ni(W),Qa=No.useRef(null),[Xa,db]=No.useState({x:null,y:null,strategy:E,placement:l,middlewareData:{}}),
[kb,Lb]=No.useState(d);Dk(null==kb?void 0:kb.map(mc=>{({options:mc}=mc);return mc}),null==d?void 0:d.map(mc=>{({options:mc}=mc);return mc}))||Lb(d);const Vb=No.useCallback(()=>{ka.current&&oa.current&&lF(ka.current,oa.current,{middleware:kb,placement:l,strategy:E}).then(mc=>{Qb.current&&mF.flushSync(()=>{db(mc)})})},[kb,l,E]);bx(()=>{Qb.current&&Vb()},[Vb]);const Qb=No.useRef(!1);bx(()=>{Qb.current=!0;return()=>{Qb.current=!1}},[]);const lc=No.useCallback(()=>{"function"===typeof Qa.current&&(Qa.current(),
Qa.current=null);if(ka.current&&oa.current)if(Fa.current){const mc=Fa.current(ka.current,oa.current,Vb);Qa.current=mc}else Vb()},[Vb,Fa]),xc=No.useCallback(mc=>{ka.current=mc;lc()},[lc]),ac=No.useCallback(mc=>{oa.current=mc;lc()},[lc]),pc=No.useMemo(()=>({reference:ka,floating:oa}),[]);return No.useMemo(()=>of(oe({},Xa),{update:Vb,refs:pc,reference:xc,floating:ac}),[Xa,Vb,pc,xc,ac])}function Dh(a){const [d,l]=(0,oF.useState)(void 0);pn(()=>{if(a){l({width:a.offsetWidth,height:a.offsetHeight});const E=
new ResizeObserver(W=>{if(Array.isArray(W)&&W.length){W=W[0];if("borderBoxSize"in W){W=W.borderBoxSize;var ka=Array.isArray(W)?W[0]:W;W=ka.inlineSize;ka=ka.blockSize}else W=a.offsetWidth,ka=a.offsetHeight;l({width:W,height:ka})}});E.observe(a,{box:"border-box"});return()=>E.unobserve(a)}l(void 0)},[a]);return d}function bh(a){return void 0!==a}function Ag(a){return null!==a}function zi(a){const [d,l="center"]=a.split("-");return[d,l]}function $h(a,d){return(0,Aq.useReducer)((l,E)=>{E=d[l][E];return null!==
E&&void 0!==E?E:l},a)}function Fg(a){const [d,l]=(0,Aq.useState)(),E=(0,Aq.useRef)({}),W=(0,Aq.useRef)(a),ka=(0,Aq.useRef)("none"),[oa,Fa]=$h(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Aq.useEffect)(()=>{const Qa=Th(E.current);ka.current="mounted"===oa?Qa:"none"},[oa]);pn(()=>{const Qa=E.current,Xa=W.current;if(Xa!==a){const db=ka.current,kb=Th(Qa);a?Fa("MOUNT"):
"none"===kb||"none"===(null===Qa||void 0===Qa?void 0:Qa.display)?Fa("UNMOUNT"):Xa&&db!==kb?Fa("ANIMATION_OUT"):Fa("UNMOUNT");W.current=a}},[a,Fa]);pn(()=>{if(d){const Qa=db=>{const kb=Th(E.current).includes(db.animationName);db.target===d&&kb&&(0,yF.flushSync)(()=>Fa("ANIMATION_END"))},Xa=db=>{db.target===d&&(ka.current=Th(E.current))};d.addEventListener("animationstart",Xa);d.addEventListener("animationcancel",Qa);d.addEventListener("animationend",Qa);return()=>{d.removeEventListener("animationstart",
Xa);d.removeEventListener("animationcancel",Qa);d.removeEventListener("animationend",Qa)}}Fa("ANIMATION_END")},[d,Fa]);return{isPresent:["mounted","unmountSuspended"].includes(oa),ref:(0,Aq.useCallback)(Qa=>{Qa&&(E.current=getComputedStyle(Qa));l(Qa)},[])}}function Th(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function ai({prop:a,defaultProp:d,onChange:l=()=>{}}){const [E,W]=tj({defaultProp:d,onChange:l}),ka=void 0!==a;d=ka?a:E;const oa=Gf(l);l=(0,uv.useCallback)(Fa=>{ka?(Fa="function"===
typeof Fa?Fa(a):Fa,Fa!==a&&oa(Fa)):W(Fa)},[ka,a,W,oa]);return[d,l]}function tj({defaultProp:a,onChange:d}){a=(0,uv.useState)(a);const [l]=a,E=(0,uv.useRef)(l),W=Gf(d);(0,uv.useEffect)(()=>{E.current!==l&&(W(l),E.current=l)},[l,E,W]);return a}function Fj(a,d){const l=Math.abs(d.top-a.y),E=Math.abs(d.bottom-a.y),W=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(l,E,W,a)){case a:return"left";case W:return"right";case l:return"top";case E:return"bottom";default:return null}}function Rb(a){a=
a.slice();a.sort((d,l)=>d.x<l.x?-1:d.x>l.x?1:d.y<l.y?-1:d.y>l.y?1:0);return jc(a)}function jc(a){if(1>=a.length)return a.slice();const d=[];for(var l=0;l<a.length;l++){for(var E=a[l];2<=d.length;){var W=d[d.length-1],ka=d[d.length-2];if((W.x-ka.x)*(E.y-ka.y)>=(W.y-ka.y)*(E.x-ka.x))d.pop();else break}d.push(E)}d.pop();l=[];for(E=a.length-1;0<=E;E--){for(W=a[E];2<=l.length;){ka=l[l.length-1];const oa=l[l.length-2];if((ka.x-oa.x)*(W.y-oa.y)>=(ka.y-oa.y)*(W.x-oa.x))l.pop();else break}l.push(W)}l.pop();
return 1===d.length&&1===l.length&&d[0].x===l[0].x&&d[0].y===l[0].y?d:d.concat(l)}function gc(a){var {side:d,content:l,sideOffset:E=10}=a;a=If(a,["side","content","sideOffset"]);return l?(0,sb.jsx)(KF,{delayDuration:300,children:(0,sb.jsxs)(LF,{children:[(0,sb.jsx)(MF,{asChild:!0,children:a.children}),(0,sb.jsx)(NF,{children:(0,sb.jsxs)(OF,of(oe({className:"tl-tooltip-content",sideOffset:E,side:d},a),{children:[l,(0,sb.jsx)(PF,{className:"tl-tooltip-arrow"})]}))})]})}):(0,sb.jsx)(sb.Fragment,{children:a.children})}
function ja(a){var {className:d,tooltip:l,tooltipSide:E}=a;a=If(a,["className","tooltip","tooltipSide"]);return(0,sb.jsx)(gc,{content:l,side:E,children:(0,sb.jsx)("button",oe({className:"tl-button "+(null!=d?d:"")},a))})}function Cb(a){var d=a+"CollectionProvider";const [l,E]=jk(d),[W,ka]=l(d,{collectionRef:{current:null},itemMap:new Map}),oa=db=>{const {scope:kb,children:Lb}=db;db=fq.default.useRef(null);const Vb=fq.default.useRef(new Map).current;return fq.default.createElement(W,{scope:kb,itemMap:Vb,
collectionRef:db},Lb)};Object.assign(oa,{displayName:d});const Fa=a+"CollectionSlot";d=fq.default.forwardRef((db,kb)=>{const {scope:Lb,children:Vb}=db;db=ka(Fa,Lb);kb=jh(kb,db.collectionRef);return fq.default.createElement(eq,{ref:kb},Vb)});Object.assign(d,{displayName:Fa});const Qa=a+"CollectionItemSlot",Xa=fq.default.forwardRef((db,kb)=>{const {scope:Lb,children:Vb}=db,Qb=If(db,["scope","children"]),lc=fq.default.useRef(null);db=jh(kb,lc);const xc=ka(Qa,Lb);fq.default.useEffect(()=>{xc.itemMap.set(lc,
oe({ref:lc},Qb));return()=>void xc.itemMap.delete(lc)});return fq.default.createElement(eq,{["data-radix-collection-item"]:"",ref:db},Vb)});Object.assign(Xa,{displayName:Qa});return[{Provider:oa,Slot:d,ItemSlot:Xa},function(db){const kb=ka(a+"CollectionConsumer",db);return fq.default.useCallback(()=>{const Lb=kb.collectionRef.current;if(!Lb)return[];const Vb=Array.from(Lb.querySelectorAll("[data-radix-collection-item]"));return Array.from(kb.itemMap.values()).sort((Qb,lc)=>Vb.indexOf(Qb.ref.current)-
Vb.indexOf(lc.ref.current))},[kb.collectionRef,kb.itemMap])},E]}function Wb(a){const d=(0,SA.useContext)(RF);return a||d||"ltr"}function tb(){(0,SF.useEffect)(()=>{var a,d;const l=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=l[0])&&void 0!==a?a:yb());document.body.insertAdjacentElement("beforeend",null!==(d=l[1])&&void 0!==d?d:yb());ix++;return()=>{1===ix&&document.querySelectorAll("[data-radix-focus-guard]").forEach(E=>E.remove());
ix--}},[])}function yb(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return a}function Tb(a,{select:d=!1}={}){const l=document.activeElement;for(const E of a)if(Bc(E,{select:d}),document.activeElement!==l)break}function rb(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const E="INPUT"===l.tagName&&"hidden"===l.type;return l.disabled||
l.hidden||E?NodeFilter.FILTER_SKIP:0<=l.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function Pb(a,d){for(const l of a)if(!cc(l,{upTo:d}))return l}function cc(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function Bc(a,{select:d=!1}={}){if(a&&a.focus){const l=document.activeElement;a.focus({preventScroll:!0});a!==
l&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function Lc(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function Pc(a){return a.filter(d=>"A"!==d.tagName)}function ud(a,d,l){a=a.key;l="rtl"!==l?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(l))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(l))return ZF[l]}function Td(a){const d=document.activeElement;for(const l of a){if(l===d)break;l.focus();
if(document.activeElement!==d)break}}function Ed(a,d){return a.map((l,E)=>a[(d+E)%a.length])}function Cd(a,d){var l=(0,cG.useState)(function(){return{value:a,callback:d,facade:{get current(){return l.value},set current(E){var W=l.value;W!==E&&(l.value=E,l.callback(E,W))}}}})[0];l.callback=d;return l.facade}function Kd(a,d){return Cd(d||null,function(l){return a.forEach(function(E){"function"===typeof E?E(l):E&&(E.current=l);return E})})}function Ce(a){return a}function eg(a,d){void 0===d&&(d=Ce);
var l=[],E=!1;return{read:function(){if(E)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return l.length?l[l.length-1]:a},useMedium:function(W){var ka=d(W,E);l.push(ka);return function(){l=l.filter(function(oa){return oa!==ka})}},assignSyncMedium:function(W){for(E=!0;l.length;){var ka=l;l=[];ka.forEach(W)}l={push:function(oa){return W(oa)},filter:function(){return l}}},assignMedium:function(W){E=!0;var ka=[];if(l.length){var oa=l;l=
[];oa.forEach(W);ka=l}var Fa=function(){var Qa=ka;ka=[];Qa.forEach(W)};Promise.resolve().then(Fa);l={push:function(Qa){ka.push(Qa);Promise.resolve().then(Fa)},filter:function(Qa){ka=ka.filter(Qa);return l}}}}}function ze(a){const d=document.activeElement;for(const l of a){if(l===d)break;l.focus();if(document.activeElement!==d)break}}function df(a,d){return a.map((l,E)=>a[(d+E)%a.length])}function Ue(a,d,l){const E=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,W=l?a.indexOf(l):-1;a=df(a,Math.max(W,
0));1===E.length&&(a=a.filter(ka=>ka!==l));a=a.find(ka=>ka.toLowerCase().startsWith(E.toLowerCase()));return a!==l?a:void 0}function Te(a){return d=>"mouse"===d.pointerType?a(d):void 0}function Jg(a,[d,l]){return Math.min(l,Math.max(d,a))}function gg(a){const d=(0,ss.useRef)({value:a,previous:a});return(0,ss.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function Mj(a=[],d,l){a=[...a];a[l]=d;return a.sort((E,W)=>E-W)}function cg(a,
d,l){return 100/(l-d)*(a-d)}function $g(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function Ni(a,d){if(1===a.length)return 0;a=a.map(E=>Math.abs(E-d));const l=Math.min(...a);return a.indexOf(l)}function Mh(a,d,l){a/=2;const E=Ah([0,50],[0,a]);return(a-E(d)*l)*l}function ih(a){return a.slice(0,-1).map((d,l)=>a[l+1]-d)}function Ah(a,d){return l=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(l-a[0])}function Qg(a,d){d=Math.pow(10,d);return Math.round(a*
d)/d}function zg(a){function d(Qa){return Qa?(0,sb.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Qa},children:(0,sb.jsx)("div",{className:`w-full h-full bg-${Qa}-500`})}):(0,sb.jsx)("div",{className:"tl-color-bg",children:(0,sb.jsx)(Wh,{name:"color-swatch"})})}var {color:l,opacity:E,popoverSide:W,setColor:ka,setOpacity:oa}=a;a=If(a,["color","opacity","popoverSide","setColor","setOpacity"]);const Fa=tB.default.useMemo(()=>{let Qa="";return Vk(Xa=>{ka(Qa)},100,Xa=>{Qa=Xa.target.value})},
[]);return(0,sb.jsx)(Dx,of(oe({},a),{border:!0,arrow:!0,side:W,label:(0,sb.jsx)(gc,{content:"Color",side:W,sideOffset:14,children:d(l)}),children:(0,sb.jsxs)("div",{className:"p-1",children:[(0,sb.jsx)("div",{className:"tl-color-palette",children:Object.values(Qr).map(Qa=>(0,sb.jsx)("button",{className:`tl-color-drip m-1${Qa===l?" active":""}`,onClick:()=>ka(Qa),children:d(Qa)},Qa))}),(0,sb.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,sb.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${Vi(l)?
"":"active"}`,children:(0,sb.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,sb.jsx)("input",oe({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(l)?l:"#000000",onChange:Fa,style:{opacity:Vi(l)?0:1}},a))})}),(0,sb.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:"Select custom color"})]}),oa&&(0,sb.jsx)("div",{className:"mx-1 my-2",children:(0,sb.jsxs)(sB,{defaultValue:[null!=E?
E:0],onValueCommit:Qa=>oa(Qa[0]),max:1,step:.1,"aria-label":"Opacity",className:"tl-slider-root",children:[(0,sb.jsx)(Oo,{className:"tl-slider-track",children:(0,sb.jsx)(go,{className:"tl-slider-range"})}),(0,sb.jsx)(gq,{className:"tl-slider-thumb"})]})})]})}))}function Eh(a,d){a&&(0,vB.flushSync)(()=>a.dispatchEvent(d))}function Zf(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a),E=(0,ho.useRef)(!1),W=(0,ho.useRef)(()=>{});(0,ho.useEffect)(()=>{const ka=Fa=>{if(Fa.target&&
!E.current){let Qa=function(){Oi("dismissableLayer.pointerDownOutside",l,Xa,{discrete:!0})};const Xa={originalEvent:Fa};"touch"===Fa.pointerType?(d.removeEventListener("click",W.current),W.current=Qa,d.addEventListener("click",W.current,{once:!0})):Qa()}E.current=!1},oa=window.setTimeout(()=>{d.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(oa);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",W.current)}},[d,l]);return{onPointerDownCapture:()=>E.current=
!0}}function Rj(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const l=Gf(a),E=(0,ho.useRef)(!1);(0,ho.useEffect)(()=>{const W=ka=>{ka.target&&!E.current&&Oi("dismissableLayer.focusOutside",l,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",W);return()=>d.removeEventListener("focusin",W)},[d,l]);return{onFocusCapture:()=>E.current=!0,onBlurCapture:()=>E.current=!1}}function Xh(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Oi(a,
d,l,{discrete:E}){const W=l.originalEvent.target;l=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:l});d&&W.addEventListener(a,d,{once:!0});E?Eh(W,l):W.dispatchEvent(l)}function kl(a,{select:d=!1}={}){const l=document.activeElement;for(const E of a)if(mk(E,{select:d}),document.activeElement!==l)break}function bj(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const E="INPUT"===l.tagName&&"hidden"===l.type;return l.disabled||l.hidden||E?NodeFilter.FILTER_SKIP:
0<=l.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function rm(a,d){for(const l of a)if(!Am(l,{upTo:d}))return l}function Am(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function mk(a,{select:d=!1}={}){if(a&&a.focus){const l=document.activeElement;a.focus({preventScroll:!0});a!==l&&a instanceof HTMLInputElement&&"select"in
a&&d&&a.select()}}function vn(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function Hn(a){return a.filter(d=>"A"!==d.tagName)}function Gg(a){return void 0!==a}function Vn(a){return null!==a}function Un(a){const [d,l="center"]=a.split("-");return[d,l]}function wn(a){const d=Gf(a),l=(0,Cf.useRef)(""),E=(0,Cf.useRef)(0);a=(0,Cf.useCallback)(ka=>{ka=l.current+ka;d(ka);(function Qa(Fa){l.current=Fa;window.clearTimeout(E.current);""!==Fa&&(E.current=window.setTimeout(()=>Qa(""),1E3))})(ka)},
[d]);const W=(0,Cf.useCallback)(()=>{l.current="";window.clearTimeout(E.current)},[]);(0,Cf.useEffect)(()=>()=>window.clearTimeout(E.current),[]);return[l,a,W]}function Ml(a,d,l){const E=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,W=l?a.indexOf(l):-1;a=zm(a,Math.max(W,0));1===E.length&&(a=a.filter(ka=>ka!==l));a=a.find(ka=>ka.textValue.toLowerCase().startsWith(E.toLowerCase()));return a!==l?a:void 0}function zm(a,d){return a.map((l,E)=>a[(d+E)%a.length])}function dm(a){var {options:d,tooltip:l,
popoverSide:E,chevron:W=!0,value:ka,onValueChange:oa}=a;a=If(a,"options tooltip popoverSide chevron value onValueChange".split(" "));const [Fa,Qa]=uB.useState(!1);return(0,sb.jsx)("div",of(oe({},a),{className:"tl-select-input",children:(0,sb.jsxs)(Au,{open:Fa,onOpenChange:Qa,value:ka,onValueChange:oa,children:[(0,sb.jsx)(gc,{content:l,side:E,children:(0,sb.jsxs)(Rk,{className:"tl-select-input-trigger",children:[(0,sb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,sb.jsx)(qm,{})}),
W&&(0,sb.jsx)(zt,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,sb.jsx)(Wh,{name:Fa?"chevron-up":"chevron-down"})})]})}),(0,sb.jsx)(Bu,{className:"tl-select-input-portal",children:(0,sb.jsxs)(Lx,{className:"tl-select-input-content",side:E,position:"popper",sideOffset:14,align:"center",onKeyDown:Xa=>Xa.stopPropagation(),children:[(0,sb.jsx)(zG,{}),(0,sb.jsx)(At,{className:"tl-select-input-viewport",children:d.map(Xa=>(0,sb.jsx)(Jm,{className:"tl-select-input-select-item",value:Xa.value,
children:(0,sb.jsx)(EB,{children:Xa.label})},Xa.value))}),(0,sb.jsx)(AG,{})]})})]})}))}function Hi(a){var {scaleLevel:d,compact:l,popoverSide:E}=a;If(a,["scaleLevel","compact","popoverSide"]);const W=ef();return(0,sb.jsx)(dm,{tooltip:"Scale level",options:[{label:l?"XS":"Extra Small",value:"xs"},{label:l?"SM":"Small",value:"sm"},{label:l?"MD":"Medium",value:"md"},{label:l?"LG":"Large",value:"lg"},{label:l?"XL":"Extra Large",value:"xl"},{label:l?"XXL":"Huge",value:"xxl"}],value:d,popoverSide:E,chevron:!l,
onValueChange:ka=>{W.api.setScaleLevel(ka)}})}function wj(a,d){return function(l){return a(d(l))}}function bn(a,d){return d(a)}function Nm(a,d){return function(l){return a(d,l)}}function qj(a,d){return function(){return a(d)}}function Nl(a,d){d(a);return a}function Yh(){for(var a=arguments.length,d=Array(a),l=0;l<a;l++)d[l]=arguments[l];return d}function Wn(a){a()}function Xn(a){return function(){return a}}function Ol(){for(var a=arguments.length,d=Array(a),l=0;l<a;l++)d[l]=arguments[l];return function(){d.map(Wn)}}
function ml(){}function lh(a,d){return a(1,d)}function ok(a,d){a(0,d)}function sm(a){a(2)}function Ko(a){return a(4)}function Zg(a,d){return lh(a,Nm(d,0))}function ci(a,d){var l=a(1,function(E){l();d(E)});return l}function Cg(){var a=[];return function(d,l){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(l),function(){var E=a.indexOf(l);-1<E&&a.splice(E,1)};case 0:a.slice().forEach(function(E){E(l)});break;default:throw Error("unrecognized action "+d);}}}function Yf(a){var d=a,l=
Cg();return function(E,W){switch(E){case 1:W(d);break;case 0:d=W;break;case 4:return d}return l(E,W)}}function xn(a){var d,l;return function(E,W){switch(E){case 1:if(W){if(l===W)break;d&&d();l=W;return d=a(1,W)}d&&d();return ml;case 2:d&&d();l=null;break;default:throw Error("unrecognized action "+E);}}}function dk(a){return Nl(Cg(),function(d){return Zg(a,d)})}function Sj(a,d){return Nl(Yf(d),function(l){return Zg(a,l)})}function ll(){for(var a=arguments.length,d=Array(a),l=0;l<a;l++)d[l]=arguments[l];
return function(E){return d.reduceRight(bn,E)}}function Ye(a){for(var d=arguments.length,l=Array(1<d?d-1:0),E=1;E<d;E++)l[E-1]=arguments[E];var W=ll.apply(void 0,l);return function(ka,oa){switch(ka){case 1:return lh(a,W(oa));case 2:a(2);break;default:throw Error("unrecognized action "+ka);}}}function ek(a,d){return a===d}function Mg(a){void 0===a&&(a=ek);var d;return function(l){return function(E){a(d,E)||(d=E,l(E))}}}function qh(a){return function(d){return function(l){a(l)&&d(l)}}}function sg(a){return function(d){return wj(d,
a)}}function Ok(a){return function(d){return function(){return d(a)}}}function em(a,d){return function(l){return function(E){return l(d=a(d,E))}}}function zn(a){return function(d){return function(l){0<a?a--:d(l)}}}function pj(a){var d,l;return function(E){return function(W){d=W;l||=setTimeout(function(){l=void 0;E(d)},a)}}}function mn(a){var d,l;return function(E){return function(W){d=W;l&&clearTimeout(l);l=setTimeout(function(){E(d)},a)}}}function Fh(){for(var a=arguments.length,d=Array(a),l=0;l<
a;l++)d[l]=arguments[l];var E=Array(d.length),W=0,ka=null,oa=Math.pow(2,d.length)-1;d.forEach(function(Fa,Qa){var Xa=Math.pow(2,Qa);lh(Fa,function(db){var kb=W;W|=Xa;E[Qa]=db;kb!==oa&&W===oa&&ka&&(ka(),ka=null)})});return function(Fa){return function(Qa){var Xa=function(){return Fa([Qa].concat(E))};W===oa?Xa():ka=Xa}}}function Ji(){for(var a=arguments.length,d=Array(a),l=0;l<a;l++)d[l]=arguments[l];return function(E,W){switch(E){case 1:return Ol.apply(void 0,d.map(function(ka){return ka(1,W)}));case 2:break;
default:throw Error("unrecognized action "+E);}}}function Uh(a,d){void 0===d&&(d=ek);return Ye(a,Mg(d))}function Tj(){for(var a=Cg(),d=arguments.length,l=Array(d),E=0;E<d;E++)l[E]=arguments[E];var W=Array(l.length),ka=0,oa=Math.pow(2,l.length)-1;l.forEach(function(Fa,Qa){var Xa=Math.pow(2,Qa);lh(Fa,function(db){W[Qa]=db;ka|=Xa;ka===oa&&a(0,W)})});return function(Fa,Qa){switch(Fa){case 1:return ka===oa&&Qa(W),a(1,Qa);case 2:a(2);break;default:throw Error("unrecognized action "+Fa);}}}function bi(a,
d,l){void 0===d&&(d=[]);l=(void 0===l?{singleton:!0}:l).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:l}}function cn(a){var d=new Map;return function W(E){var ka=E.id,oa=E.constructor,Fa=E.dependencies;if((E=E.singleton)&&d.has(ka))return d.get(ka);oa=oa(Fa.map(function(Qa){return W(Qa)}));E&&d.set(ka,oa);return oa}(a)}function xo(a,d){if(null==a)return{};var l={},E=Object.keys(a),W;for(W=0;W<E.length;W++){var ka=E[W];0<=d.indexOf(ka)||(l[ka]=a[ka])}return l}function Np(a,d){if(a){if("string"===
typeof a)return Zo(a,d);var l=Object.prototype.toString.call(a).slice(8,-1);"Object"===l&&a.constructor&&(l=a.constructor.name);if("Map"===l||"Set"===l)return Array.from(a);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return Zo(a,d)}}function Zo(a,d){if(null==d||d>a.length)d=a.length;for(var l=0,E=Array(d);l<d;l++)E[l]=a[l];return E}function Yn(a,d){var l="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(l)return(l=l.call(a)).next.bind(l);if(Array.isArray(a)||
(l=Np(a))||d&&a&&"number"===typeof a.length){l&&(a=l);var E=0;return function(){return E>=a.length?{done:!0}:{done:!1,value:a[E++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function co(a,d){for(var l={},E={},W=0,ka=a.length;W<ka;)E[a[W]]=1,W+=1;for(var oa in d)E.hasOwnProperty(oa)||(l[oa]=d[oa]);return l}function yn(a,d,l){function E(kb,Lb){kb.propsReady&&(0,kb.propsReady)(0,!1);for(var Vb=
Yn(oa),Qb;!(Qb=Vb()).done;)Qb=Qb.value,(0,kb[d.required[Qb]])(0,Lb[Qb]);for(Vb=Yn(Fa);!(Qb=Vb()).done;)if(Qb=Qb.value,Qb in Lb)(0,kb[d.optional[Qb]])(0,Lb[Qb]);kb.propsReady&&(0,kb.propsReady)(0,!0)}function W(kb){return Qa.reduce(function(Lb,Vb){Lb[Vb]=function(Qb){(0,kb[d.methods[Vb]])(0,Qb)};return Lb},{})}function ka(kb){return Xa.reduce(function(Lb,Vb){Lb[Vb]=xn(kb[d.events[Vb]]);return Lb},{})}var oa=Object.keys(d.required||{}),Fa=Object.keys(d.optional||{}),Qa=Object.keys(d.methods||{}),Xa=
Object.keys(d.events||{}),db=(0,Fn.createContext)({});return{Component:(0,Fn.forwardRef)(function(kb,Lb){var Vb=kb.children,Qb=xo(kb,DG),lc=(0,Fn.useState)(function(){return Nl(cn(a),function(ac){return E(ac,Qb)})})[0],xc=(0,Fn.useState)(qj(ka,lc))[0];ws(function(){for(var ac=Yn(Xa),pc;!(pc=ac()).done;)if(pc=pc.value,pc in Qb)(0,xc[pc])(1,Qb[pc]);return function(){Object.values(xc).map(sm)}},[Qb,xc,lc]);ws(function(){E(lc,Qb)});(0,Fn.useImperativeHandle)(Lb,Xn(W(lc)));return(0,Fn.createElement)(db.Provider,
{value:lc},l?(0,Fn.createElement)(l,co([].concat(oa,Fa,Xa),Qb),Vb):Vb)}),usePublisher:function(kb){return(0,Fn.useCallback)(Nm(ok,(0,Fn.useContext)(db)[kb]),[kb])},useEmitterValue:function(kb){var Lb=(0,Fn.useContext)(db)[kb];kb=(0,Fn.useState)(qj(Ko,Lb));var Vb=kb[0],Qb=kb[1];ws(function(){return lh(Lb,function(lc){lc!==Vb&&Qb(Xn(lc))})},[Lb,Vb]);return Vb},useEmitter:function(kb,Lb){var Vb=(0,Fn.useContext)(db)[kb];ws(function(){return Vb(1,Lb)},[Lb,Vb])}}}function Bg(){return Bg=Object.assign||
function(a){for(var d=1;d<arguments.length;d++){var l=arguments[d],E;for(E in l)Object.prototype.hasOwnProperty.call(l,E)&&(a[E]=l[E])}return a},Bg.apply(this,arguments)}function eo(a,d){if(null==a)return{};var l,E,W={},ka=Object.keys(a);for(E=0;E<ka.length;E++)0<=d.indexOf(l=ka[E])||(W[l]=a[l]);return W}function ro(a,d){(null==d||d>a.length)&&(d=a.length);for(var l=0,E=Array(d);l<d;l++)E[l]=a[l];return E}function vm(a,d){var l="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(l)return(l=
l.call(a)).next.bind(l);if(Array.isArray(a)||(l=function(W,ka){if(W){if("string"==typeof W)return ro(W,ka);var oa=Object.prototype.toString.call(W).slice(8,-1);return"Object"===oa&&W.constructor&&(oa=W.constructor.name),"Map"===oa||"Set"===oa?Array.from(W):"Arguments"===oa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(oa)?ro(W,ka):void 0}}(a))||d&&a&&"number"==typeof a.length){l&&(a=l);var E=0;return function(){return E>=a.length?{done:!0}:{done:!1,value:a[E++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function Sk(a,d){void 0===d&&(d=!0);var l=(0,wi.useRef)(null),E=function(ka){};if("undefined"!=typeof ResizeObserver){var W=new ResizeObserver(function(ka){ka=ka[0].target;null!==ka.offsetParent&&a(ka)});E=function(ka){ka&&d?(W.observe(ka),l.current=ka):(l.current&&W.unobserve(l.current),l.current=null)}}return{ref:l,callbackRef:E}}function Vh(a,d){return void 0===d&&(d=!0),Sk(a,d).callbackRef}function Gj(a,d,l,E,W,ka,oa){return Sk(function(Fa){for(var Qa=function(kb,Lb,Vb,Qb){Vb=kb.length;if(0===
Vb)return null;for(var lc=[],xc=0;xc<Vb;xc++){var ac=kb.item(xc);if(ac&&void 0!==ac.dataset.index){var pc=parseInt(ac.dataset.index),mc=parseFloat(ac.dataset.knownSize),Jc=Lb(ac,"offsetHeight");if(0===Jc&&Qb("Zero-sized element, this should not happen",{child:ac},Km.ERROR),Jc!==mc)ac=lc[lc.length-1],0===lc.length||ac.size!==Jc||ac.endIndex!==pc-1?lc.push({startIndex:pc,endIndex:pc,size:Jc}):lc[lc.length-1].endIndex++}}return lc}(Fa.children,d,0,W),Xa=Fa.parentElement;!Xa.dataset.virtuosoScroller;)Xa=
Xa.parentElement;var db="window"===Xa.firstElementChild.dataset.viewportType;E({scrollTop:Math.max(oa?oa.scrollTop:db?window.pageYOffset||document.documentElement.scrollTop:Xa.scrollTop,0),scrollHeight:oa?oa.scrollHeight:db?document.documentElement.scrollHeight:Xa.scrollHeight,viewportHeight:oa?oa.offsetHeight:db?window.innerHeight:Xa.offsetHeight});null==ka||ka(function(kb,Lb,Vb){return"normal"===Lb||null!=Lb&&Lb.endsWith("px")||Vb("row-gap was not resolved to pixel value correctly",Lb,Km.WARN),
"normal"===Lb?0:parseInt(null!=Lb?Lb:"0",10)}(0,getComputedStyle(Fa).rowGap,W));null!==Qa&&a(Qa)},l)}function Vm(a,d){return Math.round(a.getBoundingClientRect()[d])}function so(a,d,l,E,W){void 0===E&&(E=ml);var ka=(0,wi.useRef)(null),oa=(0,wi.useRef)(null),Fa=(0,wi.useRef)(null),Qa=(0,wi.useRef)(!1),Xa=(0,wi.useCallback)(function(db){db=db.target;var kb=db===window||db===document,Lb=kb?window.pageYOffset||document.documentElement.scrollTop:db.scrollTop,Vb=kb?document.documentElement.scrollHeight:
db.scrollHeight,Qb=kb?window.innerHeight:db.offsetHeight;db=function(){a({scrollTop:Math.max(Lb,0),scrollHeight:Vb,viewportHeight:Qb})};Qa.current?(0,Nx.flushSync)(db):db();Qa.current=!1;null!==oa.current&&(Lb===oa.current||0>=Lb||Lb===Vb-Qb)&&(oa.current=null,d(!0),Fa.current&&(clearTimeout(Fa.current),Fa.current=null))},[a,d]);return(0,wi.useEffect)(function(){var db=W||ka.current;return E(W||ka.current),Xa({target:db}),db.addEventListener("scroll",Xa,{passive:!0}),function(){E(null);db.removeEventListener("scroll",
Xa)}},[ka,Xa,l,E,W]),{scrollerRef:ka,scrollByCallback:function(db){Qa.current=!0;ka.current.scrollBy(db)},scrollToCallback:function(db){var kb=ka.current;if(kb&&!("offsetHeight"in kb&&0===kb.offsetHeight)){var Lb,Vb,Qb,lc="smooth"===db.behavior;if(kb===window?(Vb=Math.max(Vm(document.documentElement,"height"),document.documentElement.scrollHeight),Lb=window.innerHeight,Qb=document.documentElement.scrollTop):(Vb=kb.scrollHeight,Lb=Vm(kb,"height"),Qb=kb.scrollTop),db.top=Math.ceil(Math.max(Math.min(Vb-
Lb,db.top),0)),1.01>Math.abs(Lb-Vb)||db.top===Qb)return a({scrollTop:Qb,scrollHeight:Vb,viewportHeight:Lb}),void(lc&&d(!0));lc?(oa.current=db.top,Fa.current&&clearTimeout(Fa.current),Fa.current=setTimeout(function(){Fa.current=null;oa.current=null;d(!0)},1E3)):oa.current=null;kb.scrollTo(db)}}}}function w(a,d,l,E,W){return void 0===E&&(E=hj),void 0===W&&(W=hj),{k:a,v:d,lvl:l,l:E,r:W}}function U(a,d){if(a===hj)return hj;var l=a.k,E=a.l,W=a.r;if(d===l){if(E===hj)return W;if(W===hj)return E;d=pb(E);
return Tc(Zb(a,{k:d[0],v:d[1],l:ub(E)}))}return Tc(Zb(a,d<l?{l:U(E,d)}:{r:U(W,d)}))}function wa(a,d,l){return(void 0===l&&(l="k"),a===hj)?[-Infinity,void 0]:a[l]===d?[a.k,a.v]:a[l]<d?(d=wa(a.r,d,l),-Infinity===d[0]?[a.k,a.v]:d):wa(a.l,d,l)}function sa(a,d,l){return a===hj?w(d,l,1):d===a.k?Zb(a,{k:d,v:l}):Od(Ee(Zb(a,d<a.k?{l:sa(a.l,d,l)}:{r:sa(a.r,d,l)})))}function Ea(a,d,l){if(a===hj)return[];var E=a.k,W=a.v,ka=a.r,oa=[];return E>d&&(oa=oa.concat(Ea(a.l,d,l))),E>=d&&E<=l&&oa.push({k:E,v:W}),E<=l&&
(oa=oa.concat(Ea(ka,d,l))),oa}function Ya(a){return a===hj?[]:[].concat(Ya(a.l),[{k:a.k,v:a.v}],Ya(a.r))}function pb(a){return a.r===hj?[a.k,a.v]:pb(a.r)}function ub(a){return a.r===hj?a.l:Tc(Zb(a,{r:ub(a.r)}))}function Zb(a,d){return w(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==d.r?d.r:a.r)}function Dc(a){return a===hj||a.lvl>a.r.lvl}function Tc(a){var d=a.l,l=a.r,E=a.lvl;if(l.lvl>=E-1&&d.lvl>=E-1)return a;if(E>l.lvl+1){if(Dc(d))return Ee(Zb(a,
{lvl:E-1}));if(d===hj||d.r===hj)throw Error("Unexpected empty nodes");return Zb(d.r,{l:Zb(d,{r:d.r.l}),r:Zb(a,{l:d.r.r,lvl:E-1}),lvl:E})}if(Dc(a))return Od(Zb(a,{lvl:E-1}));if(l===hj||l.l===hj)throw Error("Unexpected empty nodes");d=l.l;var W=Dc(d)?l.lvl-1:l.lvl;return Zb(d,{l:Zb(a,{r:d.l,lvl:E-1}),r:Od(Zb(l,{l:d.r,lvl:W})),lvl:d.lvl+1})}function Gd(a,d,l){return a===hj?[]:Nd(Ea(a,wa(a,d)[0],l),function(E){return{index:E.k,value:E.v}})}function Nd(a,d){var l=a.length;if(0===l)return[];var E=d(a[0]),
W=E.index;E=E.value;for(var ka=[],oa=1;oa<l;oa++){var Fa=d(a[oa]),Qa=Fa.index;Fa=Fa.value;ka.push({start:W,end:Qa-1,value:E});W=Qa;E=Fa}return ka.push({start:W,end:Infinity,value:E}),ka}function Od(a){var d=a.r,l=a.lvl;return d===hj||d.r===hj||d.lvl!==l||d.r.lvl!==l?a:Zb(d,{l:Zb(a,{r:d.l}),lvl:l+1})}function Ee(a){var d=a.l;return d===hj||d.lvl!==a.lvl?a:Zb(d,{r:Zb(a,{l:d.r})})}function Lf(a,d,l,E){void 0===E&&(E=0);for(var W=a.length-1;E<=W;){var ka=Math.floor((E+W)/2),oa=l(a[ka],d);if(0===oa)return ka;
if(-1===oa){if(2>W-E)return ka-1;W=ka-1}else{if(W===E)return ka;E=ka+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function ch(a){var d=a.size,l=a.startIndex,E=a.endIndex;return function(W){return W.start===l&&(W.end===E||Infinity===W.end)&&W.value===d}}function Xj(a,d){a=a.index;return d===a?0:d<a?-1:1}function Kg(a,d){a=a.offset;return d===a?0:d<a?-1:1}function Nh(a){return{index:a.index,value:a}}function Ii(a,d,l,E){var W=0,ka=0,oa=0,Fa;0!==d?(oa=a[Fa=
Lf(a,d-1,Xj)].offset,ka=wa(l,d-1),W=ka[0],ka=ka[1],a.length&&a[Fa].size===wa(l,d)[1]&&--Fa,a=a.slice(0,Fa+1)):a=[];for(d=vm(Gd(l,d,Infinity));!(l=d()).done;)Fa=l.value,l=Fa.start,Fa=Fa.value,W=l-W,oa=W*ka+oa+W*E,a.push({offset:oa,size:Fa,index:l}),W=l,ka=Fa;return{offsetTree:a,lastIndex:W,lastOffset:oa,lastSize:ka}}function ij(a,d){var l=d[0],E=d[1],W=d[3];0<l.length&&(0,d[2])("received item sizes",l,Km.DEBUG);var ka=a.sizeTree;d=ka;var oa=0;if(0<E.length&&ka===hj&&2===l.length){var Fa=l[0].size,
Qa=l[1].size;d=E.reduce(function(db,kb){return sa(sa(db,kb,Fa),kb+1,Qa)},d)}else l=function(db,kb){var Lb,Vb=db===hj?0:Infinity;for(kb=vm(kb);!(Lb=kb()).done;){var Qb=Lb.value;Lb=Qb.size;var lc=Qb.startIndex,xc=Qb.endIndex;if(Vb=Math.min(Vb,lc),db===hj)db=sa(db,0,Lb);else{var ac=Gd(db,lc-1,xc+1);if(!ac.some(ch(Qb))){var pc,mc=Qb=!1;for(ac=vm(ac);!(pc=ac()).done;){var Jc=pc.value;pc=Jc.start;var Qc=Jc.end;Jc=Jc.value;Qb?(xc>=pc||Lb===Jc)&&(db=U(db,pc)):(mc=Jc!==Lb,Qb=!0);Qc>xc&&xc>=pc&&Jc!==Lb&&(db=
sa(db,xc+1,Jc))}mc&&(db=sa(db,lc,Lb))}}}return[db,Vb]}(d,l),d=l[0],oa=l[1];if(d===ka)return a;a=Ii(a.offsetTree,oa,d,W);var Xa=a.offsetTree;return{sizeTree:d,offsetTree:Xa,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:E.reduce(function(db,kb){return sa(db,kb,qi(kb,Xa,W))},hj),groupIndices:E}}function qi(a,d,l){if(0===d.length)return 0;d=d[Lf(d,a,Xj)];a-=d.index;a=d.size*a+(a-1)*l+d.offset;return 0<a?a+l:a}function fh(a,d,l){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+
1;a=bg("LAST"===a.index?l:a.index,d);return Math.max(0,a,Math.min(l,a))}function bg(a,d){if(d.groupOffsetTree===hj)return a;for(var l=0;d.groupIndices[l]<=a+l;)l++;return a+l}function ki(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&Cu||(a.behavior="auto"),a.offset||(a.offset=0),a}function uh(a){return!!a&&("smooth"===a?"smooth":"auto")}function gl(a){return a.reduce(function(d,l){return d.groupIndices.push(d.totalCount),d.totalCount+=l+1,d},{totalCount:0,groupIndices:[]})}
function Jj(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function Fk(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function Om(a,d,l){return"number"==typeof a?"up"===l&&"top"===d||"down"===l&&"bottom"===d?a:0:"up"===l?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function Xl(a,d,l){if(0===a.length)return[];if(d.groupOffsetTree===hj)return a.map(function(Qa){return Bg({},Qa,{index:Qa.index+l,originalIndex:Qa.index})});var E,W=[],ka=Gd(d.groupOffsetTree,a[0].index,
a[a.length-1].index),oa=void 0,Fa=0;for(a=vm(a);!(E=a()).done;)E=E.value,(!oa||oa.end<E.index)&&(oa=ka.shift(),Fa=d.groupIndices.indexOf(oa.start)),W.push(Bg({},E.index===oa.start?{type:"group",index:Fa}:{index:E.index-(Fa+1)+l,groupIndex:Fa},{size:E.size,offset:E.offset,originalIndex:E.index,data:E.data}));return W}function Mn(a,d,l,E,W,ka){var oa=0,Fa=0;0<a.length&&(oa=a[0].offset,Fa=a[a.length-1],Fa=Fa.offset+Fa.size);var Qa=l-W.lastIndex,Xa=oa;E=W.lastOffset+Qa*W.lastSize+(Qa-1)*E-Fa;return{items:Xl(a,
W,ka),topItems:Xl(d,W,ka),topListHeight:d.reduce(function(db,kb){return kb.size+db},0),offsetTop:oa,offsetBottom:E,top:Xa,bottom:Fa,totalCount:l,firstItemIndex:ka}}function sq(a){var d,l=!1;return function(){return l||(l=!0,d=a()),d}}function bo(a,d){var l=(0,wi.useRef)(null),E=(0,wi.useCallback)(function(Qa){if(null!==Qa&&Qa.offsetParent){var Xa=Qa.getBoundingClientRect();Qa=Xa.width;if(d){var db=d.getBoundingClientRect();Xa=Xa.top-db.top;db=db.height-Math.max(0,Xa);Xa+=d.scrollTop}else db=window.innerHeight-
Math.max(0,Xa.top),Xa=Xa.top+window.pageYOffset;l.current={offsetTop:Xa,visibleHeight:db,visibleWidth:Qa};a(l.current)}},[a,d]),W=Sk(E),ka=W.callbackRef,oa=W.ref,Fa=(0,wi.useCallback)(function(){E(oa.current)},[E,oa]);return(0,wi.useEffect)(function(){if(d){d.addEventListener("scroll",Fa);var Qa=new ResizeObserver(Fa);return Qa.observe(d),function(){d.removeEventListener("scroll",Fa);Qa.unobserve(d)}}return window.addEventListener("scroll",Fa),window.addEventListener("resize",Fa),function(){window.removeEventListener("scroll",
Fa);window.removeEventListener("resize",Fa)}},[Fa,d]),ka}function vh(a){return a}function nn(a,d){var l=Cg();return lh(l,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),Zg(l,a),l}function Fi(a,d){if("string"!=typeof a)return{context:d}}function Uo(a){var d=a.usePublisher,l=a.useEmitter,E=a.useEmitterValue;return rh.memo(function(W){var ka=W.style,oa=W.children;W=eo(W,Kq);var Fa=d("scrollContainerState"),Qa=
E("ScrollerComponent"),Xa=d("smoothScrollTargetReached"),db=E("scrollerRef"),kb=E("context");Fa=so(Fa,Xa,Qa,db);Xa=Fa.scrollerRef;db=Fa.scrollByCallback;return l("scrollTo",Fa.scrollToCallback),l("scrollBy",db),(0,wi.createElement)(Qa,Bg({ref:Xa,style:Bg({},RB,ka),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},W,Fi(Qa,kb)),oa)})}function Zn(a){var d=a.usePublisher,l=a.useEmitter,E=a.useEmitterValue;return rh.memo(function(W){var ka=W.style,oa=W.children;W=eo(W,MB);var Fa=
d("windowScrollContainerState"),Qa=E("ScrollerComponent"),Xa=d("smoothScrollTargetReached"),db=E("totalListHeight"),kb=E("deviation"),Lb=E("customScrollParent"),Vb=E("context");Xa=so(Fa,Xa,Qa,ml,Lb);var Qb=Xa.scrollerRef;Fa=Xa.scrollByCallback;Xa=Xa.scrollToCallback;return FB(function(){return Qb.current=Lb||window,function(){Qb.current=null}},[Qb,Lb]),l("windowScrollTo",Xa),l("scrollBy",Fa),(0,wi.createElement)(Qa,Bg({style:Bg({position:"relative"},ka,0!==db?{height:db+kb}:{}),"data-virtuoso-scroller":!0},
W,Fi(Qa,Vb)),oa)})}function Vo(a,d,l){return Array.from({length:d-a+1}).map(function(E,W){return{index:W+a,data:null==l?void 0:l[W+a]}})}function Op(a,d){return a&&a.column===d.column&&a.row===d.row}function dn(a,d,l,E){var W=l.height;return void 0===W||0===E.length?{top:0,bottom:0}:{top:In(a,d,l,E[0].index),bottom:In(a,d,l,E[E.length-1].index)+W}}function In(a,d,l,E){var W=d.column;a=Bs(1,Tv((a.width+W)/(l.width+W)));E=Tv(E/a);l=E*l.height+Bs(0,E-1)*d.row;return 0<l?l+d.row:l}function Pl(a,d,l){return"normal"===
d||null!=d&&d.endsWith("px")||l(a+" was not resolved to pixel value correctly",d,Km.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function nl(a,d){nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,E){l.__proto__=E;return l};return nl(a,d)}function to(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;nl(a,d)}function wo(a){wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return wo(a)}function vo(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Sp(a,d,l){Sp=vo()?Reflect.construct.bind():function(E,W,ka){var oa=[null];oa.push.apply(oa,W);E=new (Function.bind.apply(E,oa));ka&&nl(E,ka.prototype);return E};return Sp.apply(null,arguments)}function sp(a){var d="function"===typeof Map?new Map:void 0;sp=function(l){function E(){return Sp(l,
arguments,wo(this).constructor)}if(null===l||-1===Function.toString.call(l).indexOf("[native code]"))return l;if("function"!==typeof l)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(l))return d.get(l);d.set(l,E)}E.prototype=Object.create(l.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}});return nl(E,l)};return sp(a)}function qq(a,d,l){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*l)}function zp(a,
d,l,E){void 0===E&&(E=qq);if(0===d)return E(l,l,l);a=(a%360+360)%360/60;var W=(1-Math.abs(2*l-1))*d,ka=W*(1-Math.abs(a%2-1)),oa=d=0,Fa=0;0<=a&&1>a?(d=W,oa=ka):1<=a&&2>a?(d=ka,oa=W):2<=a&&3>a?(oa=W,Fa=ka):3<=a&&4>a?(oa=ka,Fa=W):4<=a&&5>a?(d=ka,Fa=W):5<=a&&6>a&&(d=W,Fa=ka);l-=W/2;return E(d+l,oa+l,Fa+l)}function Vq(a){if("string"!==typeof a)throw new Fo(3);if("string"===typeof a){var d=a.toLowerCase();a=cC[d]?"#"+cC[d]:a}if(a.match(PG))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],
16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(dC))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(Yv))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(Zv))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],
16),alpha:d};if(d=Wx.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=eC.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var l=fC.exec(a);if(l){d=parseInt(""+l[1],10);var E=parseInt(""+l[2],10)/100;l=parseInt(""+l[3],10)/100;d="rgb("+zp(d,E,l)+")";E=Wx.exec(d);if(!E)throw new Fo(4,a,d);return{red:parseInt(""+E[1],10),
green:parseInt(""+E[2],10),blue:parseInt(""+E[3],10)}}if(d=gC.exec(a.substring(0,50))){E=parseInt(""+d[1],10);l=parseInt(""+d[2],10)/100;var W=parseInt(""+d[3],10)/100;E="rgb("+zp(E,l,W)+")";l=Wx.exec(E);if(!l)throw new Fo(4,a,E);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new Fo(5);}function An(a){a=a.toString(16);return 1===a.length?"0"+a:a}function Qq(a,d,l){return Ku("#"+An(Math.round(255*
a))+An(Math.round(255*d))+An(Math.round(255*l)))}function Wo(a,d,l){if("number"===typeof a&&"number"===typeof d&&"number"===typeof l)return Ku("#"+An(a)+An(d)+An(l));if("object"===typeof a&&void 0===d&&void 0===l)return Ku("#"+An(a.red)+An(a.green)+An(a.blue));throw new Fo(6);}function Pp(a){if("object"!==typeof a)throw new Fo(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?Wo(a.red,a.green,a.blue):
"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new Fo(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return Wo(a);if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?zp(a.hue,a.saturation,a.lightness,Qq):"rgba("+zp(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new Fo(2);
return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=zp(a.hue,a.saturation,a.lightness,Qq);else throw new Fo(1);return a}throw new Fo(8);}function Qp(a,d,l){return function(){var E=l.concat(Array.prototype.slice.call(arguments));return E.length>=d?a.apply(this,E):Qp(a,d,E)}}function Rp(a,d){if("transparent"===d)return d;d=Vq(d);var l=d.red/255,E=d.green/255,W=d.blue/255,
ka=Math.max(l,E,W),oa=Math.min(l,E,W),Fa=(ka+oa)/2;if(ka===oa)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:Fa,alpha:d.alpha}:{hue:0,saturation:0,lightness:Fa};else{var Qa=ka-oa;oa=.5<Fa?Qa/(2-ka-oa):Qa/(ka+oa);switch(ka){case l:l=(E-W)/Qa+(E<W?6:0);break;case E:l=(W-l)/Qa+2;break;default:l=(l-E)/Qa+4}l*=60;d=void 0!==d.alpha?{hue:l,saturation:oa,lightness:Fa,alpha:d.alpha}:{hue:l,saturation:oa,lightness:Fa}}Fa=Ze;a=d.lightness-parseFloat(a);return Pp(Fa({},d,{lightness:Math.max(0,Math.min(1,a))}))}
function Pm(a,d){var l;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let E=null!=(l=d.fill)?l:a.props.fill;void 0===E||Vi(E)||"var(--ls-secondary-background-color)"===E||d.noFill||!ky.includes(a.props.type)||(a=Xx(.3,E),d.stroke=a);return d}function yp({strokeWidth:a,size:d,mode:l}){return"svg"===l?(0,sb.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,
d[1]-2*a),strokeWidth:4*a}):(0,sb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function vq(){const a=ef();return"panning"===a.inputs.state||"pinching"===a.inputs.state}function Jn({left:a,middle:d,right:l,stroke:E,strokeWidth:W}){return(0,sb.jsxs)("g",{children:[(0,sb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${l}`}),(0,sb.jsx)("path",{d:`M ${a} L ${d} ${l}`,fill:"none",
stroke:E,strokeWidth:W,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Xo(a,d,l){d=J(a,d,a,l).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(l=d[0])?me.rotWith(l,a,Math.PI/6):a;a=l?me.rotWith(l,a,-Math.PI/6):a;return{left:d,right:a}}function Tp(a,d,l){const {left:E,right:W}=Xo(a,d,l);return`M ${E} L ${a} ${W}`}function Wq(a,d,l,E,W){a=a.strokeWidth;var ka=me.dist(d,l);a=Math.min(ka/3,16*a);ka=[];ka.push(`M ${d} L ${l}`);
E&&ka.push(Tp(d,l,a));W&&ka.push(Tp(l,d,a));return ka.join(" ")}function jm({id:a,bounds:d,labelSize:l,offset:E,scale:W=1}){return(0,sb.jsx)("defs",{children:(0,sb.jsxs)("mask",{id:a+"_clip",children:[(0,sb.jsx)("rect",{x:-100,y:-100,width:d.width+200,height:d.height+200,fill:"white"}),(0,sb.jsx)("rect",{x:d.width/2-l[0]/2*W+((null==E?void 0:E[0])||0),y:d.height/2-l[1]/2*W+((null==E?void 0:E[1])||0),width:l[0]*W,height:l[1]*W,rx:4*W,ry:4*W,fill:"black"})]})})}function Up(a,d,l,E=W=>W){return a*E(.5-
d*(.5-l))}function tp(a){return[-a[0],-a[1]]}function fm(a,d){return[a[0]+d[0],a[1]+d[1]]}function Tk(a,d){return[a[0]-d[0],a[1]-d[1]]}function gm(a,d){return[a[0]*d,a[1]*d]}function Bm(a){return[a[1],-a[0]]}function Rq(a,d){return a[0]===d[0]&&a[1]===d[1]}function up(a){return a[0]*a[0]+a[1]*a[1]}function vp(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function La(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function Wa(a,d,l){let E=Math.sin(l);l=Math.cos(l);let W=a[0]-d[0];a=a[1]-d[1];return[W*
l-a*E+d[0],W*E+a*l+d[1]]}function Ka(a,d,l){return fm(a,gm(Tk(d,a),l))}function fb(a,d,l){return fm(a,gm(d,l))}function Kb(a,d={}){let {size:l=16,smoothing:E=.5,thinning:W=.5,simulatePressure:ka=!0,easing:oa=qd=>qd,start:Fa={},end:Qa={},last:Xa=!1}=d,{cap:db=!0,easing:kb=qd=>qd*(2-qd)}=Fa,{cap:Lb=!0,easing:Vb=qd=>--qd*qd*qd+1}=Qa;if(0===a.length||0>=l)return[];var Qb=a[a.length-1].runningLength;let lc=!1===Fa.taper?0:!0===Fa.taper?Math.max(l,Qb):Fa.taper,xc=!1===Qa.taper?0:!0===Qa.taper?Math.max(l,
Qb):Qa.taper;var ac=Math.pow(l*E,2);d=[];let pc=[];var mc=a.slice(0,10).reduce((qd,sd)=>{var ke=sd.pressure;ka&&(sd=Gs(1,sd.distance/l),ke=Gs(1,1-sd),ke=Gs(1,qd+.275*(ke-qd)*sd));return(qd+ke)/2},a[0].pressure),Jc=Up(l,W,a[a.length-1].pressure,oa),Qc;let td=a[0].vector;var he=a[0].point;let ne=he;var Ge=he;let jf=ne;var rf=!1;for(var We=0;We<a.length;We++){var {pressure:uf}=a[We];let {point:qd,vector:sd,distance:ke,runningLength:pf}=a[We];if(We<a.length-1&&3>Qb-pf)continue;W?(ka&&(Jc=Gs(1,ke/l),uf=
Gs(1,1-Jc),uf=Gs(1,mc+.275*(uf-mc)*Jc)),Jc=Up(l,W,uf,oa)):Jc=l/2;void 0===Qc&&(Qc=Jc);var Qd=pf<lc?kb(pf/lc):1,nd=Qb-pf<xc?Vb((Qb-pf)/xc):1;Jc=Math.max(.01,Jc*Math.min(Qd,nd));nd=(We<a.length-1?a[We+1]:a[We]).vector;let Af=We<a.length-1?sd[0]*nd[0]+sd[1]*nd[1]:1;Qd=null!==Af&&0>Af;if(0>sd[0]*td[0]+sd[1]*td[1]&&!rf||Qd){he=gm(Bm(td),Jc);for(let ng=1/13,Kf=0;1>=Kf;Kf+=ng)Ge=Wa(Tk(qd,he),qd,zr*Kf),d.push(Ge),jf=Wa(fm(qd,he),qd,zr*-Kf),pc.push(jf);he=Ge;ne=jf;Qd&&(rf=!0)}else(rf=!1,We===a.length-1)?(uf=
gm(Bm(sd),Jc),d.push(Tk(qd,uf)),pc.push(fm(qd,uf))):(mc=gm(Bm(Ka(nd,sd,Af)),Jc),Ge=Tk(qd,mc),(1>=We||up(Tk(he,Ge))>ac)&&(d.push(Ge),he=Ge),jf=fm(qd,mc),(1>=We||up(Tk(ne,jf))>ac)&&(pc.push(jf),ne=jf),mc=uf,td=sd)}Qb=a[0].point.slice(0,2);ac=1<a.length?a[a.length-1].point.slice(0,2):fm(a[0].point,[1,1]);Ge=[];rf=[];if(1===a.length){if(!lc&&!xc||Xa){a=fb(Qb,vp(Bm(Tk(Qb,ac))),-(Qc||Jc));d=[];for(let qd=1/13,sd=qd;1>=sd;sd+=qd)d.push(Wa(a,Qb,2*zr*sd));return d}}else{if(!(lc||xc&&1===a.length))if(db)for(let qd=
1/13,sd=qd;1>=sd;sd+=qd)Qc=Wa(pc[0],Qb,zr*sd),Ge.push(Qc);else We=Tk(d[0],pc[0]),Qc=gm(We,.5),We=gm(We,.51),Ge.push(Tk(Qb,Qc),Tk(Qb,We),fm(Qb,We),fm(Qb,Qc));Qc=Bm(tp(a[a.length-1].vector));if(xc||lc&&1===a.length)rf.push(ac);else if(Lb){a=fb(ac,Qc,Jc);for(let qd=1/29,sd=qd;1>sd;sd+=qd)rf.push(Wa(a,ac,3*zr*sd))}else rf.push(fm(ac,gm(Qc,Jc)),fm(ac,gm(Qc,.99*Jc)),Tk(ac,gm(Qc,.99*Jc)),Tk(ac,gm(Qc,Jc)))}return d.concat(rf,pc.reverse(),Ge)}function uc(a,d={}){var l;let {streamline:E=.5,size:W=16,last:ka=
!1}=d;if(0===a.length)return[];d=.15+.85*(1-E);a=Array.isArray(a[0])?a:a.map(({x:kb,y:Lb,pressure:Vb=.5})=>[kb,Lb,Vb]);if(2===a.length){var oa=a[1];a=a.slice(0,-1);for(var Fa=1;5>Fa;Fa++)a.push(Ka(a[0],oa,Fa/4))}1===a.length&&(a=[...a,[...fm(a[0],[1,1]),...a[0].slice(2)]]);oa=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Fa=!1;let Qa=0,Xa=oa[0],db=a.length-1;for(let kb=1;kb<a.length;kb++){let Lb=ka&&kb===db?a[kb].slice(0,2):Ka(Xa.point,a[kb],d);
if(Rq(Xa.point,Lb))continue;let Vb=La(Lb,Xa.point);if(Qa+=Vb,kb<db&&!Fa){if(Qa<W)continue;Fa=!0}Xa={point:Lb,pressure:0<=a[kb][2]?a[kb][2]:.5,vector:vp(Tk(Xa.point,Lb)),distance:Vb,runningLength:Qa};oa.push(Xa)}return oa[0].vector=(null==(l=oa[1])?void 0:l.vector)||[0,0],oa}function Xc(a,d=4/3){return(new Su(a)).exportAsSVG(d)}function Md(a,d=4/3){return(new Su(a)).generatePreviewJsx(void 0,d)}function le({id:a,type:d,onRemove:l,showContent:E}){const W=ef(),{handlers:ka}=Mx.default.useContext(Qk);
return(0,sb.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,sb.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,sb.jsx)(Hq,{id:a,showReferenceContent:E})}),(0,sb.jsx)("div",{className:"flex-1"}),ka.getBlockPageName(a)!==W.currentPage.name&&(0,sb.jsx)(ja,{tooltip:"Open Page",type:"button",onClick:()=>null==ka?void 0:ka.redirectToPage(a),children:(0,sb.jsx)(Wh,{name:"open-as-page"})}),(0,sb.jsx)(ja,{tooltip:"Open Page in Right Sidebar",
type:"button",onClick:()=>null==ka?void 0:ka.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,sb.jsx)(Wh,{name:"move-to-sidebar-right"})}),l&&(0,sb.jsx)(ja,{className:"tl-shape-links-panel-item-remove-button",tooltip:"Remove link",type:"button",onClick:l,children:(0,sb.jsx)(Wh,{name:"x",className:"!translate-y-0"})})]})}function Ke({options:a,value:d,onValueChange:l}){return(0,sb.jsx)(Nq,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:l,children:a.map(E=>(0,sb.jsx)(gc,
{content:E.tooltip,children:(0,sb.jsx)("div",{className:"inline-block",children:(0,sb.jsx)(pp,{className:"tl-toggle-group-input-button",value:E.value,disabled:E.value===d,children:(0,sb.jsx)(Wh,{name:E.icon})})})},E.value))})}function ea({options:a,value:d,onValueChange:l}){return(0,sb.jsx)(Nq,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:l,children:a.map(E=>(0,sb.jsx)(pp,{className:"tl-toggle-group-input-button",value:E.value,children:(0,sb.jsx)(Wh,{name:E.icon})},E.value))})}
function ua(a){var {toggle:d=!0,pressed:l,onPressedChange:E,className:W,tooltip:ka}=a;a=If(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,sb.jsx)(gc,{content:ka,children:(0,sb.jsx)("div",{className:"inline-block",children:(0,sb.jsx)(oC,of(oe({},a),{"data-toggle":d,className:"tl-toggle-input"+(W?" "+W:""),pressed:l,onPressedChange:E}))})})}function Ua(a){return ef().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var l;return null==(l=Js[d.props.type])?void 0:
l.includes(a)})}function wb(a){return d=>"mouse"!==d.pointerType?a(d):void 0}function fc(a){a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";a=a[0].toLowerCase();return Sn.includes(a)?"image":nq.includes(a)?"video":"unknown"}function yc(...a){return(...d)=>yi(this,null,function*(){for(const l of a){const E=yield l(...d);if(E&&0<E.length)return E}return null})}function Vc(a,d){return yi(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():
null})}function kd(){const {handlers:a}=yC.useContext(Qk);return yC.useCallback((d,l)=>yi(this,null,function*(){if(l.shiftKey&&1===d.selectedShapesArray.length){var E=yield navigator.clipboard.read();let W;0<E.length&&(E=(yield(yield E[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(E)&&40===E.length?(E=E.slice(2,-2),Gk(E)&&(W=E)):/^\[\[.*\]\]$/.test(E)&&(W=E.slice(2,-2)));if(W){d.selectedShapesArray[0].update({refs:[W]});d.persist();return}}zC(d,l,a)}),[])}function yd(){const a=kd();
return po.useCallback((d,l)=>yi(this,[d,l],function*(E,{dataTransfer:W,point:ka}){a(E,{point:ka,shiftKey:!1,dataTransfer:W,fromDrop:!0})}),[])}function Ud(){const {handlers:a}=AC.useContext(Qk);return AC.useCallback((d,{text:l,html:E})=>{a.copyToClipboard(l,E)},[])}function Be(){return QG.default.useCallback(a=>yi(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var cf=Object.create,vf=Object.defineProperty,Pg=Object.defineProperties,
Vg=Object.getOwnPropertyDescriptor,Ti=Object.getOwnPropertyDescriptors,$k=Object.getOwnPropertyNames,zk=Object.getOwnPropertySymbols,vi=Object.getPrototypeOf,ik=Object.prototype.hasOwnProperty,Vl=Object.prototype.propertyIsEnumerable,$n=(a,d,l)=>d in a?vf(a,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[d]=l,oe=(a,d)=>{for(var l in d||={})ik.call(d,l)&&$n(a,l,d[l]);if(zk)for(l of zk(d))Vl.call(d,l)&&$n(a,l,d[l]);return a},of=(a,d)=>Pg(a,Ti(d)),If=(a,d)=>{var l={},E;for(E in a)ik.call(a,
E)&&0>d.indexOf(E)&&(l[E]=a[E]);if(null!=a&&zk)for(E of zk(a))0>d.indexOf(E)&&Vl.call(a,E)&&(l[E]=a[E]);return l},Gh=(a,d)=>function(){return d||(0,a[$k(a)[0]])((d={exports:{}}).exports,d),d.exports},en=(a,d,l,E)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let W of $k(d))ik.call(a,W)||W===l||vf(a,W,{get:()=>d[W],enumerable:!(E=Vg(d,W))||E.enumerable});return a},yf=(a,d,l)=>(l=null!=a?cf(vi(a)):{},en(!d&&a&&a.__esModule?l:vf(l,"default",{value:a,enumerable:!0}),a)),ie=(a,d,l,E)=>{for(var W=
1<E?void 0:E?Vg(d,l):d,ka=a.length-1,oa;0<=ka;ka--)if(oa=a[ka])W=(E?oa(d,l,W):oa(W))||W;E&&W&&vf(d,l,W);return W},gb=(a,d,l)=>{$n(a,"symbol"!==typeof d?d+"":d,l);return l},yi=(a,d,l)=>new Promise((E,W)=>{var ka=Qa=>{try{Fa(l.next(Qa))}catch(Xa){W(Xa)}},oa=Qa=>{try{Fa(l.throw(Qa))}catch(Xa){W(Xa)}},Fa=Qa=>Qa.done?E(Qa.value):Promise.resolve(Qa.value).then(ka,oa);Fa((l=l.apply(a,d)).next())}),Tm=Gh({["../../node_modules/rbush/rbush.min.js"](a,d){!function(l,E){"object"==typeof a&&"undefined"!=typeof d?
d.exports=E():"function"==typeof define&&define.amd?define(E):(l=l||self).RBush=E()}(a,function(){function l(ac,pc,mc,Jc,Qc){!function We(he,ne,Ge,jf,rf){for(;jf>Ge;){if(600<jf-Ge){var uf=jf-Ge+1,Qd=ne-Ge+1,nd=Math.log(uf),qd=.5*Math.exp(2*nd/3);nd=.5*Math.sqrt(nd*qd*(uf-qd)/uf)*(0>Qd-uf/2?-1:1);We(he,ne,Math.max(Ge,Math.floor(ne-Qd*qd/uf+nd)),Math.min(jf,Math.floor(ne+(uf-Qd)*qd/uf+nd)),rf)}uf=he[ne];Qd=Ge;qd=jf;E(he,Ge,ne);for(0<rf(he[jf],uf)&&E(he,Ge,jf);Qd<qd;){E(he,Qd,qd);Qd++;for(qd--;0>rf(he[Qd],
uf);)Qd++;for(;0<rf(he[qd],uf);)qd--}0===rf(he[Ge],uf)?E(he,Ge,qd):E(he,++qd,jf);qd<=ne&&(Ge=qd+1);ne<=qd&&(jf=qd-1)}}(ac,pc,mc||0,Jc||ac.length-1,Qc||W)}function E(ac,pc,mc){var Jc=ac[pc];ac[pc]=ac[mc];ac[mc]=Jc}function W(ac,pc){return ac<pc?-1:ac>pc?1:0}function ka(ac,pc){oa(ac,0,ac.children.length,pc,ac)}function oa(ac,pc,mc,Jc,Qc){Qc||=Qb(null);Qc.minX=1/0;Qc.minY=1/0;Qc.maxX=-1/0;for(Qc.maxY=-1/0;pc<mc;pc++){var td=ac.children[pc];Fa(Qc,ac.leaf?Jc(td):td)}return Qc}function Fa(ac,pc){return ac.minX=
Math.min(ac.minX,pc.minX),ac.minY=Math.min(ac.minY,pc.minY),ac.maxX=Math.max(ac.maxX,pc.maxX),ac.maxY=Math.max(ac.maxY,pc.maxY),ac}function Qa(ac,pc){return ac.minX-pc.minX}function Xa(ac,pc){return ac.minY-pc.minY}function db(ac){return(ac.maxX-ac.minX)*(ac.maxY-ac.minY)}function kb(ac){return ac.maxX-ac.minX+(ac.maxY-ac.minY)}function Lb(ac,pc){return ac.minX<=pc.minX&&ac.minY<=pc.minY&&pc.maxX<=ac.maxX&&pc.maxY<=ac.maxY}function Vb(ac,pc){return pc.minX<=ac.maxX&&pc.minY<=ac.maxY&&pc.maxX>=ac.minX&&
pc.maxY>=ac.minY}function Qb(ac){return{children:ac,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function lc(ac,pc,mc,Jc,Qc){for(var td=[pc,mc];td.length;)if(!((mc=td.pop())-(pc=td.pop())<=Jc)){var he=pc+Math.ceil((mc-pc)/Jc/2)*Jc;l(ac,he,pc,mc,Qc);td.push(pc,he,he,mc)}}var xc=function(ac){void 0===ac&&(ac=9);this._maxEntries=Math.max(4,ac);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return xc.prototype.all=function(){return this._all(this.data,[])},xc.prototype.search=
function(ac){var pc=this.data,mc=[];if(!Vb(ac,pc))return mc;for(var Jc=this.toBBox,Qc=[];pc;){for(var td=0;td<pc.children.length;td++){var he=pc.children[td],ne=pc.leaf?Jc(he):he;Vb(ac,ne)&&(pc.leaf?mc.push(he):Lb(ac,ne)?this._all(he,mc):Qc.push(he))}pc=Qc.pop()}return mc},xc.prototype.collides=function(ac){var pc=this.data;if(!Vb(ac,pc))return!1;for(var mc=[];pc;){for(var Jc=0;Jc<pc.children.length;Jc++){var Qc=pc.children[Jc],td=pc.leaf?this.toBBox(Qc):Qc;if(Vb(ac,td)){if(pc.leaf||Lb(ac,td))return!0;
mc.push(Qc)}}pc=mc.pop()}return!1},xc.prototype.load=function(ac){if(!ac||!ac.length)return this;if(ac.length<this._minEntries){for(var pc=0;pc<ac.length;pc++)this.insert(ac[pc]);return this}ac=this._build(ac.slice(),0,ac.length-1,0);this.data.children.length?this.data.height===ac.height?this._splitRoot(this.data,ac):(this.data.height<ac.height&&(pc=this.data,this.data=ac,ac=pc),this._insert(ac,this.data.height-ac.height-1,!0)):this.data=ac;return this},xc.prototype.insert=function(ac){return ac&&
this._insert(ac,this.data.height-1),this},xc.prototype.clear=function(){return this.data=Qb([]),this},xc.prototype.remove=function(ac,pc){if(!ac)return this;for(var mc,Jc,Qc,td=this.data,he=this.toBBox(ac),ne=[],Ge=[];td||ne.length;){if(td||(td=ne.pop(),Jc=ne[ne.length-1],mc=Ge.pop(),Qc=!0),td.leaf){a:{var jf=ac;var rf=td.children,We=pc;if(We){for(var uf=0;uf<rf.length;uf++)if(We(jf,rf[uf])){jf=uf;break a}jf=-1}else jf=rf.indexOf(jf)}if(-1!==jf)return td.children.splice(jf,1),ne.push(td),this._condense(ne),
this}Qc||td.leaf||!Lb(td,he)?Jc?(mc++,td=Jc.children[mc],Qc=!1):td=null:(ne.push(td),Ge.push(mc),mc=0,Jc=td,td=td.children[0])}return this},xc.prototype.toBBox=function(ac){return ac},xc.prototype.compareMinX=function(ac,pc){return ac.minX-pc.minX},xc.prototype.compareMinY=function(ac,pc){return ac.minY-pc.minY},xc.prototype.toJSON=function(){return this.data},xc.prototype.fromJSON=function(ac){return this.data=ac,this},xc.prototype._all=function(ac,pc){for(var mc=[];ac;)ac.leaf?pc.push.apply(pc,
ac.children):mc.push.apply(mc,ac.children),ac=mc.pop();return pc},xc.prototype._build=function(ac,pc,mc,Jc){var Qc,td=mc-pc+1,he=this._maxEntries;if(td<=he)return ka(Qc=Qb(ac.slice(pc,mc+1)),this.toBBox),Qc;Jc||(Jc=Math.ceil(Math.log(td)/Math.log(he)),he=Math.ceil(td/Math.pow(he,Jc-1)));(Qc=Qb([])).leaf=!1;Qc.height=Jc;td=Math.ceil(td/he);he=td*Math.ceil(Math.sqrt(he));for(lc(ac,pc,mc,he,this.compareMinX);pc<=mc;pc+=he){var ne=Math.min(pc+he-1,mc);lc(ac,pc,ne,td,this.compareMinY);for(var Ge=pc;Ge<=
ne;Ge+=td)Qc.children.push(this._build(ac,Ge,Math.min(Ge+td-1,ne),Jc-1))}return ka(Qc,this.toBBox),Qc},xc.prototype._chooseSubtree=function(ac,pc,mc,Jc){for(;Jc.push(pc),!pc.leaf&&Jc.length-1!==mc;){for(var Qc=1/0,td=1/0,he=void 0,ne=0;ne<pc.children.length;ne++){var Ge=pc.children[ne],jf=db(Ge),rf=(We=ac,uf=Ge,(Math.max(uf.maxX,We.maxX)-Math.min(uf.minX,We.minX))*(Math.max(uf.maxY,We.maxY)-Math.min(uf.minY,We.minY))-jf);rf<td?(td=rf,Qc=jf<Qc?jf:Qc,he=Ge):rf===td&&jf<Qc&&(Qc=jf,he=Ge)}pc=he||pc.children[0]}var We,
uf;return pc},xc.prototype._insert=function(ac,pc,mc){mc=mc?ac:this.toBBox(ac);var Jc=[],Qc=this._chooseSubtree(mc,this.data,pc,Jc);Qc.children.push(ac);for(Fa(Qc,mc);0<=pc&&Jc[pc].children.length>this._maxEntries;)this._split(Jc,pc),pc--;this._adjustParentBBoxes(mc,Jc,pc)},xc.prototype._split=function(ac,pc){var mc=ac[pc],Jc=mc.children.length,Qc=this._minEntries;this._chooseSplitAxis(mc,Qc,Jc);Jc=this._chooseSplitIndex(mc,Qc,Jc);Jc=Qb(mc.children.splice(Jc,mc.children.length-Jc));Jc.height=mc.height;
Jc.leaf=mc.leaf;ka(mc,this.toBBox);ka(Jc,this.toBBox);pc?ac[pc-1].children.push(Jc):this._splitRoot(mc,Jc)},xc.prototype._splitRoot=function(ac,pc){this.data=Qb([ac,pc]);this.data.height=ac.height+1;this.data.leaf=!1;ka(this.data,this.toBBox)},xc.prototype._chooseSplitIndex=function(ac,pc,mc){for(var Jc,Qc,td,he,ne,Ge,jf,rf=1/0,We=1/0,uf=pc;uf<=mc-pc;uf++){var Qd=oa(ac,0,uf,this.toBBox),nd=oa(ac,uf,mc,this.toBBox),qd=(Qc=Qd,td=nd,he=void 0,ne=void 0,Ge=void 0,jf=void 0,he=Math.max(Qc.minX,td.minX),
ne=Math.max(Qc.minY,td.minY),Ge=Math.min(Qc.maxX,td.maxX),jf=Math.min(Qc.maxY,td.maxY),Math.max(0,Ge-he)*Math.max(0,jf-ne));Qd=db(Qd)+db(nd);qd<rf?(rf=qd,Jc=uf,We=Qd<We?Qd:We):qd===rf&&Qd<We&&(We=Qd,Jc=uf)}return Jc||mc-pc},xc.prototype._chooseSplitAxis=function(ac,pc,mc){var Jc=ac.leaf?this.compareMinX:Qa,Qc=ac.leaf?this.compareMinY:Xa;this._allDistMargin(ac,pc,mc,Jc)<this._allDistMargin(ac,pc,mc,Qc)&&ac.children.sort(Jc)},xc.prototype._allDistMargin=function(ac,pc,mc,Jc){ac.children.sort(Jc);Jc=
this.toBBox;for(var Qc=oa(ac,0,pc,Jc),td=oa(ac,mc-pc,mc,Jc),he=kb(Qc)+kb(td),ne=pc;ne<mc-pc;ne++){var Ge=ac.children[ne];Fa(Qc,ac.leaf?Jc(Ge):Ge);he+=kb(Qc)}for(mc=mc-pc-1;mc>=pc;mc--)Qc=ac.children[mc],Fa(td,ac.leaf?Jc(Qc):Qc),he+=kb(td);return he},xc.prototype._adjustParentBBoxes=function(ac,pc,mc){for(;0<=mc;mc--)Fa(pc[mc],ac)},xc.prototype._condense=function(ac){for(var pc=ac.length-1,mc=void 0;0<=pc;pc--)0===ac[pc].children.length?0<pc?(mc=ac[pc-1].children).splice(mc.indexOf(ac[pc]),1):this.clear():
ka(ac[pc],this.toBBox)},xc})}}),Rs=Gh({["../../node_modules/fast-deep-equal/index.js"](a,d){d.exports=function ka(E,W){if(E===W)return!0;if(E&&W&&"object"==typeof E&&"object"==typeof W){if(E.constructor!==W.constructor)return!1;var oa;if(Array.isArray(E)){var Fa=E.length;if(Fa!=W.length)return!1;for(oa=Fa;0!==oa--;)if(!ka(E[oa],W[oa]))return!1;return!0}if(E.constructor===RegExp)return E.source===W.source&&E.flags===W.flags;if(E.valueOf!==Object.prototype.valueOf)return E.valueOf()===W.valueOf();if(E.toString!==
Object.prototype.toString)return E.toString()===W.toString();var Qa=Object.keys(E);Fa=Qa.length;if(Fa!==Object.keys(W).length)return!1;for(oa=Fa;0!==oa--;)if(!Object.prototype.hasOwnProperty.call(W,Qa[oa]))return!1;for(oa=Fa;0!==oa--;)if(Fa=Qa[oa],!ka(E[Fa],W[Fa]))return!1;return!0}return E!==E&&W!==W}}}),Tq=Gh({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function l(kb,Lb){return!1!==Lb.clone&&Lb.isMergeableObject(kb)?Qa(Array.isArray(kb)?[]:{},kb,Lb):kb}function E(kb,Lb,Vb){return kb.concat(Lb).map(function(Qb){return l(Qb,
Vb)})}function W(kb){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(kb).filter(function(Lb){return kb.propertyIsEnumerable(Lb)}):[]}function ka(kb){return Object.keys(kb).concat(W(kb))}function oa(kb,Lb){try{return Lb in kb}catch(Vb){return!1}}function Fa(kb,Lb,Vb){var Qb={};Vb.isMergeableObject(kb)&&ka(kb).forEach(function(lc){Qb[lc]=l(kb[lc],Vb)});ka(Lb).forEach(function(lc){if(!oa(kb,lc)||Object.hasOwnProperty.call(kb,lc)&&Object.propertyIsEnumerable.call(kb,lc))if(oa(kb,lc)&&
Vb.isMergeableObject(Lb[lc])){if(Vb.customMerge){var xc=Vb.customMerge(lc);xc="function"===typeof xc?xc:Qa}else xc=Qa;Qb[lc]=xc(kb[lc],Lb[lc],Vb)}else Qb[lc]=l(Lb[lc],Vb)});return Qb}function Qa(kb,Lb,Vb){Vb=Vb||{};Vb.arrayMerge=Vb.arrayMerge||E;Vb.isMergeableObject=Vb.isMergeableObject||Xa;Vb.cloneUnlessOtherwiseSpecified=l;var Qb=Array.isArray(Lb),lc=Array.isArray(kb);return Qb!==lc?l(Lb,Vb):Qb?Vb.arrayMerge(kb,Lb,Vb):Fa(kb,Lb,Vb)}var Xa=function(kb){var Lb;if(Lb=!!kb&&"object"===typeof kb)Lb=Object.prototype.toString.call(kb),
Lb=!("[object RegExp]"===Lb||"[object Date]"===Lb||kb.$$typeof===db);return Lb},db="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Qa.all=function(kb,Lb){if(!Array.isArray(kb))throw Error("first argument should be an array");return kb.reduce(function(Vb,Qb){return Qa(Vb,Qb,Lb)},{})};d.exports=Qa}}),Pr=Gh({["../../node_modules/tslib/tslib.js"](a,d){var l,E,W,ka,oa,Fa,Qa,Xa,db,kb,Lb,Vb,Qb,lc,xc,ac,pc,mc,Jc,Qc,td,he,ne,Ge,jf;(function(rf){function We(Qd,nd){Qd!==uf&&("function"===
typeof Object.create?Object.defineProperty(Qd,"__esModule",{value:!0}):Qd.__esModule=!0);return function(qd,sd){return Qd[qd]=nd?nd(qd,sd):sd}}var uf="object"===typeof va?va:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Qd){rf(We(uf,We(Qd)))}):"object"===typeof d&&"object"===typeof d.exports?rf(We(uf,We(d.exports))):rf(We(uf))})(function(rf){var We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Qd,
nd){Qd.__proto__=nd}||function(Qd,nd){for(var qd in nd)Object.prototype.hasOwnProperty.call(nd,qd)&&(Qd[qd]=nd[qd])};l=function(Qd,nd){function qd(){this.constructor=Qd}if("function"!==typeof nd&&null!==nd)throw new TypeError("Class extends value "+String(nd)+" is not a constructor or null");We(Qd,nd);Qd.prototype=null===nd?Object.create(nd):(qd.prototype=nd.prototype,new qd)};E=Object.assign||function(Qd){for(var nd,qd=1,sd=arguments.length;qd<sd;qd++){nd=arguments[qd];for(var ke in nd)Object.prototype.hasOwnProperty.call(nd,
ke)&&(Qd[ke]=nd[ke])}return Qd};W=function(Qd,nd){var qd={},sd;for(sd in Qd)Object.prototype.hasOwnProperty.call(Qd,sd)&&0>nd.indexOf(sd)&&(qd[sd]=Qd[sd]);if(null!=Qd&&"function"===typeof Object.getOwnPropertySymbols){var ke=0;for(sd=Object.getOwnPropertySymbols(Qd);ke<sd.length;ke++)0>nd.indexOf(sd[ke])&&Object.prototype.propertyIsEnumerable.call(Qd,sd[ke])&&(qd[sd[ke]]=Qd[sd[ke]])}return qd};ka=function(Qd,nd,qd,sd){var ke=arguments.length,pf=3>ke?nd:null===sd?sd=Object.getOwnPropertyDescriptor(nd,
qd):sd,Af;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)pf=Reflect.decorate(Qd,nd,qd,sd);else for(var ng=Qd.length-1;0<=ng;ng--)if(Af=Qd[ng])pf=(3>ke?Af(pf):3<ke?Af(nd,qd,pf):Af(nd,qd))||pf;return 3<ke&&pf&&Object.defineProperty(nd,qd,pf),pf};oa=function(Qd,nd){return function(qd,sd){nd(qd,sd,Qd)}};Fa=function(Qd,nd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Qd,nd)};Qa=function(Qd,nd,qd,sd){function ke(pf){return pf instanceof qd?
pf:new qd(function(Af){Af(pf)})}return new (qd||=Promise)(function(pf,Af){function ng(Wg){try{$f(sd.next(Wg))}catch(Of){Af(Of)}}function Kf(Wg){try{$f(sd["throw"](Wg))}catch(Of){Af(Of)}}function $f(Wg){Wg.done?pf(Wg.value):ke(Wg.value).then(ng,Kf)}$f((sd=sd.apply(Qd,nd||[])).next())})};Xa=function(Qd,nd){function qd($f){return function(Wg){return sd([$f,Wg])}}function sd($f){if(pf)throw new TypeError("Generator is already executing.");for(;ke;)try{if(pf=1,Af&&(ng=$f[0]&2?Af["return"]:$f[0]?Af["throw"]||
((ng=Af["return"])&&ng.call(Af),0):Af.next)&&!(ng=ng.call(Af,$f[1])).done)return ng;if(Af=0,ng)$f=[$f[0]&2,ng.value];switch($f[0]){case 0:case 1:ng=$f;break;case 4:return ke.label++,{value:$f[1],done:!1};case 5:ke.label++;Af=$f[1];$f=[0];continue;case 7:$f=ke.ops.pop();ke.trys.pop();continue;default:if(!(ng=ke.trys,ng=0<ng.length&&ng[ng.length-1])&&(6===$f[0]||2===$f[0])){ke=0;continue}if(3===$f[0]&&(!ng||$f[1]>ng[0]&&$f[1]<ng[3]))ke.label=$f[1];else if(6===$f[0]&&ke.label<ng[1])ke.label=ng[1],ng=
$f;else if(ng&&ke.label<ng[2])ke.label=ng[2],ke.ops.push($f);else{ng[2]&&ke.ops.pop();ke.trys.pop();continue}}$f=nd.call(Qd,ke)}catch(Wg){$f=[6,Wg],Af=0}finally{pf=ng=0}if($f[0]&5)throw $f[1];return{value:$f[0]?$f[1]:void 0,done:!0}}var ke={label:0,sent:function(){if(ng[0]&1)throw ng[1];return ng[1]},trys:[],ops:[]},pf,Af,ng,Kf;return Kf={next:qd(0),"throw":qd(1),"return":qd(2)},"function"===typeof Symbol&&(Kf[Symbol.iterator]=function(){return this}),Kf};db=function(Qd,nd){for(var qd in Qd)"default"===
qd||Object.prototype.hasOwnProperty.call(nd,qd)||jf(nd,Qd,qd)};jf=Object.create?function(Qd,nd,qd,sd){void 0===sd&&(sd=qd);var ke=Object.getOwnPropertyDescriptor(nd,qd);if(!ke||("get"in ke?!nd.__esModule:ke.writable||ke.configurable))ke={enumerable:!0,get:function(){return nd[qd]}};Object.defineProperty(Qd,sd,ke)}:function(Qd,nd,qd,sd){void 0===sd&&(sd=qd);Qd[sd]=nd[qd]};kb=function(Qd){var nd="function"===typeof Symbol&&Symbol.iterator,qd=nd&&Qd[nd],sd=0;if(qd)return qd.call(Qd);if(Qd&&"number"===
typeof Qd.length)return{next:function(){Qd&&sd>=Qd.length&&(Qd=void 0);return{value:Qd&&Qd[sd++],done:!Qd}}};throw new TypeError(nd?"Object is not iterable.":"Symbol.iterator is not defined.");};Lb=function(Qd,nd){var qd="function"===typeof Symbol&&Qd[Symbol.iterator];if(!qd)return Qd;Qd=qd.call(Qd);var sd,ke=[];try{for(;(void 0===nd||0<nd--)&&!(sd=Qd.next()).done;)ke.push(sd.value)}catch(Af){var pf={error:Af}}finally{try{sd&&!sd.done&&(qd=Qd["return"])&&qd.call(Qd)}finally{if(pf)throw pf.error;}}return ke};
Vb=function(){for(var Qd=[],nd=0;nd<arguments.length;nd++)Qd=Qd.concat(Lb(arguments[nd]));return Qd};Qb=function(){for(var Qd=0,nd=0,qd=arguments.length;nd<qd;nd++)Qd+=arguments[nd].length;Qd=Array(Qd);var sd=0;for(nd=0;nd<qd;nd++)for(var ke=arguments[nd],pf=0,Af=ke.length;pf<Af;pf++,sd++)Qd[sd]=ke[pf];return Qd};lc=function(Qd,nd,qd){if(qd||2===arguments.length)for(var sd=0,ke=nd.length,pf;sd<ke;sd++)!pf&&sd in nd||(pf||=Array.prototype.slice.call(nd,0,sd),pf[sd]=nd[sd]);return Qd.concat(pf||Array.prototype.slice.call(nd))};
xc=function(Qd){return this instanceof xc?(this.v=Qd,this):new xc(Qd)};ac=function(Qd,nd,qd){function sd(Of){Kf[Of]&&($f[Of]=function(Bh){return new Promise(function(Lh,Ej){1<Wg.push([Of,Bh,Lh,Ej])||ke(Of,Bh)})})}function ke(Of,Bh){try{var Lh=Kf[Of](Bh);Lh.value instanceof xc?Promise.resolve(Lh.value.v).then(pf,Af):ng(Wg[0][2],Lh)}catch(Ej){ng(Wg[0][3],Ej)}}function pf(Of){ke("next",Of)}function Af(Of){ke("throw",Of)}function ng(Of,Bh){(Of(Bh),Wg.shift(),Wg.length)&&ke(Wg[0][0],Wg[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var Kf=qd.apply(Qd,nd||[]),$f,Wg=[];return $f={},sd("next"),sd("throw"),sd("return"),$f[Symbol.asyncIterator]=function(){return this},$f};pc=function(Qd){function nd(ke,pf){qd[ke]=Qd[ke]?function(Af){return(sd=!sd)?{value:xc(Qd[ke](Af)),done:"return"===ke}:pf?pf(Af):Af}:pf}var qd,sd;return qd={},nd("next"),nd("throw",function(ke){throw ke;}),nd("return"),qd[Symbol.iterator]=function(){return this},qd};mc=function(Qd){function nd(pf){ke[pf]=Qd[pf]&&function(Af){return new Promise(function(ng,Kf){Af=
Qd[pf](Af);qd(ng,Kf,Af.done,Af.value)})}}function qd(pf,Af,ng,Kf){Promise.resolve(Kf).then(function($f){pf({value:$f,done:ng})},Af)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var sd=Qd[Symbol.asyncIterator],ke;return sd?sd.call(Qd):(Qd="function"===typeof kb?kb(Qd):Qd[Symbol.iterator](),ke={},nd("next"),nd("throw"),nd("return"),ke[Symbol.asyncIterator]=function(){return this},ke)};Jc=function(Qd,nd){Object.defineProperty?Object.defineProperty(Qd,"raw",{value:nd}):
Qd.raw=nd;return Qd};var uf=Object.create?function(Qd,nd){Object.defineProperty(Qd,"default",{enumerable:!0,value:nd})}:function(Qd,nd){Qd["default"]=nd};Qc=function(Qd){if(Qd&&Qd.__esModule)return Qd;var nd={};if(null!=Qd)for(var qd in Qd)"default"!==qd&&Object.prototype.hasOwnProperty.call(Qd,qd)&&jf(nd,Qd,qd);uf(nd,Qd);return nd};td=function(Qd){return Qd&&Qd.__esModule?Qd:{"default":Qd}};he=function(Qd,nd,qd,sd){if("a"===qd&&!sd)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof nd?Qd!==nd||!sd:!nd.has(Qd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===qd?sd:"a"===qd?sd.call(Qd):sd?sd.value:nd.get(Qd)};ne=function(Qd,nd,qd,sd,ke){if("m"===sd)throw new TypeError("Private method is not writable");if("a"===sd&&!ke)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof nd?Qd!==nd||!ke:!nd.has(Qd))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===sd?ke.call(Qd,qd):ke?ke.value=qd:nd.set(Qd,qd),qd};Ge=function(Qd,nd){if(null===nd||"object"!==typeof nd&&"function"!==typeof nd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Qd?nd===Qd:Qd.has(nd)};rf("__extends",l);rf("__assign",E);rf("__rest",W);rf("__decorate",ka);rf("__param",oa);rf("__metadata",Fa);rf("__awaiter",Qa);rf("__generator",Xa);rf("__exportStar",db);rf("__createBinding",jf);rf("__values",kb);rf("__read",Lb);rf("__spread",Vb);rf("__spreadArrays",
Qb);rf("__spreadArray",lc);rf("__await",xc);rf("__asyncGenerator",ac);rf("__asyncDelegator",pc);rf("__asyncValues",mc);rf("__makeTemplateObject",Jc);rf("__importStar",Qc);rf("__importDefault",td);rf("__classPrivateFieldGet",he);rf("__classPrivateFieldSet",ne);rf("__classPrivateFieldIn",Ge)})}}),rq={};((a,d)=>{for(var l in d)vf(a,l,{get:d[l],enumerable:!0})})(rq,{App:()=>ji,PreviewManager:()=>Su,generateJSXFromModel:()=>Md,generateSVGFromModel:()=>Xc});Sa.exports=(a=>en(vf({},"__esModule",{value:!0}),
a))(rq);var Qr=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(Qr||{}),Uq=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(Uq||{}),Sq,Tt=new Uint8Array(16),Eg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,km=[];for(let a=0;256>a;++a)km.push((a+256).toString(16).slice(1));var Qs,uo,Yo=0,tq=0,el=function(a,d,l){l=d&&l||0;const E=
d||Array(16);a=a||{};let W=a.node||Qs;var ka=void 0!==a.clockseq?a.clockseq:uo;if(null==W||null==ka){var oa=a.random||(a.rng||q)();null==W&&(W=Qs=[oa[0]|1,oa[1],oa[2],oa[3],oa[4],oa[5]]);null==ka&&(ka=uo=(oa[6]<<8|oa[7])&16383)}oa=void 0!==a.msecs?a.msecs:Date.now();let Fa=void 0!==a.nsecs?a.nsecs:tq+1;const Qa=oa-Yo+(Fa-tq)/1E4;0>Qa&&void 0===a.clockseq&&(ka=ka+1&16383);(0>Qa||oa>Yo)&&void 0===a.nsecs&&(Fa=0);if(1E4<=Fa)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Yo=oa;tq=Fa;uo=
ka;oa+=122192928E5;a=(1E4*(oa&268435455)+Fa)%4294967296;E[l++]=a>>>24&255;E[l++]=a>>>16&255;E[l++]=a>>>8&255;E[l++]=a&255;a=oa/4294967296*1E4&268435455;E[l++]=a>>>8&255;E[l++]=a&255;E[l++]=a>>>24&15|16;E[l++]=a>>>16&255;E[l++]=ka>>>8|128;E[l++]=ka&255;for(ka=0;6>ka;++ka)E[l+ka]=W[ka];return d||P(E)},Ch=class{static clamp(a,d,l){return Math.max(d,"undefined"!==typeof l?Math.min(a,l):a)}static clampV(a,d,l){return a.map(E=>l?Ch.clamp(E,d,l):Ch.clamp(E,d))}static cross(a,d,l){return(d[0]-a[0])*(l[1]-
a[1])-(l[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},Hd=Ch;Hd.neg=a=>[-a[0],-a[1]];Hd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];Hd.addScalar=(a,d)=>[a[0]+d,a[1]+d];Hd.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];Hd.subScalar=(a,d)=>[a[0]-d,a[1]-d];Hd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];Hd.mul=(a,d)=>[a[0]*d,a[1]*d];Hd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];Hd.div=(a,d)=>[a[0]/d,a[1]/d];Hd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];Hd.per=a=>[a[1],-a[0]];Hd.dpr=(a,d)=>a[0]*d[0]+a[1]*d[1];
Hd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];Hd.len2=a=>a[0]*a[0]+a[1]*a[1];Hd.len=a=>Math.hypot(a[0],a[1]);Hd.pry=(a,d)=>Ch.dpr(a,d)/Ch.len(d);Hd.uni=a=>Ch.div(a,Ch.len(a));Hd.normalize=a=>Ch.uni(a);Hd.tangent=(a,d)=>Ch.uni(Ch.sub(a,d));Hd.dist2=(a,d)=>Ch.len2(Ch.sub(a,d));Hd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);Hd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let l=1/Math.max(d[0],d[1]);l*=1.29289-(d[0]+d[1])*l*.29289;return[a[0]*l,a[1]*l]};Hd.ang=(a,d)=>Math.atan2(Ch.cpr(a,
d),Ch.dpr(a,d));Hd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);Hd.med=(a,d)=>Ch.mul(Ch.add(a,d),.5);Hd.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];Hd.rotWith=(a,d,l=0)=>{if(0===l)return a;const E=Math.sin(l);l=Math.cos(l);const W=a[0]-d[0];a=a[1]-d[1];return[W*l-a*E+d[0],W*E+a*l+d[1]]};Hd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];Hd.lrp=(a,d,l)=>Ch.add(a,Ch.mul(Ch.sub(d,a),l));Hd.int=(a,d,l,E,W=1)=>{l=(Ch.clamp(l,E)-l)/(E-l);return Ch.add(Ch.mul(a,1-l),Ch.mul(d,
W))};Hd.ang3=(a,d,l)=>{a=Ch.vec(d,a);d=Ch.vec(d,l);return Ch.ang(a,d)};Hd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];Hd.rescale=(a,d)=>{const l=Ch.len(a);return[d*a[0]/l,d*a[1]/l]};Hd.isLeft=(a,d,l)=>(d[0]-a[0])*(l[1]-a[1])-(l[0]-a[0])*(d[1]-a[1]);Hd.clockwise=(a,d,l)=>0<Ch.isLeft(a,d,l);Hd.toFixed=a=>a.map(d=>Math.round(100*d)/100);Hd.nearestPointOnLineThroughPoint=(a,d,l)=>Ch.add(a,Ch.mul(d,Ch.pry(Ch.sub(l,a),d)));Hd.distanceToLineThroughPoint=(a,d,l)=>Ch.dist(l,Ch.nearestPointOnLineThroughPoint(a,
d,l));Hd.nearestPointOnLineSegment=(a,d,l,E=!0)=>{const W=Ch.uni(Ch.sub(d,a));l=Ch.add(a,Ch.mul(W,Ch.pry(Ch.sub(l,a),W)));if(E){if(l[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(l[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(l[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(l[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return l};Hd.distanceToLineSegment=(a,d,l,E=!0)=>Ch.dist(l,Ch.nearestPointOnLineSegment(a,d,l,E));Hd.nudge=(a,d,l)=>Ch.isEqual(a,d)?a:Ch.add(a,Ch.mul(Ch.uni(Ch.sub(d,a)),l));Hd.nudgeAtAngle=
(a,d,l)=>[Math.cos(d)*l+a[0],Math.sin(d)*l+a[1]];Hd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];Hd.pointsBetween=(a,d,l=6)=>Array.from(Array(l)).map((E,W)=>{E=W/(l-1);W=Math.min(1,.5+Math.abs(.5-E));return[...Ch.lrp(a,d,E),W]});Hd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);Hd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};Hd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];Hd.min=(...a)=>[Math.min(...a.map(d=>d[0])),Math.min(...a.map(d=>
d[1]))];var me=Hd,Bf=class{static getRectangleSides(a,d,l=0){const E=[a[0]+d[0]/2,a[1]+d[1]/2],W=Hd.rotWith(a,E,l),ka=Hd.rotWith(Hd.add(a,[d[0],0]),E,l),oa=Hd.rotWith(Hd.add(a,d),E,l);a=Hd.rotWith(Hd.add(a,[0,d[1]]),E,l);return[["top",[W,ka]],["right",[ka,oa]],["bottom",[oa,a]],["left",[a,W]]]}static getBoundsSides(a){return Bf.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+2*d,height:a.height+
2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return Bf.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let l=Infinity,E=Infinity,W=-Infinity,ka=-Infinity;
if(2>a.length)E=l=0,ka=W=1;else for(const oa of a)l=Math.min(oa[0],l),E=Math.min(oa[1],E),W=Math.max(oa[0],W),ka=Math.max(oa[1],ka);return 0!==d?Bf.getBoundsFromPoints(a.map(oa=>Hd.rotWith(oa,[(l+W)/2,(E+ka)/2],d))):{minX:l,minY:E,maxX:W,maxY:ka,width:Math.max(1,W-l),height:Math.max(1,ka-E)}}static centerBounds(a,d){const l=Bf.getBoundsCenter(a);return Bf.translateBounds(a,[d[0]-l[0],d[1]-l[1]])}static snapBoundsToGrid(a,d){const l=Math.round(a.minX/d)*d,E=Math.round(a.minY/d)*d,W=Math.round(a.maxX/
d)*d;a=Math.round(a.maxY/d)*d;return{minX:l,minY:E,maxX:W,maxY:a,width:Math.max(1,W-l),height:Math.max(1,a-E)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const l=Bf.getBoundsCenter(a);return Bf.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[l[0]*d,l[1]*d])}static divideBounds(a,d){const l=Bf.getBoundsCenter(a);return Bf.centerBounds({minX:a.minX/
d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[l[0]/d,l[1]/d])}static getRotatedBounds(a,d=0){a=Bf.getRotatedCorners(a,d);let l=d=Infinity,E=-Infinity,W=-Infinity;for(const ka of a)d=Math.min(ka[0],d),l=Math.min(ka[1],l),E=Math.max(ka[0],E),W=Math.max(ka[1],W);return{minX:d,minY:l,maxX:E,maxY:W,width:Math.max(1,E-d),height:Math.max(1,W-l),rotation:0}}static getRotatedEllipseBounds(a,d,l,E,W=0){var ka=Math.cos(W);const oa=Math.sin(W);W=Math.hypot(l*ka,E*oa);ka=Math.hypot(l*
oa,E*ka);return{minX:a+l-W,minY:d+E-ka,maxX:a+l+W,maxY:d+E+ka,width:2*W,height:2*ka}}static getExpandedBounds(a,d){const l=Math.min(a.minX,d.minX),E=Math.min(a.minY,d.minY),W=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:l,minY:E,maxX:W,maxY:a,width:Math.abs(W-l),height:Math.abs(a-E)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let l=1;l<a.length;l++)d=Bf.getExpandedBounds(d,a[l]);return d}static getRotatedCorners(a,d=0){const l=[a.minX+a.width/2,a.minY+a.height/
2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(E=>Hd.rotWith(E,l,d)):a}static getTransformedBoundingBox(a,d,l,E=0,W=!1){const [ka,oa]=[a.minX,a.minY],[Fa,Qa]=[a.maxX,a.maxY];let [Xa,db]=[a.minX,a.minY],[kb,Lb]=[a.maxX,a.maxY];if("center"===d)return{minX:Xa+l[0],minY:db+l[1],maxX:kb+l[0],maxY:Lb+l[1],width:kb-Xa,height:Lb-db,scaleX:1,scaleY:1};const [Vb,Qb]=Hd.rot(l,-E);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":db+=Qb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Lb+=
Qb}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":Xa+=Vb;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":kb+=Vb}var lc=Fa-ka;const xc=Qa-oa;var ac=(kb-Xa)/lc,pc=(Lb-db)/xc;a=0>ac;l=0>pc;var mc=Math.abs(kb-Xa),Jc=Math.abs(Lb-db);if(W)switch(W=lc/xc,lc=W<mc/Jc,pc=1/W*(0>pc?1:-1)*mc,ac=Jc*(0>ac?1:-1)*W,d){case "top_left_corner":lc?db=Lb+pc:Xa=kb+ac;break;case "top_right_corner":lc?db=Lb+pc:kb=Xa-ac;break;case "bottom_right_corner":lc?Lb=db-pc:kb=
Xa-ac;break;case "bottom_left_corner":lc?Lb=db-pc:Xa=kb+ac;break;case "bottom_edge":case "top_edge":mc=(Xa+kb)/2;Jc*=W;Xa=mc-Jc/2;kb=mc+Jc/2;break;case "left_edge":case "right_edge":Jc=(db+Lb)/2,mc/=W,db=Jc-mc/2,Lb=Jc+mc/2}if(0!==E%(2*Math.PI)){mc=[0,0];Jc=Hd.med([ka,oa],[Fa,Qa]);ac=Hd.med([Xa,db],[kb,Lb]);switch(d){case "top_left_corner":mc=Hd.sub(Hd.rotWith([kb,Lb],ac,E),Hd.rotWith([Fa,Qa],Jc,E));break;case "top_right_corner":mc=Hd.sub(Hd.rotWith([Xa,Lb],ac,E),Hd.rotWith([ka,Qa],Jc,E));break;case "bottom_right_corner":mc=
Hd.sub(Hd.rotWith([Xa,db],ac,E),Hd.rotWith([ka,oa],Jc,E));break;case "bottom_left_corner":mc=Hd.sub(Hd.rotWith([kb,db],ac,E),Hd.rotWith([Fa,oa],Jc,E));break;case "top_edge":mc=Hd.sub(Hd.rotWith(Hd.med([Xa,Lb],[kb,Lb]),ac,E),Hd.rotWith(Hd.med([ka,Qa],[Fa,Qa]),Jc,E));break;case "left_edge":mc=Hd.sub(Hd.rotWith(Hd.med([kb,db],[kb,Lb]),ac,E),Hd.rotWith(Hd.med([Fa,oa],[Fa,Qa]),Jc,E));break;case "bottom_edge":mc=Hd.sub(Hd.rotWith(Hd.med([Xa,db],[kb,db]),ac,E),Hd.rotWith(Hd.med([ka,oa],[Fa,oa]),Jc,E));break;
case "right_edge":mc=Hd.sub(Hd.rotWith(Hd.med([Xa,db],[Xa,Lb]),ac,E),Hd.rotWith(Hd.med([ka,oa],[ka,Qa]),Jc,E))}[Xa,db]=Hd.sub([Xa,db],mc);[kb,Lb]=Hd.sub([kb,Lb],mc)}kb<Xa&&([kb,Xa]=[Xa,kb]);Lb<db&&([Lb,db]=[db,Lb]);return{minX:Xa,minY:db,maxX:kb,maxY:Lb,width:kb-Xa,height:Lb-db,scaleX:(kb-Xa)/(Fa-ka||1)*(a?-1:1),scaleY:(Lb-db)/(Qa-oa||1)*(l?-1:1)}}static getTransformAnchor(a,d,l){let E=a;switch(a){case "top_left_corner":E=d&&l?"bottom_right_corner":d?"top_right_corner":l?"bottom_left_corner":"bottom_right_corner";
break;case "top_right_corner":E=d&&l?"bottom_left_corner":d?"top_left_corner":l?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":E=d&&l?"top_left_corner":d?"bottom_left_corner":l?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":E=d&&l?"top_right_corner":d?"bottom_right_corner":l?"top_left_corner":"top_right_corner"}return E}static getRelativeTransformedBoundingBox(a,d,l,E,W){E=a.minX+(E?d.maxX-l.maxX:l.minX-d.minX)/d.width*a.width;W=a.minY+(W?d.maxY-
l.maxY:l.minY-d.minY)/d.height*a.height;const ka=l.width/d.width*a.width;a=l.height/d.height*a.height;return{minX:E,minY:W,maxX:E+ka,maxY:W+a,width:ka,height:a}}static getRotatedSize(a,d){const l=Hd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(E=>Hd.rotWith(E,l,d));a=Bf.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=Bf.getBoundsCenter(a);return of(oe({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=
[Infinity,Infinity];a.forEach(l=>{d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1])});return d}static getTLSnapPoints(a,d,l){const E=oe({},a);a=[0,0];const W=[],ka={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},oa=["midX","minX","maxX"],Fa=["midY","minY","maxY"];d=d.map(Lb=>{const Vb=oa.flatMap((lc,xc)=>oa.map((ac,pc)=>{const mc=E[lc]-Lb[ac];return{f:lc,t:ac,gap:mc,
distance:Math.abs(mc),isCareful:0===xc||3===xc+pc}})),Qb=Fa.flatMap((lc,xc)=>Fa.map((ac,pc)=>{const mc=E[lc]-Lb[ac];return{f:lc,t:ac,gap:mc,distance:Math.abs(mc),isCareful:0===xc||3===xc+pc}}));return[Lb,Vb,Qb]});let Qa=Infinity,Xa=Infinity,db=Infinity,kb=Infinity;d.forEach(([,Lb,Vb])=>{Lb.forEach(Qb=>{Qb.distance<l&&Qb.distance<db&&(db=Qb.distance,Qa=Qb.gap)});Vb.forEach(Qb=>{Qb.distance<l&&Qb.distance<kb&&(kb=Qb.distance,Xa=Qb.gap)})});d.forEach(([Lb,Vb,Qb])=>{Infinity!==Qa&&Vb.forEach(lc=>{2>Math.abs(lc.gap-
Qa)&&(ka[lc.f]=of(oe({},ka[lc.f]),{isSnapped:!0,to:Lb[lc.t],B:Lb,distance:lc.distance}))});Infinity!==Xa&&Qb.forEach(lc=>{2>Math.abs(lc.gap-Xa)&&(ka[lc.f]=of(oe({},ka[lc.f]),{isSnapped:!0,to:Lb[lc.t],B:Lb,distance:lc.distance}))})});a[0]=Infinity===Qa?0:Qa;a[1]=Infinity===Xa?0:Xa;E.minX-=a[0];E.midX-=a[0];E.maxX-=a[0];E.minY-=a[1];E.midY-=a[1];E.maxY-=a[1];oa.forEach(Lb=>{Lb=ka[Lb];if(Lb.isSnapped){var {id:Vb,B:Qb}=Lb;Lb=E[Vb];W.push("minX"===Vb?[[Lb,E.midY],[Lb,Qb.minY],[Lb,Qb.maxY]]:[[Lb,E.minY],
[Lb,E.maxY],[Lb,Qb.minY],[Lb,Qb.maxY]])}});Fa.forEach(Lb=>{Lb=ka[Lb];if(Lb.isSnapped){var {id:Vb,B:Qb}=Lb;Lb=E[Vb];W.push("midY"===Vb?[[E.midX,Lb],[Qb.minX,Lb],[Qb.maxX,Lb]]:[[E.minX,Lb],[E.maxX,Lb],[Qb.minX,Lb],[Qb.maxX,Lb]])}});return{offset:a,snapLines:W}}static ensureRatio(a,d){const {width:l,height:E}=a,W=oe({},a);l/E<d?(W.width=E*d,W.maxX+=l-a.width):(W.height=l/d,W.maxY+=E-a.height);return W}static getDistributions(a,d){var l=a.map(ka=>{const oa=ka.getBounds();return{id:ka.id,point:[oa.minX,
oa.minY],bounds:oa,center:ka.getCenter()}});a=l.length;var E=Bf.getCommonBounds(l.map(({bounds:ka})=>ka));const W=[];switch(d){case "horizontal":d=l.reduce((ka,oa)=>ka+oa.bounds.width,0);if(d>E.width){const ka=l.sort((Xa,db)=>Xa.bounds.minX-db.bounds.minX)[0],oa=l.sort((Xa,db)=>db.bounds.maxX-Xa.bounds.maxX)[0];E=l.filter(Xa=>Xa!==ka&&Xa!==oa).sort((Xa,db)=>Xa.center[0]-db.center[0]);const Fa=(oa.center[0]-ka.center[0])/(a-1),Qa=ka.center[0]+Fa;E.forEach(({id:Xa,point:db,bounds:kb},Lb)=>{W.push({id:Xa,
prev:db,next:[Qa+Fa*Lb-kb.width/2,kb.minY]})})}else{l=l.sort((Fa,Qa)=>Fa.center[0]-Qa.center[0]);let ka=E.minX;const oa=(E.width-d)/(a-1);l.forEach(({id:Fa,point:Qa,bounds:Xa})=>{W.push({id:Fa,prev:Qa,next:[ka,Xa.minY]});ka+=Xa.width+oa})}break;case "vertical":if(d=l.reduce((ka,oa)=>ka+oa.bounds.height,0),d>E.height){const ka=l.sort((Xa,db)=>Xa.bounds.minY-db.bounds.minY)[0],oa=l.sort((Xa,db)=>db.bounds.maxY-Xa.bounds.maxY)[0];E=l.filter(Xa=>Xa!==ka&&Xa!==oa).sort((Xa,db)=>Xa.center[1]-db.center[1]);
const Fa=(oa.center[1]-ka.center[1])/(a-1),Qa=ka.center[1]+Fa;E.forEach(({id:Xa,point:db,bounds:kb},Lb)=>{W.push({id:Xa,prev:db,next:[kb.minX,Qa+Fa*Lb-kb.height/2]})})}else{l=l.sort((Fa,Qa)=>Fa.center[1]-Qa.center[1]);let ka=E.minY;const oa=(E.height-d)/(a-1);l.forEach(({id:Fa,point:Qa,bounds:Xa})=>{W.push({id:Fa,prev:Qa,next:[Xa.minX,ka]});ka+=Xa.height+oa})}}return W}static getPackedDistributions(a){const d=Bf.getCommonBounds(a.map(({bounds:W})=>W)),l=[d.minX,d.minY],E=Object.fromEntries(a.map(W=>
[W.id,[W.bounds.minX,W.bounds.minY]]));a=a.filter(W=>{var ka,oa,Fa,Qa;return!((null==(oa=null==(ka=W.props.handles)?void 0:ka.start)?0:oa.bindingId)||(null==(Qa=null==(Fa=W.props.handles)?void 0:Fa.end)?0:Qa.bindingId))}).map(W=>{const ka=W.getBounds();return{id:W.id,w:ka.width+16,h:ka.height+16,x:ka.minX,y:ka.minY}});z(a);return a.map(({id:W,x:ka,y:oa})=>({id:W,prev:E[W],next:[ka+l[0],oa+l[1]]}))}},xp=class{static pointInCircle(a,d,l){return Hd.dist(a,d)<=l}static pointInEllipse(a,d,l,E,W=0){W=W||
0;var ka=Math.cos(W);W=Math.sin(W);d=Hd.sub(a,d);a=ka*d[0]+W*d[1];ka=W*d[0]-ka*d[1];return 1>=a*a/(l*l)+ka*ka/(E*E)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let l=0;d.forEach((E,W)=>{W=d[(W+1)%d.length];E[1]<=a[1]?W[1]>a[1]&&0<Hd.cross(E,W,a)&&(l+=1):W[1]<=a[1]&&0>Hd.cross(E,W,a)&&--l});return 0!==l}static pointInBounds(a,d){return!(a[0]<d.minX||a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,l=3){for(let E=
1;E<d.length;E++)if(Hd.distanceToLineSegment(d[E-1],d[E],a)<l)return!0;return!1}static _getSqSegDist(a,d,l){let E=d[0];d=d[1];let W=l[0]-E,ka=l[1]-d;if(0!==W||0!==ka){const oa=((a[0]-E)*W+(a[1]-d)*ka)/(W*W+ka*ka);1<oa?(E=l[0],d=l[1]):0<oa&&(E+=W*oa,d+=ka*oa)}W=a[0]-E;ka=a[1]-d;return W*W+ka*ka}static _simplifyStep(a,d,l,E,W){let ka=E,oa=-1;for(let Fa=d+1;Fa<l;Fa++){const Qa=xp._getSqSegDist(a[Fa],a[d],a[l]);Qa>ka&&(oa=Fa,ka=Qa)}-1<oa&&ka>E&&(1<oa-d&&xp._simplifyStep(a,d,oa,E,W),W.push(a[oa]),1<l-
oa&&xp._simplifyStep(a,oa,l,E,W))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var l=a[0],E=a[1];const W=[l];for(let ka=1,oa=a.length;ka<oa;ka++)E=a[ka],(E[0]-l[0])*(E[0]-l[0])+(E[1]-l[1])*(E[1]-l[1])>d&&(W.push(E),l=E);l!==E&&W.push(E);l=W.length-1;E=[W[0]];xp._simplifyStep(W,0,l,d,E);E.push(W[l],a[a.length-1]);return E}static pointNearToPolyline(a,d,l=8){const E=d.length;for(let W=1;W<E;W++)if(Hd.distanceToLineSegment(d[W-1],d[W],a)<l)return!0;return!1}},bl=xp;gb(bl,"simplify",(a,d=1)=>
{var l=a.length;const E=a[0],W=a[l-1],[ka,oa]=E,[Fa,Qa]=W;if(2<l){let Xa=0,db=0;const kb=Hd.len2([Qa-oa,Fa-ka]);for(let Lb=1;Lb<l-1;Lb++){const [Vb,Qb]=a[Lb],lc=Math.pow(Vb*(Qa-oa)+ka*(Qb-Qa)+Fa*(oa-Qb),2)/kb;Xa>lc||(Xa=lc,db=Lb)}if(Xa>d)return l=xp.simplify(a.slice(0,db+1),d),a=xp.simplify(a.slice(db+1),d),l.concat(a.slice(1))}return[E,W]});var mm=Math.PI,ao=mm/2,tl=2*mm,uq={},Ss={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",
bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Mm=class{static circleFromThreePoints(a,d,l){const [E,W]=a,[ka,oa]=d,[Fa,Qa]=l;d=E*(oa-Qa)-W*(ka-Fa)+ka*Qa-Fa*oa;a=-((E*E+W*W)*(Qa-oa)+(ka*ka+oa*oa)*(W-Qa)+(Fa*Fa+Qa*Qa)*(oa-W))/(2*d);d=-((E*E+W*W)*(ka-
Fa)+(ka*ka+oa*oa)*(Fa-E)+(Fa*Fa+Qa*Qa)*(E-ka))/(2*d);return[a,d,Math.hypot(a-E,d-W)]}static perimeterOfEllipse(a,d){const l=Math.pow(a-d,2)/Math.pow(a+d,2);return mm*(a+d)*(1+3*l/(10+Math.sqrt(4-3*l)))}static shortAngleDist(a,d){a=(d-a)%tl;return 2*a%tl-a}static longAngleDist(a,d){return tl-Mm.shortAngleDist(a,d)}static lerpAngles(a,d,l){return a+Mm.shortAngleDist(a,d)*l}static angleDelta(a,d){return Mm.shortAngleDist(a,d)}static getSweep(a,d,l){return Mm.angleDelta(me.angle(a,d),me.angle(a,l))}static clampRadians(a){return(tl+
a)%tl}static snapAngleToSegments(a,d){d=tl/d;a=Math.floor((Mm.clampRadians(a)+d/2)/d)*d%tl;a<mm&&(a+=tl);a>mm&&(a-=tl);return a}static isAngleBetween(a,d,l){if(l===a||l===d)return!0;d=(d-a+ao)%ao;return d<=mm!==(l-a+ao)%ao>d}static degreesToRadians(a){return a*mm/180}static radiansToDegrees(a){return 180*a/mm}static getArcLength(a,d,l,E){a=Mm.getSweep(a,l,E);return a/tl*tl*d}static getSweepFlag(a,d,l){l=me.angle(a,l);return 0<(me.angle(a,d)-l+3*mm)%tl-mm?0:1}static getLargeArcFlag(a,d,l){a=me.angle(l,
a);d=(me.angle(l,d)-a+3*mm)%tl-mm;return Math.abs(d)>ao?0:1}static getArcDashOffset(a,d,l,E,W){const ka=Mm.getSweepFlag(a,l,E);d=Mm.getArcLength(a,d,l,E);return-(0>ka?d:tl*a[2]-d)/2+W}static getEllipseDashOffset(a,d){return-(tl*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},Ll=class{static getPolygonCentroid(a){var d=a.map(l=>l[0]);a=a.map(l=>l[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+
Math.max(...a);return[d?d/2:0,a?a/2:0]}};gb(Ll,"getEdges",a=>{const d=a.length;return a.map((l,E)=>[l,a[(E+1)%d]])});gb(Ll,"getEdgeOutwardNormal",(a,d)=>me.per(me.uni(me.sub(d,a))));gb(Ll,"getEdgeInwardNormal",(a,d)=>me.neg(Ll.getEdgeOutwardNormal(a,d)));gb(Ll,"getOffsetEdge",(a,d,l)=>{l=me.mul(me.per(me.uni(me.sub(d,a))),l);return[me.add(a,l),me.add(d,l)]});gb(Ll,"getOffsetEdges",(a,d)=>a.map(([l,E])=>Ll.getOffsetEdge(l,E,d)));gb(Ll,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");
if(1===a.length)return a=a[0],[me.add(a,[-d,-d]),me.add(a,[d,-d]),me.add(a,[d,d]),me.add(a,[-d,d])];if(2===a.length){const [l,E]=a;return[...Ll.getOffsetEdge(l,E,d),...Ll.getOffsetEdge(E,l,d)]}return Ll.getOffsetEdges(Ll.getEdges(a),d).flatMap((l,E,W)=>{{E=W[(E+1)%W.length];const ka=Hd.slope(l[0],l[1]);W=Hd.slope(E[0],E[1]);ka!==W?Number.isNaN(ka)&&!Number.isNaN(W)?l=[l[0][0],(l[0][0]-E[0][0])*W+E[0][1]]:Number.isNaN(W)&&!Number.isNaN(ka)?l=[E[0][0],(E[0][0]-l[0][0])*ka+l[0][1]]:(l=(ka*l[0][0]-W*
E[0][0]+E[0][1]-l[0][1])/(ka-W),l=[l,W*(l-E[0][0])+E[0][1]]):l=void 0}if(void 0===l)throw Error("Expected an intersection");return l})});gb(Ll,"getPolygonVertices",(a,d,l=0,E=1)=>{a=me.div(a,2);const [W,ka]=[Math.max(1,a[0]-l),Math.max(1,a[1]-l)];l=[];for(let Xa=0,db=tl/d;Xa<d;Xa++){var oa=(-ao+Xa*db)%tl,Fa=(-ao+(Xa+1)*db)%tl;oa=me.add(a,[W*Math.cos(oa),ka*Math.sin(oa)]);Fa=me.add(a,[W*Math.cos(Fa),ka*Math.sin(Fa)]);var Qa=me.med(oa,Fa);Qa=me.nudge(Qa,a,me.dist(a,Qa)*(1-E));l.push(oa,Qa,Fa)}return l});
gb(Ll,"getTriangleVertices",(a,d=0,l=1)=>{const [E,W]=a;var ka=1-l;a=[E/2,d/2];l=[E-d,W-d];d=[d/2,W-d];const oa=Ll.getPolygonCentroid([a,l,d]),Fa=me.med(a,l),Qa=me.med(l,d),Xa=me.med(d,a),db=me.dist(Fa,oa)*ka,kb=me.dist(Qa,oa)*ka;ka*=me.dist(Xa,oa);return[a,db?me.nudge(Fa,oa,db):Fa,l,kb?me.nudge(Qa,oa,kb):Qa,d,ka?me.nudge(Xa,oa,ka):Xa]});gb(Ll,"getStarVertices",(a,d,l,E=1)=>{const W=me.div(d,2),ka=me.mul(W,E/2),oa=tl/l/2;return Array.from(Array(2*l)).map((Fa,Qa)=>{Fa=-ao+Qa*oa;const [Xa,db]=Qa%2?
ka:W;return me.add(a,[Xa*Math.cos(Fa),db*Math.sin(Fa)])})});var St=class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],l=a.length;for(let E=1;E<l;E++){const [W,ka]=a[E],[oa,Fa]=a[(E+1)%l];d.push(W,ka,(W+oa)/2,(ka+Fa)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],l=
a.length;for(let E=1;E<l-1;E++){const [W,ka]=a[E],[oa,Fa]=a[E+1];d.push(W,ka,(W+oa)/2,(ka+Fa)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const l=a.length;if(4>l)return"";let E=a[0],W=a[1];var ka=a[2];ka=`M${E[0].toFixed(2)},${E[1].toFixed(2)} Q${W[0].toFixed(2)},${W[1].toFixed(2)} ${((W[0]+ka[0])/2).toFixed(2)},${((W[1]+ka[1])/2).toFixed(2)} T`;for(let oa=2,Fa=l-1;oa<Fa;oa++)E=a[oa],W=a[oa+1],ka+=`${((E[0]+W[0])/2).toFixed(2)},${((E[1]+W[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}static getSvgPathFromStrokePoints(a,
d=!1){const l=a.length;if(4>l)return"";let E=a[0].point,W=a[1].point;var ka=a[2].point;ka=`M${E[0].toFixed(2)},${E[1].toFixed(2)} Q${W[0].toFixed(2)},${W[1].toFixed(2)} ${((W[0]+ka[0])/2).toFixed(2)},${((W[1]+ka[1])/2).toFixed(2)} T`;for(let oa=2,Fa=l-1;oa<Fa;oa++)E=a[oa].point,W=a[oa+1].point,ka+=`${((E[0]+W[0])/2).toFixed(2)},${((E[1]+W[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}};gb(St,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var ww={},xw=Object.assign,Vp=Object.getOwnPropertyDescriptor,
Ap=Object.defineProperty,Wp=Object.prototype,T=[];Object.freeze(T);var la={};Object.freeze(la);var Ca="undefined"!==typeof Proxy,eb=Object.toString(),Hb=function(){},oc="undefined"!==typeof Object.getOwnPropertySymbols,Ic="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:oc?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,ad=Object.getOwnPropertyDescriptors||function(a){var d={};Ic(a).forEach(function(l){d[l]=Vp(a,l)});
return d},Pd=Symbol("mobx-stored-annotations"),de=Symbol("mobx administration"),pg=function(){function a(l){void 0===l&&(l="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Zj.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=l}var d=a.prototype;d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(l){return l()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(l){return l()})};
d.reportObserved=function(){return Sb(this)};d.reportChanged=function(){fd();hc(this);Sd()};d.toString=function(){return this.name_};return a}(),Oh=B("Atom",pg),lf={identity:function(a,d){return a===d},structural:function(a,d){return ta(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,d){return ta(a,d,1)}},Yg="override",Qh=lb(),sh={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(sh);var se=Yb("observable"),Yd=
Yb("observable.ref",{enhancer:bb}),qe=Yb("observable.shallow",{enhancer:function(a,d,l){if(void 0===a||null===a||te(a)||ib(a)||fr(a)||ls(a))return a;if(Array.isArray(a))return Se.array(a,{name:l,deep:!1});if(D(a))return Se.object(a,void 0,{name:l,deep:!1});if(O(a))return Se.map(a,{name:l,deep:!1});if(R(a))return Se.set(a,{name:l,deep:!1})}}),hf=Yb("observable.struct",{enhancer:function(a,d){return ta(a,d)?d:a}}),qf=Ta(se);Object.assign($c,qf);var li={box:function(a,d){d=d||sh;return new js(a,Ec(d),
d.name,!0,d.equals)},array:function(a,d){d=d||sh;return(!1===Nf.useProxies||!1===d.proxy?tf:ob)(a,Ec(d),d.name)},map:function(a,d){d=d||sh;return new Ry(a,Ec(d),d.name)},set:function(a,d){d=d||sh;return new Sy(a,Ec(d),d.name)},object:function(a,d,l){if(!1===Nf.useProxies||!1===(null==l?void 0:l.proxy))l=Ad({},l);else{var E={},W,ka;Y();E=Ad(E,l);l=null!=(ka=(W=E[de]).proxy_)?ka:W.proxy_=new Proxy(E,lD)}return qc(l,a,d)},ref:Ta(Yd),shallow:Ta(qe),deep:qf,struct:Ta(hf)},Se=xw($c,li),Zh=zb("computed"),
Ki=zb("computed.struct",{equals:lf.structural}),Ef=function(a,d){if(S(d))return Da(a,d,Zh);if(D(a))return Ta(zb("computed",a));d=D(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new $t(d)};Object.assign(Ef,Zh);Ef.struct=Ta(Ki);var wp,bv,dv=0,ZC=1,$C=null!=(wp=null==(bv=Vp(function(){},"name"))?void 0:bv.configurable)?wp:!1,Ly={value:"action",configurable:!0,writable:!1,enumerable:!1};var aD=Symbol.toPrimitive;var js=function(a){function d(E,W,ka,oa,Fa){void 0===ka&&(ka="ObservableValue");void 0===
Fa&&(Fa=lf["default"]);oa=a.call(this,ka)||this;oa.enhancer=void 0;oa.hasUnreportedChange_=!1;oa.interceptors_=void 0;oa.changeListeners_=void 0;oa.value_=void 0;oa.dehancer=void 0;oa.enhancer=W;oa.name_=ka;oa.equals=Fa;oa.value_=W(E,void 0,ka);return oa}fa(d,a);var l=d.prototype;l.dehanceValue=function(E){return void 0!==this.dehancer?this.dehancer(E):E};l.set=function(E){E=this.prepareNewValue_(E);E!==Nf.UNCHANGED&&this.setNewValue_(E)};l.prepareNewValue_=function(E){if(ce(this)){E=rc(this,{object:this,
type:dq,newValue:E});if(!E)return Nf.UNCHANGED;E=E.newValue}E=this.enhancer(E,this.value_,this.name_);return this.equals(this.value_,E)?Nf.UNCHANGED:E};l.setNewValue_=function(E){var W=this.value_;this.value_=E;this.reportChanged();sf(this)&&Ie(this,{type:dq,object:this,newValue:E,oldValue:W})};l.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};l.intercept_=function(E){return Wc(this,E)};l.observe_=function(E,W){W&&E({observableKind:"value",debugObjectName:this.name_,object:this,
type:dq,newValue:this.value_,oldValue:void 0});return Rf(this,E)};l.raw=function(){return this.value_};l.toJSON=function(){return this.get()};l.toString=function(){return this.name_+"["+this.value_+"]"};l.valueOf=function(){return Z(this.get())};l[aD]=function(){return this.valueOf()};return d}(pg),bD=B("ObservableValue",js);var cD=Symbol.toPrimitive;var $t=function(){function a(l){this.dependenciesState_=Zj.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=
!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Zj.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new ks(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=dt.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;l.get||h(31);this.derivation=l.get;this.name_=l.name||"ComputedValue";l.set&&(this.setter_=Kc("ComputedValue-setter",
l.set));this.equals_=l.equals||(l.compareStructural||l.struct?lf.structural:lf["default"]);this.scope_=l.context;this.requiresReaction_=l.requiresReaction;this.keepAlive_=!!l.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){jb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(l){return l()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(l){return l()})};d.get=function(){this.isComputing_&&h(32,this.name_,this.derivation);if(0!==Nf.inBatch||0!==this.observers_.size||
this.keepAlive_){if(Sb(this),Uc(this)){var l=Nf.trackingContext;this.keepAlive_&&!l&&(Nf.trackingContext=this);this.trackAndCompute()&&$b(this);Nf.trackingContext=l}}else Uc(this)&&(this.warnAboutUntrackedRead_(),fd(),this.value_=this.computeValue_(!1),Sd());l=this.value_;if(l instanceof ks)throw l.cause;return l};d.set=function(l){if(this.setter_){this.isRunningSetter_&&h(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,l)}finally{this.isRunningSetter_=!1}}else h(34,this.name_)};
d.trackAndCompute=function(){var l=this.value_,E=this.dependenciesState_===Zj.NOT_TRACKING_,W=this.computeValue_(!0);if(l=E||l instanceof ks||W instanceof ks||!this.equals_(l,W))this.value_=W;return l};d.computeValue_=function(l){this.isComputing_=!0;var E=zc(!1);if(l)var W=cd(this,this.derivation,this.scope_);else if(!0===Nf.disableErrorBoundaries)W=this.derivation.call(this.scope_);else try{W=this.derivation.call(this.scope_)}catch(ka){W=new ks(ka)}Nf.allowStateChanges=E;this.isComputing_=!1;return W};
d.suspend_=function(){this.keepAlive_||(Jd(this),this.value_=void 0)};d.observe_=function(l,E){var W=this,ka=!0,oa=void 0;return Ld(function(){var Fa=W.get();if(!ka||E){var Qa=nc();l({observableKind:"computed",debugObjectName:W.name_,type:dq,object:W,newValue:Fa,oldValue:oa});Nf.trackingDerivation=Qa}ka=!1;oa=Fa})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};d.valueOf=function(){return Z(this.get())};d[cD]=function(){return this.valueOf()};
return a}(),au=B("ComputedValue",$t),Zj;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(Zj||={});var dt;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(dt||={});var ks=function(a){this.cause=void 0;this.cause=a},ev=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=
[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},fv=!0,My=!1,Nf=function(){var a=K();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(fv=!1);a.__mobxGlobals&&
a.__mobxGlobals.version!==(new ev).version&&(fv=!1);if(fv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new ev}setTimeout(function(){My||h(35)},1);return new ev}(),et=function(){function a(l,E,W,ka){void 0===l&&(l="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Zj.NOT_TRACKING_;
this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=dt.NONE;this.name_=l;this.onInvalidate_=E;this.errorHandler_=W;this.requiresObservable_=ka}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Nf.pendingReactions.push(this),0<Nf.inBatch||Nf.isRunningReactions||gv(nb))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=
function(){if(!this.isDisposed_){fd();this.isScheduled_=!1;var l=Nf.trackingContext;Nf.trackingContext=this;if(Uc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(E){this.reportExceptionInDerivation_(E)}}Nf.trackingContext=l;Sd()}};d.track=function(l){if(!this.isDisposed_){fd();this.isRunning_=!0;var E=Nf.trackingContext;Nf.trackingContext=this;l=cd(this,l,void 0);Nf.trackingContext=E;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Jd(this);l instanceof ks&&this.reportExceptionInDerivation_(l.cause);
Sd()}};d.reportExceptionInDerivation_=function(l){var E=this;if(this.errorHandler_)this.errorHandler_(l,this);else{if(Nf.disableErrorBoundaries)throw l;Nf.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",l);Nf.globalReactionErrorHandlers.forEach(function(W){return W(l,E)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(fd(),Jd(this),Sd()))};d.getDisposer_=function(){var l=this.dispose.bind(this);l[de]=this;return l};d.toString=function(){return"Reaction["+
this.name_+"]"};d.trace=function(l){void 0===l&&(l=!1);Ab(this,l)};return a}(),dD=100,gv=function(a){return a()},hv=B("Reaction",et),Ny="action",Oy=ab(Ny),eD=ab("action.bound",{bound:!0}),Py=ab("autoAction",{autoAction:!0}),fD=ab("autoAction.bound",{autoAction:!0,bound:!0}),wg=Rc(!1);Object.assign(wg,Oy);var bu=Rc(!0);Object.assign(bu,Py);wg.bound=Ta(eD);bu.bound=Ta(fD);var gD=function(a){return a()},hD="onBO",iD="onBUO",jD=0;Xb.prototype=Object.create(Error.prototype);var Qy=qa("flow"),kD=qa("flow.bound",
{bound:!0}),cu=Object.assign(function(a,d){if(S(d))return Da(a,d,Qy);var l=a.name||"\x3cunnamed flow\x3e";d=function(){var E=arguments,W=++jD,ka=wg(l+" - runid: "+W+" - init",a).apply(this,E),oa,Fa=void 0;E=new Promise(function(Qa,Xa){function db(Qb){Fa=void 0;try{var lc=wg(l+" - runid: "+W+" - yield "+Vb++,ka.next).call(ka,Qb)}catch(xc){return Xa(xc)}Lb(lc)}function kb(Qb){Fa=void 0;try{var lc=wg(l+" - runid: "+W+" - yield "+Vb++,ka["throw"]).call(ka,Qb)}catch(xc){return Xa(xc)}Lb(lc)}function Lb(Qb){if(ha(null==
Qb?void 0:Qb.then))Qb.then(Lb,Xa);else{if(Qb.done)return Qa(Qb.value);Fa=Promise.resolve(Qb.value);return Fa.then(db,kb)}}var Vb=0;oa=Xa;db(void 0)});E.cancel=wg(l+" - runid: "+W+" - cancel",function(){try{if(Fa){var Qa=Fa;ha(Qa.cancel)&&Qa.cancel()}var Xa=ka["return"](void 0),db=Promise.resolve(Xa.value);db.then(Hb,Hb);ha(db.cancel)&&db.cancel();oa(new Xb)}catch(kb){oa(kb)}});return E};d.isMobXFlow=!0;return d},Qy);cu.bound=Ta(kD);var lD={has:function(a,d){return a[de].has_(d)},get:function(a,d){return a[de].get_(d)},
set:function(a,d,l){var E;return S(d)?null!=(E=a[de].set_(d,l,!0))?E:!0:!1},deleteProperty:function(a,d){var l;return S(d)?null!=(l=a[de].delete_(d,!0))?l:!0:!1},defineProperty:function(a,d,l){var E;return null!=(E=a[de].defineProperty_(d,l))?E:!0},ownKeys:function(a){return a[de].ownKeys_()},preventExtensions:function(a){h(13)}},dq="update",mD={get:function(a,d){var l=a[de];return d===de?l:"length"===d?l.getArrayLength_():"string"!==typeof d||isNaN(d)?G(iv,d)?iv[d]:a[d]:l.get_(parseInt(d))},set:function(a,
d,l){var E=a[de];"length"===d&&E.setArrayLength_(l);"symbol"===typeof d||isNaN(d)?a[d]=l:E.set_(parseInt(d),l);return!0},preventExtensions:function(){h(15)}},Aw=function(){function a(l,E,W,ka){void 0===l&&(l="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=W;this.legacyMode_=ka;this.atom_=new pg(l);this.enhancer_=function(oa,Fa){return E(oa,
Fa,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(l){return void 0!==this.dehancer?this.dehancer(l):l};d.dehanceValues_=function(l){return void 0!==this.dehancer&&0<l.length?l.map(this.dehancer):l};d.intercept_=function(l){return Wc(this,l)};d.observe_=function(l,E){void 0===E&&(E=!1);E&&l({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Rf(this,
l)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(l){("number"!==typeof l||isNaN(l)||0>l)&&h("Out of range: "+l);var E=this.values_.length;if(l!==E)if(l>E){for(var W=Array(l-E),ka=0;ka<l-E;ka++)W[ka]=void 0;this.spliceWithArray_(E,0,W)}else this.spliceWithArray_(l,E-l)};d.updateArrayLength_=function(l,E){l!==this.lastKnownLength_&&h(16);this.lastKnownLength_+=E;this.legacyMode_&&0<E&&Ae(l+E+1)};d.spliceWithArray_=function(l,E,W){var ka=
this,oa=this.values_.length;void 0===l?l=0:l>oa?l=oa:0>l&&(l=Math.max(0,oa+l));E=1===arguments.length?oa-l:void 0===E||null===E?0:Math.max(0,Math.min(E,oa-l));void 0===W&&(W=T);if(ce(this)){var Fa=rc(this,{object:this.proxy_,type:"splice",index:l,removedCount:E,added:W});if(!Fa)return T;E=Fa.removedCount;W=Fa.added}W=0===W.length?W:W.map(function(Qa){return ka.enhancer_(Qa,void 0)});this.legacyMode_&&this.updateArrayLength_(oa,W.length-E);oa=this.spliceItemsIntoValues_(l,E,W);0===E&&0===W.length||
this.notifyArraySplice_(l,W,oa);return this.dehanceValues_(oa)};d.spliceItemsIntoValues_=function(l,E,W){if(1E4>W.length){var ka;return(ka=this.values_).splice.apply(ka,[l,E].concat(W))}ka=this.values_.slice(l,l+E);var oa=this.values_.slice(l+E);this.values_.length+=W.length-E;for(E=0;E<W.length;E++)this.values_[l+E]=W[E];for(E=0;E<oa.length;E++)this.values_[l+W.length+E]=oa[E];return ka};d.notifyArrayChildUpdate_=function(l,E,W){var ka=!this.owned_&&!1,oa=sf(this);l=oa||ka?{observableKind:"array",
object:this.proxy_,type:dq,debugObjectName:this.atom_.name_,index:l,newValue:E,oldValue:W}:null;this.atom_.reportChanged();oa&&Ie(this,l)};d.notifyArraySplice_=function(l,E,W){var ka=!this.owned_&&!1,oa=sf(this);l=oa||ka?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:l,removed:W,added:E,removedCount:W.length,addedCount:E.length}:null;this.atom_.reportChanged();oa&&Ie(this,l)};d.get_=function(l){if(this.legacyMode_&&l>=this.values_.length)console.warn("[mobx] Out of bounds read: "+
l);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[l])};d.set_=function(l,E){var W=this.values_;this.legacyMode_&&l>W.length&&h(17,l,W.length);if(l<W.length){var ka=W[l];if(ce(this)){E=rc(this,{type:dq,object:this.proxy_,index:l,newValue:E});if(!E)return;E=E.newValue}E=this.enhancer_(E,ka);E!==ka&&(W[l]=E,this.notifyArrayChildUpdate_(l,E,ka))}else{l=Array(l+1-W.length);for(ka=0;ka<l.length-1;ka++)l[ka]=void 0;l[l.length-1]=E;this.spliceWithArray_(W.length,0,l)}};return a}(),
iv={clear:function(){return this.splice(0)},replace:function(a){var d=this[de];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var l=arguments.length,E=Array(2<l?l-2:0),W=2;W<l;W++)E[W-2]=arguments[W];l=this[de];switch(arguments.length){case 0:return[];case 1:return l.spliceWithArray_(a);case 2:return l.spliceWithArray_(a,d)}return l.spliceWithArray_(a,d,E)},spliceWithArray:function(a,d,l){return this[de].spliceWithArray_(a,d,l)},push:function(){for(var a=
this[de],d=arguments.length,l=Array(d),E=0;E<d;E++)l[E]=arguments[E];a.spliceWithArray_(a.values_.length,0,l);return a.values_.length},pop:function(){return this.splice(Math.max(this[de].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var a=this[de],d=arguments.length,l=Array(d),E=0;E<d;E++)l[E]=arguments[E];a.spliceWithArray_(0,0,l);return a.values_.length},reverse:function(){Nf.trackingDerivation&&h(37,"reverse");this.replace(this.slice().reverse());
return this},sort:function(){Nf.trackingDerivation&&h(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[de];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};xb("concat",$a);xb("flat",$a);xb("includes",$a);xb("indexOf",$a);xb("join",$a);xb("lastIndexOf",$a);xb("slice",$a);xb("toString",$a);xb("toLocaleString",$a);xb("every",Eb);xb("filter",Eb);xb("find",Eb);xb("findIndex",Eb);xb("flatMap",Eb);xb("forEach",
Eb);xb("map",Eb);xb("some",Eb);xb("reduce",Db);xb("reduceRight",Db);var nD=B("ObservableArrayAdministration",Aw),oD={};var pD=Symbol.iterator;var qD=Symbol.toStringTag;var Ry=function(){function a(l,E,W){var ka=this;void 0===E&&(E=Ma);void 0===W&&(W="ObservableMap");this.name_=this.enhancer_=void 0;this[de]=oD;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=E;this.name_=W;ha(Map)||h(18);this.keysAtom_=Va("ObservableMap.keys()");this.data_=
new Map;this.hasMap_=new Map;Gb(!0,function(){ka.merge(l)})}var d=a.prototype;d.has_=function(l){return this.data_.has(l)};d.has=function(l){var E=this;if(!Nf.trackingDerivation)return this.has_(l);var W=this.hasMap_.get(l);if(!W){var ka=W=new js(this.has_(l),bb,"ObservableMap.key?",!1);this.hasMap_.set(l,ka);Nc(ka,function(){return E.hasMap_["delete"](l)})}return W.get()};d.set=function(l,E){var W=this.has_(l);if(ce(this)){E=rc(this,{type:W?dq:"add",object:this,newValue:E,name:l});if(!E)return this;
E=E.newValue}W?this.updateValue_(l,E):this.addValue_(l,E);return this};d["delete"]=function(l){var E=this;if(ce(this)&&!rc(this,{type:"delete",object:this,name:l}))return!1;if(this.has_(l)){var W=sf(this),ka=W?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(l).value_,name:l}:null;zd(function(){var oa;E.keysAtom_.reportChanged();null==(oa=E.hasMap_.get(l))?void 0:oa.setNewValue_(!1);E.data_.get(l).setNewValue_(void 0);E.data_["delete"](l)});W&&Ie(this,
ka);return!0}return!1};d.updateValue_=function(l,E){var W=this.data_.get(l);E=W.prepareNewValue_(E);if(E!==Nf.UNCHANGED){var ka=sf(this);l=ka?{observableKind:"map",debugObjectName:this.name_,type:dq,object:this,oldValue:W.value_,name:l,newValue:E}:null;W.setNewValue_(E);ka&&Ie(this,l)}};d.addValue_=function(l,E){var W=this;zd(function(){var Fa,Qa=new js(E,W.enhancer_,"ObservableMap.key",!1);W.data_.set(l,Qa);E=Qa.value_;null==(Fa=W.hasMap_.get(l))?void 0:Fa.setNewValue_(!0);W.keysAtom_.reportChanged()});
var ka=sf(this),oa=ka?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:l,newValue:E}:null;ka&&Ie(this,oa)};d.get=function(l){return this.has(l)?this.dehanceValue_(this.data_.get(l).get()):this.dehanceValue_(void 0)};d.dehanceValue_=function(l){return void 0!==this.dehancer?this.dehancer(l):l};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var l=this,E=this.keys();return Za({next:function(){var W=E.next(),ka=W.done;W=W.value;
return{done:ka,value:ka?void 0:l.get(W)}}})};d.entries=function(){var l=this,E=this.keys();return Za({next:function(){var W=E.next(),ka=W.done;W=W.value;return{done:ka,value:ka?void 0:[W,l.get(W)]}}})};d[pD]=function(){return this.entries()};d.forEach=function(l,E){for(var W=Ga(this),ka;!(ka=W()).done;)ka=ka.value,l.call(E,ka[1],ka[0],this)};d.merge=function(l){var E=this;fr(l)&&(l=new Map(l));zd(function(){D(l)?ba(l).forEach(function(W){return E.set(W,l[W])}):Array.isArray(l)?l.forEach(function(W){return E.set(W[0],
W[1])}):O(l)?(l.constructor!==Map&&h(19,l),l.forEach(function(W,ka){return E.set(ka,W)})):null!==l&&void 0!==l&&h(20,l)});return this};d.clear=function(){var l=this;zd(function(){Fd(function(){for(var E=Ga(l.keys()),W;!(W=E()).done;)l["delete"](W.value)})})};d.replace=function(l){var E=this;zd(function(){for(var W=bd(l),ka=new Map,oa=!1,Fa=Ga(E.data_.keys()),Qa;!(Qa=Fa()).done;)if(Qa=Qa.value,!W.has(Qa))if(E["delete"](Qa))oa=!0;else{var Xa=E.data_.get(Qa);ka.set(Qa,Xa)}for(W=Ga(W.entries());!(Fa=
W()).done;)Qa=Fa.value,Fa=Qa[0],Xa=Qa[1],Qa=E.data_.has(Fa),E.set(Fa,Xa),E.data_.has(Fa)&&(Xa=E.data_.get(Fa),ka.set(Fa,Xa),Qa||(oa=!0));if(!oa)if(E.data_.size!==ka.size)E.keysAtom_.reportChanged();else for(oa=E.data_.keys(),W=ka.keys(),Fa=oa.next(),Qa=W.next();!Fa.done;){if(Fa.value!==Qa.value){E.keysAtom_.reportChanged();break}Fa=oa.next();Qa=W.next()}E.data_=ka});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(l,
E){return Rf(this,l)};d.intercept_=function(l){return Wc(this,l)};M(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:qD,get:function(){return"Map"}}]);return a}(),fr=B("ObservableMap",Ry),rD={};var sD=Symbol.iterator;var tD=Symbol.toStringTag;var Sy=function(){function a(l,E,W){void 0===E&&(E=Ma);void 0===W&&(W="ObservableSet");this.name_=void 0;this[de]=rD;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=
void 0;this.name_=W;ha(Set)||h(22);this.atom_=Va(this.name_);this.enhancer_=function(ka,oa){return E(ka,oa,W)};l&&this.replace(l)}var d=a.prototype;d.dehanceValue_=function(l){return void 0!==this.dehancer?this.dehancer(l):l};d.clear=function(){var l=this;zd(function(){Fd(function(){for(var E=Ga(l.data_.values()),W;!(W=E()).done;)l["delete"](W.value)})})};d.forEach=function(l,E){for(var W=Ga(this),ka;!(ka=W()).done;)ka=ka.value,l.call(E,ka,ka,this)};d.add=function(l){var E=this;if(ce(this)&&!rc(this,
{type:"add",object:this,newValue:l}))return this;if(!this.has(l)){zd(function(){E.data_.add(E.enhancer_(l,void 0));E.atom_.reportChanged()});var W=sf(this),ka=W?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,newValue:l}:null;W&&Ie(this,ka)}return this};d["delete"]=function(l){var E=this;if(ce(this)&&!rc(this,{type:"delete",object:this,oldValue:l}))return!1;if(this.has(l)){var W=sf(this),ka=W?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:l}:
null;zd(function(){E.atom_.reportChanged();E.data_["delete"](l)});W&&Ie(this,ka);return!0}return!1};d.has=function(l){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(l))};d.entries=function(){var l=0,E=Array.from(this.keys()),W=Array.from(this.values());return Za({next:function(){var ka=l;l+=1;return ka<W.length?{value:[E[ka],W[ka]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var l=this,E=0,W=Array.from(this.data_.values());
return Za({next:function(){return E<W.length?{value:l.dehanceValue_(W[E++]),done:!1}:{done:!0}}})};d.replace=function(l){var E=this;ls(l)&&(l=new Set(l));zd(function(){Array.isArray(l)?(E.clear(),l.forEach(function(W){return E.add(W)})):R(l)?(E.clear(),l.forEach(function(W){return E.add(W)})):null!==l&&void 0!==l&&h("Cannot initialize set from "+l)});return this};d.observe_=function(l,E){return Rf(this,l)};d.intercept_=function(l){return Wc(this,l)};d.toJSON=function(){return Array.from(this)};d.toString=
function(){return"[object ObservableSet]"};d[sD]=function(){return this.values()};M(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:tD,get:function(){return"Set"}}]);return a}(),ls=B("ObservableSet",Sy),Ty=Object.create(null),Uy=function(){function a(l,E,W,ka){void 0===E&&(E=new Map);void 0===ka&&(ka=Qh);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=
this.values_=this.target_=void 0;this.target_=l;this.values_=E;this.name_=W;this.defaultAnnotation_=ka;this.keysAtom_=new pg("ObservableObject.keys");this.isPlainObject_=D(this.target_)}var d=a.prototype;d.getObservablePropValue_=function(l){return this.values_.get(l).get()};d.setObservablePropValue_=function(l,E){var W=this.values_.get(l);if(W instanceof $t)return W.set(E),!0;if(ce(this)){E=rc(this,{type:dq,object:this.proxy_||this.target_,name:l,newValue:E});if(!E)return null;E=E.newValue}E=W.prepareNewValue_(E);
if(E!==Nf.UNCHANGED){var ka=sf(this);l=ka?{type:dq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:W.value_,name:l,newValue:E}:null;W.setNewValue_(E);ka&&Ie(this,l)}return!0};d.get_=function(l){Nf.trackingDerivation&&!G(this.target_,l)&&this.has_(l);return this.target_[l]};d.set_=function(l,E,W){void 0===W&&(W=!1);if(G(this.target_,l)){if(this.values_.has(l))return this.setObservablePropValue_(l,E);if(W)return Reflect.set(this.target_,l,E);this.target_[l]=
E;return!0}return this.extend_(l,{value:E,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,W)};d.has_=function(l){if(!Nf.trackingDerivation)return l in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var E=this.pendingKeys_.get(l);E||(E=new js(l in this.target_,bb,"ObservableObject.key?",!1),this.pendingKeys_.set(l,E));return E.get()};d.make_=function(l,E){!0===E&&(E=this.defaultAnnotation_);if(!1!==E){if(!(l in this.target_)){var W;if(null!=(W=this.target_[Pd])&&W[l])return;
h(1,E.annotationType_,this.name_+"."+l.toString())}for(W=this.target_;W&&W!==Wp;){var ka=Vp(W,l);if(ka){ka=E.make_(this,l,ka,W);if(0===ka)return;if(1===ka)break}W=Object.getPrototypeOf(W)}var oa;null==(oa=this.target_[Pd])?!0:delete oa[l]}};d.extend_=function(l,E,W,ka){void 0===ka&&(ka=!1);!0===W&&(W=this.defaultAnnotation_);if(!1===W)return this.defineProperty_(l,E,ka);if(E=W.extend_(this,l,E,ka)){var oa;null==(oa=this.target_[Pd])?!0:delete oa[l]}return E};d.defineProperty_=function(l,E,W){void 0===
W&&(W=!1);try{fd();var ka=this.delete_(l);if(!ka)return ka;if(ce(this)){var oa=rc(this,{object:this.proxy_||this.target_,name:l,type:"add",newValue:E.value});if(!oa)return null;var Fa=oa.newValue;E.value!==Fa&&(E=ca({},E,{value:Fa}))}if(W){if(!Reflect.defineProperty(this.target_,l,E))return!1}else Ap(this.target_,l,E);this.notifyPropertyAddition_(l,E.value)}finally{Sd()}return!0};d.defineObservableProperty_=function(l,E,W,ka){void 0===ka&&(ka=!1);try{fd();var oa=this.delete_(l);if(!oa)return oa;if(ce(this)){var Fa=
rc(this,{object:this.proxy_||this.target_,name:l,type:"add",newValue:E});if(!Fa)return null;E=Fa.newValue}var Qa=Zd(l),Xa={configurable:Nf.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Qa.get,set:Qa.set};if(ka){if(!Reflect.defineProperty(this.target_,l,Xa))return!1}else Ap(this.target_,l,Xa);var db=new js(E,W,"ObservableObject.key",!1);this.values_.set(l,db);this.notifyPropertyAddition_(l,db.value_)}finally{Sd()}return!0};d.defineComputedProperty_=function(l,E,W){void 0===W&&(W=!1);try{fd();
var ka=this.delete_(l);if(!ka)return ka;if(ce(this)&&!rc(this,{object:this.proxy_||this.target_,name:l,type:"add",newValue:void 0}))return null;E.name||(E.name="ObservableObject.key");E.context=this.proxy_||this.target_;var oa=Zd(l),Fa={configurable:Nf.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:oa.get,set:oa.set};if(W){if(!Reflect.defineProperty(this.target_,l,Fa))return!1}else Ap(this.target_,l,Fa);this.values_.set(l,new $t(E));this.notifyPropertyAddition_(l,void 0)}finally{Sd()}return!0};
d.delete_=function(l,E){void 0===E&&(E=!1);if(!G(this.target_,l))return!0;if(ce(this)&&!rc(this,{object:this.proxy_||this.target_,name:l,type:"remove"}))return null;try{var W,ka;fd();var oa=sf(this),Fa=this.values_.get(l),Qa=void 0;if(!Fa&&oa){var Xa;Qa=null==(Xa=Vp(this.target_,l))?void 0:Xa.value}if(E){if(!Reflect.deleteProperty(this.target_,l))return!1}else delete this.target_[l];Fa&&(this.values_["delete"](l),Fa instanceof js&&(Qa=Fa.value_),hc(Fa));this.keysAtom_.reportChanged();null==(W=this.pendingKeys_)?
void 0:null==(ka=W.get(l))?void 0:ka.set(l in this.target_);if(oa){var db={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Qa,name:l};oa&&Ie(this,db)}}finally{Sd()}return!0};d.observe_=function(l,E){return Rf(this,l)};d.intercept_=function(l){return Wc(this,l)};d.notifyPropertyAddition_=function(l,E){var W,ka,oa=sf(this);oa&&(E=oa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:l,newValue:E}:
null,oa&&Ie(this,E));null==(W=this.pendingKeys_)?void 0:null==(ka=W.get(l))?void 0:ka.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=function(){this.keysAtom_.reportObserved();return Ic(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),uD=B("ObservableObjectAdministration",Uy),vD=af(0),Bw=0,Vy=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=
d:a.prototype=d})(Vy,Array.prototype);var Cw=function(a,d,l){function E(ka,oa,Fa,Qa){void 0===Fa&&(Fa="ObservableArray");void 0===Qa&&(Qa=!1);var Xa=a.call(this)||this;oa=new Aw(Fa,oa,Qa,!0);oa.proxy_=pa(Xa);Q(pa(Xa),de,oa);ka&&ka.length&&(oa=zc(!0),Xa.spliceWithArray(0,0,ka),Nf.allowStateChanges=oa);Object.defineProperty(pa(Xa),"0",vD);return Xa}fa(E,a);var W=E.prototype;W.concat=function(){this[de].atom_.reportObserved();for(var ka=arguments.length,oa=Array(ka),Fa=0;Fa<ka;Fa++)oa[Fa]=arguments[Fa];
return Array.prototype.concat.apply(this.slice(),oa.map(function(Qa){return ib(Qa)?Qa.slice():Qa}))};W[l]=function(){var ka=this,oa=0;return Za({next:function(){return oa<ka.length?{value:ka[oa++],done:!1}:{done:!0,value:void 0}}})};M(E,[{key:"length",get:function(){return this[de].getArrayLength_()},set:function(ka){this[de].setArrayLength_(ka)}},{key:d,get:function(){return"Array"}}]);return E}(Vy,Symbol.toStringTag,Symbol.iterator);Object.entries(iv).forEach(function(a){var d=a[0];a=a[1];"concat"!==
d&&N(Cw.prototype,d,a)});Ae(1E3);var Wy=Wp.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof K()[a]&&h("MobX requires global '"+a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:vc,extras:{getDebugName:vb},$mobx:de});var sb=V(586),Wm=class{constructor(a){gb(this,"props");gb(this,"aspectRatio");gb(this,"type");gb(this,"hideCloneHandles",!1);gb(this,"hideResizeHandles",!1);gb(this,"hideRotateHandle",
!1);gb(this,"hideContextBar",!1);gb(this,"hideSelectionDetail",!1);gb(this,"hideSelection",!1);gb(this,"canChangeAspectRatio",!0);gb(this,"canUnmount",!0);gb(this,"canResize",[!0,!0]);gb(this,"canScale",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!1);gb(this,"canBind",!1);gb(this,"nonce");gb(this,"bindingDistance",4);gb(this,"isDirty",!1);gb(this,"lastSerialized");gb(this,"getCenter",()=>Bf.getBoundsCenter(this.bounds));gb(this,"getRotatedBounds",()=>{const {bounds:ka,props:{rotation:oa}}=this;return oa?
Bf.getBoundsFromPoints(Bf.getRotatedCorners(ka,oa)):ka});gb(this,"hitTestPoint",ka=>{var oa=this.rotatedBounds;if(!this.props.rotation)return bl.pointInBounds(ka,oa);oa=Bf.getRotatedCorners(oa,this.props.rotation);return bl.pointInPolygon(ka,oa)});gb(this,"hitTestLineSegment",(ka,oa)=>{const Fa=Bf.getBoundsFromPoints([ka,oa]),{rotatedBounds:Qa,props:{rotation:Xa=0}}=this;return Bf.boundsContain(Qa,Fa)||Xa?f(ka,oa,Bf.getRotatedCorners(this.bounds)).didIntersect:0<k(Qa,ka,oa).length});gb(this,"hitTestBounds",
ka=>{const {rotatedBounds:oa,props:{rotation:Fa=0}}=this,Qa=Bf.getRotatedCorners(this.bounds,Fa);return Bf.boundsContain(ka,oa)||0<y([ka.minX,ka.minY],[ka.width,ka.height],Qa).length});gb(this,"getExpandedBounds",()=>Bf.expandBounds(this.getBounds(),this.bindingDistance));gb(this,"getBindingPoint",(ka,oa,Fa,Qa)=>{var Xa=this.getBounds(),db=this.getExpandedBounds();if(bl.pointInBounds(ka,db)){var kb=C(oa,Fa,db).filter(Lb=>Lb.didIntersect).map(Lb=>Lb.points[0]);if(kb.length)return Fa=this.getCenter(),
kb=kb.sort((Lb,Vb)=>me.dist(Vb,oa)-me.dist(Lb,oa))[0],kb=me.med(ka,kb),Qa?(Qa=2>me.dist(ka,Fa)?Fa:ka,Xa=0):(Qa=2>me.distanceToLineSegment(ka,kb,Fa)?Fa:kb,Xa=bl.pointInBounds(ka,Xa)?this.bindingDistance:Math.max(this.bindingDistance,Bf.getBoundsSides(Xa).map(Lb=>me.distanceToLineSegment(Lb[1][0],Lb[1][1],ka)).sort((Lb,Vb)=>Lb-Vb)[0])),db=me.divV(me.sub(Qa,[db.minX,db.minY]),[db.width,db.height]),{point:me.clampV(db,0,1),distance:Xa}}});gb(this,"getSerialized",()=>Bb(of(oe({},this.props),{type:this.type,
nonce:this.nonce})));gb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||zd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});gb(this,"validateProps",ka=>ka);gb(this,"update",(ka,oa=!1,Fa=!1)=>{oa||this.isDirty||this.setIsDirty(!0);oa||Fa||this.incNonce();Object.assign(this.props,this.validateProps(ka));return this});gb(this,"clone",()=>new this.constructor(this.serialized));
gb(this,"onResetBounds",ka=>this);gb(this,"scale",[1,1]);gb(this,"onResizeStart",ka=>{var oa;this.scale=[...(null!=(oa=this.props.scale)?oa:[1,1])];return this});gb(this,"onResize",(ka,oa)=>{const {bounds:Fa,rotation:Qa,scale:[Xa,db]}=oa;ka=[...this.scale];0>Xa&&(ka[0]*=-1);0>db&&(ka[1]*=-1);this.update({point:[Fa.minX,Fa.minY],scale:ka,rotation:Qa});return this});gb(this,"onHandleChange",(ka,{id:oa,delta:Fa})=>{if(void 0!==ka.handles){var Qa=ms(ka.handles);Qa[oa]=of(oe({},Qa[oa]),{point:me.add(Fa,
ka.handles[oa].point)});var Xa=Bf.getCommonTopLeft(Object.values(Qa).map(db=>db.point));Object.values(Qa).forEach(db=>{db.point=me.sub(db.point,Xa)});this.update({point:me.add(ka.point,Xa),handles:Qa})}});var d,l;const E=this.constructor.id,W=null!=(d=this.constructor.defaultProps)?d:{};this.type=E;this.props=oe(oe({scale:[1,1]},W),a);this.nonce=null!=(l=a.nonce)?l:Date.now();Og(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=
a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=this.getBounds();const {stroke:d,strokeWidth:l,strokeType:E,opacity:W,fill:ka,noFill:oa,borderRadius:Fa}=this.props;return(0,sb.jsx)("rect",{fill:oa?"none":ah(ka,"background"),stroke:ah(d,"stroke"),strokeWidth:null!=l?l:2,strokeDasharray:"dashed"===E?"8 2":void 0,fillOpacity:null!=W?W:.2,width:a.width,
height:a.height,rx:Fa,ry:Fa})}};gb(Wm,"type");ie([Se],Wm.prototype,"props",2);ie([Se],Wm.prototype,"canResize",2);ie([Se],Wm.prototype,"nonce",2);ie([Se],Wm.prototype,"isDirty",2);ie([Se],Wm.prototype,"lastSerialized",2);ie([Ef],Wm.prototype,"id",1);ie([wg],Wm.prototype,"setNonce",1);ie([wg],Wm.prototype,"incNonce",1);ie([wg],Wm.prototype,"setIsDirty",1);ie([wg],Wm.prototype,"setLastSerialized",1);ie([Ef],Wm.prototype,"center",1);ie([Ef],Wm.prototype,"bounds",1);ie([Ef],Wm.prototype,"rotatedBounds",
1);ie([Ef],Wm.prototype,"serialized",1);ie([wg],Wm.prototype,"update",2);var fo=class extends Wm{constructor(a={}){super(a);gb(this,"canBind",!0);gb(this,"getBounds",()=>{const [d,l]=this.props.point,[E,W]=this.props.size;return{minX:d,minY:l,maxX:d+E,maxY:l+W,width:E,height:W}});gb(this,"getRotatedBounds",()=>Bf.getBoundsFromPoints(Bf.getRotatedCorners(this.bounds,this.props.rotation)));gb(this,"onResize",(d,l)=>{const {bounds:E,rotation:W,scale:[ka,oa]}=l;d=[...this.scale];0>ka&&(d[0]*=-1);0>oa&&
(d[1]*=-1);this.update({point:[E.minX,E.minY],scale:d,rotation:W});return this.update({rotation:W,point:[E.minX,E.minY],size:[Math.max(1,E.width),Math.max(1,E.height)],scale:d})});gb(this,"validateProps",d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});Og(this)}};gb(fo,"id","box");gb(fo,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var ft=class extends Wm{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {pointBounds:d,
props:{point:l}}=this;return Bf.translateBounds(d,l)});gb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:l},bounds:E,rotatedPoints:W}=this;return d?Bf.translateBounds(Bf.getBoundsFromPoints(W),l):E});gb(this,"normalizedPoints",[]);gb(this,"isResizeFlippedX",!1);gb(this,"isResizeFlippedY",!1);gb(this,"onResizeStart",()=>{var d;const {bounds:l,props:{points:E}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const W=[l.width,l.height];this.normalizedPoints=E.map(ka=>Hd.divV(ka,
W));return this});gb(this,"onResize",(d,l)=>{const {bounds:E,scale:[W,ka]}=l,oa=[E.width,E.height];d=[...this.scale];0>W&&(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update(W||ka?{point:[E.minX,E.minY],points:this.normalizedPoints.map(Fa=>Hd.mulV(Fa,oa).concat(Fa[2])),scale:d}:{point:[E.minX,E.minY],points:this.normalizedPoints.map(Fa=>Hd.mulV(Fa,oa).concat(Fa[2]))})});gb(this,"hitTestPoint",d=>{const {props:{points:l,point:E}}=this;return bl.pointNearToPolyline(Hd.sub(d,E),l)});gb(this,"hitTestLineSegment",
(d,l)=>{const {bounds:E,props:{points:W,point:ka}}=this;if(bl.pointInBounds(d,E)||bl.pointInBounds(l,E)||0<k(E,d,l).length){const oa=Hd.sub(d,ka),Fa=Hd.sub(l,ka);return f(oa,Fa,W).didIntersect||!!W.find(Qa=>5>Hd.dist(oa,Qa)||5>Hd.dist(Fa,Qa))}return!1});gb(this,"hitTestBounds",d=>{const {rotatedBounds:l,props:{points:E,point:W}}=this,ka=Bf.translateBounds(d,Hd.neg(W));return Bf.boundsContain(d,l)||E.every(oa=>bl.pointInBounds(oa,ka))||Bf.boundsCollide(d,l)&&0<L([ka.minX,ka.minY],[ka.width,ka.height],
E).length});Og(this)}get pointBounds(){const {props:{points:a}}=this;return Bf.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:l},center:E}=this;if(!l)return d;const W=Hd.sub(E,a);return d.map(ka=>Hd.rotWith(ka,W,l))}};gb(ft,"id","draw");gb(ft,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});ie([Ef],ft.prototype,"pointBounds",1);ie([Ef],ft.prototype,"rotatedPoints",1);var Dw=class extends fo{constructor(a={}){super(a);gb(this,
"getBounds",()=>{const {props:{point:[d,l],size:[E,W]}}=this;return Bf.getRotatedEllipseBounds(d,l,E/2,W/2,0)});gb(this,"getRotatedBounds",()=>{const {props:{point:[d,l],size:[E,W],rotation:ka}}=this;return Bf.getRotatedEllipseBounds(d,l,E/2,W/2,ka)});gb(this,"hitTestPoint",d=>{const {props:{size:l,rotation:E},center:W}=this;return bl.pointInEllipse(d,W,l[0],l[1],E||0)});gb(this,"hitTestLineSegment",(d,l)=>{const {props:{size:[E,W],rotation:ka=0},center:oa}=this;return p(d,l,oa,E,W,ka).didIntersect});
gb(this,"hitTestBounds",d=>{const {props:{size:[l,E],rotation:W=0},rotatedBounds:ka}=this;var oa;if(!(oa=Bf.boundsContain(d,ka))){const {minX:Fa,minY:Qa,width:Xa,height:db}=d;oa=0<t(this.center,l/2,E/2,W,[Fa,Qa],[Xa,db]).length}return oa});Og(this)}};gb(Dw,"id","ellipse");gb(Dw,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var Ew=class extends fo{constructor(a={}){super(a);gb(this,"onResetBounds",d=>{const {clipping:l,size:E,point:W}=this.props;if(l){const [ka,
oa,Fa,Qa]=Array.isArray(l)?l:[l,l,l,l];return this.update({clipping:0,point:[W[0]-Qa,W[1]-ka],size:[E[0]+(Qa-oa),E[1]+(ka-Fa)]})}if(d.asset){const {size:[ka,oa]}=d.asset;this.update({clipping:0,point:[W[0]+E[0]/2-ka/2,W[1]+E[1]/2-oa/2],size:[ka,oa]})}return this});gb(this,"onResize",(d,l)=>{const {bounds:E,clip:W,scale:ka}=l;({clipping:l}=this.props);const {clipping:oa}=d;if(W){const {point:[Fa,Qa],size:[Xa,db]}=d,[kb,Lb,Vb,Qb]=oa?Array.isArray(oa)?oa:[oa,oa,oa,oa]:[0,0,0,0];l=[kb+(E.minY-Qa),Lb+
(E.maxX-(Fa+Xa)),Vb+(E.maxY-(Qa+db)),Qb+(E.minX-Fa)]}else void 0!==oa&&(l=Array.isArray(oa)?oa:[oa,oa,oa,oa],l=[l[0]*ka[1],l[1]*ka[0],l[2]*ka[1],l[3]*ka[0]]);if(l&&Array.isArray(l)){const Fa=l;Fa.every((Qa,Xa)=>0===Xa||Qa===Fa[Xa-1])&&(l=Fa[0])}return this.update({point:[E.minX,E.minY],size:[Math.max(1,E.width),Math.max(1,E.height)],clipping:l})});Og(this)}};gb(Ew,"id","ellipse");gb(Ew,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",
assetId:""});var Xy=class extends Wm{constructor(a={}){super(a);gb(this,"getBounds",()=>{const {points:d,props:{point:l}}=this;return Bf.translateBounds(Bf.getBoundsFromPoints(d),l)});gb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,props:{point:l}}=this;return Bf.translateBounds(Bf.getBoundsFromPoints(d),l)});gb(this,"normalizedHandles",[]);gb(this,"onResizeStart",()=>{var d;const {props:{handles:l},bounds:E}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const W=[E.width,E.height];
this.normalizedHandles=Object.values(l).map(ka=>Hd.divV(ka.point,W));return this});gb(this,"onResize",(d,l)=>{const {bounds:E,scale:[W,ka]}=l,{props:{handles:oa},normalizedHandles:Fa}=this,Qa=[E.width,E.height];d=[...this.scale];0>W&&(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update({point:[E.minX,E.minY],handles:Object.values(oa).map((Xa,db)=>of(oe({},Xa),{point:Hd.mulV(Fa[db],Qa)})),scale:d})});gb(this,"hitTestPoint",d=>{const {points:l}=this;return bl.pointNearToPolyline(Hd.sub(d,this.props.point),
l)});gb(this,"hitTestLineSegment",(d,l)=>{const {bounds:E,points:W,props:{point:ka}}=this;if(bl.pointInBounds(d,E)||bl.pointInBounds(l,E)||0<k(E,d,l).length){const oa=Hd.sub(d,ka),Fa=Hd.sub(l,ka);return f(oa,Fa,W).didIntersect||!!W.find(Qa=>5>Hd.dist(oa,Qa)||5>Hd.dist(Fa,Qa))}return!1});gb(this,"hitTestBounds",d=>{const {rotatedBounds:l,points:E,props:{point:W}}=this,ka=Bf.translateBounds(d,Hd.neg(W));return Bf.boundsContain(d,l)||E.every(oa=>bl.pointInBounds(oa,ka))||Bf.boundsCollide(d,l)&&0<L([ka.minX,
ka.minY],[ka.width,ka.height],E).length});gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Xy.defaultProps.handles);return d});Og(this)}get points(){return Object.values(this.props.handles).map(a=>a.point)}get centroid(){const {points:a}=this;return Ll.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:l}}=this;return l?Object.values(d).map(E=>Hd.rotWith(E.point,a,l)):this.points}},gt=Xy;gb(gt,
"id","polyline");gb(gt,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});ie([Ef],gt.prototype,"points",1);ie([Ef],gt.prototype,"centroid",1);ie([Ef],gt.prototype,"rotatedPoints",1);var Yy=class extends gt{constructor(a={}){super(a);gb(this,"hideResizeHandles",!0);gb(this,"hideRotateHandle",!0);gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Yy.defaultProps.handles);return d});gb(this,"getHandlesChange",
(d,l)=>{var E=Uk(d.handles,l);E=Uk(E,{start:{point:me.toFixed(E.start.point)},end:{point:me.toFixed(E.end.point)}});if(!me.isEqual(E.start.point,E.end.point)){l={point:d.point,handles:ms(E)};d=d.point;E=Bf.translateBounds(Bf.getBoundsFromPoints(Object.values(E).map(ka=>ka.point)),l.point);var W=me.sub([E.minX,E.minY],d);me.isEqual(W,[0,0])||(Object.values(l.handles).forEach(ka=>{ka.point=me.toFixed(me.sub(ka.point,W))}),l.point=me.toFixed(me.add(l.point,W)));return l}});Og(this)}},du=Yy;gb(du,"id",
"line");gb(du,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var gr=class extends fo{constructor(a={}){super(a);gb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,props:{point:l},offset:E}=this;return Bf.translateBounds(Bf.getBoundsFromPoints(d),Hd.add(l,E))});gb(this,"hitTestPoint",d=>{const {vertices:l}=this;return bl.pointInPolygon(Hd.add(d,this.props.point),l)});gb(this,"hitTestLineSegment",
(d,l)=>{const {vertices:E,props:{point:W}}=this;return f(Hd.sub(d,W),Hd.sub(l,W),E).didIntersect});gb(this,"hitTestBounds",d=>{const {rotatedBounds:l,offset:E,rotatedVertices:W,props:{point:ka}}=this,oa=Bf.translateBounds(d,Hd.neg(Hd.add(ka,E)));return Bf.boundsContain(d,l)||W.every(Fa=>bl.pointInBounds(Fa,oa))||0<y([oa.minX,oa.minY],[oa.width,oa.height],W).length});gb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});Og(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},
vertices:d}=this;return d.map(l=>Hd.add(l,a))}get centroid(){const {vertices:a}=this;return Ll.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:l}}=this;return l?a.map(E=>Hd.rotWith(E,d,l)):a}get offset(){const {props:{size:[a,d]}}=this,l=Bf.getBoundsCenter(Bf.getBoundsFromPoints(this.vertices));return Hd.sub(Hd.div([a,d],2),l)}getVertices(a=0){const {ratio:d,sides:l,size:E}=this.props;return 3===l?Ll.getTriangleVertices(E,a,d):Ll.getPolygonVertices(E,l,a,d)}};
gb(gr,"id","polygon");gb(gr,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});ie([Ef],gr.prototype,"vertices",1);ie([Ef],gr.prototype,"pageVertices",1);ie([Ef],gr.prototype,"centroid",1);ie([Ef],gr.prototype,"rotatedVertices",1);ie([Ef],gr.prototype,"offset",1);var Fw=class extends fo{constructor(a={}){super(a);gb(this,"canEdit",!0);gb(this,"canFlip",!1);Og(this)}};gb(Fw,"id","text");gb(Fw,"defaultProps",{id:"text",type:"text",parentId:"page",
isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var jv=class extends fo{constructor(a={}){super(a);gb(this,"canEdit",!1);gb(this,"canFlip",!1);gb(this,"getBounds",()=>0===this.shapes.length?(ef().deleteShapes([this.id]),{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Bf.getCommonBounds(this.shapes.map(d=>d.getBounds())));Og(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};gb(jv,"id","group");gb(jv,"defaultProps",{id:"group",
type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});ie([Ef],jv.prototype,"shapes",1);var ht=class{constructor(){gb(this,"_id");gb(this,"_initial");gb(this,"_states");gb(this,"_isActive",!1);gb(this,"cursor");gb(this,"_disposables",[]);gb(this,"children",new Map([]));gb(this,"registerStates",l=>{l.forEach(E=>this.children.set(E.id,new E(this,this)));return this});gb(this,"deregisterStates",l=>{l.forEach(E=>{var W;null==(W=this.children.get(E.id))?void 0:W.dispose();this.children.delete(E.id)});
return this});gb(this,"currentState",{});gb(this,"transition",(l,E={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${l}.`);const W=this.children.get(l),ka=this.currentState;if(!W)throw Error(`Could not find a state named ${l}.`);zd(()=>{this.currentState?(ka._events.onExit(of(oe({},E),{toId:l})),ka.dispose(),this.setCurrentState(W),this._events.onTransition(of(oe({},E),{fromId:ka.id,toId:l})),W._events.onEnter(of(oe({},E),{fromId:ka.id}))):(this.currentState=
W,W._events.onEnter(of(oe({},E),{fromId:""})))});return this});gb(this,"isIn",l=>{l=l.split(".").reverse();let E=this;for(;0<l.length;){const W=l.pop();if(!W)return!0;if(E.currentState.id===W){if(0===l.length)return!0;E=E.currentState}else break}return!1});gb(this,"isInAny",(...l)=>l.some(this.isIn));gb(this,"forwardEvent",(l,...E)=>{var W,ka;(null==(ka=null==(W=this.currentState)?void 0:W._events)?0:ka[l])&&zd(()=>{var oa;return null==(oa=this.currentState._events)?void 0:oa[l](...E)})});gb(this,
"_events",{onTransition:l=>{var E;null==(E=this.onTransition)?void 0:E.call(this,l)},onEnter:l=>{var E;this._isActive=!0;this.initial&&this.transition(this.initial,l);null==(E=this.onEnter)?void 0:E.call(this,l)},onExit:l=>{var E,W,ka;this._isActive=!1;null==(W=null==(E=this.currentState)?void 0:E.onExit)?void 0:W.call(E,{toId:"parent"});null==(ka=this.onExit)?void 0:ka.call(this,l)},onPointerDown:(l,E)=>{var W;null==(W=this.onPointerDown)?void 0:W.call(this,l,E);this.forwardEvent("onPointerDown",
l,E)},onPointerUp:(l,E)=>{var W;null==(W=this.onPointerUp)?void 0:W.call(this,l,E);this.forwardEvent("onPointerUp",l,E)},onPointerMove:(l,E)=>{var W;null==(W=this.onPointerMove)?void 0:W.call(this,l,E);this.forwardEvent("onPointerMove",l,E)},onPointerEnter:(l,E)=>{var W;null==(W=this.onPointerEnter)?void 0:W.call(this,l,E);this.forwardEvent("onPointerEnter",l,E)},onPointerLeave:(l,E)=>{var W;null==(W=this.onPointerLeave)?void 0:W.call(this,l,E);this.forwardEvent("onPointerLeave",l,E)},onDoubleClick:(l,
E)=>{var W;null==(W=this.onDoubleClick)?void 0:W.call(this,l,E);this.forwardEvent("onDoubleClick",l,E)},onKeyDown:(l,E)=>{var W;this._events.onModifierKey(l,E);null==(W=this.onKeyDown)?void 0:W.call(this,l,E);this.forwardEvent("onKeyDown",l,E)},onKeyUp:(l,E)=>{var W;this._events.onModifierKey(l,E);null==(W=this.onKeyUp)?void 0:W.call(this,l,E);this.forwardEvent("onKeyUp",l,E)},onPinchStart:(l,E)=>{var W;null==(W=this.onPinchStart)?void 0:W.call(this,l,E);this.forwardEvent("onPinchStart",l,E)},onPinch:(l,
E)=>{var W;null==(W=this.onPinch)?void 0:W.call(this,l,E);this.forwardEvent("onPinch",l,E)},onPinchEnd:(l,E)=>{var W;null==(W=this.onPinchEnd)?void 0:W.call(this,l,E);this.forwardEvent("onPinchEnd",l,E)},onModifierKey:(l,E)=>{switch(E.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(l,E)}}});gb(this,"onEnter");gb(this,"onExit");gb(this,"onTransition");gb(this,"onPointerDown");gb(this,"onPointerUp");gb(this,"onPointerMove");gb(this,"onPointerEnter");gb(this,"onPointerLeave");
gb(this,"onDoubleClick");gb(this,"onKeyDown");gb(this,"onKeyUp");gb(this,"onPinchStart");gb(this,"onPinch");gb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>
[a,...a.descendants])}setCurrentState(a){this.currentState=a}};gb(ht,"id");gb(ht,"shortcuts");ie([Se],ht.prototype,"currentState",2);ie([wg],ht.prototype,"setCurrentState",1);var Gw=class extends ht{constructor(a,d){var l,E;super();gb(this,"_root");gb(this,"_parent");gb(this,"children",new Map([]));gb(this,"registerStates",W=>{W.forEach(ka=>this.children.set(ka.id,new ka(this,this._root)));return this});gb(this,"deregisterStates",W=>{W.forEach(ka=>{var oa;null==(oa=this.children.get(ka.id))?void 0:
oa.dispose();this.children.delete(ka.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(l=this.initial)?l:this.states[0].id,l=this.children.get(a))&&(this.setCurrentState(l),null==(E=this.currentState)?void 0:E._events.onEnter({fromId:"initial"}));Og(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,
this]:[this]}};gb(Gw,"cursor");var hr=class extends Gw{constructor(){super(...arguments);gb(this,"isLocked",!1);gb(this,"previous");gb(this,"onEnter",({fromId:a})=>{this.previous=a;this.cursor&&this.app.cursors.setCursor(this.cursor)});gb(this,"onTransition",a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},aj=class extends Gw{get app(){return this.root}get tool(){return this.parent}},
Zy=class extends aj{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"creatingShape");gb(this,"aspectRatio");gb(this,"initialBounds",{});gb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:l}}=this.app;var {Shape:E}=this.tool;E=new E({id:el(),type:E.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:me.abs(me.sub(l,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};E.canChangeAspectRatio||
(E.aspectRatio?(this.aspectRatio=E.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=E;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(E);this.app.setSelectedShapes([E])});gb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:a}=
this);var {currentPoint:d,originPoint:l,shiftKey:E}=this.app.inputs;a=Bf.getTransformedBoundingBox(a,"bottom_right_corner",me.sub(d,l),0,E||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[a.minX,a.minY],size:[a.width,a.height]})}});gb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");
this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};gb(Zy,"id","creating");var $y=class extends aj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,l;this.app.transition("select",{returnTo:this.app.currentState.id});null==(l=(d=this.app._events).onPinchStart)?
void 0:l.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb($y,"id","idle");var az=class extends aj{constructor(){super(...arguments);gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});gb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};gb(az,"id","pointing");var yq=class extends hr{constructor(){super(...arguments);
gb(this,"cursor","crosshair")}};gb(yq,"id","box");gb(yq,"states",[$y,az,Zy]);gb(yq,"initial","idle");var bz=class extends aj{constructor(){super(...arguments);gb(this,"shape",{});gb(this,"points",[[0,0,.5]]);gb(this,"persistDebounced",Vk(this.app.persist,200));gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:l}=this.tool;var {originPoint:E}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
l){this.shape=l;var {shape:W}=this;var ka=W.props.points[W.props.points.length-1];const Fa=Hd.sub(E,W.props.point).concat(null!=(a=E[2])?a:.5);this.points=[...W.props.points,ka,ka];const Qa=Math.ceil(Hd.dist(ka,E)/16);for(let Xa=0,db=Xa/(Qa-1);Xa<Qa;Xa++){a=this.points;E=a.push;W=Hd.lrp(ka,Fa,db);var oa=ka[2];E.call(a,W.concat.call(W,oa+(Fa[2]-oa)*db))}this.addNextPoint(Fa)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ka=E[2])?ka:.5]],this.shape=new d({id:el(),type:d.id,parentId:this.app.currentPage.id,
point:E.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});gb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:l}=this.app.inputs;Hd.isEqual(l,d)||this.addNextPoint(Hd.sub(d,a.props.point).concat(d[2]))});gb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?bl.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,l=Hd.min(a,
[0,0]);this.points.push(a);0>l[0]||0>l[1]?(this.points=this.points.map(E=>Hd.sub(E,l).concat(E[2])),d.update({point:Hd.add(d.props.point,l),points:this.points})):d.update({points:this.points})}};gb(bz,"id","creating");var cz=class extends aj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};
gb(cz,"id","idle");var dz=class extends aj{constructor(){super(...arguments);gb(this,"origin",[0,0]);gb(this,"prevDelta",[0,0]);gb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};gb(dz,"id","pinching");var eu=class extends hr{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"simplify",!0);gb(this,"simplifyTolerance",
1);gb(this,"previousShape");gb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};gb(eu,"id","draw");gb(eu,"states",[cz,bz,dz]);gb(eu,"initial","idle");var ez=class extends aj{constructor(){super(...arguments);gb(this,"points",[[0,0,.5]]);gb(this,"hitShapes",new Set);gb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});gb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;Hd.isEqual(d,a)||(this.points.push(a),
this.app.shapesInViewport.filter(l=>l.hitTestLineSegment(d,a)).forEach(l=>this.hitShapes.add(l)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});gb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};gb(ez,"id","erasing");var fz=class extends aj{constructor(){super(...arguments);gb(this,"onPointerDown",
(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",(...a)=>{var d,l;this.app.transition("select",{returnTo:this.app.currentState.id});null==(l=(d=this.app._events).onPinchStart)?void 0:l.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(fz,"id","idle");var gz=class extends aj{constructor(){super(...arguments);gb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>
d.hitTestPoint(a)))});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});gb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};gb(gz,"id","pointing");var kv=class extends hr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(kv,"id","erase");gb(kv,"states",[fz,gz,ez]);gb(kv,
"initial","idle");var Hw=class extends aj{constructor(){super(...arguments);gb(this,"handle",{});gb(this,"handleId","end");gb(this,"currentShape",{});gb(this,"initialShape",{});gb(this,"bindableShapeIds",[]);gb(this,"startBindingShapeId");gb(this,"newStartBindingId","");gb(this,"draggedBindingId","");gb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:l,currentPoint:E,modKey:W,altKey:ka}}=this.app;var oa=this.app.getShapeById(this.initialShape.id),{handles:Fa}=this.initialShape,
Qa=this.handleId,Xa="start"===this.handleId?"end":"start";if(!me.isEqual(d,E)){var db=me.sub(E,l);if(a){var kb=Fa[Xa].point,Lb=me.add(Fa[Qa].point,db),Vb=me.angle(kb,Lb);kb=me.rotWith(Lb,kb,Mm.snapAngleToSegments(Vb,24)-Vb);db=me.add(db,me.sub(kb,Lb))}db=me.add(Fa[Qa].point,db);Fa={[Qa]:of(oe({},Fa[Qa]),{point:me.toFixed(db),bindingId:void 0})};var Qb=this.currentShape.getHandlesChange(this.initialShape,Fa);if(Qb){Fa=Uk(oa.props,Qb);var lc={},xc;Qa=Fa.handles[Qa];Xa=Fa.handles[Xa];if(this.startBindingShapeId){var ac;
if(db=this.app.getShapeById(this.startBindingShapeId)){Lb=db.getCenter();kb=Fa.handles.end;var pc=me.add(Fa.handles.start.point,Fa.point);me.isEqual(pc,Lb)&&pc[1]++;Vb=db.hitTestPoint(E);pc=me.uni(me.sub(pc,Lb));const mc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];W||db.hitTestPoint(me.add(Fa.point,kb.point))||(ac=Oc(oa.props,db,"start",this.newStartBindingId,Lb,Lb,pc,Vb));ac&&!mc?(lc[this.newStartBindingId]=ac,Fa.handles.start.bindingId=ac.id):!ac&&mc&&(console.log("removing start binding"),
delete lc[this.newStartBindingId],Fa.handles.start.bindingId=void 0)}}if(!W){ac=me.add(Xa.point,Fa.point);Xa=me.add(Qa.point,Fa.point);Qa=me.uni(me.sub(Xa,ac));const mc=me.add(Fa.point,Fa.handles.start.point),Jc=me.add(Fa.point,Fa.handles.end.point);db=this.bindableShapeIds.map(Qc=>this.app.getShapeById(Qc)).sort((Qc,td)=>td.nonce-Qc.nonce).filter(Qc=>![mc,Jc].every(td=>Qc.hitTestPoint(td)));for(const Qc of db)if(xc=Oc(oa.props,Qc,this.handleId,this.draggedBindingId,Xa,ac,Qa,ka))break}xc?(lc[this.draggedBindingId]=
xc,Fa=Uk(Fa,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(oa=oa.props.handles[this.handleId].bindingId,void 0!==oa&&(delete lc[oa],Fa=Uk(Fa,{handles:{[this.handleId]:{bindingId:void 0}}})));Qb=this.currentShape.getHandlesChange(Fa,Fa.handles);zd(()=>{var mc;if(Qb){this.currentShape.update(Qb);this.app.currentPage.updateBindings(lc);const Jc=Object.values(null!=(mc=Qb.handles)?mc:{}).map(Qc=>Qc.bindingId).map(Qc=>this.app.currentPage.bindings[Qc]).filter(Boolean).flatMap(Qc=>[Qc.toId,
Qc.fromId].filter(Boolean));this.app.setBindingShapes(Jc)}})}}});gb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});gb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};gb(Hw,"id","creating");var hz=class extends Hw{constructor(){super(...arguments);
gb(this,"onEnter",()=>{var a;this.app.history.pause();this.newStartBindingId=el();this.draggedBindingId=el();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:l}=this.app.inputs;d=new d(of(oe({},d.defaultProps),{id:el(),type:d.id,parentId:this.app.currentPage.id,point:l,fill:this.app.settings.color,stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=Bb(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);
this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(E=>this.app.getShapeById(E)).filter(E=>bl.pointInBounds(l,E.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};gb(hz,"id","creating");var iz=class extends aj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});gb(this,"onPinchStart",
(...a)=>{var d,l;this.app.transition("select",{returnTo:this.app.currentState.id});null==(l=(d=this.app._events).onPinchStart)?void 0:l.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});gb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});gb(this,"onPointerLeave",a=>{a.order||
"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};gb(iz,"id","idle");var jz=class extends aj{constructor(){super(...arguments);gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};gb(jz,"id","pointing");var lv=class extends hr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(lv,"id","line");gb(lv,
"states",[iz,jz,hz]);gb(lv,"initial","idle");var kz=class extends aj{constructor(){super(...arguments);gb(this,"cursor","crosshair");gb(this,"creatingShape");gb(this,"aspectRatio");gb(this,"initialBounds",{});gb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:l}=this.tool,E=new l({id:el(),type:l.id,parentId:a.id,point:[...d],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=E;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);
zd(()=>{this.app.currentPage.addShapes(E);const {bounds:W}=E;E.update({point:me.sub(d,[W.width/2,W.height/2])});this.app.transition("select");this.app.setSelectedShapes([E]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};gb(kz,"id","creating");var lz=class extends aj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});gb(this,"onPinchStart",(...a)=>{var d,l;this.app.transition("select",
{returnTo:this.app.currentState.id});null==(l=(d=this.app._events).onPinchStart)?void 0:l.call(d,...a)});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};gb(lz,"id","idle");var mv=class extends hr{constructor(){super(...arguments);gb(this,"cursor","crosshair")}};gb(mv,"id","box");gb(mv,"states",[lz,kz]);gb(mv,"initial","idle");var wD=yf(Tm()),xD=class extends wD.default{constructor(){super(...arguments);gb(this,"toBBox",a=>a.rotatedBounds)}},mz=class extends aj{constructor(){super(...arguments);
gb(this,"initialSelectedIds",[]);gb(this,"initialSelectedShapes",[]);gb(this,"tree",new xD);gb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:l}=this.app;this.initialSelectedIds=Array.from(l.values());this.initialSelectedShapes=Array.from(a.values());this.tree.load(d.shapes)});gb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});gb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:l,currentPoint:E}}=this.app,
W=Bf.getBoundsFromPoints([E,l],0);this.app.setBrush(W);const ka=[...(new Set(this.tree.search(W).filter(oa=>d?Bf.boundsContain(W,oa.rotatedBounds):oa.hitTestBounds(W)).filter(oa=>"group"!==oa.type).map(oa=>{var Fa;return null!=(Fa=this.app.getParentGroup(oa))?Fa:oa})))];a?ka.every(oa=>this.initialSelectedShapes.includes(oa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(oa=>!ka.includes(oa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ka]))]):this.app.setSelectedShapes(ka);
this.app.viewport.panToPointWhenOutOfBounds(E)});gb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});gb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};gb(mz,"id","brushing");var nz=class extends aj{constructor(){super(...arguments);gb(this,"onEnter",a=>{var d;const {selectedIds:l,inputs:{shiftKey:E}}=this.app;if("shape"===a.type&&!l.has(a.shape.id)){const W=
null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;E?this.app.setSelectedShapes([...Array.from(l.values()),W.id]):this.app.setSelectedShapes([W])}});gb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};gb(nz,"id","contextMenu");var oz=class extends aj{constructor(){super(...arguments);gb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});gb(this,"onExit",()=>{});gb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);
break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});gb(this,"onPointerDown",(a,d)=>{const {selectedShapes:l,inputs:{ctrlKey:E}}=this.app;if(2===d.button)this.tool.transition("contextMenu",a);else if(E)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");
break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(l.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:W,inputs:ka}=this.app;W&&bl.pointInBounds(ka.currentPoint,W)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");
break;case "minimap":this.tool.transition("pointingMinimap",oe(oe({},d),a))}});gb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});gb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};gb(oz,"id","idle");var pz=class extends aj{constructor(){super(...arguments);gb(this,"onEnter",
a=>{var d;const {selectedIds:l,inputs:{shiftKey:E}}=this.app,W=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;E?this.app.setSelectedShapes([...Array.from(l.values()),W.id]):this.app.setSelectedShapes([W])});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};
gb(pz,"id","pointingShape");var qz=class extends aj{constructor(){super(...arguments);gb(this,"cursor","move");gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(qz,"id","pointingBoundsBackground");var rz=class extends aj{constructor(){super(...arguments);
gb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("brushing")});gb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,
event:d})});gb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};gb(rz,"id","pointingCanvas");var sz=class extends aj{constructor(){super(...arguments);gb(this,"cursor","move");gb(this,"isCloning",!1);gb(this,"didClone",!1);gb(this,"initialPoints",{});gb(this,"initialShapePoints",{});gb(this,"initialClonePoints",{});gb(this,"clones",[]);gb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:l}=this.app;this.initialPoints=
this.initialShapePoints=Object.fromEntries(d.map(({id:E,props:{point:W}})=>[E,W.slice()]));document.querySelectorAll("input,textarea").forEach(E=>E.blur());null==(a=document.getSelection())?void 0:a.empty();l.altKey?this.startCloning():this.moveSelectedShapesToPointer()});gb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});gb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=
this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenOutOfBounds(a)});gb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(l=>{l.update({point:this.initialPoints[l.id]})}),this.tool.transition("idle")}});
gb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:l,allSelectedShapes:E}=this.app;l.removeShapes(...E);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:l}}=this.app,{initialPoints:E}=this,W=Hd.sub(l,d);a&&(Math.abs(W[0])<Math.abs(W[1])?
W[0]=0:W[1]=0);zd(()=>{this.app.allSelectedShapesArray.forEach(ka=>{ka.props.isLocked||ka.update({point:Hd.add(E[ka.id],W)})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(of(oe({},a.serialized),{id:el(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,
props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};gb(sz,"id","translating");var tz=class extends aj{constructor(){super(...arguments);gb(this,"pointedSelectedShape");gb(this,"onEnter",a=>{this.pointedSelectedShape=
a.shape});gb(this,"onExit",()=>{this.pointedSelectedShape=void 0});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:l}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:l}=this.app),l=Array.from(l.values()),l.splice(l.indexOf(this.pointedSelectedShape.id),
1),this.app.setSelectedShapes(l);else{if(1===l.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof fo&&bl.pointInBounds(d,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,
event:d})})}};gb(tz,"id","pointingSelectedShape");var uz=class extends aj{constructor(){super(...arguments);gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a;this.updateCursor()});gb(this,"onExit",()=>{this.app.cursors.reset()});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("resizing",this.info)});gb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(Ss[this.info.handle],this.app.selectionBounds.rotation)}};gb(uz,"id","pointingResizeHandle");var vz=class extends aj{constructor(){super(...arguments);gb(this,"isSingle",!1);gb(this,"handle","bottom_right_corner");gb(this,"snapshots",{});gb(this,"initialCommonBounds",{});gb(this,"selectionRotation",0);gb(this,"resizeType","corner");gb(this,"onEnter",a=>{var d,l;const {history:E,selectedShapesArray:W,selectionBounds:ka}=this.app;if(!ka)throw Error("Expected a selected bounds.");
this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";this.app.cursors.setCursor(vz.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);E.pause();const oa=Bf.getBoundsFromPoints(W.map(Fa=>Bf.getBoundsCenter(Fa.bounds)));this.selectionRotation=(this.isSingle=1===W.length)?null!=(l=W[0].props.rotation)?l:0:0;this.initialCommonBounds=oe({},ka);this.snapshots=Object.fromEntries(W.map(Fa=>
{const Qa=oe({},Fa.bounds),[Xa,db]=Bf.getBoundsCenter(Qa);return[Fa.id,{props:Fa.serialized,bounds:Qa,transformOrigin:[(Xa-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(db-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Xa-oa.minX)/oa.width,(db-oa.minY)/oa.height],isAspectRatioLocked:Fa.props.isAspectRatioLocked||!(Fa.canChangeAspectRatio&&!Fa.props.rotation)}]}));W.forEach(Fa=>{var Qa;null==(Qa=Fa.onResizeStart)?void 0:Qa.call(Fa,{isSingle:this.isSingle})})});
gb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});gb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:l,originPoint:E,currentPoint:W}}=this.app,{handle:ka,snapshots:oa,initialCommonBounds:Fa}=this;let Qa=Hd.sub(W,E);a&&(Qa=Hd.mul(Qa,2));const Xa=this.app.selectedShapes.values().next().value;let db=Bf.getTransformedBoundingBox(Fa,ka,Qa,this.selectionRotation,d||this.isSingle&&(l?!("clipping"in
Xa.props):!Xa.canChangeAspectRatio||Xa.props.isAspectRatioLocked));a&&(db=oe(oe({},db),Bf.centerBounds(db,Bf.getBoundsCenter(Fa))));const {scaleX:kb,scaleY:Lb}=db;this.app.selectedShapes.forEach(Vb=>{var Qb,lc;const {props:xc,bounds:ac,transformOrigin:pc}=oa[Vb.id];let mc=Bf.getRelativeTransformedBoundingBox(db,Fa,ac,0>kb,0>Lb);if(Vb.canResize.some(td=>td)||Vb.props.isSizeLocked||!this.isSingle){var Jc=[kb,Lb],Qc=null!=(Qb=xc.rotation)?Qb:0;Qb=Bf.getBoundsCenter(mc);Vb.canFlip||(Jc=Hd.abs(Jc));Vb.canScale||
(Jc=null!=(lc=xc.scale)?lc:[1,1]);if(Qc&&0>kb&&0<=Lb||0>Lb&&0<=kb)Qc*=-1;Vb.onResize(xc,{center:Qb,rotation:Qc,scale:Jc,bounds:mc,type:ka,clip:l,transformOrigin:pc})}});this.updateCursor(kb,Lb);this.app.viewport.panToPointWhenOutOfBounds(W)});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(l=>{l.update(oe({},this.snapshots[l.id].props))}),this.tool.transition("idle")}})}updateCursor(a,
d){var l,E,W,ka;const oa=0>a&&0<=d;a=0>d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":oa||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(l=this.app.selectionBounds)?void 0:l.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(E=this.app.selectionBounds)?void 0:E.rotation);break;case "top_right_corner":case "bottom_left_corner":oa||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(W=this.app.selectionBounds)?void 0:W.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ka=this.app.selectionBounds)?void 0:ka.rotation)}}},Iw=vz;gb(Iw,"id","resizing");gb(Iw,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var wz=class extends aj{constructor(){super(...arguments);
gb(this,"cursor","rotate");gb(this,"handle","");gb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(Ss[this.handle],
this.app.selectionRotation)}};gb(wz,"id","pointingRotateHandle");var xz=class extends aj{constructor(){super(...arguments);gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});gb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(xz,"id","pointingShapeBehindBounds");var Jw=class extends aj{constructor(){super(...arguments);gb(this,"cursor","rotate");gb(this,"snapshot",{});gb(this,"initialCommonCenter",[0,0]);gb(this,"initialCommonBounds",{});gb(this,"initialAngle",0);gb(this,"initialSelectionRotation",0);gb(this,"handle","");gb(this,"onEnter",a=>{const {history:d,selectedShapesArray:l,selectionBounds:E}=this.app;
if(!E)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=oe({},E);this.initialCommonCenter=Bf.getBoundsCenter(E);this.initialAngle=Hd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(l.map(W=>[W.id,{point:[...W.props.point],center:[...W.center],rotation:W.props.rotation,handles:"handles"in W?ms(W.handles):void 0}]));this.updateCursor()});gb(this,"onExit",
()=>{this.app.history.resume();this.snapshot={}});gb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,currentPoint:l}}=this.app,{snapshot:E,initialCommonCenter:W,initialAngle:ka,initialSelectionRotation:oa}=this;let Fa=Hd.angle(W,l)-ka;d&&(Fa=Mm.snapAngleToSegments(Fa,24));a.forEach(Xa=>{var db=E[Xa.id];let kb=0;if(d){var {rotation:Lb=0}=db;kb=Mm.snapAngleToSegments(Lb,24)-Lb}const Vb=Hd.sub(db.center,db.point);Lb=Hd.rotWith(db.center,W,Fa);if("handles"in Xa){db=db.handles;const Qb=
db.map(xc=>Hd.rotWith(xc.point,Vb,Fa)),lc=Bf.getCommonTopLeft(Qb);Xa.update({point:Hd.add(lc,Hd.sub(Lb,Vb)),handles:db.map((xc,ac)=>of(oe({},xc),{point:Hd.sub(Qb[ac],lc)}))})}else Xa.update({point:Hd.sub(Lb,Vb),rotation:Mm.clampRadians((db.rotation||0)+Fa+kb)})});const Qa=Mm.clampRadians(oa+Fa);this.app.setSelectionRotation(d?Mm.snapAngleToSegments(Qa,24):Qa);this.updateCursor()});gb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});gb(this,"onKeyDown",
(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(l=>{l.update(this.snapshot[l.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Ss[this.handle],this.app.selectionRotation)}};gb(Jw,"id","rotating");var yz=class extends aj{constructor(){super(...arguments);gb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")});gb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
gb(yz,"id","pinching");var zz=class extends Hw{constructor(){super(...arguments);gb(this,"cursor","grabbing");gb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=el();this.draggedBindingId=el();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=Bb(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};gb(zz,"id","translatingHandle");var Az=class extends aj{constructor(){super(...arguments);
gb(this,"cursor","grabbing");gb(this,"info",{});gb(this,"onEnter",a=>{this.info=a});gb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Hd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});gb(this,"onPointerUp",()=>{this.tool.transition("idle")});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(Az,"id","pointingHandle");var Bz=class extends aj{constructor(){super(...arguments);gb(this,"handle");gb(this,"onEnter",
a=>{var d;this.app.cursors.setCursor(Ss[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});gb(this,"onExit",()=>{this.app.cursors.reset()});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
a);break;default:this.tool.transition("pointingResizeHandle",a)}}});gb(this,"onPointerLeave",()=>{this.tool.transition("idle")});gb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var l=this.app.selectedShapes.values().next().value;if(!l.canEdit||this.app.readOnly||l.props.isLocked)l.onResetBounds({asset:l.props.assetId?this.app.assets[l.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":null==(d=l.onResetBounds)?void 0:d.call(l,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:l})}}})}};gb(Bz,"id","hoveringSelectionHandle");var Cz=class extends aj{constructor(){super(...arguments);gb(this,"editingShape",{});gb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});gb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=
this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});gb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",
a);break;case "canvas":a.order||this.tool.transition("idle",a)}});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":zd(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};gb(Cz,"id","editingShape");var Dz=class extends aj{constructor(){super(...arguments);gb(this,"minimapZoom",1);gb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});gb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");
var l=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&l){const E=d.getBoundingClientRect();this.minimapRect.height=E.height;this.minimapRect.width=E.width;this.minimapRect.minX=E.left;this.minimapRect.minY=E.top;this.minimapRect.maxX=E.right;this.minimapRect.maxY=E.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=Hd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);l=l.getBoundingClientRect();l=Hd.mul(Hd.sub(a,[l.left+l.width/2,l.top+l.height/
2]),this.minimapZoom);return Hd.sub(this.app.viewport.camera.point,l)}});gb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});gb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});gb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};gb(Dz,"id","pointingMinimap");var it=class extends hr{constructor(){super(...arguments);gb(this,"returnTo",
"");gb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};gb(it,"id","select");gb(it,"initial","idle");gb(it,"shortcut","whiteboard/select");gb(it,"states",[oz,mz,nz,rz,pz,xz,tz,qz,Bz,uz,wz,Dz,Az,zz,sz,Iw,Jw,Jw,yz,Cz]);var Ez=class extends aj{constructor(){super(...arguments);gb(this,"cursor","grabbing");gb(this,"originalScreenPoint",[]);gb(this,"originalCameraPoint",[]);gb(this,"prevState","idle");gb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});gb(this,"onPointerMove",(a,d)=>{a=me.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:me.sub(this.originalCameraPoint,me.div(a,this.app.viewport.camera.zoom))})});gb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};gb(Ez,"id","panning");var Fz=class extends aj{constructor(){super(...arguments);gb(this,"onEnter",a=>{this.parent.prevTool&&
a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};gb(Fz,"id","idle");var Gz=class extends aj{constructor(){super(...arguments);gb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});gb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};gb(Gz,
"id","idleHold");var Hz=class extends aj{constructor(){super(...arguments);gb(this,"origin",[0,0]);gb(this,"prevDelta",[0,0]);gb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});gb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};gb(Hz,"id","pinching");var jt=class extends hr{constructor(){super(...arguments);gb(this,"cursor","grab");gb(this,"prevTool",null);gb(this,"onEnter",a=>{this.prevTool=
null==a?void 0:a.prevTool});gb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});gb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};gb(jt,"id","move");gb(jt,"shortcut","whiteboard/pan");gb(jt,"states",[Fz,Gz,Ez,Hz]);gb(jt,"initial","idle");var Xm=class{constructor(a,d={}){gb(this,"lastShapesNounces",null);gb(this,"app");gb(this,"id");gb(this,"name");gb(this,"shapes",[]);gb(this,"bindings",{});gb(this,"nonce",0);gb(this,"bringForward",
Fa=>{const Qa=this.parseShapesArg(Fa);Qa.sort((Xa,db)=>this.shapes.indexOf(db)-this.shapes.indexOf(Xa)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>{if(Xa!==this.shapes.length-1&&!Qa.includes(this.shapes[Xa+1])){var db=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa+1];this.shapes[Xa+1]=db}});this.app.persist();return this});gb(this,"sendBackward",Fa=>{const Qa=this.parseShapesArg(Fa);Qa.sort((Xa,db)=>this.shapes.indexOf(Xa)-this.shapes.indexOf(db)).map(Xa=>this.shapes.indexOf(Xa)).forEach(Xa=>{if(0!==
Xa&&!Qa.includes(this.shapes[Xa-1])){var db=this.shapes[Xa];this.shapes[Xa]=this.shapes[Xa-1];this.shapes[Xa-1]=db}});this.app.persist();return this});gb(this,"bringToFront",Fa=>{const Qa=this.parseShapesArg(Fa);this.shapes=this.shapes.filter(Xa=>!Qa.includes(Xa)).concat(Qa);this.app.persist();return this});gb(this,"sendToBack",Fa=>{const Qa=this.parseShapesArg(Fa);this.shapes=Qa.concat(this.shapes.filter(Xa=>!Qa.includes(Xa)));this.app.persist();return this});gb(this,"flip",(Fa,Qa)=>{Fa=this.parseShapesArg(Fa);
const Xa=Bf.getCommonBounds(Fa.map(db=>db.bounds));Fa.forEach(db=>{var kb;const Lb=Bf.getRelativeTransformedBoundingBox(Xa,Xa,db.bounds,"horizontal"===Qa,"vertical"===Qa);if(db.serialized)db.onResize(db.serialized,{bounds:Lb,center:Bf.getBoundsCenter(Lb),rotation:null!=(kb=db.props.rotation)?kb:-0,type:"top_left_corner",scale:db.canFlip&&db.props.scale?"horizontal"===Qa?[-db.props.scale[0],1]:[1,-db.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});gb(this,
"getShapeById",Fa=>this.shapes.find(Qa=>Qa.id===Fa));gb(this,"cleanup",Fa=>{Fa=tc(this.bindings,Fa);const Qa=new Set;let Xa=!1,db=!1;const kb=ms(this.bindings);Fa.forEach(Lb=>{var Vb;if(this.bindings[Lb.id]){var Qb=this.getShapeById(Lb.toId),lc=this.getShapeById(Lb.fromId);Qb&&lc?Qa.has(lc.id)||(Lb=this.updateArrowBindings(lc),Qa.add(lc.id),Lb&&(Qb=oe(oe({},lc.props),Lb),Xa=!0,null==(Vb=this.getShapeById(Qb.id))?void 0:Vb.update(Qb,!1,(0,OD.default)(null==Lb?void 0:Lb.handles,null==lc?void 0:lc.props.handles)))):
(delete kb[Lb.id],db=!0)}});Object.keys(kb).forEach(Lb=>{const Vb=this.bindings[Lb];0===this.shapes.filter(Qb=>Qb.id===Vb.fromId||Qb.id===Vb.toId).length&&(delete kb[Lb],db=!0)});db&&this.update({bindings:kb});(Xa||db)&&this.app.persist(!0)});gb(this,"updateArrowBindings",Fa=>{var Qa,Xa,db,kb={start:ms(Fa.props.handles.start),end:ms(Fa.props.handles.end)},Lb={isBound:!1,handle:Fa.props.handles.start,point:me.add(Fa.props.handles.start.point,Fa.props.point)},Vb={isBound:!1,handle:Fa.props.handles.end,
point:me.add(Fa.props.handles.end.point,Fa.props.point)};if(Fa.props.handles.start.bindingId){var Qb=void 0!==(null==(Qa=Fa.props.decorations)?void 0:Qa.start);Qa=Fa.props.handles.start;var lc=this.bindings[Fa.props.handles.start.bindingId],xc=this.getShapeById(null==lc?void 0:lc.toId);if(xc){Lb=xc.getBounds();var ac=xc.getExpandedBounds(),pc=Bf.expandBounds(Lb,Qb?lc.distance:1);const {minX:mc,minY:Jc,width:Qc,height:td}=ac,he=me.add([mc,Jc],me.mulV([Qc,td],me.rotWith(lc.point,[.5,.5],xc.props.rotation||
0)));Lb={isBound:!0,hasDecoration:Qb,binding:lc,handle:Qa,point:he,target:xc,bounds:Lb,expandedBounds:ac,intersectBounds:pc,center:xc.getCenter()}}}if(Fa.props.handles.end.bindingId&&(Qb=void 0!==(null==(Xa=Fa.props.decorations)?void 0:Xa.end),Xa=Fa.props.handles.end,Qa=this.bindings[Fa.props.handles.end.bindingId],lc=this.getShapeById(null==Qa?void 0:Qa.toId))){Vb=lc.getBounds();xc=lc.getExpandedBounds();ac=Qb?Bf.expandBounds(Vb,Qa.distance):Vb;const {minX:mc,minY:Jc,width:Qc,height:td}=xc;pc=me.add([mc,
Jc],me.mulV([Qc,td],me.rotWith(Qa.point,[.5,.5],lc.props.rotation||0)));Vb={isBound:!0,hasDecoration:Qb,binding:Qa,handle:Xa,point:pc,target:lc,bounds:Vb,expandedBounds:xc,intersectBounds:ac,center:lc.getCenter()}}for(const mc of["end","start"]){Xa="start"===mc?Lb:Vb;const Jc="start"===mc?Vb:Lb;if(Xa.isBound)if(Xa.binding.distance){if(Qb=me.uni(me.sub(Xa.point,Jc.point)),Qa=C(Jc.point,Qb,Xa.intersectBounds,Xa.target.props.rotation).filter(Qc=>Qc.didIntersect).map(Qc=>Qc.points[0]).sort((Qc,td)=>me.dist(Qc,
Jc.point)-me.dist(td,Jc.point)),Qa[0])if(lc=void 0,Jc.isBound&&(lc=C(Jc.point,Qb,Jc.intersectBounds,Jc.target.props.rotation).filter(Qc=>Qc.didIntersect).map(Qc=>Qc.points[0]).sort((Qc,td)=>me.dist(Qc,Jc.point)-me.dist(td,Jc.point))[0]),Jc.isBound&&(2>Qa.length||lc&&Qa[0]&&10>Math.ceil(me.dist(Qa[0],lc))||Bf.boundsContain(Xa.expandedBounds,Jc.expandedBounds)||Bf.boundsCollide(Xa.expandedBounds,Jc.expandedBounds)))Qb=me.uni(me.sub(Jc.point,Xa.point)),Qa=C(Xa.point,Qb,Xa.bounds,Xa.target.props.rotation).filter(Qc=>
Qc.didIntersect).map(Qc=>Qc.points[0]),Qa[0]&&(kb[mc].point=me.toFixed(me.sub(Qa[0],Fa.props.point)),kb["start"===mc?"end":"start"].point=me.toFixed(me.add(me.sub(Qa[0],Fa.props.point),me.mul(Qb,Math.min(me.dist(Qa[0],Jc.point),10*(Bf.boundsContain(Jc.bounds,Xa.intersectBounds)?-1:1))))));else{if(!Jc.isBound&&(Qa[0]&&10>me.dist(Qa[0],Jc.point)||bl.pointInBounds(Jc.point,Xa.intersectBounds)))return kb=me.uni(me.sub(Xa.center,Jc.point)),null==(db=Fa.getHandlesChange)?void 0:db.call(Fa,Fa.props,{[mc]:of(oe({},
Fa.props.handles[mc]),{point:me.toFixed(me.add(me.sub(Jc.point,Fa.props.point),me.mul(kb,10)))})});Qa[0]&&(kb[mc].point=me.toFixed(me.sub(Qa[0],Fa.props.point)))}}else kb[mc].point=me.sub(Xa.point,Fa.props.point)}return Fa.getHandlesChange(Fa.props,kb)});const {id:l,name:E,shapes:W=[],bindings:ka={},nonce:oa}=d;this.id=l;this.name=E;this.bindings=Object.assign({},ka);this.app=a;this.nonce=oa||0;this.addShapes(...W);Og(this);Ld(()=>{const Fa=0<this.shapes.length?Object.fromEntries(this.shapes.map(Qa=>
[Qa.id,Qa.nonce])):null;if(this.lastShapesNounces&&Fa){const Qa=this.lastShapesNounces,Xa=[...(new Set([...Object.keys(Fa),...Object.keys(Qa)]))].filter(db=>Qa[db]!==Fa[db]);requestAnimationFrame(()=>{this.cleanup(Xa)})}Fa&&(this.lastShapesNounces=Fa)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>Bb(a)),bindings:ms(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,
a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,l)=>a.indexOf(d.id)-a.indexOf(l.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(l=>!d.includes(l));return d}getBindableShapes(){return this.shapes.filter(a=>
a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};ie([Se],Xm.prototype,"id",2);ie([Se],Xm.prototype,"name",2);ie([Se],Xm.prototype,"shapes",2);ie([Se],Xm.prototype,"bindings",2);ie([Ef],Xm.prototype,"serialized",1);ie([Ef],Xm.prototype,"shapesById",1);ie([Se],Xm.prototype,"nonce",2);ie([wg],Xm.prototype,"update",1);ie([wg],Xm.prototype,"updateBindings",1);ie([wg],Xm.prototype,"updateShapesIndex",1);ie([wg],Xm.prototype,"addShapes",1);ie([wg],Xm.prototype,"removeShapes",1);ie([wg],Xm.prototype,
"bringForward",2);ie([wg],Xm.prototype,"sendBackward",2);ie([wg],Xm.prototype,"bringToFront",2);ie([wg],Xm.prototype,"sendToBack",2);ie([wg],Xm.prototype,"cleanup",2);var xl=class{constructor(){gb(this,"shiftKey",!1);gb(this,"ctrlKey",!1);gb(this,"modKey",!1);gb(this,"altKey",!1);gb(this,"spaceKey",!1);gb(this,"isPinching",!1);gb(this,"currentScreenPoint",[0,0]);gb(this,"currentPoint",[0,0]);gb(this,"previousScreenPoint",[0,0]);gb(this,"previousPoint",[0,0]);gb(this,"originScreenPoint",[0,0]);gb(this,
"originPoint",[0,0]);gb(this,"pointerIds",new Set);gb(this,"state","idle");gb(this,"containerOffset",[0,0]);gb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});gb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});gb(this,"onPointerUp",(a,d)=>
{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});gb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});gb(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});gb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});gb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});gb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});
Og(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=me.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=Ih()?a.metaKey:a.ctrlKey))}};ie([Se],xl.prototype,"shiftKey",2);ie([Se],xl.prototype,"ctrlKey",2);ie([Se],xl.prototype,"modKey",2);ie([Se],xl.prototype,"altKey",
2);ie([Se],xl.prototype,"spaceKey",2);ie([Se],xl.prototype,"isPinching",2);ie([Se],xl.prototype,"currentScreenPoint",2);ie([Se],xl.prototype,"currentPoint",2);ie([Se],xl.prototype,"previousScreenPoint",2);ie([Se],xl.prototype,"previousPoint",2);ie([Se],xl.prototype,"originScreenPoint",2);ie([Se],xl.prototype,"originPoint",2);ie([Se],xl.prototype,"state",2);ie([Se],xl.prototype,"containerOffset",2);ie([wg],xl.prototype,"updateContainerOffset",1);ie([wg],xl.prototype,"updateModifiers",1);ie([wg],xl.prototype,
"onPointerDown",2);ie([wg],xl.prototype,"onPointerMove",2);ie([wg],xl.prototype,"onPointerUp",2);ie([wg],xl.prototype,"onKeyDown",2);ie([wg],xl.prototype,"onKeyUp",2);ie([wg],xl.prototype,"onPinchStart",2);ie([wg],xl.prototype,"onPinch",2);ie([wg],xl.prototype,"onPinchEnd",2);var yD=(a,d=100)=>-(Math.cos(Math.PI*Hd.clamp(a/d,0,1))-1)/2,fu=class{constructor(){gb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});gb(this,"camera",{point:[0,0],zoom:1});gb(this,"updateBounds",a=>
{this.bounds=a;return this});gb(this,"panCamera",a=>this.update({point:Hd.sub(this.camera.point,Hd.div(a,this.camera.zoom))}));gb(this,"panToPointWhenOutOfBounds",a=>{const d=Hd.sub([this.currentView.maxX,this.currentView.maxY],a);a=Hd.sub([this.currentView.minX,this.currentView.minY],a);this.panCamera(Hd.mul([0>d[0]?d[0]:0<a[0]?a[0]:0,0>d[1]?d[1]:0<a[1]?a[1]:0],-fu.panMultiplier))});gb(this,"update",({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||
(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});gb(this,"getPagePoint",a=>{const {camera:d,bounds:l}=this;return Hd.sub(Hd.div(Hd.sub(a,[l.minX,l.minY]),d.zoom),d.point)});gb(this,"getScreenPoint",a=>{const {camera:d}=this;return Hd.mul(Hd.add(a,d.point),d.zoom)});gb(this,"onZoom",(a,d,l=!1)=>this.pinchZoom(a,[0,0],d,l));gb(this,"pinchZoom",(a,d,l,E=!1)=>{var {camera:W}=this;d=Hd.sub(W.point,Hd.div(d,W.zoom));l=Hd.clamp(l,fu.minZoom,fu.maxZoom);W=Hd.div(a,W.zoom);a=Hd.div(a,l);a=Hd.toFixed(Hd.add(d,
Hd.sub(a,W)));E?this.animateCamera({point:a,zoom:l}):this.update({point:a,zoom:l});return this});gb(this,"setZoom",(a,d=!1)=>{const {bounds:l}=this;this.onZoom([l.width/2,l.height/2],a,d)});gb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});gb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});gb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});gb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/
d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));gb(this,"animateToViewport",a=>{const d=performance.now(),l=oe({},this.currentView),E=()=>{var W=performance.now()-d;W=yD(W);var ka=l.minX+(a.minX-l.minX)*W;this.update({point:[-ka,-(l.minY+(a.minY-l.minY)*W)],zoom:this.bounds.width/(l.maxX+(a.maxX-l.maxX)*W-ka)});1>W&&requestAnimationFrame(E)};E()});gb(this,"zoomToBounds",({width:a,height:d,minX:l,minY:E})=>{const {bounds:W,camera:ka}=this;let oa=Math.min((W.width-
100)/a,(W.height-100)/d);oa=Math.min(1,Math.max(fu.minZoom,ka.zoom===oa||1>ka.zoom?Math.min(1,oa):oa));a=Hd.add([-l,-E],[(W.width-a*oa)/2/oa,(W.height-d*oa)/2/oa]);this.animateCamera({point:a,zoom:oa})});Og(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:l}}=this,E=a.width/l,W=a.height/l;return{minX:-d[0],minY:-d[1],maxX:E-d[0],maxY:W-d[1],width:E,height:W}}},Dp=fu;gb(Dp,"minZoom",.1);gb(Dp,"maxZoom",4);gb(Dp,"panMultiplier",.05);ie([Se],Dp.prototype,"bounds",2);ie([Se],Dp.prototype,
"camera",2);ie([wg],Dp.prototype,"updateBounds",2);ie([wg],Dp.prototype,"update",2);ie([Ef],Dp.prototype,"currentView",1);var zD=class{constructor(a){gb(this,"app");gb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});gb(this,"hoverShape",d=>{this.app.setHoveredShape(d);return this});gb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});gb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);
return this});gb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});gb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});gb(this,"deselectShapes",(...d)=>{const l="string"===typeof d[0]?d:d.map(E=>E.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(E=>!l.includes(E.id)));return this});gb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});gb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);
return this});gb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});gb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});gb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});gb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});gb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});gb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;
d=Bf.getCommonBounds(d.map(l=>l.bounds));this.app.viewport.zoomToBounds(d);return this});gb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Bf.getCommonBounds(d.map(l=>l.bounds));this.app.viewport.update({point:me.add(me.neg(Bf.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});gb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);
return this});gb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:me.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});gb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});gb(this,"setColor",d=>{const {settings:l}=this.app;l.update({color:d});this.app.selectedShapesArray.forEach(E=>{E.props.isLocked||E.update({fill:d,stroke:d})});this.app.persist();return this});gb(this,"setScaleLevel",d=>{const {settings:l}=
this.app;l.update({scaleLevel:d});this.app.selectedShapes.forEach(E=>{E.props.isLocked||E.setScaleLevel(d)});this.app.persist();return this});gb(this,"undo",()=>{this.app.undo();return this});gb(this,"redo",()=>{this.app.redo();return this});gb(this,"persist",()=>{this.app.persist();return this});gb(this,"createNewLineBinding",(d,l)=>this.app.createNewLineBinding(d,l));gb(this,"cloneShapes",({shapes:d,assets:l,bindings:E,point:W=[0,0]})=>{const ka=Bf.getCommonBounds(d.filter(Qa=>"group"!==Qa.type).map(Qa=>
{var Xa,db,kb,Lb,Vb,Qb,lc,xc,ac,pc,mc,Jc,Qc,td,he,ne;return{minX:null!=(db=null==(Xa=Qa.point)?void 0:Xa[0])?db:W[0],minY:null!=(Lb=null==(kb=Qa.point)?void 0:kb[1])?Lb:W[1],width:null!=(Qb=null==(Vb=Qa.size)?void 0:Vb[0])?Qb:4,height:null!=(xc=null==(lc=Qa.size)?void 0:lc[1])?xc:4,maxX:(null!=(pc=null==(ac=Qa.point)?void 0:ac[0])?pc:W[0])+(null!=(Jc=null==(mc=Qa.size)?void 0:mc[0])?Jc:4),maxY:(null!=(td=null==(Qc=Qa.point)?void 0:Qc[1])?td:W[1])+(null!=(ne=null==(he=Qa.size)?void 0:he[1])?ne:4)}})),
oa=d.map(Qa=>of(oe({},Qa),{id:el(),point:[W[0]+Qa.point[0]-ka.minX,W[1]+Qa.point[1]-ka.minY]}));oa.forEach(Qa=>{var Xa;Qa.children&&0<(null==(Xa=Qa.children)?void 0:Xa.length)&&(Qa.children=Qa.children.map(db=>{var kb;return null==(kb=oa[d.findIndex(Lb=>Lb.id===db)])?void 0:kb.id}).filter(fg))});const Fa=[];oa.flatMap(Qa=>{var Xa;return Object.values(null!=(Xa=Qa.handles)?Xa:{})}).forEach(Qa=>{if(Qa.bindingId){var Xa=E[Qa.bindingId];if(Xa){var db=d.findIndex(Lb=>Lb.id===Xa.fromId);const kb=d.findIndex(Lb=>
Lb.id===Xa.toId);Xa&&-1!==db&&-1!==kb?(db=of(oe({},Xa),{id:el(),fromId:oa[db].id,toId:oa[kb].id}),Fa.push(db),Qa.bindingId=db.id):Qa.bindingId=void 0}else console.warn("binding not found",Qa.bindingId)}});l=l.filter(Qa=>oa.some(Xa=>Xa.assetId===Qa.id));return{shapes:oa,assets:l,bindings:Fa}});gb(this,"getClonedShapesFromTldrString",(d,l)=>{try{{var E;const Xa=null==(E=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:E[1];if(Xa){try{var W=JSON.parse(Xa)}catch(db){W=null}var ka=W}else ka=
void 0}d=ka;if(!d)return null;const {shapes:oa,bindings:Fa,assets:Qa}=d;return this.cloneShapes({shapes:oa,bindings:Fa,assets:Qa,point:l})}catch(oa){console.log(oa)}return null});gb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});gb(this,"addClonedShapes",d=>{const {shapes:l,assets:E,bindings:W}=d;0<E.length&&this.app.createAssets(E);0<l.length&&this.app.createShapes(l);this.app.currentPage.updateBindings(Object.fromEntries(W.map(ka=>[ka.id,ka])));
this.app.selectedTool.transition("idle");return this});gb(this,"addClonedShapesFromTldrString",(d,l)=>{(d=this.getClonedShapesFromTldrString(d,l))&&this.addClonedShapes(d);return this});gb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var l=[...d.filter(E=>"group"===E.type),...d.map(E=>this.app.getParentGroup(E))].filter(fg);this.app.currentPage.removeShapes(...l);d=d.filter(E=>"group"!==E.type);1<d.length&&(l=this.app.getShapeClass("group"),l=new l({id:el(),type:l.id,
parentId:this.app.currentPage.id,children:d.map(E=>E.id)}),this.app.currentPage.addShapes(l),this.app.setSelectedShapes([l]),this.app.bringForward(d));this.app.persist()}});gb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(E=>"group"===E.type),...d.map(E=>this.app.getParentGroup(E))].filter(fg);var l=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),this.app.persist(),this.app.setSelectedShapes(l))}});gb(this,"convertShapes",
(d,l=this.app.allSelectedShapesArray)=>{const E=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...l);l=l.map(W=>new E(of(oe({},W.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...l);this.app.persist();this.app.setSelectedShapes(l)});gb(this,"setCollapsed",(d,l=this.app.allSelectedShapesArray)=>{l.forEach(E=>{"logseq-portal"===E.props.type&&E.setCollapsed(d)});this.app.persist()});this.app=a}},kt=class{constructor(){gb(this,"cursor","default");gb(this,"rotation",
0);gb(this,"reset",()=>{this.cursor="default"});gb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});gb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});Og(this)}};ie([Se],kt.prototype,"cursor",2);ie([Se],kt.prototype,"rotation",2);ie([wg],kt.prototype,"reset",2);ie([wg],kt.prototype,"setCursor",2);ie([wg],kt.prototype,"setRotation",2);var lt=class{constructor(a){gb(this,"app");gb(this,"stack",[]);gb(this,"isPaused",!0);gb(this,"pause",()=>
{this.isPaused||(this.isPaused=!0)});gb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});gb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});gb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});gb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});gb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));
gb(this,"deserialize",d=>{zd(()=>{var l,{pages:E}=d;const W=this.isPaused;this.pause();const ka=[...this.app.selectedIds];try{const oa=new Map(this.app.pages),Fa=[];for(const Qa of E){const Xa=oa.get(Qa.id);if(void 0!==Xa){const db=new Map(Xa.shapes.map(kb=>[kb.props.id,kb]));E=[];for(const kb of Qa.shapes){const Lb=db.get(kb.id);void 0!==Lb?(Lb.nonce!==kb.nonce&&(Lb.update(kb,!0),Lb.nonce=kb.nonce,Lb.setLastSerialized(kb)),db.delete(kb.id)):E.push(this.instantiateShape(kb))}0<db.size&&!this.app.selectedTool.isInAny("creating",
"editingShape")&&Xa.removeShapes(...db.values());0<E.length&&Xa.addShapes(...E);oa.delete(Qa.id);Xa.updateBindings(Qa.bindings);Xa.nonce=null!=(l=Qa.nonce)?l:0}else{const {id:db,name:kb,shapes:Lb,bindings:Vb,nonce:Qb}=Qa;Fa.push(new Xm(this.app,{id:db,name:kb,nonce:Qb,bindings:Vb,shapes:Lb.map(lc=>this.instantiateShape(lc))}))}}0<Fa.length&&this.app.addPages(Fa);0<oa.size&&this.app.removePages(Array.from(oa.values()));this.app.setSelectedShapes(ka).setErasingShapes([])}catch(oa){console.warn(oa)}W||
this.resume()})});this.app=a;Og(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};ie([Se],lt.prototype,"stack",2);ie([wg],lt.prototype,"persist",2);ie([wg],lt.prototype,"undo",2);ie([wg],lt.prototype,"redo",2);ie([wg],lt.prototype,"deserialize",2);var mt=class{constructor(){gb(this,"mode","light");gb(this,"showGrid",!0);gb(this,"scaleLevel","md");gb(this,"color","");Og(this)}update(a){Object.assign(this,a)}};ie([Se],mt.prototype,"mode",2);ie([Se],mt.prototype,"showGrid",
2);ie([Se],mt.prototype,"scaleLevel",2);ie([Se],mt.prototype,"color",2);ie([wg],mt.prototype,"update",1);var xh=class extends ht{constructor(a,d,l,E){var W,ka;super();gb(this,"uuid",el());gb(this,"readOnly");gb(this,"api");gb(this,"inputs",new xl);gb(this,"cursors",new kt);gb(this,"viewport",new Dp);gb(this,"settings",new mt);gb(this,"Tools",[]);gb(this,"history",new lt(this));gb(this,"persist",this.history.persist);gb(this,"undo",this.history.undo);gb(this,"redo",this.history.redo);gb(this,"saving",
!1);gb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});gb(this,"load",()=>{this.notify("load",null);return this});gb(this,"save",()=>{this.notify("save",null);return this});gb(this,"pages",new Map([["page",new Xm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));gb(this,"getPageById",oa=>{const Fa=this.pages.get(oa);if(!Fa)throw Error(`Could not find a page named ${oa}.`);return Fa});gb(this,"getShapeById",
(oa,Fa=this.currentPage.id)=>{var Qa;return null==(Qa=this.getPageById(Fa))?void 0:Qa.shapesById[oa]});gb(this,"createShapes",oa=>{if(this.readOnly)return this;(oa=this.currentPage.addShapes(...oa))&&this.notify("create-shapes",oa);this.persist();return this});gb(this,"updateShapes",oa=>{if(this.readOnly)return this;oa.forEach(Fa=>{const Qa=this.getShapeById(Fa.id);null==Qa?void 0:Qa.update(Fa);Fa.type!==(null==Qa?void 0:Qa.type)&&this.api.convertShapes(Fa.type,[Qa])});this.persist();return this});
gb(this,"deleteShapes",oa=>{if(0===oa.length||this.readOnly)return this;oa=oa.map(db=>"string"===typeof db?this.getShapeById(db):db).filter(fg).filter(db=>!db.props.isLocked);const Fa=this.shapesInGroups(oa);oa.forEach(db=>{this.getParentGroup(db)&&Fa.push(db)});let Qa=new Set([...oa,...Fa].map(db=>db.id));Fa.forEach(db=>{var kb;const Lb=this.getParentGroup(db);if(Lb){const Vb=null==(kb=Lb.props.children)?void 0:kb.filter(Qb=>Qb!==db.id);!Vb||1>=(null==Vb?void 0:Vb.length)?Qa.add(Lb.id):Lb.update({children:Vb})}});
const Xa=(db,kb)=>{var Lb;[...Qa].includes(db)&&"line"===(null==(Lb=this.getShapeById(kb))?void 0:Lb.type)&&Qa.add(kb)};this.currentPage.shapes.filter(db=>!db.props.isLocked).flatMap(db=>{var kb;return Object.values(null!=(kb=db.props.handles)?kb:{})}).flatMap(db=>db.bindingId).filter(fg).map(db=>{var kb,Lb;const Vb=null==(kb=this.currentPage.bindings[db])?void 0:kb.toId;db=null==(Lb=this.currentPage.bindings[db])?void 0:Lb.fromId;Vb&&db&&(Xa(Vb,db),Xa(db,Vb))});oa=[...Qa].map(db=>this.getShapeById(db));
this.setSelectedShapes(this.selectedShapesArray.filter(db=>!Qa.has(db.id)));(oa=this.currentPage.removeShapes(...oa))&&this.notify("delete-shapes",oa);this.persist();return this});gb(this,"bringForward",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.bringForward(oa);return this});gb(this,"sendBackward",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.sendBackward(oa);return this});gb(this,"sendToBack",(oa=this.selectedShapesArray)=>{0<oa.length&&
!this.readOnly&&this.currentPage.sendToBack(oa);return this});gb(this,"bringToFront",(oa=this.selectedShapesArray)=>{0<oa.length&&!this.readOnly&&this.currentPage.bringToFront(oa);return this});gb(this,"flipHorizontal",(oa=this.selectedShapesArray)=>{this.currentPage.flip(oa,"horizontal");return this});gb(this,"flipVertical",(oa=this.selectedShapesArray)=>{this.currentPage.flip(oa,"vertical");return this});gb(this,"align",(oa,Fa=this.selectedShapesArray)=>{if(2>Fa.length||this.readOnly)return this;
const Qa=Fa.map(Vb=>{const Qb=Vb.getBounds();return{id:Vb.id,point:[Qb.minX,Qb.minY],bounds:Qb}}),Xa=Bf.getCommonBounds(Qa.map(({bounds:Vb})=>Vb)),db=Xa.minX+Xa.width/2,kb=Xa.minY+Xa.height/2,Lb=Object.fromEntries(Qa.map(({id:Vb,point:Qb,bounds:lc})=>[Vb,{prev:Qb,next:{top:[Qb[0],Xa.minY],centerVertical:[Qb[0],kb-lc.height/2],bottom:[Qb[0],Xa.maxY-lc.height],left:[Xa.minX,Qb[1]],centerHorizontal:[db-lc.width/2,Qb[1]],right:[Xa.maxX-lc.width,Qb[1]]}[oa]}]));Fa.forEach(Vb=>{Lb[Vb.id]&&Vb.update({point:Lb[Vb.id].next})});
this.persist();return this});gb(this,"distribute",(oa,Fa=this.selectedShapesArray)=>{if(2>Fa.length||this.readOnly)return this;const Qa=Object.fromEntries(Bf.getDistributions(Fa,oa).map(Xa=>[Xa.id,Xa]));Fa.forEach(Xa=>{Qa[Xa.id]&&Xa.update({point:Qa[Xa.id].next})});this.persist();return this});gb(this,"packIntoRectangle",(oa=this.selectedShapesArray)=>{if(2>oa.length||this.readOnly)return this;const Fa=Object.fromEntries(Bf.getPackedDistributions(oa).map(Qa=>[Qa.id,Qa]));oa.forEach(Qa=>{Fa[Qa.id]&&
Qa.update({point:Fa[Qa.id].next})});this.persist();return this});gb(this,"setLocked",oa=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(Fa=>{Fa.update({isLocked:oa})});this.persist();return this});gb(this,"assets",{});gb(this,"removeUnusedAssets",()=>{const oa=this.getCleanUpAssets();Object.keys(this.assets).forEach(Fa=>{oa.some(Qa=>Qa.id===Fa)||delete this.assets[Fa]});this.persist();return this});gb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&
!this.editingShape){const Fa=this.allSelectedShapesArray;var oa=JSON.stringify({shapes:Fa.map(Xa=>Xa.serialized),assets:this.getCleanUpAssets().filter(Xa=>Fa.some(db=>db.props.assetId===Xa.id)),bindings:Bb(this.currentPage.bindings)});oa=encodeURIComponent(`<whiteboard-tldr>${oa}</whiteboard-tldr>`);const Qa=this.selectedShapesArray.map(Xa=>`((${Xa.props.id}))`).join(" ");this.notify("copy",{text:Qa,html:oa})}});gb(this,"paste",(oa,Fa)=>{var Qa;this.editingShape||this.readOnly||this.notify("paste",
{point:this.inputs.currentPoint,shiftKey:!!Fa,dataTransfer:null!=(Qa=null==oa?void 0:oa.clipboardData)?Qa:void 0})});gb(this,"cut",()=>{this.copy();this.api.deleteShapes()});gb(this,"drop",(oa,Fa)=>{this.notify("drop",{dataTransfer:oa,point:Fa?this.viewport.getPagePoint(Fa):Bf.getBoundsCenter(this.viewport.currentView)})});gb(this,"selectTool",(oa,Fa={})=>{this.readOnly&&!["select","move"].includes(oa)||this.transition(oa,Fa)});gb(this,"editingId");gb(this,"setEditingShape",oa=>{this.editingId="string"===
typeof oa?oa:null==oa?void 0:oa.id;return this});gb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});gb(this,"hoveredId");gb(this,"setHoveredShape",oa=>{this.hoveredId="string"===typeof oa?oa:null==oa?void 0:oa.id;return this});gb(this,"selectedIds",new Set);gb(this,"selectedShapes",new Set);gb(this,"selectionRotation",0);gb(this,"setSelectedShapes",oa=>{var Fa;const {selectedIds:Qa,selectedShapes:Xa}=this;Qa.clear();Xa.clear();oa[0]&&"string"===typeof oa[0]?
oa.forEach(kb=>Qa.add(kb)):oa.forEach(kb=>Qa.add(kb.id));const db=this.currentPage.shapes.filter(kb=>Qa.has(kb.id));db.forEach(kb=>Xa.add(kb));this.selectionRotation=1===db.length?null!=(Fa=db[0].props.rotation)?Fa:0:0;0===oa.length&&this.setEditingShape();return this});gb(this,"erasingIds",new Set);gb(this,"erasingShapes",new Set);gb(this,"setErasingShapes",oa=>{const {erasingIds:Fa,erasingShapes:Qa}=this;Fa.clear();Qa.clear();oa[0]&&"string"===typeof oa[0]?oa.forEach(Xa=>Fa.add(Xa)):oa.forEach(Xa=>
Fa.add(Xa.id));this.currentPage.shapes.filter(Xa=>Fa.has(Xa.id)).forEach(Xa=>Qa.add(Xa));return this});gb(this,"bindingIds");gb(this,"setBindingShapes",oa=>{this.bindingIds=oa;return this});gb(this,"clearBindingShape",()=>this.setBindingShapes());gb(this,"createNewLineBinding",(oa,Fa)=>{oa="string"===typeof oa?this.getShapeById(oa):oa;Fa="string"===typeof Fa?this.getShapeById(Fa):Fa;if((null==oa?0:oa.canBind)&&(null==Fa?0:Fa.canBind)&&(Fa=gd(oa,Fa))){const [Qa,Xa]=Fa;this.createShapes([Qa]);this.currentPage.updateBindings(Object.fromEntries(Xa.map(db=>
[db.id,db])));this.persist();return!0}return!1});gb(this,"brush");gb(this,"setBrush",oa=>{this.brush=oa;return this});gb(this,"setCamera",(oa,Fa)=>{this.viewport.update({point:oa,zoom:Fa});return this});gb(this,"getPagePoint",oa=>{const {camera:Fa}=this.viewport;return Hd.sub(Hd.div(oa,Fa.zoom),Fa.point)});gb(this,"getScreenPoint",oa=>{const {camera:Fa}=this.viewport;return Hd.mul(Hd.add(oa,Fa.point),Fa.zoom)});gb(this,"Shapes",new Map);gb(this,"registerShapes",oa=>{oa.forEach(Fa=>{if("group"===Fa.id){const Qa=
this;Fa.prototype.getShapes=function(){var Xa,db;return null!=(db=null==(Xa=this.props.children)?void 0:Xa.map(kb=>Qa.getShapeById(kb)).filter(Boolean))?db:[]}}return this.Shapes.set(Fa.id,Fa)})});gb(this,"deregisterShapes",oa=>{oa.forEach(Fa=>this.Shapes.delete(Fa.id))});gb(this,"getShapeClass",oa=>{if(!oa)throw Error("No shape type provided.");const Fa=this.Shapes.get(oa);if(!Fa)throw Error(`Could not find shape class for ${oa}`);return Fa});gb(this,"wrapUpdate",oa=>{zd(()=>{const Fa=!this.history.isPaused;
Fa&&this.history.pause();oa();Fa&&(this.history.resume(),this.persist())})});gb(this,"subscriptions",new Set([]));gb(this,"subscribe",(oa,Fa)=>{if(void 0===Fa)throw Error("Callback is required.");const Qa={event:oa,callback:Fa};this.subscriptions.add(Qa);return()=>this.unsubscribe(Qa)});gb(this,"unsubscribe",oa=>{this.subscriptions.delete(oa);return this});gb(this,"notify",(oa,Fa)=>{this.subscriptions.forEach(Qa=>{Qa.event===oa&&Qa.callback(this,Fa)});return this});gb(this,"onTransition",()=>{});
gb(this,"onPointerDown",(oa,Fa)=>{if(!this.editingShape&&1===Fa.button&&!this.isIn("move"))this.temporaryTransitionToMove(Fa);else if(2===Fa.button&&!this.editingShape)Fa.preventDefault(),this.transition("select");else if("clientX"in Fa)this.inputs.onPointerDown([...this.viewport.getPagePoint([Fa.clientX,Fa.clientY]),.5],Fa)});gb(this,"onPointerUp",(oa,Fa)=>{if(!this.editingShape&&1===Fa.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),Fa.stopPropagation(),Fa.preventDefault();
else if("clientX"in Fa)this.inputs.onPointerUp([...this.viewport.getPagePoint([Fa.clientX,Fa.clientY]),.5],Fa)});gb(this,"onPointerMove",(oa,Fa)=>{if("clientX"in Fa)this.inputs.onPointerMove([...this.viewport.getPagePoint([Fa.clientX,Fa.clientY]),.5],Fa)});gb(this,"onKeyDown",(oa,Fa)=>{if(this.editingShape||" "!==Fa.key||this.isIn("move"))this.inputs.onKeyDown(Fa);else this.temporaryTransitionToMove(Fa)});gb(this,"onKeyUp",(oa,Fa)=>{if(!this.editingShape&&" "===Fa.key&&this.isIn("move"))this.selectedTool.transition("idle",
{exit:!0}),Fa.stopPropagation(),Fa.preventDefault();else this.inputs.onKeyUp(Fa)});gb(this,"onPinchStart",(oa,Fa)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(oa.point),.5],Fa)});gb(this,"onPinch",(oa,Fa)=>{this.inputs.onPinch([...this.viewport.getPagePoint(oa.point),.5],Fa)});gb(this,"onPinchEnd",(oa,Fa)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(oa.point),.5],Fa)});this._states=[it,jt];this.readOnly=E;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),
E=null!=(W=this.initial)?W:this.states[0].id,W=this.children.get(E))&&(this.currentState=W,null==(ka=this.currentState)?void 0:ka._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);l&&this.registerTools(l);this.history.resume();a&&this.history.deserialize(a);this.api=new zD(this);Og(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>
this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>d.props.children).filter(fg).map(d=>this.getShapeById(d)).filter(fg)}getParentGroup(a){return this.shapes.find(d=>{var l;return null==(l=d.props.children)?void 0:l.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);this.persist();return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):
a.forEach(d=>delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(l=>{l.props.assetId&&this.assets[l.props.assetId]&&a.add(this.assets[l.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=
this;return a?d.shapes.find(l=>l.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(l=>l.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=this;return a?this.shapes.find(d=>{var l;return"group"===d.type&&(null==(l=d.props.children)?void 0:l.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=
this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(E=>{var W;return Object.values(null!=(W=E.props.handles)?W:{})}).flatMap(E=>E.bindingId).filter(fg).flatMap(E=>{var W,ka;return[null==(W=this.currentPage.bindings[E])?void 0:W.fromId,null==(ka=this.currentPage.bindings[E])?
void 0:ka.toId]}).filter(fg):[],l=[...(null!=(a=this.bindingIds)?a:[]),...d];return l?this.currentPage.shapes.filter(E=>null==l?void 0:l.includes(E.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:l}}=this;return d.shapes.filter(E=>!E.canUnmount||a.has(E)||Bf.boundsContain(l,E.rotatedBounds)||Bf.boundsCollide(l,
E.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!Bf.boundsContain(d,a)&&!Bf.boundsCollide(d,a)){var l=Bf.getBoundsCenter(a);return Hd.clampV([(l[0]-d.minX-d.width/2)/d.width,(l[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?of(oe({},a[0].bounds),{rotation:a[0].props.rotation}):Bf.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;
const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};gb(xh,"id","app");gb(xh,"initial","select");ie([Ef],xh.prototype,"serialized",1);ie([Se],xh.prototype,"pages",2);ie([Ef],xh.prototype,
"currentPageId",1);ie([Ef],xh.prototype,"currentPage",1);ie([wg],xh.prototype,"addPages",1);ie([wg],xh.prototype,"removePages",1);ie([wg],xh.prototype,"createShapes",2);ie([wg],xh.prototype,"updateShapes",2);ie([wg],xh.prototype,"deleteShapes",2);ie([Se],xh.prototype,"assets",2);ie([wg],xh.prototype,"addAssets",1);ie([wg],xh.prototype,"removeAssets",1);ie([wg],xh.prototype,"removeUnusedAssets",2);ie([Ef],xh.prototype,"selectedTool",1);ie([Se],xh.prototype,"editingId",2);ie([Ef],xh.prototype,"editingShape",
1);ie([wg],xh.prototype,"setEditingShape",2);ie([Se],xh.prototype,"hoveredId",2);ie([Ef],xh.prototype,"hoveredShape",1);ie([Ef],xh.prototype,"hoveredGroup",1);ie([wg],xh.prototype,"setHoveredShape",2);ie([Se],xh.prototype,"selectedIds",2);ie([Se],xh.prototype,"selectedShapes",2);ie([Se],xh.prototype,"selectionRotation",2);ie([Ef],xh.prototype,"selectedShapesArray",1);ie([Ef],xh.prototype,"allSelectedShapes",1);ie([Ef],xh.prototype,"allSelectedShapesArray",1);ie([wg],xh.prototype,"setSelectedShapes",
2);ie([wg],xh.prototype,"setSelectionRotation",1);ie([Se],xh.prototype,"erasingIds",2);ie([Se],xh.prototype,"erasingShapes",2);ie([Ef],xh.prototype,"erasingShapesArray",1);ie([wg],xh.prototype,"setErasingShapes",2);ie([Se],xh.prototype,"bindingIds",2);ie([Ef],xh.prototype,"bindingShapes",1);ie([wg],xh.prototype,"setBindingShapes",2);ie([wg],xh.prototype,"createNewLineBinding",2);ie([Se],xh.prototype,"brush",2);ie([wg],xh.prototype,"setBrush",2);ie([wg],xh.prototype,"setCamera",2);ie([Ef],xh.prototype,
"currentGrid",1);ie([Ef],xh.prototype,"shapes",1);ie([Ef],xh.prototype,"shapesInViewport",1);ie([Ef],xh.prototype,"selectionDirectionHint",1);ie([Ef],xh.prototype,"selectionBounds",1);ie([Ef],xh.prototype,"showSelection",1);ie([Ef],xh.prototype,"showSelectionDetail",1);ie([Ef],xh.prototype,"showSelectionRotation",1);ie([Ef],xh.prototype,"showContextBar",1);ie([Ef],xh.prototype,"showRotateHandles",1);ie([Ef],xh.prototype,"showResizeHandles",1);var AD=Function.prototype.toString,Kw=Object.create,BD=
Object.prototype.toString,CD=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,l){this._keys.push(d);this._values.push(l)};return a}(),DD="undefined"!==typeof WeakMap?bf:De,ED="g"===/test/g.flags?Wf:jg,FD="undefined"!==typeof Symbol?Xf:Lg,GD=Object.defineProperty,HD=Object.getOwnPropertyDescriptor,Iz=Object.getOwnPropertyNames,Lw=Object.getOwnPropertySymbols,
Jz=Object.prototype,Kz=Jz.hasOwnProperty,ID=Jz.propertyIsEnumerable,Lz="function"===typeof Lw,JD=Lz?hh:Iz,KD=Array.isArray,Mw=Object.assign,LD=Object.getPrototypeOf,Mz={array:function(a,d){var l=new d.Constructor;d.cache.set(a,l);for(var E=0,W=a.length;E<W;++E)l[E]=d.copier(a[E],d);return l},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,d){return new d.Constructor(a.getTime())},
error:cj,map:zh,object:Lz?ri:kg,regExp:function(a,d){d=new d.Constructor(a.source,ED(a));d.lastIndex=a.lastIndex;return d},set:fk},MD=Mw({},Mz,{array:function(a,d){var l=new d.Constructor;d.cache.set(a,l);return Ci(a,l,d)},map:function(a,d){return Ci(a,zh(a,d),d)},object:function(a,d){var l=Me(d.prototype);d.cache.set(a,l);return Ci(a,l,d)},set:function(a,d){return Ci(a,fk(a,d),d)}});Di(Mw({},MD,{}));var ND=Di({}),OD=yf(Rs()),PD=yf(Tq()),ms=ND,Mo=class{static insertTextFirefox(a,d){a.setRangeText(d,
a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const l=a.ownerDocument,E=l.activeElement;E!==a&&a.focus();l.execCommand("insertText",!1,d)||Mo.insertTextFirefox(a,d);E===l.body?a.blur():E instanceof HTMLElement&&E!==a&&E.focus()}static set(a,d){a.select();Mo.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:l}=a;return a.value.slice(d?d:void 0,l?l:void 0)}static wrapSelection(a,
d,l){const {selectionStart:E,selectionEnd:W}=a,ka=Mo.getSelection(a);Mo.insert(a,d+ka+(null!=l?l:d));a.selectionStart=(E||0)+d.length;a.selectionEnd=(W||0)+d.length}static replace(a,d,l){let E=0;a.value.replace(d,(...W)=>{const ka=E+W[W.length-2],oa=W[0].length;a.selectionStart=ka;a.selectionEnd=ka+oa;W="string"===typeof l?l:l(...W);Mo.insert(a,W);a.selectionStart=ka;E+=W.length-oa;return W})}static findLineEnd(a,d){const l=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(l)?d:l+1}static indent(a){var d;
const {selectionStart:l,selectionEnd:E,value:W}=a;var ka=W.slice(l,E);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=W.lastIndexOf("\n",l-1)+1;var oa=a.value.slice(d,E-1);ka=oa.replace(/^|\n/g,`$&${Mo.INDENT}`);oa=ka.length-oa.length;a.setSelectionRange(d,E-1);Mo.insert(a,ka);a.setSelectionRange(l+1,E+oa)}else Mo.insert(a,Mo.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:l,value:E}=a;var W=E.lastIndexOf("\n",d-1)+1;const ka=Mo.findLineEnd(E,l);var oa=a.value.slice(W,ka);
const Fa=oa.replace(/(^|\n)(\t| {1,2})/g,"$1");oa=oa.length-Fa.length;a.setSelectionRange(W,ka);Mo.insert(a,Fa);W=(W=/\t| {1,2}/.exec(E.slice(W,d)))?W[0].length:0;a.setSelectionRange(d-W,Math.max(d-W,l-oa))}static normalizeText(a){return a.replace(Mo.fixNewLines,"\n")}},nt=Mo;gb(nt,"fixNewLines",/\r?\n|\r/g);gb(nt,"INDENT","  ");var ir;"undefined"!==typeof window&&(ir=ol());var Nw=new Map,Nz=Ih()?"⌘":"ctrl",QD=class extends xh{},Oz=yf(V(22)),RD=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var Pz=yf(V(22)),Ow={},gu=yf(V(22)),SD=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},Pw=yf(V(22)),Qw=new Map,TD={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},UD=((a,...d)=>a.reduce((l,E,W)=>l+E+(W<d.length?d[W]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,Qz=yf(V(22)),Rz=yf(V(22)),Rw={},yl={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},Sz={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},VD=["enter","leave"],WD=["gotpointercapture","lostpointercapture"],
Tz=class{constructor(a,d,l){this.ctrl=a;this.args=d;this.key=l;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:l,args:E}=this;d[l]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=E;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,l=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=l.from?oh(l.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:l,shared:E}=this;d.args=this.args;var W=0;if(a){d.event=a;l.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;E.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;E.locked=!!document.pointerLockElement;W=Object;var ka=W.assign,oa={};"buttons"in a&&(oa.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:Jc,altKey:Qc,metaKey:td,ctrlKey:he}=a;Object.assign(oa,{shiftKey:Jc,altKey:Qc,metaKey:td,ctrlKey:he})}ka.call(W,E,oa);E.down=E.pressed=1===E.buttons%2||0<E.touches;W=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(ka=d._delta.map(Math.abs),yl.addTo(d._distance,ka));this.axisIntent&&this.axisIntent(a);
const [Fa,Qa]=d._movement,[Xa,db]=l.threshold,{_step:kb,values:Lb}=d;l.hasCustomTransform?(!1===kb[0]&&(kb[0]=Math.abs(Fa)>=Xa&&Lb[0]),!1===kb[1]&&(kb[1]=Math.abs(Qa)>=db&&Lb[1])):(!1===kb[0]&&(kb[0]=Math.abs(Fa)>=Xa&&Math.sign(Fa)*Xa),!1===kb[1]&&(kb[1]=Math.abs(Qa)>=db&&Math.sign(Qa)*db));d.intentional=!1!==kb[0]||!1!==kb[1];if(d.intentional){ka=[0,0];if(l.hasCustomTransform){const [Jc,Qc]=Lb;ka[0]=!1!==kb[0]?Jc-kb[0]:0;ka[1]=!1!==kb[1]?Qc-kb[1]:0}else ka[0]=!1!==kb[0]?Fa-kb[0]:0,ka[1]=!1!==kb[1]?
Qa-kb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(ka);oa=d.offset;var Vb=d._active&&!d._blocked||d.active;Vb&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=E[this.ingKey]=d._active,a&&(d.first&&("bounds"in l&&(d._bounds=oh(l.bounds,d)),this.setup&&this.setup()),d.movement=ka,this.computeOffset()));var [Qb,lc]=d.offset,[[xc,ac],[pc,mc]]=d._bounds;d.overflow=[Qb<xc?-1:Qb>ac?1:0,lc<pc?-1:lc>mc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?d._movement[0]:
d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=Wi(d._bounds,d.offset,d._active?l.rubberband||[0,0]:[0,0]);d.delta=yl.sub(d.offset,oa);this.computeMovement();Vb&&(!d.last||32<W)&&(d.delta=yl.sub(d.offset,oa),a=d.delta.map(Math.abs),yl.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<W&&(d.velocity=[a[0]/W,a[1]/W]))}}emit(){const a=this.state;var d=this.shared;const l=
this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||l.triggerAllEvents)d=this.handler(Ig(Ig(Ig({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},hu=class extends Tz{constructor(...a){super(...a);di(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=yl.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
yl.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,l=this.config;!d.axis&&a&&(a="object"===typeof l.axisThreshold?l.axisThreshold[Jh(a)]:l.axisThreshold,d.axis=Xk(d._movement,a));d._blocked=(l.lockDirection||!!l.axis)&&!d.axis||!!l.axis&&l.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},XD=a=>a,Uz={enabled(a=!0){return a},eventOptions(a,d,l){return Ig(Ig({},l.shared.eventOptions),
a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return yl.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return yl.toVector(a)},transform(a,d,l){a=a||l.shared.transform;this.hasCustomTransform=!!a;return a||XD},threshold(a){return yl.toVector(a,0)}},ns=Ig(Ig({},Uz),{},{axis(a,d,{axis:l}){this.lockDirection="lock"===l;if(!this.lockDirection)return l},axisThreshold(a=0){return a},bounds(a=
{}){if("function"===typeof a)return ka=>ns.bounds(a(ka));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:l=Infinity,top:E=-Infinity,bottom:W=Infinity}=a;return[[d,l],[E,W]]}}),Vz={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},YD=class extends hu{constructor(...a){super(...a);di(this,"ingKey","dragging")}reset(){super.reset();const a=this.state;a._pointerId=
void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),l=a.currentTarget.getBoundingClientRect();a._bounds=ns.bounds({left:d.left-l.left+a.offset[0],right:d.right-l.right+a.offset[0],top:d.top-l.top+a.offset[1],bottom:d.bottom-l.bottom+a.offset[1]})}}cancel(){const a=this.state;a.canceled||(a.canceled=
!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,l=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var E=this.ctrl.setEventIds(a);d.pointerCapture&&a.target.setPointerCapture(a.pointerId);
E&&1<E.size&&l._pointerActive||(this.start(a),this.setupPointer(a),l._pointerId=El(a),l._pointerActive=!0,this.computeValues(Ij(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==Jh(a)?(l._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);this.emit()}pointerMove(a){const d=this.state,l=
this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var E=El(a);if(void 0===d._pointerId||E===d._pointerId)E=Ij(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=yl.sub(E,d._values),this.computeValues(E)),yl.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):l.preventScrollAxis&&!d._preventScroll?d.axis&&(d.axis===l.preventScrollAxis||"xy"===
l.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(oa){}const d=this.state,l=this.config;if(d._active&&d._pointerActive){var E=El(a);if(void 0===d._pointerId||E===d._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(a);var [W,ka]=d._distance;
d.tap=W<=l.tapsThreshold&&ka<=l.tapsThreshold;if(d.tap&&l.filterTaps)d._force=!0;else{const [oa,Fa]=d.direction,[Qa,Xa]=d.velocity,[db,kb]=d.movement,[Lb,Vb]=l.swipe.velocity,[Qb,lc]=l.swipe.distance;d.elapsedTime<l.swipe.duration&&(Math.abs(Qa)>Lb&&Math.abs(db)>Qb&&(d.swipe[0]=oa),Math.abs(Xa)>Vb&&Math.abs(kb)>lc&&(d.swipe[1]=Fa))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,l=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();
d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,l,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,l,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,l,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=
!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=Vz[a.key];if(d){const l=this.state,E=a.shiftKey?10:a.altKey?.1:1;this.start(a);l._delta=d(E);l._keyboardActive=!0;yl.addTo(l._movement,l._delta);this.compute(a);this.emit()}}keyUp(a){a.key in Vz&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),
a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},os="undefined"!==typeof window&&window.document&&window.document.createElement;try{var Wz="constructor"in GestureEvent}catch(a){Wz=!1}var ZD=Wz,iu=os&&"ontouchstart"in window||os&&1<window.navigator.maxTouchPoints,Xz=os&&
"ontouchstart"in window||os&&1<window.navigator.maxTouchPoints,Yz=os&&"onpointerdown"in window,$D=os&&"exitPointerLock"in window.document,Zz={mouse:0,touch:0,pen:8},aE=Ig(Ig({},ns),{},{device(a,d,{pointer:{touch:l=!1,lock:E=!1,mouse:W=!1}={}}){this.pointerLock=E&&$D;return iu&&l?"touch":this.pointerLock?"mouse":Yz&&!W?"pointer":iu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:l}){this.preventScrollDelay="number"===typeof l?l:l||void 0===l&&a?250:void 0;if(Xz&&!1!==l)return a?a:void 0!==l?
"y":void 0},pointerCapture(a,d,{pointer:{capture:l=!0,buttons:E=1,keys:W=!0}={}}){this.pointerButtons=E;this.keys=W;return!this.pointerLock&&"pointer"===this.device&&l},threshold(a,d,{filterTaps:l=!1,tapsThreshold:E=3,axis:W}){a=yl.toVector(a,l?E:W?1:0);this.filterTaps=l;this.tapsThreshold=E;return a},swipe({velocity:a=.5,distance:d=50,duration:l=250}={}){return{velocity:this.transform(yl.toVector(a)),distance:this.transform(yl.toVector(d)),duration:l}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;
default:return a}},axisThreshold(a){return a?Ig(Ig({},Zz),a):Zz}}),bE=class extends Tz{constructor(...a){super(...a);di(this,"ingKey","pinching");di(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:l}=this.state;this.state.offset="wheel"===a?yl.add(d,l):[(1+d[0])*l[0],d[1]+
l[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,l]=a._movement;if(!a.axis){const E=30*Math.abs(d)-Math.abs(l);0>E?a.axis="angle":0<E&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);
var d=this.state;const l=this.ctrl.touchIds;d._active&&d._touchIds.every(E=>l.has(E))||2>l.size||(this.start(a),d._touchIds=Array.from(l).slice(0,2),d=Ri(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,l=d._pointerEvents,E=this.ctrl.pointerIds;d._active&&Array.from(l.keys()).every(W=>E.has(W))||(2>l.size&&l.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=Dl(...Array.from(l.values())),
this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=Ri(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=Dl(...Array.from(d.values())),this.pinchMove(a,d))}pinchMove(a,d){const l=this.state,E=d.angle-l._values[1];let W=0;270<Math.abs(E)&&(W+=Math.sign(E));
this.computeValues([d.distance,d.angle-360*W]);l.origin=d.origin;l.turns=W;l._movement=[l._values[0]/l._initial[0]-1,l._values[1]-l._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);try{a.target.releasePointerCapture(a.pointerId)}catch(l){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);
d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,a.rotation]);d.origin=[a.clientX,a.clientY];var l=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=yl.sub(d._movement,
l);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();const d=this.state;d._delta=[-Ei(a)[1]/100*d.offset[0],0];yl.addTo(d._movement,d._delta);tm(d);this.state.origin=
[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),{passive:!1})}},cE=Ig(Ig({},Uz),{},{device(a,d,{shared:l,pointer:{touch:E=!1}={}}){if(l.target&&!iu&&ZD)return"gesture";
if(iu&&E)return"touch";if(Xz){if(Yz)return"pointer";if(iu)return"touch"}},bounds(a,d,{scaleBounds:l={},angleBounds:E={}}){const W=oa=>{oa=oh(l,oa);oa=Object.assign({},{min:-Infinity,max:Infinity},oa||{});return[oa.min,oa.max]},ka=oa=>{oa=oh(E,oa);oa=Object.assign({},{min:-Infinity,max:Infinity},oa||{});return[oa.min,oa.max]};return"function"!==typeof l&&"function"!==typeof E?[W(),ka()]:oa=>[W(oa),ka(oa)]},threshold(a,d,l){this.lockDirection="lock"===l.axis;return yl.toVector(a,this.lockDirection?
[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),dE=class extends hu{constructor(...a){super(...a);di(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(Ij(a));this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=Ij(a),l=this.state;
l._delta=yl.sub(d,l._values);yl.addTo(l._movement,l._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},eE=Ig(Ig({},ns),{},{mouseOnly:(a=!0)=>a}),fE=class extends hu{constructor(...a){super(...a);di(this,"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var l,E;const {scrollX:W,scrollY:ka,scrollLeft:oa,scrollTop:Fa}=a.currentTarget;var Qa=[null!==(l=null!==W&&void 0!==W?W:oa)&&void 0!==l?l:0,null!==(E=null!==ka&&void 0!==ka?ka:Fa)&&void 0!==E?E:0];d._delta=yl.sub(Qa,d._values);yl.addTo(d._movement,d._delta);this.computeValues(Qa);this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll",
"",this.scroll.bind(this))}},gE=ns,hE=class extends hu{constructor(...a){super(...a);di(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=Ei(a);yl.addTo(d._movement,d._delta);tm(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},iE=ns,jE=class extends hu{constructor(...a){super(...a);
di(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(Ij(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var l=Ij(a);d._movement=d._delta=yl.sub(l,d._values);this.computeValues(l);this.compute(a);d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},kE=Ig(Ig({},ns),{},{mouseOnly:(a=
!0)=>a}),Sw=new Map,Tw=new Map,lE={key:"drag",engine:YD,resolver:aE},mE={key:"hover",engine:jE,resolver:kE},nE={key:"move",engine:dE,resolver:eE},oE={key:"pinch",engine:bE,resolver:cE},pE={key:"scroll",engine:fE,resolver:gE},qE={key:"wheel",engine:hE,resolver:iE},Uw=yf(V(22)),rE={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=!0){return a},window(a=os?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},sE=["target",
"eventOptions","window","enabled","transform"],$z=class{constructor(a,d){di(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,l,E,W){const ka=this._listeners,oa=Qi(d,l),Fa=Ig(Ig({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),W);a.addEventListener(oa,E,Fa);const Qa=()=>{a.removeEventListener(oa,E,Fa);ka.delete(Qa)};ka.add(Qa);return Qa}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},tE=class{constructor(){di(this,"_timeouts",new Map)}add(a,
d,l=140,...E){this.remove(a);this._timeouts.set(a,window.setTimeout(d,l,...E))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},uE=class{constructor(a){di(this,"gestures",new Set);di(this,"_targetEventStore",new $z(this));di(this,"gestureEventStores",{});di(this,"gestureTimeoutStores",{});di(this,"handlers",{});di(this,"config",{});di(this,"pointerIds",new Set);di(this,"touchIds",new Set);di(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&dj(this,"drag");a.wheel&&dj(this,"wheel");a.scroll&&dj(this,"scroll");a.move&&dj(this,"move");a.pinch&&dj(this,"pinch");a.hover&&dj(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(Cm(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=
d}applyConfig(a,d){this.config=Yi(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const l={};let E;if(d.target&&(E=d.target(),!E))return;if(d.enabled){for(const W of this.gestures){const ka=this.config[W],oa=aA(l,ka.eventOptions,!!E);ka.enabled&&(new (Sw.get(W))(this,
a,W)).bind(oa)}d=aA(l,d.eventOptions,!!E);for(const W in this.nativeHandlers)d(W,"",ka=>this.nativeHandlers[W](Ig(Ig({},this.state.shared),{},{event:ka,args:a})),void 0,!0)}for(const W in l)l[W]=lj(...l[W]);if(!E)return l;for(const W in l){const {device:ka,capture:oa,passive:Fa}=wf(W);this._targetEventStore.add(E,ka,"",l[W],{capture:oa,passive:Fa})}}},aA=(a,d,l)=>(E,W,ka,oa={},Fa=!1)=>{var Qa,Xa;const db=null!==(Qa=oa.capture)&&void 0!==Qa?Qa:d.capture;oa=null!==(Xa=oa.passive)&&void 0!==Xa?Xa:d.passive;
E=Fa?E:Kk(E,W,db);l&&oa&&(E+="Passive");a[E]=a[E]||[];a[E].push(ka)},vE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,nv=yf(V(22)),Vw=yf(V(22)),bA=yf(V(22)),cA=yf(V(22)),wE=yf(V(22)),xE=yf(V(22)),yE=yf(V(22)),zE=yf(V(22)),AE={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>Aj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>Aj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>Aj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>Aj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>Aj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>Aj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>Aj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>Aj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>Aj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>Aj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>Aj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>Aj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>Aj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>Aj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},BE=yf(V(22));yf(V(22));var dA=V(22),eA=yf(V(22));if(!V(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!Og)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var CE=V(31),ju=yf(V(22)),fA="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,DE=1E4,EE=function(a){var d="function"===typeof Symbol&&Symbol.iterator,l=d&&a[d],E=0;if(l)return l.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&E>=
a.length&&(a=void 0);return{value:a&&a[E++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},gA=fA?fi(fA):jn(),FE=gA.addReactionToTrack,GE=gA.recordReactionAsCommitted,hA=function(a,d){var l="function"===typeof Symbol&&a[Symbol.iterator];if(!l)return a;a=l.call(a);var E,W=[];try{for(;(void 0===d||0<d--)&&!(E=a.next()).done;)W.push(E.value)}catch(oa){var ka={error:oa}}finally{try{E&&!E.done&&(l=a["return"])&&l.call(a)}finally{if(ka)throw ka.error;}}return W},
HE=function(){return function(){}}(),ot=V(22),iA="function"===typeof Symbol&&Symbol.for,jA=iA?Symbol.for("react.forward_ref"):"function"===typeof ot.forwardRef&&(0,ot.forwardRef)(function(a){return null}).$$typeof,kA=iA?Symbol.for("react.memo"):"function"===typeof ot.memo&&(0,ot.memo)(function(a){return null}).$$typeof,IE={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};tk.displayName="Observer";V(22);V(22);V(22);(function(a){a||=hn;Gc({reactionScheduler:a})})(CE.unstable_batchedUpdates);
var JE=yf(V(22));sb=V(586);var ep=JE.forwardRef(function(a,d){var {children:l,opacity:E,centered:W,className:ka=""}=a,oa=If(a,["children","opacity","centered","className"]);return(0,sb.jsx)(tk,{children:()=>(0,sb.jsx)("div",{ref:d,className:`tl-positioned-div ${ka}`,style:E?{opacity:E}:void 0,draggable:!1,children:(0,sb.jsx)("div",of(oe({className:`tl-positioned-inner ${W?"tl-centered":""}`},oa),{children:l}))})})}),KE=yf(V(22));sb=V(586);var fp=KE.forwardRef(function(a,d){var {id:l,className:E="",
style:W,children:ka}=a,oa=If(a,["id","className","style","children"]);return(0,sb.jsx)(tk,{children:()=>(0,sb.jsx)("svg",{ref:d,style:W,className:`tl-positioned-svg ${E}`,children:(0,sb.jsx)("g",of(oe({id:l,className:"tl-centered-g"},oa),{children:ka}))})})}),ku=yf(V(22)),lA=yf(V(22)),ov=yf(V(22));sb=V(586);var jr=ff(function(a){var {id:d,bounds:l,zIndex:E,rotation:W=0,className:ka="",children:oa}=a;a=If(a,"id bounds zIndex rotation className children".split(" "));const Fa=ov.useRef(null);ov.useLayoutEffect(()=>
{Fa.current.style.transform=`translate(
        calc(${l.minX}px - var(--tl-padding)),
        calc(${l.minY}px - var(--tl-padding)))
        rotate(${W+(l.rotation||0)}rad)`},[l.minX,l.minY,W,l.rotation]);ov.useLayoutEffect(()=>{const Qa=Fa.current;Qa.style.width=`calc(${Math.floor(l.width)}px + (var(--tl-padding) * 2))`;Qa.style.height=`calc(${Math.floor(l.height)}px + (var(--tl-padding) * 2))`},[l.width,l.height]);ov.useLayoutEffect(()=>{const Qa=Fa.current;void 0!==E&&(Qa.style.zIndex=E.toString())},[E]);return(0,sb.jsx)("div",of(oe({id:d,ref:Fa,className:`tl-positioned ${ka}`,"aria-label":"container"},a),{children:oa}))}),
LE=yf(V(22));sb=V(586);var ME=ff(function({shapes:a,hidden:d,bounds:l,rotation:E=0}){const {components:{ContextBar:W},viewport:{bounds:ka,camera:{point:[oa,Fa],zoom:Qa}}}=nh(),Xa=LE.useRef(null);var db=Bf.getRotatedBounds(l,E);db=Bf.multiplyBounds(db,Qa);rl(Xa,l,E,10005);if(!W)throw Error("Expected a ContextBar component.");const kb=Bf.translateBounds(db,[oa*Qa,Fa*Qa]);return(0,sb.jsx)("div",{ref:Xa,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,sb.jsx)(W,{hidden:d,shapes:a,bounds:l,offsets:{left:kb.minX,right:ka.width-kb.maxX,top:kb.minY,bottom:ka.height-kb.maxY,width:kb.width,height:kb.height},scaledBounds:db,rotation:E})})}),mA=yf(V(22));sb=V(586);var nA=ff(function({children:a}){const d=mA.useRef(null),{viewport:l}=nh(),E=d.current,{zoom:W,point:ka}=l.camera;mA.useEffect(()=>{E&&(E.style.transform=`scale(${W}) translate3d(${ka[0]}px, ${ka[1]}px, 0)`)},[W,ka,E]);return(0,sb.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})});sb=V(586);var oA=ff(function({shape:a,isHovered:d=!1,isSelected:l=!1,isBinding:E=!1,isEditing:W=!1,isLocked:ka=!1,meta:oa}){const {bounds:Fa,props:{scale:Qa,rotation:Xa=0},ReactIndicator:db}=a;return(0,sb.jsx)(jr,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:Fa,rotation:Xa,scale:Qa,zIndex:W?1E3:1E4,children:(0,sb.jsx)(fp,{children:(0,sb.jsx)("g",{className:`tl-indicator-container ${l?"tl-selected":"tl-hovered"} ${ka?"tl-locked":""}`,children:(0,sb.jsx)(db,{isEditing:W,
isBinding:E,isHovered:d,isLocked:ka,isSelected:l,isErasing:!1,meta:oa})})})})}),pA=yf(V(22));sb=V(586);var NE=ff(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:l}},components:{QuickLinks:E}}=nh();var W=ef();const ka=lm(d);if(!E)throw Error("Expected a QuickLinks component.");W=50>a.height*l||!W.selectedShapesArray.includes(d);return(0,sb.jsx)(jr,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,sb.jsx)(ep,{children:(0,sb.jsx)("span",of(oe({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},ka),{onPointerDown:oa=>oa.stopPropagation(),children:(0,sb.jsx)(E,{className:"tl-backlinks-count "+(W?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})});sb=V(586);var OE=ff(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:l}},components:{BacklinksCount:E}}=nh();var W=ef();if(!E)throw Error("Expected a BacklinksCount component.");const ka=oa=>oa.stopPropagation();
W=50>a.height*l||!W.selectedShapesArray.includes(d)||d.hideSelection;return(0,sb.jsx)(jr,{bounds:a,className:"tl-backlinks-count-container",children:(0,sb.jsx)(ep,{children:(0,sb.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ka,onWheelCapture:ka,onKeyDown:ka,title:"Shape Backlinks",children:(0,sb.jsx)(E,{className:"tl-backlinks-count "+(W?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),PE=yf(V(22));sb=V(586);var QE=ff(function({bounds:a,hidden:d,shapes:l,rotation:E=0,detail:W="size"}){const {components:{SelectionDetail:ka},viewport:{camera:{zoom:oa}}}=nh(),Fa=PE.useRef(null),Qa=Bf.multiplyBounds(a,oa);rl(Fa,a,E,10003);if(!ka)throw Error("Expected a SelectionDetail component.");return(0,sb.jsx)("div",{ref:Fa,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,sb.jsx)(ka,
{shapes:l,bounds:a,scaledBounds:Qa,zoom:oa,rotation:E,detail:W})})});sb=V(586);var RE=ff(function({shape:a,isHovered:d=!1,isSelected:l=!1,isBinding:E=!1,isErasing:W=!1,isEditing:ka=!1,onEditingEnd:oa,asset:Fa,meta:Qa,zIndex:Xa}){const {bounds:db,props:{rotation:kb,scale:Lb},ReactComponent:Vb}=a,Qb=ef(),lc=lm(a);var xc=Qb.getParentGroup(a);xc=Qb.selectedIds.has(null==xc?void 0:xc.id);return(0,sb.jsx)(jr,{"data-shape-id":a.id,"data-html2canvas-ignore":!l&&!xc&&0!==Qb.selectedShapes.size||null,zIndex:Xa,
"data-type":"Shape",bounds:db,rotation:kb,scale:Lb,children:(0,sb.jsx)(Vb,{meta:Qa,isEditing:ka,isBinding:E,isHovered:d,isSelected:l,isErasing:W,events:lc,asset:Fa,onEditingEnd:oa})})});sb=V(586);var qA=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],SE=ff(function({size:a}){const {viewport:{camera:{point:d,zoom:l}}}=nh();return(0,sb.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,sb.jsx)("defs",{children:qA.map(([E,
W,ka],oa)=>{ka=ka*a*l;var Fa=d[0]*l,Qa=d[1]*l;Fa=0<Fa?Fa%ka:ka+Fa%ka;Qa=0<Qa?Qa%ka:ka+Qa%ka;E=Ql(l,[E,W],[0,1]);return(0,sb.jsx)("pattern",{id:`grid-${oa}`,width:ka,height:ka,patternUnits:"userSpaceOnUse",children:!(2<E||.1>E)&&(0,sb.jsx)("circle",{className:"tl-grid-dot",cx:Fa,cy:Qa,r:1.5,opacity:Math.max(0,Math.min(E,1))})},`grid-pattern-${oa}`)})}),qA.map((E,W)=>(0,sb.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${W})`},`grid-rect-${W}`))]})}),rA=ff(function({size:a}){return(0,sb.jsx)(SE,
{size:a})});sb=V(586);var sA=ff(function({bounds:a}){const d=Uj("background");return(0,sb.jsx)(fp,of(oe({"data-html2canvas-ignore":"true"},d),{children:(0,sb.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});V(22);sb=V(586);var tA=ff(function({scaledBounds:a,shapes:d,detail:l="size",rotation:E=0}){var W;const ka=1===d.length?E:null!=(W=a.rotation)?W:0;return(0,sb.jsx)(ep,{centered:!0,children:(0,sb.jsx)("div",{className:"tl-bounds-detail",
style:{transform:ka<ao||ka>3*ao?`rotate(${ka}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+ka}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${me.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===l?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${Mm.radiansToDegrees(Mm.clampRadians(E)).toFixed()}\xB0`})})});sb=V(586);var TE={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},pv=ff(function({cx:a,cy:d,size:l,targetSize:E,corner:W,isHidden:ka}){const oa=Uj(W);return(0,sb.jsxs)("g",of(oe({opacity:ka?0:1},oa),{children:[(0,sb.jsx)("rect",{className:"tl-transparent "+(ka?"":TE[W]),"aria-label":`${W} target`,x:a-1.25*E,y:d-1.25*E,width:2.5*E,height:2.5*E,pointerEvents:ka?"none":"all"}),(0,sb.jsx)("rect",{className:"tl-corner-handle","aria-label":`${W} handle`,x:a-l/2,y:d-l/2,width:l,height:l,pointerEvents:"none"})]}))});
sb=V(586);var UE={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},qv=ff(function({x:a,y:d,width:l,height:E,targetSize:W,edge:ka,disabled:oa,isHidden:Fa}){const Qa=Uj(ka);return(0,sb.jsx)("rect",oe({pointerEvents:Fa||oa?"none":"all",className:"tl-transparent tl-edge-handle "+(Fa?"":UE[ka]),"aria-label":`${ka} target`,opacity:Fa?0:1,x:a-W,y:d-W,width:Math.max(1,l+2*W),height:Math.max(1,E+2*W)},Qa))});V(22);sb=V(586);ff(function({cx:a,cy:d,size:l,
targetSize:E,isHidden:W}){const ka=Uj("rotate");return(0,sb.jsxs)("g",of(oe({opacity:W?0:1},ka),{children:[(0,sb.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:E,pointerEvents:W?"none":"all"}),(0,sb.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:l/2,pointerEvents:"none"})]}))});V(22);sb=V(586);var rv=ff(function({cx:a,cy:d,targetSize:l,corner:E,isHidden:W}){const ka=Uj(E);return(0,sb.jsx)("g",of(oe({opacity:W?0:1},ka),{children:(0,sb.jsx)("rect",
{className:"tl-transparent","aria-label":`${E} target`,x:a-2.5*l,y:d-2.5*l,width:3*l,height:3*l,pointerEvents:W?"none":"all"})}))});sb=V(586);var uA=ff(function({bounds:a,showResizeHandles:d,showRotateHandles:l,shapes:E}){var W,ka;const oa=ef();let {width:Fa,height:Qa}=a;var Xa=oa.viewport.camera.zoom;a=8/Xa;Xa=6/Xa;const db=1===E.length?E[0].canResize:[!0,!0],kb=null!=(ka=null==(W=oa.editingShape)?void 0:W.props.borderRadius)?ka:0;return(0,sb.jsx)(sb.Fragment,{children:0<E.length&&(0,sb.jsxs)(fp,
{children:[!oa.editingShape&&(0,sb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Fa,1),height:Math.max(Qa,1),rx:kb,ry:kb,pointerEvents:"none"}),(0,sb.jsx)(qv,{x:2*Xa,y:0,width:Fa-4*Xa,height:0,targetSize:Xa,edge:"top_edge",disabled:!db[1],isHidden:!d}),(0,sb.jsx)(qv,{x:Fa,y:2*Xa,width:0,height:Qa-4*Xa,targetSize:Xa,edge:"right_edge",disabled:!db[0],isHidden:!d}),(0,sb.jsx)(qv,{x:2*Xa,y:Qa,width:Fa-4*Xa,height:0,targetSize:Xa,edge:"bottom_edge",disabled:!db[1],isHidden:!d}),(0,sb.jsx)(qv,{x:0,
y:2*Xa,width:0,height:Qa-4*Xa,targetSize:Xa,edge:"left_edge",disabled:!db[0],isHidden:!d}),(0,sb.jsx)(rv,{cx:0,cy:0,targetSize:Xa,corner:"top_left_resize_corner",isHidden:!l}),(0,sb.jsx)(rv,{cx:Fa+2*Xa,cy:0,targetSize:Xa,corner:"top_right_resize_corner",isHidden:!l}),(0,sb.jsx)(rv,{cx:Fa+2*Xa,cy:Qa+2*Xa,targetSize:Xa,corner:"bottom_right_resize_corner",isHidden:!l}),(0,sb.jsx)(rv,{cx:0,cy:Qa+2*Xa,targetSize:Xa,corner:"bottom_left_resize_corner",isHidden:!l}),(null==db?void 0:db.every(Lb=>Lb))&&(0,sb.jsxs)(sb.Fragment,
{children:[(0,sb.jsx)(pv,{cx:0,cy:0,size:a,targetSize:Xa,corner:"top_left_corner",isHidden:!d}),(0,sb.jsx)(pv,{cx:Fa,cy:0,size:a,targetSize:Xa,corner:"top_right_corner",isHidden:!d}),(0,sb.jsx)(pv,{cx:Fa,cy:Qa,size:a,targetSize:Xa,corner:"bottom_right_corner",isHidden:!d}),(0,sb.jsx)(pv,{cx:0,cy:Qa,size:a,targetSize:Xa,corner:"bottom_left_corner",isHidden:!d})]})]})})});sb=V(586);var vA=ff(function({bounds:a}){return(0,sb.jsx)(jr,{bounds:a,zIndex:10001,children:(0,sb.jsx)(fp,{children:(0,sb.jsx)("rect",
{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})});sb=V(586);ff(function(){return(0,sb.jsx)(sb.Fragment,{})});sb=V(586);var wA=ff(function({shape:a,handle:d,id:l}){a=fn(a,l);const [E,W]=d.point;return(0,sb.jsxs)("g",of(oe({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${E}, ${W})`,children:[(0,sb.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,sb.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),xA=yf(V(22));
sb=V(586);var Ww=ff(function({direction:a}){const {viewport:{bounds:d}}=nh(),l=xA.useRef(null);xA.useLayoutEffect(()=>{const E=l.current;if(E){var W=[d.width/2,d.height/2],ka=Bf.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[oa,Fa]]of ka)ka=r(W,a,oa,Fa),ka.didIntersect&&(ka=ka.points[0],E.style.transform=`translate(${ka[0]-6}px,${ka[1]-6}px) rotate(${me.toAngle(a)}rad)`)}},[a,d]);return(0,sb.jsx)("div",{ref:l,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,sb.jsx)("svg",
{height:12,width:12,children:(0,sb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});sb=V(586);var VE=ff(function({id:a,className:d,brush:l,shapes:E,assets:W,bindingShapes:ka,editingShape:oa,hoveredShape:Fa,hoveredGroup:Qa,selectionBounds:Xa,selectedShapes:db,erasingShapes:kb,selectionDirectionHint:Lb,cursor:Vb="default",cursorRotation:Qb=0,selectionRotation:lc=0,showSelection:xc=!0,showHandles:ac=!0,showSelectionRotation:pc=!1,showResizeHandles:mc=!0,showRotateHandles:Jc=!0,showSelectionDetail:Qc=!0,
showContextBar:td=!0,showGrid:he=!0,gridSize:ne=8,onEditingEnd:Ge=RD,theme:jf=uq,children:rf}){var We;const uf=ku.useRef(null),{viewport:Qd,components:nd,meta:qd}=nh(),sd=ef(),ke=ku.useCallback(Kf=>{sd.inputs.updateContainerOffset([Kf.minX,Kf.minY])},[]);qk(jf,a);Rm(uf);Jk(uf,Qd,ke);rj(uf);hk();gn(uf,Vb,Qb);yk(uf);kn(uf);a=rg();const pf=(Vb=1===(null==db?void 0:db.length)&&db[0])&&"handles"in Vb.props?null==db?void 0:db[0]:void 0,Af=ku.useMemo(()=>new Set(db||[]),[db]),ng=ku.useMemo(()=>new Set(kb||
[]),[kb]);Vb=1===(null==db?void 0:db.length)?db[0]:void 0;Qa=[...(new Set([Qa,Fa]))].filter(fg);return(0,sb.jsxs)("div",{ref:uf,className:`tl-container ${null!=d?d:""}`,children:[(0,sb.jsxs)("div",of(oe({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[he&&nd.Grid&&(0,sb.jsx)(nd.Grid,{size:ne}),(0,sb.jsxs)(nA,{children:[nd.SelectionBackground&&db&&Xa&&xc&&(0,sb.jsx)(jr,{"data-type":"SelectionBackground",bounds:Xa,zIndex:2,"data-html2canvas-ignore":"true",children:(0,sb.jsx)(nd.SelectionBackground,
{shapes:db,bounds:Xa,showResizeHandles:mc,showRotateHandles:Jc})}),E&&E.map((Kf,$f)=>(0,sb.jsx)(RE,{shape:Kf,asset:W&&Kf.props.assetId?W[Kf.props.assetId]:void 0,isEditing:Kf===oa,isHovered:Kf===Fa,isBinding:null==ka?void 0:ka.includes(Kf),isSelected:Af.has(Kf),isErasing:ng.has(Kf),meta:qd,zIndex:1E3+$f,onEditingEnd:Ge},"shape_"+Kf.id)),!sd.isIn("select.pinching")&&(null==db?void 0:db.map(Kf=>(0,sb.jsx)(oA,{shape:Kf,isEditing:Kf===oa,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:Kf.props.isLocked},
"selected_indicator_"+Kf.id))),Qa.map(Kf=>Kf!==oa&&(0,sb.jsx)(oA,{shape:Kf},"hovered_indicator_"+Kf.id)),Vb&&nd.BacklinksCount&&(0,sb.jsx)(OE,{hidden:!1,bounds:Vb.bounds,shape:Vb}),Fa&&Fa!==Vb&&nd.QuickLinks&&(0,sb.jsx)(NE,{hidden:!1,bounds:Fa.bounds,shape:Fa}),l&&nd.Brush&&(0,sb.jsx)(nd.Brush,{bounds:l}),db&&Xa&&(0,sb.jsxs)(sb.Fragment,{children:[xc&&nd.SelectionForeground&&(0,sb.jsx)(jr,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:Xa,zIndex:oa&&db.includes(oa)?1002:
10002,children:(0,sb.jsx)(nd.SelectionForeground,{shapes:db.filter(Kf=>!Kf.props.isLocked),bounds:Xa,showResizeHandles:mc,showRotateHandles:Jc})}),ac&&pf&&nd.Handle&&(0,sb.jsx)(jr,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:Xa,zIndex:10003,children:(0,sb.jsx)(fp,{children:Object.entries(null!=(We=pf.props.handles)?We:{}).map(([Kf,$f])=>ku.createElement(nd.Handle,{key:`${$f.id}_handle_${$f.id}`,shape:pf,handle:$f,id:Kf}))})}),db&&nd.SelectionDetail&&(0,sb.jsx)(QE,
{"data-html2canvas-ignore":"true",shapes:db,bounds:Xa,detail:pc?"rotation":"size",hidden:!Qc,rotation:lc},"detail"+db.map(Kf=>Kf.id).join(""))]})]}),Lb&&Xa&&db&&(0,sb.jsx)(Ww,{direction:Lb,bounds:Xa,shapes:db}),(0,sb.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,sb.jsx)(nA,{children:db&&Xa&&(0,sb.jsx)(sb.Fragment,{children:db&&nd.ContextBar&&(0,sb.jsx)(ME,{shapes:db.filter(Kf=>!Kf.props.isLocked),hidden:!td,bounds:Vb?Vb.bounds:Xa,rotation:Vb?Vb.props.rotation:
0},"context"+db.map(Kf=>Kf.id).join(""))})}),rf]})}),yA=yf(V(22)),zA=yf(V(22));sb=V(586);ff(function({children:a}){const d=zA.useRef(null),{viewport:l}=nh();zA.useEffect(()=>Ld(()=>{const E=d.current;if(E){var {zoom:W,point:ka}=l.camera;E.style.transform=`scale(${W}) translateX(${ka[0]}px) translateY(${ka[1]}px)`}}),[]);return(0,sb.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,sb.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});sb=V(586);var WE=ff(function(a){const d=
Kn(a),l=rk(a.id);Lk(d,a);Zk(d,a);return(0,sb.jsx)(l.Provider,{value:d,children:a.children})});sb=V(586);var XE=ff(function({id:a="noid",viewport:d,inputs:l,callbacks:E=uq,meta:W=uq,components:ka=uq,children:oa}){const [Fa,Qa]=yA.useState(()=>{const {Brush:db,ContextBar:kb,DirectionIndicator:Lb,Grid:Vb,Handle:Qb,SelectionBackground:lc,SelectionDetail:xc,SelectionForeground:ac}=ka,pc=If(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return{id:a,viewport:d,inputs:l,callbacks:E,meta:W,components:of(oe({},pc),{Brush:null===db?void 0:vA,ContextBar:kb,DirectionIndicator:null===Lb?void 0:Ww,Grid:null===Vb?void 0:rA,Handle:null===Qb?void 0:wA,SelectionBackground:null===lc?void 0:sA,SelectionDetail:null===xc?void 0:tA,SelectionForeground:null===ac?void 0:uA})}});yA.useLayoutEffect(()=>{const {Brush:db,ContextBar:kb,DirectionIndicator:Lb,Grid:Vb,Handle:Qb,SelectionBackground:lc,SelectionDetail:xc,SelectionForeground:ac}=ka,pc=If(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));
return Ld(()=>{Qa({id:a,viewport:d,inputs:l,callbacks:E,meta:W,components:of(oe({},pc),{Brush:null===db?void 0:vA,ContextBar:kb,DirectionIndicator:null===Lb?void 0:Ww,Grid:null===Vb?void 0:rA,Handle:null===Qb?void 0:wA,SelectionBackground:null===lc?void 0:sA,SelectionDetail:null===xc?void 0:tA,SelectionForeground:null===ac?void 0:uA})})})},[]);const Xa=Qm(a);return(0,sb.jsx)(Xa.Provider,{value:Fa,children:oa})});sb=V(586);sb=V(586);var YE=ff(function(a){const d=ef();return(0,sb.jsx)(Dg,oe({viewport:d.viewport,
inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,
showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},a))});sb=V(586);var pt=yf(V(22)),sv=yf(V(22));sb=V(586);var ZE="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),
Wh=a=>{var {name:d,className:l}=a;a=If(a,["name","className"]);const E=ZE.includes(d)?"tie tie-":"ti ti-";return(0,sb.jsx)("i",oe({className:[E+d,l].join(" ")},a))},yh=V(22),$E=V(22),ps=V(22),yo=V(22),Xw=V(22),aF=V(31),Dn=V(22),eq=(0,Dn.forwardRef)((a,d)=>{var {children:l}=a;a=If(a,["children"]);const E=Dn.Children.toArray(l),W=E.find(xg);if(W){const ka=W.props.children;l=E.map(oa=>oa===W?1<Dn.Children.count(ka)?Dn.Children.only(null):(0,Dn.isValidElement)(ka)?ka.props.children:null:oa);return(0,Dn.createElement)(Yw,
Ze({},a,{ref:d}),(0,Dn.isValidElement)(ka)?(0,Dn.cloneElement)(ka,void 0,l):null)}return(0,Dn.createElement)(Yw,Ze({},a,{ref:d}),l)});eq.displayName="Slot";var Yw=(0,Dn.forwardRef)((a,d)=>{const {children:l}=a;a=If(a,["children"]);return(0,Dn.isValidElement)(l)?(0,Dn.cloneElement)(l,of(oe({},Cj(a,l.props)),{ref:Ng(d,l.ref)})):1<Dn.Children.count(l)?Dn.Children.only(null):null});Yw.displayName="SlotClone";var AA=({children:a})=>(0,Dn.createElement)(Dn.Fragment,null,a),Gl="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,
d)=>{const l=(0,Xw.forwardRef)((E,W)=>{var {asChild:ka}=E;E=If(E,["asChild"]);ka=ka?eq:d;(0,Xw.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Xw.createElement)(ka,Ze({},E,{ref:W}))});l.displayName=`Primitive.${d}`;return of(oe({},a),{[d]:l})},{}),Zw=V(22),bF=V(22),BA,cF=(0,yo.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$w=(0,yo.forwardRef)((a,d)=>{var l;const {disableOutsidePointerEvents:E=!1,onEscapeKeyDown:W,onPointerDownOutside:ka,
onFocusOutside:oa,onInteractOutside:Fa,onDismiss:Qa}=a,Xa=If(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),db=(0,yo.useContext)(cF),[kb,Lb]=(0,yo.useState)(null),Vb=null!==(l=null===kb||void 0===kb?void 0:kb.ownerDocument)&&void 0!==l?l:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Qb]=(0,yo.useState)({});d=jh(d,mc=>Lb(mc));l=Array.from(db.layers);var [lc]=[...db.layersWithOutsidePointerEventsDisabled].slice(-1);
lc=l.indexOf(lc);const xc=kb?l.indexOf(kb):-1;l=0<db.layersWithOutsidePointerEventsDisabled.size;const ac=xc>=lc;lc=Vj(mc=>{const Jc=mc.target,Qc=[...db.branches].some(td=>td.contains(Jc));ac&&!Qc&&(null===ka||void 0===ka||ka(mc),null===Fa||void 0===Fa||Fa(mc),mc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Vb);const pc=Sl(mc=>{const Jc=mc.target;[...db.branches].some(Qc=>Qc.contains(Jc))||(null===oa||void 0===oa||oa(mc),null===Fa||void 0===Fa||Fa(mc),mc.defaultPrevented||null===Qa||void 0===
Qa||Qa())},Vb);Ak(mc=>{xc===db.layers.size-1&&(null===W||void 0===W||W(mc),!mc.defaultPrevented&&Qa&&(mc.preventDefault(),Qa()))},Vb);(0,yo.useEffect)(()=>{if(kb)return E&&(0===db.layersWithOutsidePointerEventsDisabled.size&&(BA=Vb.body.style.pointerEvents,Vb.body.style.pointerEvents="none"),db.layersWithOutsidePointerEventsDisabled.add(kb)),db.layers.add(kb),Yk(),()=>{E&&1===db.layersWithOutsidePointerEventsDisabled.size&&(Vb.body.style.pointerEvents=BA)}},[kb,Vb,E,db]);(0,yo.useEffect)(()=>()=>
{kb&&(db.layers.delete(kb),db.layersWithOutsidePointerEventsDisabled.delete(kb),Yk())},[kb,db]);(0,yo.useEffect)(()=>{const mc=()=>Qb({});document.addEventListener("dismissableLayer.update",mc);return()=>document.removeEventListener("dismissableLayer.update",mc)},[]);return(0,yo.createElement)(Gl.div,Ze({},Xa,{ref:d,style:oe({pointerEvents:l?ac?"auto":"none":void 0},a.style),onFocusCapture:Vf(a.onFocusCapture,pc.onFocusCapture),onBlurCapture:Vf(a.onBlurCapture,pc.onBlurCapture),onPointerDownCapture:Vf(a.onPointerDownCapture,
lc.onPointerDownCapture)}))}),CA=yf(V(22)),dF=V(22),pn=(null===globalThis||void 0===globalThis?0:globalThis.document)?dF.useLayoutEffect:()=>{},eF=CA["useId".toString()]||(()=>{}),fF=0,Gm=V(22),gF=(a,d,l)=>yi(void 0,null,function*(){const {placement:E="bottom",strategy:W="absolute",middleware:ka=[],platform:oa}=l,Fa=yield null==oa.isRTL?void 0:oa.isRTL(d);let Qa=yield oa.getElementRects({reference:a,floating:d,strategy:W}),{x:Xa,y:db}=sl(Qa,E,Fa),kb=E,Lb={},Vb=0;for(let Qb=0;Qb<ka.length;Qb++){const {name:lc,
fn:xc}=ka[Qb],{x:ac,y:pc,data:mc,reset:Jc}=yield xc({x:Xa,y:db,initialPlacement:E,placement:kb,strategy:W,middlewareData:Lb,rects:Qa,platform:oa,elements:{reference:a,floating:d}});Xa=null!=ac?ac:Xa;db=null!=pc?pc:db;Lb=of(oe({},Lb),{[lc]:oe(oe({},Lb[lc]),mc)});Jc&&50>=Vb&&(Vb++,"object"==typeof Jc&&(Jc.placement&&(kb=Jc.placement),Jc.rects&&(Qa=!0===Jc.rects?yield oa.getElementRects({reference:a,floating:d,strategy:W}):Jc.rects),{x:Xa,y:db}=sl(Qa,kb,Fa)),Qb=-1)}return{x:Xa,y:db,placement:kb,strategy:W,
middlewareData:Lb}}),ax=Math.min,zq=Math.max,DA=a=>({name:"arrow",options:a,fn(d){return yi(this,null,function*(){const {element:l,padding:E=0}=null!=a?a:{},{x:W,y:ka,placement:oa,rects:Fa,platform:Qa}=d;if(null==l)return{};const Xa=Ln(E),db={x:W,y:ka},kb=al(oa),Lb=oa.split("-")[1],Vb=Bk(kb);var Qb=yield Qa.getDimensions(l);const lc="y"===kb?"top":"left",xc="y"===kb?"bottom":"right";var ac=Fa.reference[Vb]+Fa.reference[kb]-db[kb]-Fa.floating[Vb];const pc=db[kb]-Fa.reference[kb];var mc=yield null==
Qa.getOffsetParent?void 0:Qa.getOffsetParent(l);let Jc=mc?"y"===kb?mc.clientHeight||0:mc.clientWidth||0:0;0===Jc&&(Jc=Fa.floating[Vb]);mc=Xa[lc];const Qc=Jc-Qb[Vb]-Xa[xc];Qb=Jc/2-Qb[Vb]/2+(ac/2-pc/2);ac=zq(mc,ax(Qb,Qc));return{[kb]:db[kb]-(0<("start"===Lb?Xa[lc]:Xa[xc])&&Qb!==ac&&Fa.reference[Vb]<=Fa.floating[Vb]?Qb<mc?mc-Qb:Qc-Qb:0),data:{[kb]:ac,centerOffset:Qb-ac}}})}}),hF={left:"right",right:"left",bottom:"top",top:"bottom"},iF={start:"end",end:"start"},EA=["top","right","bottom","left"];EA.reduce((a,
d)=>a.concat(d,d+"-start",d+"-end"),[]);var FA=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return yi(this,null,function*(){var l;const {placement:E,middlewareData:W,rects:ka,initialPlacement:oa,platform:Fa,elements:Qa}=d;var Xa=a;const {mainAxis:db=!0,crossAxis:kb=!0,fallbackPlacements:Lb,fallbackStrategy:Vb="bestFit",flipAlignment:Qb=!0}=Xa;Xa=If(Xa,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const lc=$i(E);var xc=Lb||(lc!==oa&&Qb?function(td){const he=
Um(td);return[Ck(td),he,Ck(he)]}(oa):[Um(oa)]);xc=[oa,...xc];const ac=yield im(d,Xa),pc=[];Xa=(null==(l=W.flip)?void 0:l.overflows)||[];if(db&&pc.push(ac[lc]),kb){const {main:td,cross:he}=Ul(E,ka,yield null==Fa.isRTL?void 0:Fa.isRTL(Qa.floating));pc.push(ac[td],ac[he])}if(Xa=[...Xa,{placement:E,overflows:pc}],!pc.every(td=>0>=td)){var mc,Jc;l=(null!=(mc=null==(Jc=W.flip)?void 0:Jc.index)?mc:0)+1;if(mc=xc[l])return{data:{index:l,overflows:Xa},reset:{placement:mc}};mc="bottom";switch(Vb){case "bestFit":var Qc;
(Jc=null==(Qc=Xa.map(td=>[td,td.overflows.filter(he=>0<he).reduce((he,ne)=>he+ne,0)]).sort((td,he)=>td[1]-he[1])[0])?void 0:Qc[0].placement)&&(mc=Jc);break;case "initialPlacement":mc=oa}if(E!==mc)return{reset:{placement:mc}}}return{}})}}},GA=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,l=If(a,["strategy"]);return{name:"hide",fn(E){return yi(this,null,function*(){var {rects:W}=E;switch(d){case "referenceHidden":return W=Fl(yield im(E,of(oe({},l),{elementContext:"reference"})),
W.reference),{data:{referenceHiddenOffsets:W,referenceHidden:dl(W)}};case "escaped":return W=Fl(yield im(E,of(oe({},l),{altBoundary:!0})),W.floating),{data:{escapedOffsets:W,escaped:dl(W)}};default:return{}}})}}},HA=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return yi(this,null,function*(){const {x:l,y:E}=d,W=yield function(ka,oa){return yi(this,null,function*(){const {placement:Fa,platform:Qa,elements:Xa}=ka;var db=yield null==Qa.isRTL?void 0:Qa.isRTL(Xa.floating),kb=$i(Fa);
const Lb=Fa.split("-")[1],Vb="x"===al(Fa);kb=["left","top"].includes(kb)?-1:1;db=db&&Vb?-1:1;const Qb="function"==typeof oa?oa(ka):oa;let {mainAxis:lc,crossAxis:xc,alignmentAxis:ac}="number"==typeof Qb?{mainAxis:Qb,crossAxis:0,alignmentAxis:null}:oe({mainAxis:0,crossAxis:0,alignmentAxis:null},Qb);return Lb&&"number"==typeof ac&&(xc="end"===Lb?-1*ac:ac),Vb?{x:xc*db,y:lc*kb}:{x:lc*kb,y:xc*db}})}(d,a);return{x:l+W.x,y:E+W.y,data:W}})}}},IA=function(a){return void 0===a&&(a={}),{name:"shift",options:a,
fn(d){return yi(this,null,function*(){const {x:l,y:E,placement:W}=d;var ka=a;const {mainAxis:oa=!0,crossAxis:Fa=!1,limiter:Qa={fn:Vb=>{let {x:Qb,y:lc}=Vb;return{x:Qb,y:lc}}}}=ka;var Xa=If(ka,["mainAxis","crossAxis","limiter"]);ka={x:l,y:E};Xa=yield im(d,Xa);const db=al($i(W)),kb="x"===db?"y":"x";let Lb=ka[db];ka=ka[kb];oa&&(Lb=zq(Lb+Xa["y"===db?"top":"left"],ax(Lb,Lb-Xa["y"===db?"bottom":"right"])));Fa&&(ka=zq(ka+Xa["y"===kb?"top":"left"],ax(ka,ka-Xa["y"===kb?"bottom":"right"])));ka=Qa.fn(of(oe({},
d),{[db]:Lb,[kb]:ka}));return of(oe({},ka),{data:{x:ka.x-l,y:ka.y-E}})})}}},JA=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:l,y:E,placement:W,rects:ka,middlewareData:oa}=d,{offset:Fa=0,mainAxis:Qa=!0,crossAxis:Xa=!0}=a;var db={x:l,y:E};d=al(W);const kb="x"===d?"y":"x";let Lb=db[d];db=db[kb];var Vb="function"==typeof Fa?Fa(of(oe({},ka),{placement:W})):Fa;Vb="number"==typeof Vb?{mainAxis:Vb,crossAxis:0}:oe({mainAxis:0,crossAxis:0},Vb);if(Qa){var Qb="y"===d?"height":"width",lc=ka.reference[d]-
ka.floating[Qb]+Vb.mainAxis;Qb=ka.reference[d]+ka.reference[Qb]-Vb.mainAxis;Lb<lc?Lb=lc:Lb>Qb&&(Lb=Qb)}if(Xa){var xc,ac,pc,mc;const Jc="y"===d?"width":"height";lc=["top","left"].includes($i(W));Qb=ka.reference[kb]-ka.floating[Jc]+(lc&&null!=(xc=null==(ac=oa.offset)?void 0:ac[kb])?xc:0)+(lc?0:Vb.crossAxis);xc=ka.reference[kb]+ka.reference[Jc]+(lc?0:null!=(pc=null==(mc=oa.offset)?void 0:mc[kb])?pc:0)-(lc?Vb.crossAxis:0);db<Qb?db=Qb:db>xc&&(db=xc)}return{[d]:Lb,[kb]:db}}}},jF=function(a){return void 0===
a&&(a={}),{name:"size",options:a,fn(d){return yi(this,null,function*(){const {placement:l,rects:E,platform:W,elements:ka}=d;var oa=a,{apply:Fa}=oa;oa=If(oa,["apply"]);oa=yield im(d,oa);var Qa=$i(l),Xa=l.split("-")[1],db,kb;"top"===Qa||"bottom"===Qa?(db=Qa,kb=Xa===((yield null==W.isRTL?void 0:W.isRTL(ka.floating))?"start":"end")?"left":"right"):(kb=Qa,db="end"===Xa?"top":"bottom");Qa=zq(oa.left,0);Xa=zq(oa.right,0);const Lb=zq(oa.top,0),Vb=zq(oa.bottom,0);kb={availableHeight:E.floating.height-(["left",
"right"].includes(l)?2*(0!==Lb||0!==Vb?Lb+Vb:zq(oa.top,oa.bottom)):oa[db]),availableWidth:E.floating.width-(["top","bottom"].includes(l)?2*(0!==Qa||0!==Xa?Qa+Xa:zq(oa.left,oa.right)):oa[kb])};db=yield W.getDimensions(ka.floating);null==Fa||Fa(oe(oe({},d),kb));Fa=yield W.getDimensions(ka.floating);return db.width!==Fa.width||db.height!==Fa.height?{reset:{rects:!0}}:{}})}}},KA=Math.min,lu=Math.max,tv=Math.round,kF={getClippingRect:function(a){let {element:d,boundary:l,rootBoundary:E,strategy:W}=a;a=
[...("clippingAncestors"===l?hm(d):[].concat(l)),E];a=a.reduce((ka,oa)=>{oa=ui(d,oa,W);return ka.top=lu(oa.top,ka.top),ka.right=KA(oa.right,ka.right),ka.bottom=KA(oa.bottom,ka.bottom),ka.left=lu(oa.left,ka.left),ka},ui(d,a[0],W));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,offsetParent:l,strategy:E}=a;var W=ul(l);const ka=kk(l);if(l===ka)return d;a={scrollLeft:0,scrollTop:0};var oa=0,Fa=0;(W||!W&&
"fixed"!==E)&&(("body"!==Lj(l)||mj(ka))&&(a=uk(l)),ul(l))&&(W=Wj(l,!0),oa=W.x+l.clientLeft,Fa=W.y+l.clientTop);return of(oe({},d),{x:d.x-a.scrollLeft+oa,y:d.y-a.scrollTop+Fa})},isElement:Nk,getDimensions:Hk,getOffsetParent:oj,getDocumentElement:kk,getElementRects:a=>{let {reference:d,floating:l,strategy:E}=a;a=oj(l);var W=ul(a);const ka=kk(a);var oa;if(oa=W)oa=Wj(a),oa=tv(oa.width)!==a.offsetWidth||tv(oa.height)!==a.offsetHeight;oa=Wj(d,oa,"fixed"===E);let Fa={scrollLeft:0,scrollTop:0};var Qa=0,Xa=
0;if(W||!W&&"fixed"!==E)(("body"!==Lj(a)||mj(ka))&&(Fa=uk(a)),ul(a))?(W=Wj(a,!0),Qa=W.x+a.clientLeft,Xa=W.y+a.clientTop):ka&&(Qa=lk(ka));return{reference:{x:oa.left+Fa.scrollLeft-Qa,y:oa.top+Fa.scrollTop-Xa,width:oa.width,height:oa.height},floating:of(oe({},Hk(l)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===Wl(a).direction},lF=(a,d,l)=>gF(a,d,oe({platform:kF},l)),No=yf(V(22),1),LA=V(22),mF=yf(V(31),1),bx="undefined"!==typeof document?LA.useLayoutEffect:LA.useEffect,
MA=a=>{const {element:d,padding:l}=a;return{name:"arrow",options:a,fn(E){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=d.current)return DA({element:d.current,padding:l}).fn(E)}else if(d)return DA({element:d,padding:l}).fn(E);return{}}}},cx=V(22),nF=(0,cx.forwardRef)((a,d)=>{const {children:l,width:E=10,height:W=5}=a,ka=If(a,["children","width","height"]);return(0,cx.createElement)(Gl.svg,Ze({},ka,{ref:d,width:E,height:W,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?l:
(0,cx.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),oF=V(22),[dx,qt]=jk("Popper"),[pF,NA]=dx("Popper"),ex=(0,Gm.forwardRef)((a,d)=>{const {__scopePopper:l,virtualRef:E}=a;a=If(a,["__scopePopper","virtualRef"]);const W=NA("PopperAnchor",l),ka=(0,Gm.useRef)(null);d=jh(d,ka);(0,Gm.useEffect)(()=>{W.onAnchorChange((null===E||void 0===E?void 0:E.current)||ka.current)});return E?null:(0,Gm.createElement)(Gl.div,Ze({},a,{ref:d}))}),[qF,rF]=dx("PopperContent"),[sF,tF]=dx("PopperContent",{hasParent:!1,
positionUpdateFns:new Set}),fx=(0,Gm.forwardRef)((a,d)=>{var l,E,W,ka,oa,Fa,Qa,Xa;const {__scopePopper:db,side:kb="bottom",sideOffset:Lb=0,align:Vb="center",alignOffset:Qb=0,arrowPadding:lc=0,collisionBoundary:xc=[],collisionPadding:ac=0,sticky:pc="partial",hideWhenDetached:mc=!1,avoidCollisions:Jc=!0}=a;a=If(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Qc=NA("PopperContent",db),[td,he]=
(0,Gm.useState)(null);d=jh(d,Kl=>he(Kl));const [ne,Ge]=(0,Gm.useState)(null);var jf=Dh(ne),rf=null!==(l=null===jf||void 0===jf?void 0:jf.width)&&void 0!==l?l:0;l=null!==(E=null===jf||void 0===jf?void 0:jf.height)&&void 0!==E?E:0;E=kb+("center"!==Vb?"-"+Vb:"");jf="number"===typeof ac?ac:oe({top:0,right:0,bottom:0,left:0},ac);const We=Array.isArray(xc)?xc:[xc],uf=0<We.length;jf={padding:jf,boundary:We.filter(Ag),altBoundary:uf};const {reference:Qd,floating:nd,strategy:qd,x:sd,y:ke,placement:pf,middlewareData:Af,
update:ng}=ig({strategy:"fixed",placement:E,whileElementsMounted:Pi,middleware:[HA({mainAxis:Lb+l,alignmentAxis:Qb}),Jc?IA(oe({mainAxis:!0,crossAxis:!1,limiter:"partial"===pc?JA():void 0},jf)):void 0,ne?MA({element:ne,padding:lc}):void 0,Jc?FA(oe({},jf)):void 0,vF({arrowWidth:rf,arrowHeight:l}),mc?GA({strategy:"referenceHidden"}):void 0].filter(bh)});pn(()=>{Qd(Qc.anchor)},[Qd,Qc.anchor]);const Kf=null!==sd&&null!==ke,[$f,Wg]=zi(pf);rf=null===(W=Af.arrow)||void 0===W?void 0:W.x;W=null===(ka=Af.arrow)||
void 0===ka?void 0:ka.y;ka=0!==(null===(oa=Af.arrow)||void 0===oa?void 0:oa.centerOffset);const [Of,Bh]=(0,Gm.useState)();pn(()=>{td&&Bh(window.getComputedStyle(td).zIndex)},[td]);const {hasParent:Lh,positionUpdateFns:Ej}=tF("PopperContent",db),Jl=!Lh;(0,Gm.useLayoutEffect)(()=>{if(!Jl)return Ej.add(ng),()=>{Ej.delete(ng)}},[Jl,Ej,ng]);(0,Gm.useLayoutEffect)(()=>{Jl&&Kf&&Array.from(Ej).reverse().forEach(Kl=>requestAnimationFrame(Kl))},[Jl,Kf,Ej]);oa=of(oe({"data-side":$f,"data-align":Wg},a),{ref:d,
style:of(oe({},a.style),{animation:Kf?void 0:"none",opacity:null!==(Fa=Af.hide)&&void 0!==Fa&&Fa.referenceHidden?0:void 0})});return(0,Gm.createElement)("div",{ref:nd,"data-radix-popper-content-wrapper":"",style:{position:qd,left:0,top:0,transform:Kf?`translate3d(${Math.round(sd)}px, ${Math.round(ke)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Of,["--radix-popper-transform-origin"]:[null===(Qa=Af.transformOrigin)||void 0===Qa?void 0:Qa.x,null===(Xa=Af.transformOrigin)||void 0===
Xa?void 0:Xa.y].join(" ")}},(0,Gm.createElement)(qF,{scope:db,placedSide:$f,onArrowChange:Ge,arrowX:rf,arrowY:W,shouldHideArrow:ka},Jl?(0,Gm.createElement)(sF,{scope:db,hasParent:!0,positionUpdateFns:Ej},(0,Gm.createElement)(Gl.div,oa)):(0,Gm.createElement)(Gl.div,oa)))}),uF={top:"bottom",right:"left",bottom:"top",left:"right"},OA=(0,Gm.forwardRef)(function(a,d){var {__scopePopper:l}=a;a=If(a,["__scopePopper"]);l=rF("PopperArrow",l);return(0,Gm.createElement)("span",{ref:l.onArrowChange,style:{position:"absolute",
left:l.arrowX,top:l.arrowY,[uF[l.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0}},(0,Gm.createElement)(nF,Ze({},a,{ref:d,style:of(oe({},a.style),{display:"block"})})))}),vF=a=>({name:"transformOrigin",options:a,fn(d){var l,
E,W,ka,oa;const {placement:Fa,rects:Qa,middlewareData:Xa}=d,db=(d=0!==(null===(l=Xa.arrow)||void 0===l?void 0:l.centerOffset))?0:a.arrowWidth;l=d?0:a.arrowHeight;const [kb,Lb]=zi(Fa),Vb={start:"0%",center:"50%",end:"100%"}[Lb],Qb=(null!==(E=null===(W=Xa.arrow)||void 0===W?void 0:W.x)&&void 0!==E?E:0)+db/2;E=(null!==(ka=null===(oa=Xa.arrow)||void 0===oa?void 0:oa.y)&&void 0!==ka?ka:0)+l/2;oa=ka="";"bottom"===kb?(ka=d?Vb:`${Qb}px`,oa=`${-l}px`):"top"===kb?(ka=d?Vb:`${Qb}px`,oa=`${Qa.floating.height+
l}px`):"right"===kb?(ka=`${-l}px`,oa=d?Vb:`${E}px`):"left"===kb&&(ka=`${Qa.floating.width+l}px`,oa=d?Vb:`${E}px`);return{data:{x:ka,y:oa}}}}),gx=a=>{const {__scopePopper:d,children:l}=a,[E,W]=(0,Gm.useState)(null);return(0,Gm.createElement)(pF,{scope:d,anchor:E,onAnchorChange:W},l)},PA=V(22),wF=yf(V(31)),xF=(0,PA.forwardRef)((a,d)=>{var l;const {container:E=null===globalThis||void 0===globalThis?void 0:null===(l=globalThis.document)||void 0===l?void 0:l.body}=a;a=If(a,["container"]);return E?wF.default.createPortal((0,PA.createElement)(Gl.div,
Ze({},a,{ref:d})),E):null}),Aq=V(22),yF=V(31),mu=a=>{const {present:d,children:l}=a;a=Fg(d);const E="function"===typeof l?l({present:a.isPresent}):Aq.Children.only(l),W=jh(a.ref,E.ref);return"function"===typeof l||a.isPresent?(0,Aq.cloneElement)(E,{ref:W}):null};mu.displayName="Presence";var uv=V(22),QA=V(22),zF=(0,QA.forwardRef)((a,d)=>(0,QA.createElement)(Gl.span,Ze({},a,{ref:d,style:oe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",
whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[vv]=jk("Tooltip",[qt]),wv=qt(),[AF,hx]=vv("TooltipProvider"),[BF,nu]=vv("Tooltip"),CF=(0,yh.forwardRef)((a,d)=>{var {__scopeTooltip:l}=a;const E=If(a,["__scopeTooltip"]),W=nu("TooltipTrigger",l),ka=hx("TooltipTrigger",l);l=wv(l);const oa=(0,yh.useRef)(null);d=jh(d,oa,W.onTriggerChange);const Fa=(0,yh.useRef)(!1),Qa=(0,yh.useRef)(!1),Xa=(0,yh.useCallback)(()=>Fa.current=!1,[]);(0,yh.useEffect)(()=>()=>document.removeEventListener("pointerup",Xa),
[Xa]);return(0,yh.createElement)(ex,Ze({asChild:!0},l),(0,yh.createElement)(Gl.button,Ze({"aria-describedby":W.open?W.contentId:void 0,"data-state":W.stateAttribute},E,{ref:d,onPointerMove:Vf(a.onPointerMove,db=>{"touch"===db.pointerType||Qa.current||ka.isPointerInTransitRef.current||(W.onTriggerEnter(),Qa.current=!0)}),onPointerLeave:Vf(a.onPointerLeave,()=>{W.onTriggerLeave();Qa.current=!1}),onPointerDown:Vf(a.onPointerDown,()=>{Fa.current=!0;document.addEventListener("pointerup",Xa,{once:!0})}),
onFocus:Vf(a.onFocus,()=>{if(!Fa.current)W.onOpen()}),onBlur:Vf(a.onBlur,W.onClose),onClick:Vf(a.onClick,W.onClose)})))}),[DF,EF]=vv("TooltipPortal",{forceMount:void 0}),FF=(0,yh.forwardRef)((a,d)=>{var l=EF("TooltipContent",a.__scopeTooltip);const {forceMount:E=l.forceMount,side:W="top"}=a;l=If(a,["forceMount","side"]);a=nu("TooltipContent",a.__scopeTooltip);return(0,yh.createElement)(mu,{present:E||a.open},a.disableHoverableContent?(0,yh.createElement)(RA,Ze({side:W},l,{ref:d})):(0,yh.createElement)(GF,
Ze({side:W},l,{ref:d})))}),GF=(0,yh.forwardRef)((a,d)=>{const l=nu("TooltipContent",a.__scopeTooltip),E=hx("TooltipContent",a.__scopeTooltip),W=(0,yh.useRef)(null);d=jh(d,W);const [ka,oa]=(0,yh.useState)(null),{trigger:Fa,onClose:Qa}=l,Xa=W.current,{onPointerInTransitChange:db}=E,kb=(0,yh.useCallback)(()=>{oa(null);db(!1)},[db]),Lb=(0,yh.useCallback)((Vb,Qb)=>{const lc=Fj({x:Vb.clientX,y:Vb.clientY},Vb.currentTarget.getBoundingClientRect()),xc="right"===lc||"bottom"===lc?-5:5;Vb="right"===lc||"left"===
lc?{x:Vb.clientX+xc,y:Vb.clientY}:{x:Vb.clientX,y:Vb.clientY+xc};Qb=Qb.getBoundingClientRect();const {top:ac,right:pc,bottom:mc,left:Jc}=Qb;Qb=Rb([Vb,{x:Jc,y:ac},{x:pc,y:ac},{x:pc,y:mc},{x:Jc,y:mc}]);oa(Qb);db(!0)},[db]);(0,yh.useEffect)(()=>()=>kb(),[kb]);(0,yh.useEffect)(()=>{if(Fa&&Xa){const Vb=lc=>Lb(lc,Xa),Qb=lc=>Lb(lc,Fa);Fa.addEventListener("pointerleave",Vb);Xa.addEventListener("pointerleave",Qb);return()=>{Fa.removeEventListener("pointerleave",Vb);Xa.removeEventListener("pointerleave",Qb)}}},
[Fa,Xa,Lb,kb]);(0,yh.useEffect)(()=>{if(ka){const Vb=Qb=>{var lc=Qb.target;Qb={x:Qb.clientX,y:Qb.clientY};lc=(null===Fa||void 0===Fa?void 0:Fa.contains(lc))||(null===Xa||void 0===Xa?void 0:Xa.contains(lc));const {x:xc,y:ac}=Qb;Qb=!1;for(let pc=0,mc=ka.length-1;pc<ka.length;mc=pc++){const Jc=ka[pc].x,Qc=ka[pc].y,td=ka[mc].x,he=ka[mc].y;Qc>ac!==he>ac&&xc<(td-Jc)*(ac-Qc)/(he-Qc)+Jc&&(Qb=!Qb)}Qb=!Qb;lc?kb():Qb&&(kb(),Qa())};document.addEventListener("pointermove",Vb);return()=>document.removeEventListener("pointermove",
Vb)}},[Fa,Xa,ka,Qa,kb]);return(0,yh.createElement)(RA,Ze({},a,{ref:d}))}),[HF,IF]=vv("Tooltip",{isInside:!1}),RA=(0,yh.forwardRef)((a,d)=>{const {__scopeTooltip:l,children:E,"aria-label":W,onEscapeKeyDown:ka,onPointerDownOutside:oa}=a;a=If(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Fa=nu("TooltipContent",l),Qa=wv(l),{onClose:Xa}=Fa;(0,yh.useEffect)(()=>{document.addEventListener("tooltip.open",Xa);return()=>document.removeEventListener("tooltip.open",
Xa)},[Xa]);(0,yh.useEffect)(()=>{if(Fa.trigger){const db=kb=>{kb=kb.target;null!==kb&&void 0!==kb&&kb.contains(Fa.trigger)&&Xa()};window.addEventListener("scroll",db,{capture:!0});return()=>window.removeEventListener("scroll",db,{capture:!0})}},[Fa.trigger,Xa]);return(0,yh.createElement)($w,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ka,onPointerDownOutside:oa,onFocusOutside:db=>db.preventDefault(),onDismiss:Xa},(0,yh.createElement)(fx,Ze({"data-state":Fa.stateAttribute},Qa,a,{ref:d,
style:of(oe({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,yh.createElement)(AA,null,E),(0,yh.createElement)(HF,{scope:l,isInside:!0},(0,yh.createElement)(zF,{id:Fa.contentId,role:"tooltip"},W||E))))}),JF=(0,yh.forwardRef)((a,d)=>{const {__scopeTooltip:l}=a;a=If(a,["__scopeTooltip"]);const E=wv(l);return IF("TooltipArrow",l).isInside?null:(0,yh.createElement)(OA,Ze({},E,a,{ref:d}))}),KF=a=>{const {__scopeTooltip:d,delayDuration:l=700,skipDelayDuration:E=
300,disableHoverableContent:W=!1,children:ka}=a,[oa,Fa]=(0,yh.useState)(!0),Qa=(0,yh.useRef)(!1),Xa=(0,yh.useRef)(0);(0,yh.useEffect)(()=>{const db=Xa.current;return()=>window.clearTimeout(db)},[]);return(0,yh.createElement)(AF,{scope:d,isOpenDelayed:oa,delayDuration:l,onOpen:(0,yh.useCallback)(()=>{window.clearTimeout(Xa.current);Fa(!1)},[]),onClose:(0,yh.useCallback)(()=>{window.clearTimeout(Xa.current);Xa.current=window.setTimeout(()=>Fa(!0),E)},[E]),isPointerInTransitRef:Qa,onPointerInTransitChange:(0,yh.useCallback)(db=>
{Qa.current=db},[]),disableHoverableContent:W},ka)},LF=a=>{const {__scopeTooltip:d,children:l,open:E,defaultOpen:W=!1,onOpenChange:ka,disableHoverableContent:oa,delayDuration:Fa}=a,Qa=hx("Tooltip",a.__scopeTooltip);a=wv(d);const [Xa,db]=(0,yh.useState)(null),kb=gi(),Lb=(0,yh.useRef)(0),Vb=null!==oa&&void 0!==oa?oa:Qa.disableHoverableContent,Qb=null!==Fa&&void 0!==Fa?Fa:Qa.delayDuration,lc=(0,yh.useRef)(!1),[xc=!1,ac]=ai({prop:E,defaultProp:W,onChange:td=>{if(td)Qa.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));
else Qa.onClose();null===ka||void 0===ka||ka(td)}}),pc=(0,yh.useMemo)(()=>xc?lc.current?"delayed-open":"instant-open":"closed",[xc]),mc=(0,yh.useCallback)(()=>{window.clearTimeout(Lb.current);lc.current=!1;ac(!0)},[ac]),Jc=(0,yh.useCallback)(()=>{window.clearTimeout(Lb.current);ac(!1)},[ac]),Qc=(0,yh.useCallback)(()=>{window.clearTimeout(Lb.current);Lb.current=window.setTimeout(()=>{lc.current=!0;ac(!0)},Qb)},[Qb,ac]);(0,yh.useEffect)(()=>()=>window.clearTimeout(Lb.current),[]);return(0,yh.createElement)(gx,
a,(0,yh.createElement)(BF,{scope:d,contentId:kb,open:xc,stateAttribute:pc,trigger:Xa,onTriggerChange:db,onTriggerEnter:(0,yh.useCallback)(()=>{Qa.isOpenDelayed?Qc():mc()},[Qa.isOpenDelayed,Qc,mc]),onTriggerLeave:(0,yh.useCallback)(()=>{Vb?Jc():window.clearTimeout(Lb.current)},[Jc,Vb]),onOpen:mc,onClose:Jc,disableHoverableContent:Vb},l))},MF=CF,NF=a=>{const {__scopeTooltip:d,forceMount:l,children:E,container:W}=a;a=nu("TooltipPortal",d);return(0,yh.createElement)(DF,{scope:d,forceMount:l},(0,yh.createElement)(mu,
{present:l||a.open},(0,yh.createElement)(xF,{asChild:!0,container:W},E)))},OF=FF,PF=JF;sb=V(586);sb=V(586);sb=V(586);var QF=({style:a,icon:d,onClick:l})=>(0,sb.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:l,children:(0,sb.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,sb.jsx)(Wh,{name:d})})}),gp=V(22),mh=V(22),fq=yf(V(22)),SA=V(22),RF=(0,SA.createContext)(void 0),SF=V(22),ix=0,kr=V(22),TA={bubbles:!1,cancelable:!0},UA=(0,kr.forwardRef)((a,
d)=>{const {loop:l=!1,trapped:E=!1,onMountAutoFocus:W,onUnmountAutoFocus:ka}=a;a=If(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [oa,Fa]=(0,kr.useState)(null),Qa=Gf(W),Xa=Gf(ka),db=(0,kr.useRef)(null);d=jh(d,Vb=>Fa(Vb));const kb=(0,kr.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,kr.useEffect)(()=>{if(E){let Vb=function(lc){!kb.paused&&oa&&(lc=lc.target,oa.contains(lc)?db.current=lc:Bc(db.current,{select:!0}))},Qb=function(lc){!kb.paused&&
oa&&(oa.contains(lc.relatedTarget)||Bc(db.current,{select:!0}))};document.addEventListener("focusin",Vb);document.addEventListener("focusout",Qb);return()=>{document.removeEventListener("focusin",Vb);document.removeEventListener("focusout",Qb)}}},[E,oa,kb.paused]);(0,kr.useEffect)(()=>{if(oa){VA.add(kb);const Vb=document.activeElement;if(!oa.contains(Vb)){const Qb=new CustomEvent("focusScope.autoFocusOnMount",TA);oa.addEventListener("focusScope.autoFocusOnMount",Qa);oa.dispatchEvent(Qb);Qb.defaultPrevented||
(Tb(Pc(rb(oa)),{select:!0}),document.activeElement===Vb&&Bc(oa))}return()=>{oa.removeEventListener("focusScope.autoFocusOnMount",Qa);setTimeout(()=>{const Qb=new CustomEvent("focusScope.autoFocusOnUnmount",TA);oa.addEventListener("focusScope.autoFocusOnUnmount",Xa);oa.dispatchEvent(Qb);Qb.defaultPrevented||Bc(null!==Vb&&void 0!==Vb?Vb:document.body,{select:!0});oa.removeEventListener("focusScope.autoFocusOnUnmount",Xa);VA.remove(kb)},0)}}},[oa,Qa,Xa,kb]);const Lb=(0,kr.useCallback)(Vb=>{if((l||E)&&
!kb.paused){var Qb=document.activeElement;if("Tab"===Vb.key&&!Vb.altKey&&!Vb.ctrlKey&&!Vb.metaKey&&Qb){const xc=Vb.currentTarget;var lc=xc;const ac=rb(lc),pc=Pb(ac,lc);lc=Pb(ac.reverse(),lc);const [mc,Jc]=[pc,lc];mc&&Jc?Vb.shiftKey||Qb!==Jc?Vb.shiftKey&&Qb===mc&&(Vb.preventDefault(),l&&Bc(Jc,{select:!0})):(Vb.preventDefault(),l&&Bc(mc,{select:!0})):Qb===xc&&Vb.preventDefault()}}},[l,E,kb.paused]);return(0,kr.createElement)(Gl.div,Ze({tabIndex:-1},a,{ref:d,onKeyDown:Lb}))}),VA=function(){let a=[];
return{add(d){const l=a[0];d===l||null!==l&&void 0!==l&&l.pause();a=Lc(a,d);a.unshift(d)},remove(d){var l;a=Lc(a,d);null===(l=a[0])||void 0===l||l.resume()}}}(),Hm=V(22),TF={bubbles:!1,cancelable:!0},[jx,WA,UF]=Cb("RovingFocusGroup"),[VF,xv]=jk("RovingFocusGroup",[UF]),[WF,XF]=VF("RovingFocusGroup"),XA=(0,Hm.forwardRef)((a,d)=>(0,Hm.createElement)(jx.Provider,{scope:a.__scopeRovingFocusGroup},(0,Hm.createElement)(jx.Slot,{scope:a.__scopeRovingFocusGroup},(0,Hm.createElement)(YF,Ze({},a,{ref:d}))))),
YF=(0,Hm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:l,orientation:E,loop:W=!1,dir:ka,currentTabStopId:oa,defaultCurrentTabStopId:Fa,onCurrentTabStopIdChange:Qa,onEntryFocus:Xa}=a,db=If(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),kb=(0,Hm.useRef)(null);d=jh(d,kb);const Lb=Wb(ka),[Vb=null,Qb]=ai({prop:oa,defaultProp:Fa,onChange:Qa}),[lc,xc]=(0,Hm.useState)(!1),ac=Gf(Xa),pc=WA(l),mc=(0,Hm.useRef)(!1),
[Jc,Qc]=(0,Hm.useState)(0);(0,Hm.useEffect)(()=>{const td=kb.current;if(td)return td.addEventListener("rovingFocusGroup.onEntryFocus",ac),()=>td.removeEventListener("rovingFocusGroup.onEntryFocus",ac)},[ac]);return(0,Hm.createElement)(WF,{scope:l,orientation:E,dir:Lb,loop:W,currentTabStopId:Vb,onItemFocus:(0,Hm.useCallback)(td=>Qb(td),[Qb]),onItemShiftTab:(0,Hm.useCallback)(()=>xc(!0),[]),onFocusableItemAdd:(0,Hm.useCallback)(()=>Qc(td=>td+1),[]),onFocusableItemRemove:(0,Hm.useCallback)(()=>Qc(td=>
td-1),[])},(0,Hm.createElement)(Gl.div,Ze({tabIndex:lc||0===Jc?-1:0,"data-orientation":E},db,{ref:d,style:oe({outline:"none"},a.style),onMouseDown:Vf(a.onMouseDown,()=>{mc.current=!0}),onFocus:Vf(a.onFocus,td=>{var he=!mc.current;if(td.target===td.currentTarget&&he&&!lc&&(he=new CustomEvent("rovingFocusGroup.onEntryFocus",TF),td.currentTarget.dispatchEvent(he),!he.defaultPrevented)){td=pc().filter(Ge=>Ge.focusable);he=td.find(Ge=>Ge.active);const ne=td.find(Ge=>Ge.id===Vb);td=[he,ne,...td].filter(Boolean).map(Ge=>
Ge.ref.current);Td(td)}mc.current=!1}),onBlur:Vf(a.onBlur,()=>xc(!1))})))}),YA=(0,Hm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:l,focusable:E=!0,active:W=!1}=a,ka=If(a,["__scopeRovingFocusGroup","focusable","active"]),oa=gi(),Fa=XF("RovingFocusGroupItem",l),Qa=Fa.currentTabStopId===oa,Xa=WA(l),{onFocusableItemAdd:db,onFocusableItemRemove:kb}=Fa;(0,Hm.useEffect)(()=>{if(E)return db(),()=>kb()},[E,db,kb]);return(0,Hm.createElement)(jx.ItemSlot,{scope:l,id:oa,focusable:E,active:W},(0,Hm.createElement)(Gl.span,
Ze({tabIndex:Qa?0:-1,"data-orientation":Fa.orientation},ka,{ref:d,onMouseDown:Vf(a.onMouseDown,Lb=>{if(E)Fa.onItemFocus(oa);else Lb.preventDefault()}),onFocus:Vf(a.onFocus,()=>Fa.onItemFocus(oa)),onKeyDown:Vf(a.onKeyDown,Lb=>{if("Tab"===Lb.key&&Lb.shiftKey)Fa.onItemShiftTab();else if(Lb.target===Lb.currentTarget){var Vb=ud(Lb,Fa.orientation,Fa.dir);if(void 0!==Vb){Lb.preventDefault();let Qb=Xa().filter(lc=>lc.focusable).map(lc=>lc.ref.current);if("last"===Vb)Qb.reverse();else if("prev"===Vb||"next"===
Vb)"prev"===Vb&&Qb.reverse(),Lb=Qb.indexOf(Lb.currentTarget),Qb=Fa.loop?Ed(Qb,Lb+1):Qb.slice(Lb+1);setTimeout(()=>Td(Qb))}}})})))}),ZF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},$F=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},rt=new WeakMap,yv=new WeakMap,zv={},kx=0,lx=function(a,d,l){void 0===d&&(d=$F(a));void 0===l&&(l="data-aria-hidden");var E=Array.isArray(a)?
a:[a];zv[l]||(zv[l]=new WeakMap);var W=zv[l],ka=[],oa=new Set,Fa=function(Xa){Xa&&!oa.has(Xa)&&(oa.add(Xa),Fa(Xa.parentNode))};E.forEach(Fa);var Qa=function(Xa){!Xa||0<=E.indexOf(Xa)||Array.prototype.forEach.call(Xa.children,function(db){if(oa.has(db))Qa(db);else{var kb=db.getAttribute("aria-hidden");kb=null!==kb&&"false"!==kb;var Lb=(rt.get(db)||0)+1,Vb=(W.get(db)||0)+1;rt.set(db,Lb);W.set(db,Vb);ka.push(db);1===Lb&&kb&&yv.set(db,!0);1===Vb&&db.setAttribute(l,"true");kb||db.setAttribute("aria-hidden",
"true")}})};Qa(d);oa.clear();kx++;return function(){ka.forEach(function(Xa){var db=rt.get(Xa)-1,kb=W.get(Xa)-1;rt.set(Xa,db);W.set(Xa,kb);db||(yv.has(Xa)||Xa.removeAttribute("aria-hidden"),yv.delete(Xa));kb||Xa.removeAttribute(l)});kx--;kx||(rt=new WeakMap,rt=new WeakMap,yv=new WeakMap,zv={})}},aG=yf(Pr(),1),{__assign:lr,__rest:ZA,__spreadArray:bG}=aG.default,$A=yf(V(22)),Bq=yf(V(22)),cG=V(22),dG=yf(V(22)),aB=function(a){var d=a.sideCar;a=ZA(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");
d=d.read();if(!d)throw Error("Sidecar medium not found");return dG.createElement(d,lr({},a))};aB.isSideCarExport=!0;var bB=function(a){void 0===a&&(a={});var d=eg(null);d.options=lr({async:!0,ssr:!1},a);return d}(),mx=function(){},Av=Bq.forwardRef(function(a,d){var l=Bq.useRef(null),E=Bq.useState({onScrollCapture:mx,onWheelCapture:mx,onTouchMoveCapture:mx}),W=E[0];E=E[1];var ka=a.forwardProps,oa=a.children,Fa=a.className,Qa=a.removeScrollBar,Xa=a.enabled,db=a.shards,kb=a.sideCar,Lb=a.noIsolation,
Vb=a.inert,Qb=a.allowPinchZoom,lc=a.as;lc=void 0===lc?"div":lc;a=ZA(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));d=Kd([l,d]);W=lr(lr({},a),W);return Bq.createElement(Bq.Fragment,null,Xa&&Bq.createElement(kb,{sideCar:bB,removeScrollBar:Qa,shards:db,noIsolation:Lb,inert:Vb,setCallbacks:E,allowPinchZoom:!!Qb,lockRef:l}),ka?Bq.cloneElement(Bq.Children.only(oa),lr(lr({},W),{ref:d})):Bq.createElement(lc,lr({},W,{className:Fa,
ref:d}),oa))});Av.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Av.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var Ym=yf(V(22)),cB=yf(V(22)),eG=yf(V(22)),fG=function(){var a=0,d=null;return{add:function(l){if(0==a){if(document){var E=document.createElement("style");E.type="text/css";var W="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;W&&E.setAttribute("nonce",W)}else E=null;if(d=E)E=d,E.styleSheet?E.styleSheet.cssText=l:E.appendChild(document.createTextNode(l)),
l=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(l)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),d=null)}}},gG=function(){var a=fG();return function(d,l){eG.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&l])}},dB=function(){var a=gG();return function(d){a(d.styles,d.dynamic);return null}},hG={left:0,top:0,right:0,gap:0},iG=dB(),jG=function(a,d,l,E){var W=a.left,ka=a.top,oa=a.right;a=a.gap;void 0===l&&(l="margin");return"\n  .".concat("with-scroll-bars-hidden",
" {\n   overflow: hidden ").concat(E,";\n   padding-right: ").concat(a,"px ").concat(E,";\n  }\n  body {\n    overflow: hidden ").concat(E,";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(E,";"),"margin"===l&&"\n    padding-left: ".concat(W,"px;\n    padding-top: ").concat(ka,"px;\n    padding-right: ").concat(oa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(E,";\n    "),"padding"===l&&"padding-right: ".concat(a,"px ").concat(E,
";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(E,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(E,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(E,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(E,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",
": ").concat(a,"px;\n  }\n")},kG=function(a){var d=a.noRelative,l=a.noImportant;a=a.gapMode;var E=void 0===a?"margin":a;a=cB.useMemo(function(){var W=E;void 0===W&&(W="margin");if("undefined"===typeof window)W=hG;else{var ka=window.getComputedStyle(document.body),oa=ka["padding"===W?"paddingTop":"marginTop"],Fa=ka["padding"===W?"paddingRight":"marginRight"];W=[parseInt(ka["padding"===W?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(oa||"",10)||0,parseInt(Fa||"",10)||0];W={left:W[0],top:W[1],right:W[2],
gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+W[2]-W[0])}}return W},[E]);return cB.createElement(iG,{styles:jG(a,!d,E,l?"":"!important")})},nx=!1;if("undefined"!==typeof window)try{var Bv=Object.defineProperty({},"passive",{get:function(){return nx=!0}});window.addEventListener("test",Bv,Bv);window.removeEventListener("test",Bv,Bv)}catch(a){nx=!1}var st=nx?{passive:!1}:!1,eB=function(a,d){var l=window.getComputedStyle(a);return"hidden"!==l[d]&&!(l.overflowY===l.overflowX&&
"TEXTAREA"!==a.tagName&&"visible"===l[d])},fB=function(a,d){do{"undefined"!==typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(gB(a,d)){var l=hB(a,d);if(l[1]>l[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},gB=function(a,d){return"v"===a?eB(d,"overflowY"):eB(d,"overflowX")},hB=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},Cv=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:
[0,0]},iB=function(a){return a&&"current"in a?a.current:a},lG=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},mG=0,tt=[];bB.useMedium(function(a){var d=Ym.useRef([]),l=Ym.useRef([0,0]),E=Ym.useRef(),W=Ym.useState(mG++)[0],ka=Ym.useState(function(){return dB()})[0],oa=Ym.useRef(a);Ym.useEffect(function(){oa.current=a},[a]);Ym.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(W));
var Qb=bG([a.lockRef.current],(a.shards||[]).map(iB),!0).filter(Boolean);Qb.forEach(function(lc){return lc.classList.add("allow-interactivity-".concat(W))});return function(){document.body.classList.remove("block-interactivity-".concat(W));Qb.forEach(function(lc){return lc.classList.remove("allow-interactivity-".concat(W))})}}},[a.inert,a.lockRef.current,a.shards]);var Fa=Ym.useCallback(function(Qb,lc){if("touches"in Qb&&2===Qb.touches.length)return!oa.current.allowPinchZoom;var xc=Cv(Qb),ac=l.current,
pc="deltaX"in Qb?Qb.deltaX:ac[0]-xc[0];ac="deltaY"in Qb?Qb.deltaY:ac[1]-xc[1];var mc=Qb.target,Jc=Math.abs(pc)>Math.abs(ac)?"h":"v";if("touches"in Qb&&"h"===Jc&&"range"===mc.type)return!1;var Qc=fB(Jc,mc);if(!Qc)return!0;Qc?xc=Jc:(xc="v"===Jc?"h":"v",Qc=fB(Jc,mc));if(!Qc)return!1;!E.current&&"changedTouches"in Qb&&(pc||ac)&&(E.current=xc);if(!xc)return!0;xc=E.current||xc;ac="h"===xc?pc:ac;pc=window.getComputedStyle(lc).direction;pc="h"===xc&&"rtl"===pc?-1:1;Jc=pc*ac;Qb=Qb.target;ac=lc.contains(Qb);
mc=!1;Jc=0<Jc;var td=Qc=0;do{var he=hB(xc,Qb),ne=he[0];he=he[1]-he[2]-pc*ne;(ne||he)&&gB(xc,Qb)&&(Qc+=he,td+=ne);Qb=Qb.parentNode}while(!ac&&Qb!==document.body||ac&&(lc.contains(Qb)||lc===Qb));Jc&&0===Qc?mc=!0:Jc||0!==td||(mc=!0);return mc},[]),Qa=Ym.useCallback(function(Qb){if(tt.length&&tt[tt.length-1]===ka){var lc="deltaY"in Qb?[Qb.deltaX,Qb.deltaY]:Cv(Qb),xc=d.current.filter(function(ac){var pc;if(pc=ac.name===Qb.type&&ac.target===Qb.target)ac=ac.delta,pc=ac[0]===lc[0]&&ac[1]===lc[1];return pc})[0];
xc&&xc.should?Qb.cancelable&&Qb.preventDefault():xc||(xc=(oa.current.shards||[]).map(iB).filter(Boolean).filter(function(ac){return ac.contains(Qb.target)}),(0<xc.length?Fa(Qb,xc[0]):!oa.current.noIsolation)&&Qb.cancelable&&Qb.preventDefault())}},[]),Xa=Ym.useCallback(function(Qb,lc,xc,ac){var pc={name:Qb,delta:lc,target:xc,should:ac};d.current.push(pc);setTimeout(function(){d.current=d.current.filter(function(mc){return mc!==pc})},1)},[]),db=Ym.useCallback(function(Qb){l.current=Cv(Qb);E.current=
void 0},[]),kb=Ym.useCallback(function(Qb){Xa(Qb.type,[Qb.deltaX,Qb.deltaY],Qb.target,Fa(Qb,a.lockRef.current))},[]),Lb=Ym.useCallback(function(Qb){Xa(Qb.type,Cv(Qb),Qb.target,Fa(Qb,a.lockRef.current))},[]);Ym.useEffect(function(){tt.push(ka);a.setCallbacks({onScrollCapture:kb,onWheelCapture:kb,onTouchMoveCapture:Lb});document.addEventListener("wheel",Qa,st);document.addEventListener("touchmove",Qa,st);document.addEventListener("touchstart",db,st);return function(){tt=tt.filter(function(Qb){return Qb!==
ka});document.removeEventListener("wheel",Qa,st);document.removeEventListener("touchmove",Qa,st);document.removeEventListener("touchstart",db,st)}},[]);var Vb=a.removeScrollBar;return Ym.createElement(Ym.Fragment,null,a.inert?Ym.createElement(ka,{styles:lG(W)}):null,Vb?Ym.createElement(kG,{gapMode:"margin"}):null)});var Dv=$A.forwardRef(function(a,d){return $A.createElement(Av,lr({},a,{ref:d,sideCar:aB}))});Dv.classNames=Av.classNames;var ox=["Enter"," "],jB=["ArrowUp","PageDown","End"],nG=["ArrowDown",
"PageUp","Home",...jB];[...ox];[...ox];var [px,oG,Ep]=Cb("Menu"),[qs,Ev]=jk("Menu",[Ep,qt,xv]),qx=qt(),rx=xv(),[Nn,On]=qs("Menu"),[yw,zw]=qs("Menu"),Iy=(0,mh.forwardRef)((a,d)=>{var {__scopeMenu:l}=a;a=If(a,["__scopeMenu"]);l=qx(l);return(0,mh.createElement)(ex,Ze({},l,a,{ref:d}))}),[,Jy]=qs("MenuPortal",{forceMount:void 0}),[YC,Rr]=qs("MenuContent"),cv=(0,mh.forwardRef)((a,d)=>{var l=Jy("MenuContent",a.__scopeMenu);({forceMount:l=l.forceMount}=a);const E=If(a,["forceMount"]),W=On("MenuContent",a.__scopeMenu),
ka=zw("MenuContent",a.__scopeMenu);return(0,mh.createElement)(px.Provider,{scope:a.__scopeMenu},(0,mh.createElement)(mu,{present:l||W.open},(0,mh.createElement)(px.Slot,{scope:a.__scopeMenu},ka.modal?(0,mh.createElement)(pG,Ze({},E,{ref:d})):(0,mh.createElement)(kB,Ze({},E,{ref:d})))))}),pG=(0,mh.forwardRef)((a,d)=>{const l=On("MenuContent",a.__scopeMenu),E=(0,mh.useRef)(null);d=jh(d,E);(0,mh.useEffect)(()=>{const W=E.current;if(W)return lx(W)},[]);return(0,mh.createElement)(sx,Ze({},a,{ref:d,trapFocus:l.open,
disableOutsidePointerEvents:l.open,disableOutsideScroll:!0,onFocusOutside:Vf(a.onFocusOutside,W=>W.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>l.onOpenChange(!1)}))}),kB=(0,mh.forwardRef)((a,d)=>{const l=On("MenuContent",a.__scopeMenu);return(0,mh.createElement)(sx,Ze({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>l.onOpenChange(!1)}))}),sx=(0,mh.forwardRef)((a,d)=>{const {__scopeMenu:l,loop:E=!1,trapFocus:W,onOpenAutoFocus:ka,onCloseAutoFocus:oa,
disableOutsidePointerEvents:Fa,onEscapeKeyDown:Qa,onPointerDownOutside:Xa,onFocusOutside:db,onInteractOutside:kb,onDismiss:Lb,disableOutsideScroll:Vb}=a,Qb=If(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),lc=On("MenuContent",l),xc=zw("MenuContent",l),ac=qx(l),pc=rx(l),mc=oG(l),[Jc,Qc]=(0,mh.useState)(null),td=(0,mh.useRef)(null);d=jh(d,td,lc.onContentChange);
const he=(0,mh.useRef)(0),ne=(0,mh.useRef)(""),Ge=(0,mh.useRef)(0),jf=(0,mh.useRef)(null),rf=(0,mh.useRef)("right"),We=(0,mh.useRef)(0),uf=Vb?Dv:mh.Fragment,Qd=Vb?{as:eq,allowPinchZoom:!0}:void 0,nd=sd=>{var ke,pf;sd=ne.current+sd;const Af=mc().filter(Of=>!Of.disabled),ng=document.activeElement,Kf=null===(ke=Af.find(Of=>Of.ref.current===ng))||void 0===ke?void 0:ke.textValue;ke=Af.map(Of=>Of.textValue);const $f=Ue(ke,sd,Kf),Wg=null===(pf=Af.find(Of=>Of.textValue===$f))||void 0===pf?void 0:pf.ref.current;
(function Lh(Bh){ne.current=Bh;window.clearTimeout(he.current);""!==Bh&&(he.current=window.setTimeout(()=>Lh(""),1E3))})(sd);Wg&&setTimeout(()=>Wg.focus())};(0,mh.useEffect)(()=>()=>window.clearTimeout(he.current),[]);tb();const qd=(0,mh.useCallback)(sd=>{var ke,pf,Af;if(Af=rf.current===(null===(ke=jf.current)||void 0===ke?void 0:ke.side)){if(ke=null===(pf=jf.current)||void 0===pf?void 0:pf.area){const {x:ng,y:Kf}={x:sd.clientX,y:sd.clientY};sd=!1;for(let $f=0,Wg=ke.length-1;$f<ke.length;Wg=$f++){pf=
ke[$f].x;Af=ke[$f].y;const Of=ke[Wg].x,Bh=ke[Wg].y;Af>Kf!==Bh>Kf&&ng<(Of-pf)*(Kf-Af)/(Bh-Af)+pf&&(sd=!sd)}ke=sd}else ke=!1;Af=ke}return Af},[]);return(0,mh.createElement)(YC,{scope:l,searchRef:ne,onItemEnter:(0,mh.useCallback)(sd=>{qd(sd)&&sd.preventDefault()},[qd]),onItemLeave:(0,mh.useCallback)(sd=>{var ke;qd(sd)||(null===(ke=td.current)||void 0===ke||ke.focus(),Qc(null))},[qd]),onTriggerLeave:(0,mh.useCallback)(sd=>{qd(sd)&&sd.preventDefault()},[qd]),pointerGraceTimerRef:Ge,onPointerGraceIntentChange:(0,mh.useCallback)(sd=>
{jf.current=sd},[])},(0,mh.createElement)(uf,Qd,(0,mh.createElement)(UA,{asChild:!0,trapped:W,onMountAutoFocus:Vf(ka,sd=>{var ke;sd.preventDefault();null===(ke=td.current)||void 0===ke||ke.focus()}),onUnmountAutoFocus:oa},(0,mh.createElement)($w,{asChild:!0,disableOutsidePointerEvents:Fa,onEscapeKeyDown:Qa,onPointerDownOutside:Xa,onFocusOutside:db,onInteractOutside:kb,onDismiss:Lb},(0,mh.createElement)(XA,Ze({asChild:!0},pc,{dir:xc.dir,orientation:"vertical",loop:E,currentTabStopId:Jc,onCurrentTabStopIdChange:Qc,
onEntryFocus:sd=>{xc.isUsingKeyboardRef.current||sd.preventDefault()}}),(0,mh.createElement)(fx,Ze({role:"menu","aria-orientation":"vertical","data-state":lc.open?"open":"closed","data-radix-menu-content":"",dir:xc.dir},ac,Qb,{ref:d,style:oe({outline:"none"},Qb.style),onKeyDown:Vf(Qb.onKeyDown,sd=>{var ke=sd.target.closest("[data-radix-menu-content]")===sd.currentTarget;const pf=sd.ctrlKey||sd.altKey||sd.metaKey,Af=1===sd.key.length;ke&&("Tab"===sd.key&&sd.preventDefault(),!pf&&Af&&nd(sd.key));sd.target===
td.current&&nG.includes(sd.key)&&(sd.preventDefault(),ke=mc().filter(ng=>!ng.disabled).map(ng=>ng.ref.current),jB.includes(sd.key)&&ke.reverse(),ze(ke))}),onBlur:Vf(a.onBlur,sd=>{sd.currentTarget.contains(sd.target)||(window.clearTimeout(he.current),ne.current="")}),onPointerMove:Vf(a.onPointerMove,Te(sd=>{const ke=We.current!==sd.clientX;sd.currentTarget.contains(sd.target)&&ke&&(rf.current=sd.clientX>We.current?"right":"left",We.current=sd.clientX)}))})))))))}),tx=(0,mh.forwardRef)((a,d)=>{const {disabled:l=
!1,onSelect:E}=a,W=If(a,["disabled","onSelect"]),ka=(0,mh.useRef)(null),oa=zw("MenuItem",a.__scopeMenu),Fa=Rr("MenuItem",a.__scopeMenu);d=jh(d,ka);const Qa=(0,mh.useRef)(!1);return(0,mh.createElement)(lB,Ze({},W,{ref:d,disabled:l,onClick:Vf(a.onClick,()=>{const Xa=ka.current;if(!l&&Xa){const db=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});Xa.addEventListener("menu.itemSelect",kb=>null===E||void 0===E?void 0:E(kb),{once:!0});Tl(Xa,db);if(db.defaultPrevented)Qa.current=!1;else oa.onClose()}}),
onPointerDown:Xa=>{var db;null===(db=a.onPointerDown)||void 0===db||db.call(a,Xa);Qa.current=!0},onPointerUp:Vf(a.onPointerUp,Xa=>{var db;Qa.current||null===(db=Xa.currentTarget)||void 0===db||db.click()}),onKeyDown:Vf(a.onKeyDown,Xa=>{const db=""!==Fa.searchRef.current;l||db&&" "===Xa.key||!ox.includes(Xa.key)||(Xa.currentTarget.click(),Xa.preventDefault())})}))}),lB=(0,mh.forwardRef)((a,d)=>{const {__scopeMenu:l,disabled:E=!1,textValue:W}=a,ka=If(a,["__scopeMenu","disabled","textValue"]),oa=Rr("MenuItem",
l),Fa=rx(l),Qa=(0,mh.useRef)(null);d=jh(d,Qa);const [Xa,db]=(0,mh.useState)(!1),[kb,Lb]=(0,mh.useState)("");(0,mh.useEffect)(()=>{const Vb=Qa.current;if(Vb){var Qb;Lb((null!==(Qb=Vb.textContent)&&void 0!==Qb?Qb:"").trim())}},[ka.children]);return(0,mh.createElement)(px.ItemSlot,{scope:l,disabled:E,textValue:null!==W&&void 0!==W?W:kb},(0,mh.createElement)(YA,Ze({asChild:!0},Fa,{focusable:!E}),(0,mh.createElement)(Gl.div,Ze({role:"menuitem","data-highlighted":Xa?"":void 0,"aria-disabled":E||void 0,
"data-disabled":E?"":void 0},ka,{ref:d,onPointerMove:Vf(a.onPointerMove,Te(Vb=>{if(E)oa.onItemLeave(Vb);else oa.onItemEnter(Vb),Vb.defaultPrevented||Vb.currentTarget.focus()})),onPointerLeave:Vf(a.onPointerLeave,Te(Vb=>oa.onItemLeave(Vb))),onFocus:Vf(a.onFocus,()=>db(!0)),onBlur:Vf(a.onBlur,()=>db(!1))}))))});qs("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});qs("MenuItemIndicator",{checked:!1});var XC=(0,mh.forwardRef)((a,d)=>{a=If(a,["__scopeMenu"]);return(0,mh.createElement)(Gl.div,Ze({role:"separator",
"aria-orientation":"horizontal"},a,{ref:d}))});qs("MenuSub");var Yt=a=>{const {__scopeMenu:d,open:l=!1,children:E,dir:W,onOpenChange:ka,modal:oa=!0}=a;a=qx(d);const [Fa,Qa]=(0,mh.useState)(null),Xa=(0,mh.useRef)(!1),db=Gf(ka),kb=Wb(W);(0,mh.useEffect)(()=>{const Lb=()=>{Xa.current=!0;document.addEventListener("pointerdown",Vb,{capture:!0,once:!0});document.addEventListener("pointermove",Vb,{capture:!0,once:!0})},Vb=()=>Xa.current=!1;document.addEventListener("keydown",Lb,{capture:!0});return()=>{document.removeEventListener("keydown",
Lb,{capture:!0});document.removeEventListener("pointerdown",Vb,{capture:!0});document.removeEventListener("pointermove",Vb,{capture:!0})}},[]);return(0,mh.createElement)(gx,a,(0,mh.createElement)(Nn,{scope:d,open:l,onOpenChange:db,content:Fa,onContentChange:Qa},(0,mh.createElement)(yw,{scope:d,onClose:(0,mh.useCallback)(()=>db(!1),[db]),isUsingKeyboardRef:Xa,dir:kb,modal:oa},E)))},[Ky]=jk("DropdownMenu",[Ev]),Zt=Ev(),[qG,mB]=Ky("DropdownMenu"),rG=(0,gp.forwardRef)((a,d)=>{const {__scopeDropdownMenu:l,
disabled:E=!1}=a,W=If(a,["__scopeDropdownMenu","disabled"]),ka=mB("DropdownMenuTrigger",l),oa=Zt(l);return(0,gp.createElement)(Iy,Ze({asChild:!0},oa),(0,gp.createElement)(Gl.button,Ze({type:"button",id:ka.triggerId,"aria-haspopup":"menu","aria-expanded":ka.open,"aria-controls":ka.open?ka.contentId:void 0,"data-state":ka.open?"open":"closed","data-disabled":E?"":void 0,disabled:E},W,{ref:Ng(d,ka.triggerRef),onPointerDown:Vf(a.onPointerDown,Fa=>{E||0!==Fa.button||!1!==Fa.ctrlKey||(ka.onOpenToggle(),
ka.open||Fa.preventDefault())}),onKeyDown:Vf(a.onKeyDown,Fa=>{if(!E){if(["Enter"," "].includes(Fa.key))ka.onOpenToggle();if("ArrowDown"===Fa.key)ka.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Fa.key)&&Fa.preventDefault()}})})))}),nB=(0,gp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:l}=a;const E=If(a,["__scopeDropdownMenu"]),W=mB("DropdownMenuContent",l);l=Zt(l);const ka=(0,gp.useRef)(!1);return(0,gp.createElement)(cv,Ze({id:W.contentId,"aria-labelledby":W.triggerId},l,E,{ref:d,onCloseAutoFocus:Vf(a.onCloseAutoFocus,
oa=>{var Fa;ka.current||null===(Fa=W.triggerRef.current)||void 0===Fa||Fa.focus();ka.current=!1;oa.preventDefault()}),onInteractOutside:Vf(a.onInteractOutside,oa=>{oa=oa.detail.originalEvent;const Fa=0===oa.button&&!0===oa.ctrlKey;oa=2===oa.button||Fa;if(!W.modal||oa)ka.current=!0}),style:of(oe({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),rs=(0,gp.forwardRef)((a,d)=>{var {__scopeDropdownMenu:l}=a;a=If(a,["__scopeDropdownMenu"]);l=Zt(l);
return(0,gp.createElement)(tx,Ze({},l,a,{ref:d}))}),zl=a=>{const {__scopeDropdownMenu:d,children:l,dir:E,open:W,defaultOpen:ka,onOpenChange:oa,modal:Fa=!0}=a;a=Zt(d);const Qa=(0,gp.useRef)(null),[Xa=!1,db]=ai({prop:W,defaultProp:ka,onChange:oa});return(0,gp.createElement)(qG,{scope:d,triggerId:gi(),triggerRef:Qa,contentId:gi(),open:Xa,onOpenChange:db,onOpenToggle:(0,gp.useCallback)(()=>db(kb=>!kb),[db]),modal:Fa},(0,gp.createElement)(Yt,Ze({},a,{open:Xa,onOpenChange:db,dir:E,modal:Fa}),l))},Qk=yf(V(22)).default.createContext({}),
pm=yf(V(22));sb=V(586);var am=a=>{var {action:d}=a;a=If(a,["action"]);var {renderers:l}=pm.useContext(Qk);l=null==l?void 0:l.KeyboardShortcut;return(0,sb.jsx)("div",of(oe({className:"tl-menu-right-slot"},a),{children:(0,sb.jsx)(l,{action:d})}))};V(22);sb=V(586);var qn=ff(function(){const a=ef(),d=l=>{l.preventDefault()};return(0,sb.jsxs)(zl,{children:[(0,sb.jsx)(rG,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,sb.jsxs)(nB,{onCloseAutoFocus:l=>
l.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,sb.jsxs)(rs,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,sb.jsx)(am,{action:"whiteboard/zoom-to-fit"})]}),(0,sb.jsxs)(rs,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,children:["Zoom to fit selection",(0,sb.jsx)(am,{action:"whiteboard/zoom-to-selection"})]}),(0,sb.jsxs)(rs,{className:"tl-menu-item",onSelect:d,
onClick:a.api.zoomIn,children:["Zoom in",(0,sb.jsx)(am,{action:"whiteboard/zoom-in"})]}),(0,sb.jsxs)(rs,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,sb.jsx)(am,{action:"whiteboard/zoom-out"})]}),(0,sb.jsxs)(rs,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,sb.jsx)(am,{action:"whiteboard/reset-zoom"})]})]})]})}),zo=V(22),uj=["horizontal","vertical"],mr=(0,zo.forwardRef)((a,d)=>{const {decorative:l,orientation:E="horizontal"}=
a;a=If(a,["decorative","orientation"]);const W=uj.includes(E)?E:"horizontal";return(0,zo.createElement)(Gl.div,Ze({"data-orientation":W},l?{role:"none"}:{"aria-orientation":"vertical"===W?W:void 0,role:"separator"},a,{ref:d}))});mr.propTypes={orientation(a,d,l){a=a[d];d=String(a);return a&&!uj.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${l}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};sb=V(586);var Fv=ff(function(){const a=ef(),d=sv.useCallback(()=>{a.api.undo()},[a]),l=sv.useCallback(()=>{a.api.redo()},[a]),E=sv.useCallback(()=>{a.api.zoomIn()},[a]),W=sv.useCallback(()=>{a.api.zoomOut()},[a]);return(0,sb.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",children:[!a.readOnly&&(0,sb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,sb.jsx)(ja,{tooltip:"Undo",onClick:d,children:(0,sb.jsx)(Wh,{name:"arrow-back-up"})}),
(0,sb.jsx)(ja,{tooltip:"Redo",onClick:l,children:(0,sb.jsx)(Wh,{name:"arrow-forward-up"})})]}),(0,sb.jsxs)("div",{className:`tl-toolbar tl-zoom-bar ${a.readOnly?"":"ml-4"}`,children:[(0,sb.jsx)(ja,{tooltip:"Zoom in",onClick:E,id:"tl-zoom-in",children:(0,sb.jsx)(Wh,{name:"plus"})}),(0,sb.jsx)(ja,{tooltip:"Zoom out",onClick:W,id:"tl-zoom-out",children:(0,sb.jsx)(Wh,{name:"minus"})}),(0,sb.jsx)(mr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,sb.jsx)(qn,{})]})]})}),ou=yf(V(22)),ux=yf(V(31));
sb=V(586);var pu=a=>`[${a.map(d=>{var l;return null!=(l=null==d?void 0:d.toFixed(2))?l:"-"}).join(", ")}]`,vx=ff(()=>{var a;const {viewport:{bounds:d,camera:{point:l,zoom:E}},inputs:W}=nh(),ka=ou.default.useRef();ou.default.useEffect(()=>{const Fa=document.getElementById("tl-statusbar-anchor");ka.current=Fa},[]);const oa=[["Z",null!=(a=null==E?void 0:E.toFixed(2))?a:"null"],["MP",pu(W.currentPoint)],["MS",pu(W.currentScreenPoint)],["VP",pu(l)],["VBR",pu([d.maxX,d.maxY])]].map(Fa=>Fa.join("")).join("|");
a=ka.current?ux.default.createPortal((0,sb.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:oa}),ka.current):null;return(0,sb.jsx)(sb.Fragment,{children:a})}),gj=yf(V(22));sb=V(586);var hp=ff(a=>{var {id:d,icon:l,tooltip:E,tooltipSide:W="left",handleClick:ka}=a;a=If(a,["id","icon","tooltip","tooltipSide","handleClick"]);var oa;const Fa=ef(),Qa=null==(oa=[...Fa.Tools,it,jt])?void 0:oa.find(Xa=>Xa.id===d);oa=(oa=null==Qa?void 0:Qa.shortcut)&&E?(0,sb.jsxs)("div",{className:"flex",
children:[E,(0,sb.jsx)(am,{action:oa})]}):E;return(0,sb.jsx)(ja,of(oe({},a),{tooltipSide:W,tooltip:oa,"data-tool":d,"data-selected":d===Fa.selectedTool.id,onClick:ka,children:"string"===typeof l?(0,sb.jsx)(Wh,{name:l}):l}))}),ak=V(22),[Gv]=jk("Popover",[qt]),Cq=qt(),[oB,Fp]=Gv("Popover"),pB=(0,ak.forwardRef)((a,d)=>{var {__scopePopover:l}=a;const E=If(a,["__scopePopover"]),W=Fp("PopoverTrigger",l);l=Cq(l);d=jh(d,W.triggerRef);a=(0,ak.createElement)(Gl.button,Ze({type:"button","aria-haspopup":"dialog",
"aria-expanded":W.open,"aria-controls":W.contentId,"data-state":W.open?"open":"closed"},E,{ref:d,onClick:Vf(a.onClick,W.onOpenToggle)}));return W.hasCustomAnchor?a:(0,ak.createElement)(ex,Ze({asChild:!0},l),a)}),[,Hv]=Gv("PopoverPortal",{forceMount:void 0}),qu=(0,ak.forwardRef)((a,d)=>{var l=Hv("PopoverContent",a.__scopePopover);({forceMount:l=l.forceMount}=a);const E=If(a,["forceMount"]);a=Fp("PopoverContent",a.__scopePopover);return(0,ak.createElement)(mu,{present:l||a.open},a.modal?(0,ak.createElement)(wx,
Ze({},E,{ref:d})):(0,ak.createElement)(ru,Ze({},E,{ref:d})))}),wx=(0,ak.forwardRef)((a,d)=>{const l=Fp("PopoverContent",a.__scopePopover),E=(0,ak.useRef)(null);d=jh(d,E);const W=(0,ak.useRef)(!1);(0,ak.useEffect)(()=>{const ka=E.current;if(ka)return lx(ka)},[]);return(0,ak.createElement)(Dv,{as:eq,allowPinchZoom:!0},(0,ak.createElement)(Iv,Ze({},a,{ref:d,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vf(a.onCloseAutoFocus,ka=>{var oa;ka.preventDefault();W.current||null===(oa=l.triggerRef.current)||
void 0===oa||oa.focus()}),onPointerDownOutside:Vf(a.onPointerDownOutside,ka=>{ka=ka.detail.originalEvent;const oa=0===ka.button&&!0===ka.ctrlKey;W.current=2===ka.button||oa},{checkForDefaultPrevented:!1}),onFocusOutside:Vf(a.onFocusOutside,ka=>ka.preventDefault(),{checkForDefaultPrevented:!1})})))}),ru=(0,ak.forwardRef)((a,d)=>{const l=Fp("PopoverContent",a.__scopePopover),E=(0,ak.useRef)(!1);return(0,ak.createElement)(Iv,Ze({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:W=>
{var ka;null===(ka=a.onCloseAutoFocus)||void 0===ka||ka.call(a,W);if(!W.defaultPrevented){var oa;E.current||null===(oa=l.triggerRef.current)||void 0===oa||oa.focus();W.preventDefault()}E.current=!1},onInteractOutside:W=>{var ka,oa;null===(ka=a.onInteractOutside)||void 0===ka||ka.call(a,W);W.defaultPrevented||(E.current=!0);ka=W.target;(null===(oa=l.triggerRef.current)||void 0===oa?0:oa.contains(ka))&&W.preventDefault()}}))}),Iv=(0,ak.forwardRef)((a,d)=>{const {__scopePopover:l,trapFocus:E,onOpenAutoFocus:W,
onCloseAutoFocus:ka,disableOutsidePointerEvents:oa,onEscapeKeyDown:Fa,onPointerDownOutside:Qa,onFocusOutside:Xa,onInteractOutside:db}=a;a=If(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const kb=Fp("PopoverContent",l),Lb=Cq(l);tb();return(0,ak.createElement)(UA,{asChild:!0,loop:!0,trapped:E,onMountAutoFocus:W,onUnmountAutoFocus:ka},(0,ak.createElement)($w,{asChild:!0,disableOutsidePointerEvents:oa,
onInteractOutside:db,onEscapeKeyDown:Fa,onPointerDownOutside:Qa,onFocusOutside:Xa,onDismiss:()=>kb.onOpenChange(!1)},(0,ak.createElement)(fx,Ze({"data-state":kb.open?"open":"closed",role:"dialog",id:kb.contentId},Lb,a,{ref:d,style:of(oe({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),ut=(0,ak.forwardRef)((a,d)=>{var {__scopePopover:l}=a;a=If(a,["__scopePopover"]);l=Cq(l);return(0,ak.createElement)(OA,Ze({},l,a,{ref:d}))}),xx=a=>{const {__scopePopover:d,
children:l,open:E,defaultOpen:W,onOpenChange:ka,modal:oa=!1}=a;a=Cq(d);const Fa=(0,ak.useRef)(null),[Qa,Xa]=(0,ak.useState)(!1),[db=!1,kb]=ai({prop:E,defaultProp:W,onChange:ka});return(0,ak.createElement)(gx,a,(0,ak.createElement)(oB,{scope:d,contentId:gi(),triggerRef:Fa,open:db,onOpenChange:kb,onOpenToggle:(0,ak.useCallback)(()=>kb(Lb=>!Lb),[kb]),hasCustomAnchor:Qa,onCustomAnchorAdd:(0,ak.useCallback)(()=>Xa(!0),[]),onCustomAnchorRemove:(0,ak.useCallback)(()=>Xa(!1),[]),modal:oa},l))};sb=V(586);
var yx=ff(function(a){var {popoverSide:d="left",setGeometry:l,activeGeometry:E,chevron:W=!0}=a;a=If(a,["popoverSide","setGeometry","activeGeometry","chevron"]);const ka=[{id:"box",icon:"square",tooltip:"Rectangle"},{id:"ellipse",icon:"circle",tooltip:"Circle"},{id:"polygon",icon:"triangle",tooltip:"Triangle"}];var oa={id:"shapes",icon:"triangle-square-circle",tooltip:"Shape"};oa=E?ka.find(Fa=>Fa.id===E):oa;return(0,sb.jsxs)(xx,{children:[(0,sb.jsx)(pB,{asChild:!0,children:(0,sb.jsxs)("div",of(oe({},
a),{className:"tl-geometry-tools-pane-anchor",children:[(0,sb.jsx)(hp,of(oe({},oa),{tooltipSide:d})),W&&(0,sb.jsx)(Wh,{"data-selected":E,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,sb.jsxs)(qu,{className:"tl-popover-content",side:d,sideOffset:15,children:[(0,sb.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":"flex-row"}`,children:ka.map(Fa=>(0,sb.jsx)(hp,{id:Fa.id,icon:Fa.icon,tooltip:E?Fa.tooltip:"",handleClick:l,tooltipSide:d},
Fa.id))}),(0,sb.jsx)(ut,{className:"tl-popover-arrow"})]})]})}),Mi=V(22),ss=V(22),vt=["PageUp","PageDown"],su=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],tu={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[Jv,Kv,sG]=Cb("Slider"),[Lv]=jk("Slider",[sG]),[tG,uu]=Lv("Slider"),uG=(0,Mi.forwardRef)((a,d)=>{function l(We){const uf=
Ni(Ge,We);ka(We,uf)}function E(We){ka(We,td.current)}function W(){Ge[td.current]!==rf.current[td.current]&&xc(Ge)}function ka(We,uf,{commit:Qd}={commit:!1}){const nd=(String(Xa).split(".")[1]||"").length;We=Qg(Math.round((We-Fa)/Xa)*Xa+Fa,nd);const qd=Jg(We,[Fa,Qa]);jf((sd=[])=>{const ke=Mj(sd,qd,uf);var pf=Lb*Xa;if(0<pf){const Af=ih(ke);pf=Math.min(...Af)>=pf}else pf=!0;return pf?(td.current=ke.indexOf(qd),(pf=String(ke)!==String(sd))&&Qd&&xc(ke),pf?ke:sd):sd})}const {name:oa,min:Fa=0,max:Qa=100,
step:Xa=1,orientation:db="horizontal",disabled:kb=!1,minStepsBetweenThumbs:Lb=0,defaultValue:Vb=[Fa],value:Qb,onValueChange:lc=()=>{},onValueCommit:xc=()=>{},inverted:ac=!1}=a,pc=If(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[mc,Jc]=(0,Mi.useState)(null);d=jh(d,We=>Jc(We));const Qc=(0,Mi.useRef)(new Set),td=(0,Mi.useRef)(0);var he="horizontal"===db;const ne=mc?!!mc.closest("form"):!0;he=he?qB:zx;const [Ge=[],
jf]=ai({prop:Qb,defaultProp:Vb,onChange:We=>{var uf;null===(uf=[...Qc.current][td.current])||void 0===uf||uf.focus();lc(We)}}),rf=(0,Mi.useRef)(Ge);return(0,Mi.createElement)(tG,{scope:a.__scopeSlider,disabled:kb,min:Fa,max:Qa,valueIndexToChangeRef:td,thumbs:Qc.current,values:Ge,orientation:db},(0,Mi.createElement)(Jv.Provider,{scope:a.__scopeSlider},(0,Mi.createElement)(Jv.Slot,{scope:a.__scopeSlider},(0,Mi.createElement)(he,Ze({"aria-disabled":kb,"data-disabled":kb?"":void 0},pc,{ref:d,onPointerDown:Vf(pc.onPointerDown,
()=>{kb||(rf.current=Ge)}),min:Fa,max:Qa,inverted:ac,onSlideStart:kb?void 0:l,onSlideMove:kb?void 0:E,onSlideEnd:kb?void 0:W,onHomeKeyDown:()=>!kb&&ka(Fa,0,{commit:!0}),onEndKeyDown:()=>!kb&&ka(Qa,Ge.length-1,{commit:!0}),onStepKeyDown:({event:We,direction:uf})=>{if(!kb){We=vt.includes(We.key)||We.shiftKey&&su.includes(We.key);const Qd=td.current;ka(Ge[Qd]+Xa*(We?10:1)*uf,Qd,{commit:!0})}}})))),ne&&Ge.map((We,uf)=>(0,Mi.createElement)(Bx,{key:uf,name:oa?oa+(1<Ge.length?"[]":""):void 0,value:We})))}),
[wt,nr]=Lv("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),qB=(0,Mi.forwardRef)((a,d)=>{function l(pc){const mc=Qb.current||Lb.getBoundingClientRect(),Jc=Ah([0,mc.width],ac?[E,W]:[W,E]);Qb.current=mc;return Jc(pc-mc.left)}const {min:E,max:W,dir:ka,inverted:oa,onSlideStart:Fa,onSlideMove:Qa,onSlideEnd:Xa,onStepKeyDown:db}=a,kb=If(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Lb,Vb]=(0,Mi.useState)(null);d=jh(d,pc=>Vb(pc));const Qb=(0,Mi.useRef)(),
lc=Wb(ka),xc="ltr"===lc,ac=xc&&!oa||!xc&&oa;return(0,Mi.createElement)(wt,{scope:a.__scopeSlider,startEdge:ac?"left":"right",endEdge:ac?"right":"left",direction:ac?1:-1,size:"width"},(0,Mi.createElement)(Ax,Ze({dir:lc,"data-orientation":"horizontal"},kb,{ref:d,style:of(oe({},kb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:pc=>{pc=l(pc.clientX);null===Fa||void 0===Fa||Fa(pc)},onSlideMove:pc=>{pc=l(pc.clientX);null===Qa||void 0===Qa||Qa(pc)},onSlideEnd:()=>{Qb.current=
void 0;null===Xa||void 0===Xa||Xa()},onStepKeyDown:pc=>{const mc=tu[ac?"from-left":"from-right"].includes(pc.key);null===db||void 0===db||db({event:pc,direction:mc?-1:1})}})))}),zx=(0,Mi.forwardRef)((a,d)=>{function l(Qb){const lc=Lb.current||kb.current.getBoundingClientRect(),xc=Ah([0,lc.height],Vb?[W,E]:[E,W]);Lb.current=lc;return xc(Qb-lc.top)}const {min:E,max:W,inverted:ka,onSlideStart:oa,onSlideMove:Fa,onSlideEnd:Qa,onStepKeyDown:Xa}=a,db=If(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
kb=(0,Mi.useRef)(null);d=jh(d,kb);const Lb=(0,Mi.useRef)(),Vb=!ka;return(0,Mi.createElement)(wt,{scope:a.__scopeSlider,startEdge:Vb?"bottom":"top",endEdge:Vb?"top":"bottom",size:"height",direction:Vb?1:-1},(0,Mi.createElement)(Ax,Ze({"data-orientation":"vertical"},db,{ref:d,style:of(oe({},db.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Qb=>{Qb=l(Qb.clientY);null===oa||void 0===oa||oa(Qb)},onSlideMove:Qb=>{Qb=l(Qb.clientY);null===Fa||void 0===Fa||Fa(Qb)},onSlideEnd:()=>
{Lb.current=void 0;null===Qa||void 0===Qa||Qa()},onStepKeyDown:Qb=>{const lc=tu[Vb?"from-bottom":"from-top"].includes(Qb.key);null===Xa||void 0===Xa||Xa({event:Qb,direction:lc?-1:1})}})))}),Ax=(0,Mi.forwardRef)((a,d)=>{const {__scopeSlider:l,onSlideStart:E,onSlideMove:W,onSlideEnd:ka,onHomeKeyDown:oa,onEndKeyDown:Fa,onStepKeyDown:Qa}=a,Xa=If(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),db=uu("Slider",l);return(0,Mi.createElement)(Gl.span,
Ze({},Xa,{ref:d,onKeyDown:Vf(a.onKeyDown,kb=>{"Home"===kb.key?(oa(kb),kb.preventDefault()):"End"===kb.key?(Fa(kb),kb.preventDefault()):vt.concat(su).includes(kb.key)&&(Qa(kb),kb.preventDefault())}),onPointerDown:Vf(a.onPointerDown,kb=>{const Lb=kb.target;Lb.setPointerCapture(kb.pointerId);kb.preventDefault();db.thumbs.has(Lb)?Lb.focus():E(kb)}),onPointerMove:Vf(a.onPointerMove,kb=>{kb.target.hasPointerCapture(kb.pointerId)&&W(kb)}),onPointerUp:Vf(a.onPointerUp,kb=>{const Lb=kb.target;Lb.hasPointerCapture(kb.pointerId)&&
(Lb.releasePointerCapture(kb.pointerId),ka(kb))})}))}),Mv=(0,Mi.forwardRef)((a,d)=>{var {__scopeSlider:l}=a;a=If(a,["__scopeSlider"]);l=uu("SliderTrack",l);return(0,Mi.createElement)(Gl.span,Ze({"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation},a,{ref:d}))}),rB=(0,Mi.forwardRef)((a,d)=>{var {__scopeSlider:l}=a;const E=If(a,["__scopeSlider"]),W=uu("SliderRange",l);l=nr("SliderRange",l);var ka=(0,Mi.useRef)(null);d=jh(d,ka);var oa=W.values.length;ka=W.values.map(Fa=>cg(Fa,W.min,
W.max));oa=1<oa?Math.min(...ka):0;ka=100-Math.max(...ka);return(0,Mi.createElement)(Gl.span,Ze({"data-orientation":W.orientation,"data-disabled":W.disabled?"":void 0},E,{ref:d,style:of(oe({},a.style),{[l.startEdge]:oa+"%",[l.endEdge]:ka+"%"})}))}),Cx=(0,Mi.forwardRef)((a,d)=>{const l=Kv(a.__scopeSlider),[E,W]=(0,Mi.useState)(null);d=jh(d,oa=>W(oa));const ka=(0,Mi.useMemo)(()=>E?l().findIndex(oa=>oa.ref.current===E):-1,[l,E]);return(0,Mi.createElement)(vu,Ze({},a,{ref:d,index:ka}))}),vu=(0,Mi.forwardRef)((a,
d)=>{const {__scopeSlider:l,index:E}=a,W=If(a,["__scopeSlider","index"]),ka=uu("SliderThumb",l),oa=nr("SliderThumb",l),[Fa,Qa]=(0,Mi.useState)(null);d=jh(d,Vb=>Qa(Vb));var Xa=Dh(Fa);const db=ka.values[E],kb=void 0===db?0:cg(db,ka.min,ka.max),Lb=$g(E,ka.values.length);Xa=(Xa=null===Xa||void 0===Xa?void 0:Xa[oa.size])?Mh(Xa,kb,oa.direction):0;(0,Mi.useEffect)(()=>{if(Fa)return ka.thumbs.add(Fa),()=>{ka.thumbs.delete(Fa)}},[Fa,ka.thumbs]);return(0,Mi.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",
position:"absolute",[oa.startEdge]:`calc(${kb}% + ${Xa}px)`}},(0,Mi.createElement)(Jv.ItemSlot,{scope:a.__scopeSlider},(0,Mi.createElement)(Gl.span,Ze({role:"slider","aria-label":a["aria-label"]||Lb,"aria-valuemin":ka.min,"aria-valuenow":db,"aria-valuemax":ka.max,"aria-orientation":ka.orientation,"data-orientation":ka.orientation,"data-disabled":ka.disabled?"":void 0,tabIndex:ka.disabled?void 0:0},W,{ref:d,style:void 0===db?{display:"none"}:a.style,onFocus:Vf(a.onFocus,()=>{ka.valueIndexToChangeRef.current=
E})}))))}),Bx=a=>{const {value:d}=a;a=If(a,["value"]);const l=(0,Mi.useRef)(null),E=gg(d);(0,Mi.useEffect)(()=>{const W=l.current,ka=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(E!==d&&ka){const oa=new Event("input",{bubbles:!0});ka.call(W,d);W.dispatchEvent(oa)}},[E,d]);return(0,Mi.createElement)("input",Ze({style:{display:"none"}},a,{ref:l,defaultValue:d}))},sB=uG,Oo=Mv,go=rB,gq=Cx,wu=yf(V(22));sb=V(586);var Dx=ff(a=>{var {side:d,align:l,alignOffset:E,label:W,
arrow:ka,children:oa,border:Fa}=a;a=If(a,"side align alignOffset label arrow children border".split(" "));const Qa=wu.useRef(null),[Xa,db]=wu.useState(!1),{viewport:{bounds:kb,camera:{point:Lb,zoom:Vb}}}=ef(),[Qb,lc]=wu.useState(0);wu.useEffect(()=>{if(Qa.current&&Xa){var xc=Qa.current.getBoundingClientRect();Bf.boundsContain(kb,{minX:xc.x,minY:xc.y,maxX:xc.right,maxY:xc.bottom,width:xc.width,height:xc.height})||lc(ac=>ac+1)}},[Lb[0],Lb[1],Vb,Xa]);return(0,sb.jsxs)(xx,{onOpenChange:xc=>db(xc),children:[(0,sb.jsx)(pB,
of(oe({},a),{"data-border":Fa,className:"tl-button tl-popover-trigger-button",children:W})),(0,sb.jsxs)(qu,{ref:Qa,className:"tl-popover-content",align:l,alignOffset:E,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[oa,ka&&(0,sb.jsx)(ut,{className:"tl-popover-arrow"})]},"popover-content-"+Qb)]})}),tB=yf(V(22));sb=V(586);var uB=yf(V(22)),Cf=V(22),Nv=V(31),ip=yf(V(22)),ho=V(22),xu=V(22),vB=V(31),Im="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,
d)=>{const l=(0,xu.forwardRef)((E,W)=>{var {asChild:ka}=E;E=If(E,["asChild"]);ka=ka?eq:d;(0,xu.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,xu.createElement)(ka,Ze({},E,{ref:W}))});l.displayName=`Primitive.${d}`;return of(oe({},a),{[d]:l})},{}),Ex,vG=(0,ho.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xt=(0,ho.forwardRef)((a,d)=>{var l;const {disableOutsidePointerEvents:E=!1,onEscapeKeyDown:W,onPointerDownOutside:ka,onFocusOutside:oa,
onInteractOutside:Fa,onDismiss:Qa}=a,Xa=If(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),db=(0,ho.useContext)(vG),[kb,Lb]=(0,ho.useState)(null),Vb=null!==(l=null===kb||void 0===kb?void 0:kb.ownerDocument)&&void 0!==l?l:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Qb]=(0,ho.useState)({});d=jh(d,mc=>Lb(mc));l=Array.from(db.layers);var [lc]=[...db.layersWithOutsidePointerEventsDisabled].slice(-1);lc=
l.indexOf(lc);const xc=kb?l.indexOf(kb):-1;l=0<db.layersWithOutsidePointerEventsDisabled.size;const ac=xc>=lc;lc=Zf(mc=>{const Jc=mc.target,Qc=[...db.branches].some(td=>td.contains(Jc));ac&&!Qc&&(null===ka||void 0===ka||ka(mc),null===Fa||void 0===Fa||Fa(mc),mc.defaultPrevented||null===Qa||void 0===Qa||Qa())},Vb);const pc=Rj(mc=>{const Jc=mc.target;[...db.branches].some(Qc=>Qc.contains(Jc))||(null===oa||void 0===oa||oa(mc),null===Fa||void 0===Fa||Fa(mc),mc.defaultPrevented||null===Qa||void 0===Qa||
Qa())},Vb);Ak(mc=>{xc===db.layers.size-1&&(null===W||void 0===W||W(mc),!mc.defaultPrevented&&Qa&&(mc.preventDefault(),Qa()))},Vb);(0,ho.useEffect)(()=>{if(kb)return E&&(0===db.layersWithOutsidePointerEventsDisabled.size&&(Ex=Vb.body.style.pointerEvents,Vb.body.style.pointerEvents="none"),db.layersWithOutsidePointerEventsDisabled.add(kb)),db.layers.add(kb),Xh(),()=>{E&&1===db.layersWithOutsidePointerEventsDisabled.size&&(Vb.body.style.pointerEvents=Ex)}},[kb,Vb,E,db]);(0,ho.useEffect)(()=>()=>{kb&&
(db.layers.delete(kb),db.layersWithOutsidePointerEventsDisabled.delete(kb),Xh())},[kb,db]);(0,ho.useEffect)(()=>{const mc=()=>Qb({});document.addEventListener("dismissableLayer.update",mc);return()=>document.removeEventListener("dismissableLayer.update",mc)},[]);return(0,ho.createElement)(Im.div,Ze({},Xa,{ref:d,style:oe({pointerEvents:l?ac?"auto":"none":void 0},a.style),onFocusCapture:Vf(a.onFocusCapture,pc.onFocusCapture),onBlurCapture:Vf(a.onBlurCapture,pc.onBlurCapture),onPointerDownCapture:Vf(a.onPointerDownCapture,
lc.onPointerDownCapture)}))}),hq=V(22),Fx={bubbles:!1,cancelable:!0},wB=(0,hq.forwardRef)((a,d)=>{const {loop:l=!1,trapped:E=!1,onMountAutoFocus:W,onUnmountAutoFocus:ka}=a;a=If(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [oa,Fa]=(0,hq.useState)(null),Qa=Gf(W),Xa=Gf(ka),db=(0,hq.useRef)(null);d=jh(d,Vb=>Fa(Vb));const kb=(0,hq.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,hq.useEffect)(()=>{if(E){let Vb=function(lc){!kb.paused&&oa&&(lc=lc.target,
oa.contains(lc)?db.current=lc:mk(db.current,{select:!0}))},Qb=function(lc){!kb.paused&&oa&&(oa.contains(lc.relatedTarget)||mk(db.current,{select:!0}))};document.addEventListener("focusin",Vb);document.addEventListener("focusout",Qb);return()=>{document.removeEventListener("focusin",Vb);document.removeEventListener("focusout",Qb)}}},[E,oa,kb.paused]);(0,hq.useEffect)(()=>{if(oa){Gx.add(kb);const Vb=document.activeElement;if(!oa.contains(Vb)){const Qb=new CustomEvent("focusScope.autoFocusOnMount",Fx);
oa.addEventListener("focusScope.autoFocusOnMount",Qa);oa.dispatchEvent(Qb);Qb.defaultPrevented||(kl(Hn(bj(oa)),{select:!0}),document.activeElement===Vb&&mk(oa))}return()=>{oa.removeEventListener("focusScope.autoFocusOnMount",Qa);setTimeout(()=>{const Qb=new CustomEvent("focusScope.autoFocusOnUnmount",Fx);oa.addEventListener("focusScope.autoFocusOnUnmount",Xa);oa.dispatchEvent(Qb);Qb.defaultPrevented||mk(null!==Vb&&void 0!==Vb?Vb:document.body,{select:!0});oa.removeEventListener("focusScope.autoFocusOnUnmount",
Xa);Gx.remove(kb)},0)}}},[oa,Qa,Xa,kb]);const Lb=(0,hq.useCallback)(Vb=>{if((l||E)&&!kb.paused){var Qb=document.activeElement;if("Tab"===Vb.key&&!Vb.altKey&&!Vb.ctrlKey&&!Vb.metaKey&&Qb){const xc=Vb.currentTarget;var lc=xc;const ac=bj(lc),pc=rm(ac,lc);lc=rm(ac.reverse(),lc);const [mc,Jc]=[pc,lc];mc&&Jc?Vb.shiftKey||Qb!==Jc?Vb.shiftKey&&Qb===mc&&(Vb.preventDefault(),l&&mk(Jc,{select:!0})):(Vb.preventDefault(),l&&mk(mc,{select:!0})):Qb===xc&&Vb.preventDefault()}}},[l,E,kb.paused]);return(0,hq.createElement)(Im.div,
Ze({tabIndex:-1},a,{ref:d,onKeyDown:Lb}))}),Gx=function(){let a=[];return{add(d){const l=a[0];d===l||null!==l&&void 0!==l&&l.pause();a=vn(a,d);a.unshift(d)},remove(d){var l;a=vn(a,d);null===(l=a[0])||void 0===l||l.resume()}}}(),En=V(22),[Ov,Hx]=jk("Popper"),[Pv,Ix]=Ov("Popper"),wG=(0,En.forwardRef)((a,d)=>{const {__scopePopper:l,virtualRef:E}=a;a=If(a,["__scopePopper","virtualRef"]);const W=Ix("PopperAnchor",l),ka=(0,En.useRef)(null);d=jh(d,ka);(0,En.useEffect)(()=>{W.onAnchorChange((null===E||void 0===
E?void 0:E.current)||ka.current)});return E?null:(0,En.createElement)(Im.div,Ze({},a,{ref:d}))}),[xG]=Ov("PopperContent"),[xB,Dq]=Ov("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),Eq=(0,En.forwardRef)((a,d)=>{var l,E,W,ka,oa,Fa,Qa,Xa;const {__scopePopper:db,side:kb="bottom",sideOffset:Lb=0,align:Vb="center",alignOffset:Qb=0,arrowPadding:lc=0,collisionBoundary:xc=[],collisionPadding:ac=0,sticky:pc="partial",hideWhenDetached:mc=!1,avoidCollisions:Jc=!0,onPlaced:Qc}=a,td=If(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),
he=Ix("PopperContent",db),[ne,Ge]=(0,En.useState)(null);d=jh(d,oq=>Ge(oq));const [jf,rf]=(0,En.useState)(null);var We=Dh(jf),uf=null!==(l=null===We||void 0===We?void 0:We.width)&&void 0!==l?l:0;l=null!==(E=null===We||void 0===We?void 0:We.height)&&void 0!==E?E:0;E=kb+("center"!==Vb?"-"+Vb:"");We="number"===typeof ac?ac:oe({top:0,right:0,bottom:0,left:0},ac);const Qd=Array.isArray(xc)?xc:[xc],nd=0<Qd.length;We={padding:We,boundary:Qd.filter(Vn),altBoundary:nd};const {reference:qd,floating:sd,strategy:ke,
x:pf,y:Af,placement:ng,middlewareData:Kf,update:$f}=ig({strategy:"fixed",placement:E,whileElementsMounted:Pi,middleware:[yt(),HA({mainAxis:Lb+l,alignmentAxis:Qb}),Jc?IA(oe({mainAxis:!0,crossAxis:!1,limiter:"partial"===pc?JA():void 0},We)):void 0,jf?MA({element:jf,padding:lc}):void 0,Jc?FA(oe({},We)):void 0,jF(of(oe({},We),{apply:({elements:oq,availableWidth:RG,availableHeight:CC})=>{oq.floating.style.setProperty("--radix-popper-available-width",`${RG}px`);oq.floating.style.setProperty("--radix-popper-available-height",
`${CC}px`)}})),ts({arrowWidth:uf,arrowHeight:l}),mc?GA({strategy:"referenceHidden"}):void 0].filter(Gg)});pn(()=>{qd(he.anchor)},[qd,he.anchor]);const Wg=null!==pf&&null!==Af,[Of,Bh]=Un(ng),Lh=Gf(Qc);pn(()=>{Wg&&(null===Lh||void 0===Lh||Lh())},[Wg,Lh]);uf=null===(W=Kf.arrow)||void 0===W?void 0:W.x;W=null===(ka=Kf.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===(oa=Kf.arrow)||void 0===oa?void 0:oa.centerOffset);const [Ej,Jl]=(0,En.useState)();pn(()=>{ne&&Jl(window.getComputedStyle(ne).zIndex)},[ne]);
const {hasParent:Kl,positionUpdateFns:Lp}=Dq("PopperContent",db),Oq=!Kl;(0,En.useLayoutEffect)(()=>{if(!Oq)return Lp.add($f),()=>{Lp.delete($f)}},[Oq,Lp,$f]);pn(()=>{Oq&&Wg&&Array.from(Lp).reverse().forEach(oq=>requestAnimationFrame(oq))},[Oq,Wg,Lp]);oa=of(oe({"data-side":Of,"data-align":Bh},td),{ref:d,style:of(oe({},td.style),{animation:Wg?void 0:"none",opacity:null!==(Fa=Kf.hide)&&void 0!==Fa&&Fa.referenceHidden?0:void 0})});return(0,En.createElement)("div",{ref:sd,"data-radix-popper-content-wrapper":"",
style:{position:ke,left:0,top:0,transform:Wg?`translate3d(${Math.round(pf)}px, ${Math.round(Af)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Ej,["--radix-popper-transform-origin"]:[null===(Qa=Kf.transformOrigin)||void 0===Qa?void 0:Qa.x,null===(Xa=Kf.transformOrigin)||void 0===Xa?void 0:Xa.y].join(" ")},dir:a.dir},(0,En.createElement)(xG,{scope:db,placedSide:Of,onArrowChange:rf,arrowX:uf,arrowY:W,shouldHideArrow:ka},Oq?(0,En.createElement)(xB,{scope:db,hasParent:!0,positionUpdateFns:Lp},
(0,En.createElement)(Im.div,oa)):(0,En.createElement)(Im.div,oa)))}),yt=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:l}=a,{width:E,height:W}=d.reference;l.floating.style.setProperty("--radix-popper-anchor-width",`${E}px`);l.floating.style.setProperty("--radix-popper-anchor-height",`${W}px`);return{}}}),ts=a=>({name:"transformOrigin",options:a,fn(d){var l,E,W,ka,oa;const {placement:Fa,rects:Qa,middlewareData:Xa}=d,db=(d=0!==(null===(l=Xa.arrow)||void 0===l?void 0:l.centerOffset))?
0:a.arrowWidth;l=d?0:a.arrowHeight;const [kb,Lb]=Un(Fa),Vb={start:"0%",center:"50%",end:"100%"}[Lb],Qb=(null!==(E=null===(W=Xa.arrow)||void 0===W?void 0:W.x)&&void 0!==E?E:0)+db/2;E=(null!==(ka=null===(oa=Xa.arrow)||void 0===oa?void 0:oa.y)&&void 0!==ka?ka:0)+l/2;oa=ka="";"bottom"===kb?(ka=d?Vb:`${Qb}px`,oa=`${-l}px`):"top"===kb?(ka=d?Vb:`${Qb}px`,oa=`${Qa.floating.height+l}px`):"right"===kb?(ka=`${-l}px`,oa=d?Vb:`${E}px`):"left"===kb&&(ka=`${Qa.floating.width+l}px`,oa=d?Vb:`${E}px`);return{data:{x:ka,
y:oa}}}}),yB=a=>{const {__scopePopper:d,children:l}=a,[E,W]=(0,En.useState)(null);return(0,En.createElement)(Pv,{scope:d,anchor:E,onAnchorChange:W},l)},zB=V(22),yG=yf(V(31)),AB=(0,zB.forwardRef)((a,d)=>{var l;const {container:E=null===globalThis||void 0===globalThis?void 0:null===(l=globalThis.document)||void 0===l?void 0:l.body}=a;a=If(a,["container"]);return E?yG.default.createPortal((0,zB.createElement)(Im.div,Ze({},a,{ref:d})),E):null}),Xe=V(22),mg=(0,Xe.forwardRef)((a,d)=>(0,Xe.createElement)(Im.span,
Ze({},a,{ref:d,style:oe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),kf=[" ","Enter","ArrowUp","ArrowDown"],Uf=[" ","Enter"],[Pn,Al,yu]=function(a){var d=a+"CollectionProvider";const [l,E]=jk(d),[W,ka]=l(d,{collectionRef:{current:null},itemMap:new Map}),oa=db=>{const {scope:kb,children:Lb}=db;db=ip.default.useRef(null);const Vb=ip.default.useRef(new Map).current;return ip.default.createElement(W,
{scope:kb,itemMap:Vb,collectionRef:db},Lb)};Object.assign(oa,{displayName:d});const Fa=a+"CollectionSlot";d=ip.default.forwardRef((db,kb)=>{const {scope:Lb,children:Vb}=db;db=ka(Fa,Lb);kb=jh(kb,db.collectionRef);return ip.default.createElement(eq,{ref:kb},Vb)});Object.assign(d,{displayName:Fa});const Qa=a+"CollectionItemSlot",Xa=ip.default.forwardRef((db,kb)=>{const {scope:Lb,children:Vb}=db,Qb=If(db,["scope","children"]),lc=ip.default.useRef(null);db=jh(kb,lc);const xc=ka(Qa,Lb);ip.default.useEffect(()=>
{xc.itemMap.set(lc,oe({ref:lc},Qb));return()=>void xc.itemMap.delete(lc)});return ip.default.createElement(eq,{["data-radix-collection-item"]:"",ref:db},Vb)});Object.assign(Xa,{displayName:Qa});return[{Provider:oa,Slot:d,ItemSlot:Xa},function(db){const kb=ka(a+"CollectionConsumer",db);return ip.default.useCallback(()=>{const Lb=kb.collectionRef.current;if(!Lb)return[];const Vb=Array.from(Lb.querySelectorAll("[data-radix-collection-item]"));return Array.from(kb.itemMap.values()).sort((Qb,lc)=>Vb.indexOf(Qb.ref.current)-
Vb.indexOf(lc.ref.current))},[kb.collectionRef,kb.itemMap])},E]}("Select"),[bk]=jk("Select",[yu,Hx]),jp=Hx(),[Qe,Sf]=bk("Select"),[Ao,Pe]=bk("Select"),us=(0,Cf.forwardRef)((a,d)=>{const {__scopeSelect:l,disabled:E=!1}=a;a=If(a,["__scopeSelect","disabled"]);const W=jp(l),ka=Sf("SelectTrigger",l),oa=ka.disabled||E;d=jh(d,ka.onTriggerChange);const Fa=Al(l),[Qa,Xa,db]=wn(kb=>{const Lb=Fa().filter(Qb=>!Qb.disabled),Vb=Lb.find(Qb=>Qb.value===ka.value);kb=Ml(Lb,kb,Vb);if(void 0!==kb)ka.onValueChange(kb.value)});
return(0,Cf.createElement)(wG,Ze({asChild:!0},W),(0,Cf.createElement)(Im.button,Ze({type:"button",role:"combobox","aria-controls":ka.contentId,"aria-expanded":ka.open,"aria-required":ka.required,"aria-autocomplete":"none",dir:ka.dir,"data-state":ka.open?"open":"closed",disabled:oa,"data-disabled":oa?"":void 0,"data-placeholder":void 0===ka.value?"":void 0},a,{ref:d,onClick:Vf(a.onClick,kb=>{kb.currentTarget.focus()}),onPointerDown:Vf(a.onPointerDown,kb=>{const Lb=kb.target;Lb.hasPointerCapture(kb.pointerId)&&
Lb.releasePointerCapture(kb.pointerId);0===kb.button&&!1===kb.ctrlKey&&(oa||(ka.onOpenChange(!0),db()),ka.triggerPointerDownPosRef.current={x:Math.round(kb.pageX),y:Math.round(kb.pageY)},kb.preventDefault())}),onKeyDown:Vf(a.onKeyDown,kb=>{const Lb=""!==Qa.current;kb.ctrlKey||kb.altKey||kb.metaKey||1!==kb.key.length||Xa(kb.key);Lb&&" "===kb.key||!kf.includes(kb.key)||(oa||(ka.onOpenChange(!0),db()),kb.preventDefault())})})))}),BB=(0,Cf.forwardRef)((a,d)=>{const {__scopeSelect:l,children:E,placeholder:W}=
a;a=If(a,["__scopeSelect","className","style","children","placeholder"]);const ka=Sf("SelectValue",l),{onValueNodeHasChildrenChange:oa}=ka,Fa=void 0!==E;d=jh(d,ka.onValueNodeChange);pn(()=>{oa(Fa)},[oa,Fa]);return(0,Cf.createElement)(Im.span,Ze({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===ka.value&&void 0!==W?W:E)}),Jx=(0,Cf.forwardRef)((a,d)=>{const {children:l}=a;a=If(a,["__scopeSelect","children"]);return(0,Cf.createElement)(Im.span,Ze({"aria-hidden":!0},a,{ref:d}),l||"▼")}),zu=(0,Cf.forwardRef)((a,
d)=>{const l=Sf("SelectContent",a.__scopeSelect),[E,W]=(0,Cf.useState)();pn(()=>{W(new DocumentFragment)},[]);return l.open?(0,Cf.createElement)(Kx,Ze({},a,{ref:d})):E?(0,Nv.createPortal)((0,Cf.createElement)(io,{scope:a.__scopeSelect},(0,Cf.createElement)(Pn.Slot,{scope:a.__scopeSelect},(0,Cf.createElement)("div",null,a.children))),E):null}),[io,Bo]=bk("SelectContent"),Kx=(0,Cf.forwardRef)((a,d)=>{const {__scopeSelect:l,position:E="item-aligned",onCloseAutoFocus:W,onEscapeKeyDown:ka,onPointerDownOutside:oa,
side:Fa,sideOffset:Qa,align:Xa,alignOffset:db,arrowPadding:kb,collisionBoundary:Lb,collisionPadding:Vb,sticky:Qb,hideWhenDetached:lc,avoidCollisions:xc}=a;a=If(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const ac=Sf("SelectContent",l),[pc,mc]=(0,Cf.useState)(null),[Jc,Qc]=(0,Cf.useState)(null);d=jh(d,Of=>mc(Of));const [td,he]=(0,Cf.useState)(null),
[ne,Ge]=(0,Cf.useState)(null),jf=Al(l),[rf,We]=(0,Cf.useState)(!1),uf=(0,Cf.useRef)(!1);(0,Cf.useEffect)(()=>{if(pc)return lx(pc)},[pc]);tb();const Qd=(0,Cf.useCallback)(Of=>{const [Bh,...Lh]=jf().map(Kl=>Kl.ref.current),[Ej]=Lh.slice(-1),Jl=document.activeElement;for(const Kl of Of){if(Kl===Jl)break;null===Kl||void 0===Kl||Kl.scrollIntoView({block:"nearest"});Kl===Bh&&Jc&&(Jc.scrollTop=0);Kl===Ej&&Jc&&(Jc.scrollTop=Jc.scrollHeight);null===Kl||void 0===Kl||Kl.focus();if(document.activeElement!==Jl)break}},
[jf,Jc]),nd=(0,Cf.useCallback)(()=>Qd([td,pc]),[Qd,td,pc]);(0,Cf.useEffect)(()=>{rf&&nd()},[rf,nd]);const {onOpenChange:qd,triggerPointerDownPosRef:sd}=ac;(0,Cf.useEffect)(()=>{if(pc){var Of=0,Bh=0;const Lh=Jl=>{var Kl,Lp,Oq,oq;Of=Math.abs(Math.round(Jl.pageX)-(null!==(Kl=null===(Lp=sd.current)||void 0===Lp?void 0:Lp.x)&&void 0!==Kl?Kl:0));Bh=Math.abs(Math.round(Jl.pageY)-(null!==(Oq=null===(oq=sd.current)||void 0===oq?void 0:oq.y)&&void 0!==Oq?Oq:0))},Ej=Jl=>{10>=Of&&10>=Bh?Jl.preventDefault():pc.contains(Jl.target)||
qd(!1);document.removeEventListener("pointermove",Lh);sd.current=null};null!==sd.current&&(document.addEventListener("pointermove",Lh),document.addEventListener("pointerup",Ej,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Lh);document.removeEventListener("pointerup",Ej,{capture:!0})}}},[pc,qd,sd]);(0,Cf.useEffect)(()=>{const Of=()=>qd(!1);window.addEventListener("blur",Of);window.addEventListener("resize",Of);return()=>{window.removeEventListener("blur",Of);window.removeEventListener("resize",
Of)}},[qd]);const [ke,pf]=wn(Of=>{const Bh=jf().filter(Jl=>!Jl.disabled),Lh=Bh.find(Jl=>Jl.ref.current===document.activeElement),Ej=Ml(Bh,Of,Lh);Ej&&setTimeout(()=>Ej.ref.current.focus())}),Af=(0,Cf.useCallback)((Of,Bh,Lh)=>{Lh=!uf.current&&!Lh;if(void 0!==ac.value&&ac.value===Bh||Lh)he(Of),Lh&&(uf.current=!0)},[ac.value]),ng=(0,Cf.useCallback)(()=>null===pc||void 0===pc?void 0:pc.focus(),[pc]),Kf=(0,Cf.useCallback)((Of,Bh,Lh)=>{Lh=!uf.current&&!Lh;(void 0!==ac.value&&ac.value===Bh||Lh)&&Ge(Of)},
[ac.value]),$f="popper"===E?Fq:jo,Wg=$f===Fq?{side:Fa,sideOffset:Qa,align:Xa,alignOffset:db,arrowPadding:kb,collisionBoundary:Lb,collisionPadding:Vb,sticky:Qb,hideWhenDetached:lc,avoidCollisions:xc}:{};return(0,Cf.createElement)(io,{scope:l,content:pc,viewport:Jc,onViewportChange:Qc,itemRefCallback:Af,selectedItem:td,onItemLeave:ng,itemTextRefCallback:Kf,focusSelectedItem:nd,selectedItemText:ne,position:E,isPositioned:rf,searchRef:ke},(0,Cf.createElement)(Dv,{as:eq,allowPinchZoom:!0},(0,Cf.createElement)(wB,
{asChild:!0,trapped:ac.open,onMountAutoFocus:Of=>{Of.preventDefault()},onUnmountAutoFocus:Vf(W,Of=>{var Bh;null===(Bh=ac.trigger)||void 0===Bh||Bh.focus({preventScroll:!0});Of.preventDefault()})},(0,Cf.createElement)(xt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:ka,onPointerDownOutside:oa,onFocusOutside:Of=>Of.preventDefault(),onDismiss:()=>ac.onOpenChange(!1)},(0,Cf.createElement)($f,Ze({role:"listbox",id:ac.contentId,"data-state":ac.open?"open":"closed",dir:ac.dir,onContextMenu:Of=>
Of.preventDefault()},a,Wg,{onPlaced:()=>We(!0),ref:d,style:oe({display:"flex",flexDirection:"column",outline:"none"},a.style),onKeyDown:Vf(a.onKeyDown,Of=>{var Bh=Of.ctrlKey||Of.altKey||Of.metaKey;"Tab"===Of.key&&Of.preventDefault();Bh||1!==Of.key.length||pf(Of.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Of.key)){let Lh=jf().filter(Ej=>!Ej.disabled).map(Ej=>Ej.ref.current);["ArrowUp","End"].includes(Of.key)&&(Lh=Lh.slice().reverse());["ArrowUp","ArrowDown"].includes(Of.key)&&(Bh=Lh.indexOf(Of.target),
Lh=Lh.slice(Bh+1));setTimeout(()=>Qd(Lh));Of.preventDefault()}})}))))))}),jo=(0,Cf.forwardRef)((a,d)=>{const {__scopeSelect:l,onPlaced:E}=a;a=If(a,["__scopeSelect","onPlaced"]);const W=Sf("SelectContent",l);var ka=Bo("SelectContent",l);const [oa,Fa]=(0,Cf.useState)(null),[Qa,Xa]=(0,Cf.useState)(null);d=jh(d,Jc=>Xa(Jc));const db=Al(l),kb=(0,Cf.useRef)(!1),Lb=(0,Cf.useRef)(!0),{viewport:Vb,selectedItem:Qb,selectedItemText:lc,focusSelectedItem:xc}=ka,ac=(0,Cf.useCallback)(()=>{if(W.trigger&&W.valueNode&&
oa&&Qa&&Vb&&Qb&&lc){var Jc=W.trigger.getBoundingClientRect(),Qc=Qa.getBoundingClientRect(),td=W.valueNode.getBoundingClientRect(),he=lc.getBoundingClientRect();"rtl"!==W.dir?(he=td.left-(he.left-Qc.left),td=Jc.width+(Jc.left-he),Qc=Jg(he,[10,window.innerWidth-10-Math.max(td,Qc.width)]),oa.style.minWidth=td+"px",oa.style.left=Qc+"px"):(he=window.innerWidth-td.right-(Qc.right-he.right),td=Jc.width+(window.innerWidth-Jc.right-he),Qc=Jg(he,[10,window.innerWidth-10-Math.max(td,Qc.width)]),oa.style.minWidth=
td+"px",oa.style.right=Qc+"px");const uf=db();Qc=window.innerHeight-20;var ne=Vb.scrollHeight,Ge=window.getComputedStyle(Qa);td=parseInt(Ge.borderTopWidth,10);var jf=parseInt(Ge.paddingTop,10);he=parseInt(Ge.borderBottomWidth,10);Ge=parseInt(Ge.paddingBottom,10);var rf=td+jf+ne+Ge+he;ne=Math.min(5*Qb.offsetHeight,rf);var We=window.getComputedStyle(Vb);Ge=parseInt(We.paddingTop,10);We=parseInt(We.paddingBottom,10);const Qd=Jc.top+Jc.height/2-10,nd=Qc-Qd;Jc=Qb.offsetHeight/2;jf=td+jf+(Qb.offsetTop+
Jc);rf-=jf;jf<=Qd?(td=Qb===uf[uf.length-1].ref.current,oa.style.bottom="0px",oa.style.height=jf+Math.max(nd,Jc+(td?We:0)+(Qa.clientHeight-Vb.offsetTop-Vb.offsetHeight)+he)+"px"):(he=Qb===uf[0].ref.current,oa.style.top="0px",oa.style.height=Math.max(Qd,td+Vb.offsetTop+(he?Ge:0)+Jc)+rf+"px",Vb.scrollTop=jf-Qd+Vb.offsetTop);oa.style.margin="10px 0";oa.style.minHeight=ne+"px";oa.style.maxHeight=Qc+"px";null===E||void 0===E||E();requestAnimationFrame(()=>kb.current=!0)}},[db,W.trigger,W.valueNode,oa,Qa,
Vb,Qb,lc,W.dir,E]);pn(()=>ac(),[ac]);const [pc,mc]=(0,Cf.useState)();pn(()=>{Qa&&mc(window.getComputedStyle(Qa).zIndex)},[Qa]);ka=(0,Cf.useCallback)(Jc=>{Jc&&!0===Lb.current&&(ac(),null===xc||void 0===xc||xc(),Lb.current=!1)},[ac,xc]);return(0,Cf.createElement)(or,{scope:l,contentWrapper:oa,shouldExpandOnScrollRef:kb,onScrollButtonChange:ka},(0,Cf.createElement)("div",{ref:Fa,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:pc}},(0,Cf.createElement)(Im.div,Ze({},a,{ref:d,style:oe({boxSizing:"border-box",
maxHeight:"100%"},a.style)}))))}),Fq=(0,Cf.forwardRef)((a,d)=>{const {__scopeSelect:l,align:E="start",collisionPadding:W=10}=a;a=If(a,["__scopeSelect","align","collisionPadding"]);const ka=jp(l);return(0,Cf.createElement)(Eq,Ze({},ka,a,{ref:d,align:E,collisionPadding:W,style:of(oe({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)",
"--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[or,Po]=bk("SelectContent",{}),Tg=(0,Cf.forwardRef)((a,d)=>{const {__scopeSelect:l}=a;a=If(a,["__scopeSelect"]);const E=Bo("SelectViewport",l),W=Po("SelectViewport",l);d=jh(d,E.onViewportChange);const ka=(0,Cf.useRef)(0);return(0,Cf.createElement)(Cf.Fragment,null,(0,Cf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,Cf.createElement)(Pn.Slot,{scope:l},(0,Cf.createElement)(Im.div,Ze({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:oe({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:Vf(a.onScroll,oa=>{oa=oa.currentTarget;const {contentWrapper:Fa,shouldExpandOnScrollRef:Qa}=W;if(null!==Qa&&void 0!==Qa&&Qa.current&&Fa){var Xa=Math.abs(ka.current-oa.scrollTop);if(0<Xa){var db=window.innerHeight-20,kb=parseFloat(Fa.style.minHeight);const Lb=parseFloat(Fa.style.height);kb=Math.max(kb,
Lb);kb<db&&(Xa=kb+Xa,db=Math.min(db,Xa),Xa-=db,Fa.style.height=db+"px","0px"===Fa.style.bottom&&(oa.scrollTop=0<Xa?Xa:0,Fa.style.justifyContent="flex-end"))}}ka.current=oa.scrollTop})}))))});bk("SelectGroup");var [ko,Gq]=bk("SelectItem"),CB=(0,Cf.forwardRef)((a,d)=>{const {__scopeSelect:l,value:E,disabled:W=!1,textValue:ka}=a;a=If(a,["__scopeSelect","value","disabled","textValue"]);const oa=Sf("SelectItem",l),Fa=Bo("SelectItem",l),Qa=oa.value===E,[Xa,db]=(0,Cf.useState)(null!==ka&&void 0!==ka?ka:
""),[kb,Lb]=(0,Cf.useState)(!1);d=jh(d,lc=>{var xc;return null===(xc=Fa.itemRefCallback)||void 0===xc?void 0:xc.call(Fa,lc,E,W)});const Vb=gi(),Qb=()=>{W||(oa.onValueChange(E),oa.onOpenChange(!1))};return(0,Cf.createElement)(ko,{scope:l,value:E,disabled:W,textId:Vb,isSelected:Qa,onItemTextChange:(0,Cf.useCallback)(lc=>{db(xc=>{var ac;return xc||(null!==(ac=null===lc||void 0===lc?void 0:lc.textContent)&&void 0!==ac?ac:"").trim()})},[])},(0,Cf.createElement)(Pn.ItemSlot,{scope:l,value:E,disabled:W,
textValue:Xa},(0,Cf.createElement)(Im.div,Ze({role:"option","aria-labelledby":Vb,"data-highlighted":kb?"":void 0,"aria-selected":Qa&&kb,"data-state":Qa?"checked":"unchecked","aria-disabled":W||void 0,"data-disabled":W?"":void 0,tabIndex:W?void 0:-1},a,{ref:d,onFocus:Vf(a.onFocus,()=>Lb(!0)),onBlur:Vf(a.onBlur,()=>Lb(!1)),onPointerUp:Vf(a.onPointerUp,Qb),onPointerMove:Vf(a.onPointerMove,lc=>{if(W){var xc;null===(xc=Fa.onItemLeave)||void 0===xc||xc.call(Fa)}else lc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:Vf(a.onPointerLeave,lc=>{if(lc.currentTarget===document.activeElement){var xc;null===(xc=Fa.onItemLeave)||void 0===xc||xc.call(Fa)}}),onKeyDown:Vf(a.onKeyDown,lc=>{var xc;if(""===(null===(xc=Fa.searchRef)||void 0===xc?void 0:xc.current)||" "!==lc.key)Uf.includes(lc.key)&&Qb()," "===lc.key&&lc.preventDefault()})}))))}),vs=(0,Cf.forwardRef)((a,d)=>{var {__scopeSelect:l}=a;a=If(a,["__scopeSelect","className","style"]);const E=Sf("SelectItemText",l),W=Bo("SelectItemText",l),ka=Gq("SelectItemText",
l);l=Pe("SelectItemText",l);const [oa,Fa]=(0,Cf.useState)(null);d=jh(d,Lb=>Fa(Lb),ka.onItemTextChange,Lb=>{var Vb;return null===(Vb=W.itemTextRefCallback)||void 0===Vb?void 0:Vb.call(W,Lb,ka.value,ka.disabled)});const Qa=null===oa||void 0===oa?void 0:oa.textContent,Xa=(0,Cf.useMemo)(()=>(0,Cf.createElement)("option",{key:ka.value,value:ka.value,disabled:ka.disabled},Qa),[ka.disabled,ka.value,Qa]),{onNativeOptionAdd:db,onNativeOptionRemove:kb}=l;pn(()=>{db(Xa);return()=>kb(Xa)},[db,kb,Xa]);return(0,Cf.createElement)(Cf.Fragment,
null,(0,Cf.createElement)(Im.span,Ze({id:ka.textId},a,{ref:d})),ka.isSelected&&E.valueNode&&!E.valueNodeHasChildren?(0,Nv.createPortal)(a.children,E.valueNode):null)}),Ug=(0,Cf.forwardRef)((a,d)=>{const l=Bo("SelectScrollUpButton",a.__scopeSelect),E=Po("SelectScrollUpButton",a.__scopeSelect),[W,ka]=(0,Cf.useState)(!1);d=jh(d,E.onScrollButtonChange);pn(()=>{if(l.viewport&&l.isPositioned){let oa=function(){ka(0<Fa.scrollTop)};const Fa=l.viewport;oa();Fa.addEventListener("scroll",oa);return()=>Fa.removeEventListener("scroll",
oa)}},[l.viewport,l.isPositioned]);return W?(0,Cf.createElement)(iq,Ze({},a,{ref:d,onAutoScroll:()=>{const {viewport:oa,selectedItem:Fa}=l;oa&&Fa&&(oa.scrollTop-=Fa.offsetHeight)}})):null}),DB=(0,Cf.forwardRef)((a,d)=>{const l=Bo("SelectScrollDownButton",a.__scopeSelect),E=Po("SelectScrollDownButton",a.__scopeSelect),[W,ka]=(0,Cf.useState)(!1);d=jh(d,E.onScrollButtonChange);pn(()=>{if(l.viewport&&l.isPositioned){let oa=function(){ka(Math.ceil(Fa.scrollTop)<Fa.scrollHeight-Fa.clientHeight)};const Fa=
l.viewport;oa();Fa.addEventListener("scroll",oa);return()=>Fa.removeEventListener("scroll",oa)}},[l.viewport,l.isPositioned]);return W?(0,Cf.createElement)(iq,Ze({},a,{ref:d,onAutoScroll:()=>{const {viewport:oa,selectedItem:Fa}=l;oa&&Fa&&(oa.scrollTop+=Fa.offsetHeight)}})):null}),iq=(0,Cf.forwardRef)((a,d)=>{const {__scopeSelect:l,onAutoScroll:E}=a;a=If(a,["__scopeSelect","onAutoScroll"]);const W=Bo("SelectScrollButton",l),ka=(0,Cf.useRef)(null),oa=Al(l),Fa=(0,Cf.useCallback)(()=>{null!==ka.current&&
(window.clearInterval(ka.current),ka.current=null)},[]);(0,Cf.useEffect)(()=>()=>Fa(),[Fa]);pn(()=>{var Qa;const Xa=oa().find(db=>db.ref.current===document.activeElement);null===Xa||void 0===Xa||null===(Qa=Xa.ref.current)||void 0===Qa||Qa.scrollIntoView({block:"nearest"})},[oa]);return(0,Cf.createElement)(Im.div,Ze({"aria-hidden":!0},a,{ref:d,style:oe({flexShrink:0},a.style),onPointerMove:Vf(a.onPointerMove,()=>{var Qa;null===(Qa=W.onItemLeave)||void 0===Qa||Qa.call(W);null===ka.current&&(ka.current=
window.setInterval(E,50))}),onPointerLeave:Vf(a.onPointerLeave,()=>{Fa()})}))}),dh=(0,Cf.forwardRef)((a,d)=>{const {value:l}=a;a=If(a,["value"]);const E=(0,Cf.useRef)(null);d=jh(d,E);const W=gg(l);(0,Cf.useEffect)(()=>{const ka=E.current,oa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(W!==l&&oa){const Fa=new Event("change",{bubbles:!0});oa.call(ka,l);ka.dispatchEvent(Fa)}},[W,l]);return(0,Cf.createElement)(mg,{asChild:!0},(0,Cf.createElement)("select",Ze({},a,
{ref:d,defaultValue:l})))});dh.displayName="BubbleSelect";var Au=a=>{const {__scopeSelect:d,children:l,open:E,defaultOpen:W,onOpenChange:ka,value:oa,defaultValue:Fa,onValueChange:Qa,dir:Xa,name:db,autoComplete:kb,disabled:Lb,required:Vb}=a,Qb=jp(d),[lc,xc]=(0,Cf.useState)(null),[ac,pc]=(0,Cf.useState)(null),[mc,Jc]=(0,Cf.useState)(!1),Qc=Wb(Xa),[td=!1,he]=ai({prop:E,defaultProp:W,onChange:ka}),[ne,Ge]=ai({prop:oa,defaultProp:Fa,onChange:Qa}),jf=(0,Cf.useRef)(null),rf=lc?!!lc.closest("form"):!0,[We,
uf]=(0,Cf.useState)(new Set),Qd=Array.from(We).map(nd=>nd.props.value).join(";");return(0,Cf.createElement)(yB,Qb,(0,Cf.createElement)(Qe,{required:Vb,scope:d,trigger:lc,onTriggerChange:xc,valueNode:ac,onValueNodeChange:pc,valueNodeHasChildren:mc,onValueNodeHasChildrenChange:Jc,contentId:gi(),value:ne,onValueChange:Ge,open:td,onOpenChange:he,dir:Qc,triggerPointerDownPosRef:jf,disabled:Lb},(0,Cf.createElement)(Pn.Provider,{scope:d},(0,Cf.createElement)(Ao,{scope:a.__scopeSelect,onNativeOptionAdd:(0,Cf.useCallback)(nd=>
{uf(qd=>(new Set(qd)).add(nd))},[]),onNativeOptionRemove:(0,Cf.useCallback)(nd=>{uf(qd=>{qd=new Set(qd);qd.delete(nd);return qd})},[])},l)),rf?(0,Cf.createElement)(dh,{key:Qd,"aria-hidden":!0,required:Vb,tabIndex:-1,name:db,autoComplete:kb,value:ne,onChange:nd=>Ge(nd.target.value),disabled:Lb},void 0===ne?(0,Cf.createElement)("option",{value:""}):null,Array.from(We)):null))},Rk=us,qm=BB,zt=Jx,Bu=a=>(0,Cf.createElement)(AB,Ze({asChild:!0},a)),Lx=zu,At=Tg,Jm=CB,EB=vs,zG=Ug,AG=DB;sb=V(586);sb=V(586);
sb=V(586);var BG=ff(function(){const a=ef(),d=gj.useCallback(ka=>{a.api.setColor(ka)},[]),l=gj.useCallback(ka=>{(ka=ka.currentTarget.dataset.tool)&&a.selectTool(ka)},[]),[E,W]=gj.useState(()=>{var ka;return null!=(ka=Object.values(Uq).find(oa=>oa===a.selectedTool.id))?ka:Object.values(Uq)[0]});gj.useEffect(()=>{W(ka=>{var oa;return null!=(oa=Object.values(Uq).find(Fa=>Fa===a.selectedTool.id))?oa:ka})},[a.selectedTool.id]);return(0,sb.jsx)("div",{className:"tl-primary-tools","data-html2canvas-ignore":"true",
children:(0,sb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,sb.jsx)(hp,{handleClick:()=>a.selectTool("select"),tooltip:"Select",id:"select",icon:"select-cursor"}),(0,sb.jsx)(hp,{handleClick:()=>a.selectTool("move"),tooltip:"Pan",id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,sb.jsx)(mr,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,sb.jsx)(hp,{handleClick:()=>a.selectTool("logseq-portal"),tooltip:"Add block or page",id:"logseq-portal",
icon:"circle-plus"}),(0,sb.jsx)(hp,{handleClick:()=>a.selectTool("pencil"),tooltip:"Draw",id:"pencil",icon:"ballpen"}),(0,sb.jsx)(hp,{handleClick:()=>a.selectTool("highlighter"),tooltip:"Highlight",id:"highlighter",icon:"highlight"}),(0,sb.jsx)(hp,{handleClick:()=>a.selectTool("erase"),tooltip:"Eraser",id:"erase",icon:"eraser"}),(0,sb.jsx)(hp,{handleClick:()=>a.selectTool("line"),tooltip:"Connector",id:"line",icon:"connector"}),(0,sb.jsx)(hp,{handleClick:()=>a.selectTool("text"),tooltip:"Text",id:"text",
icon:"text"}),(0,sb.jsx)(yx,{activeGeometry:E,setGeometry:l}),(0,sb.jsx)(mr,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,sb.jsx)(zg,{popoverSide:"left",color:a.settings.color,setColor:d}),(0,sb.jsx)(Hi,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})});sb=V(586);var pr=ff(function(){const a=ef();return(0,sb.jsxs)("div",{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,
(0,sb.jsx)("div",{style:{flex:1}}),(0,sb.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})});sb=V(586);var qr=ff(function(){const a=ef();return(0,sb.jsxs)(sb.Fragment,{children:[Hf()&&(0,sb.jsx)(pr,{}),Hf()&&(0,sb.jsx)(vx,{}),!a.readOnly&&(0,sb.jsx)(BG,{}),(0,sb.jsx)(Fv,{})]})}),Pj=yf(V(22)),jq=yf(V(22)),Mx=yf(V(22)),CG=yf(V(22));sb=V(586);var Hq=({id:a,showReferenceContent:d=!1})=>{var l;const {handlers:{isWhiteboardPage:E,redirectToPage:W,sidebarAddBlock:ka,queryBlockByUUID:oa},renderers:{Breadcrumb:Fa,
PageName:Qa}}=CG.default.useContext(Qk);var Xa="";let db=Gk(a)?"B":"P",kb="";if(Gk(a)){Xa=oa(a);if(!Xa)return(0,sb.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});kb=Xa.content;Xa="whiteboard-shape"===(null==(l=Xa.properties)?void 0:l["ls-type"])?"link-to-whiteboard":"link-to-block"}else Xa=E(a)?"link-to-whiteboard":"link-to-page";l=kb&&23<kb.length?kb.slice(0,20)+"...":kb;return(0,sb.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Lb=>
{Lb.stopPropagation();Lb.shiftKey?ka(a,"B"===db?"block":"page"):W(a)},children:[(0,sb.jsx)(Wh,{name:Xa}),(0,sb.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===db?(0,sb.jsx)(Qa,{pageName:a}):(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)(Fa,{levelLimit:1,blockId:a,endSeparator:d}),d&&l]})})]})},rn=yf(V(22)),Fn=V(22),DG=["children"],ws="undefined"!==typeof document?Fn.useLayoutEffect:Fn.useEffect,rh=yf(V(22)),wi=V(22),Nx=V(31),Bt,Km,FB="undefined"!=typeof document?
wi.useLayoutEffect:wi.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(Km||={});var xs=((Bt={})[Km.DEBUG]="debug",Bt[Km.INFO]="log",Bt[Km.WARN]="warn",Bt[Km.ERROR]="error",Bt),Co=bi(function(){var a=Yf(Km.ERROR);return{log:Yf(function(d,l,E){var W;void 0===E&&(E=Km.INFO);E>=(null!=(W=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?W:a(4))&&console[xs[E]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",
d,l)}),logLevel:a}},[],{singleton:!0}),Qn=bi(function(){var a=Cg(),d=Cg(),l=Yf(0),E=Cg(),W=Yf(0),ka=Cg(),oa=Cg(),Fa=Yf(0),Qa=Yf(0),Xa=Yf(0),db=Yf(0),kb=Cg(),Lb=Cg(),Vb=Yf(!1),Qb=Yf(!1);return Zg(Ye(a,sg(function(lc){return lc.scrollTop})),d),Zg(Ye(a,sg(function(lc){return lc.scrollHeight})),oa),Zg(d,W),{scrollContainerState:a,scrollTop:d,viewportHeight:ka,headerHeight:Fa,fixedHeaderHeight:Qa,fixedFooterHeight:Xa,footerHeight:db,scrollHeight:oa,smoothScrollTargetReached:E,react18ConcurrentRendering:Qb,
scrollTo:kb,scrollBy:Lb,statefulScrollTop:W,deviation:l,scrollingInProgress:Vb}},[],{singleton:!0}),hj={lvl:0},Qv=bi(function(){return{recalcInProgress:Yf(!1)}},[],{singleton:!0}),Ct={offsetHeight:"height",offsetWidth:"width"},Do=bi(function(a){var d=a[0].log,l=a[1].recalcInProgress;a=Cg();var E=Cg(),W=Sj(E,0),ka=Cg(),oa=Cg(),Fa=Yf(0),Qa=Yf([]),Xa=Yf(void 0),db=Yf(void 0),kb=Yf(function(pc,mc){return Vm(pc,Ct[mc])}),Lb=Yf(void 0),Vb=Yf(0),Qb={offsetTree:[],sizeTree:hj,groupOffsetTree:hj,lastIndex:0,
lastOffset:0,lastSize:0,groupIndices:[]},lc=Sj(Ye(a,Fh(Qa,d,Vb),em(ij,Qb),Mg()),Qb);Zg(Ye(Qa,qh(function(pc){return 0<pc.length}),Fh(lc,Vb),sg(function(pc){var mc=pc[0],Jc=pc[1],Qc=pc[2];pc=mc.reduce(function(td,he,ne){return sa(td,he,qi(he,Jc.offsetTree,Qc)||ne)},hj);return Bg({},Jc,{groupIndices:mc,groupOffsetTree:pc})})),lc);Zg(Ye(E,Fh(lc),qh(function(pc){return pc[0]<pc[1].lastIndex}),sg(function(pc){var mc=pc[1];return[{startIndex:pc[0],endIndex:mc.lastIndex,size:mc.lastSize}]})),a);Zg(Xa,db);
var xc=Sj(Ye(Xa,sg(function(pc){return void 0===pc})),!0);Zg(Ye(db,qh(function(pc){return void 0!==pc&&lc(4).sizeTree===hj}),sg(function(pc){return[{startIndex:0,endIndex:0,size:pc}]})),a);Qb=dk(Ye(a,Fh(lc),em(function(pc,mc){mc=mc[1];return{changed:mc!==pc.sizes,sizes:mc}},{changed:!1,sizes:Qb}),sg(function(pc){return pc.changed})));lh(Ye(Fa,em(function(pc,mc){return{diff:pc.prev-mc,prev:mc}},{diff:0,prev:0}),sg(function(pc){return pc.diff})),function(pc){0<pc?(l(0,!0),ka(0,pc)):0>pc&&oa(0,pc)});
lh(Ye(Fa,Fh(d)),function(pc){0>pc[0]&&(0,pc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Fa},Km.ERROR)});d=dk(ka);Zg(Ye(ka,Fh(lc),sg(function(pc){var mc=pc[0];pc=pc[1];if(0<pc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Ya(pc.sizeTree).reduce(function(Jc,Qc){var td=Qc.k;Qc=Qc.v;return{ranges:[].concat(Jc.ranges,[{startIndex:Jc.prevIndex,endIndex:td+mc-
1,size:Jc.prevSize}]),prevIndex:td+mc,prevSize:Qc}},{ranges:[],prevIndex:0,prevSize:pc.lastSize}).ranges})),a);var ac=dk(Ye(oa,Fh(lc,Vb),sg(function(pc){return qi(-pc[0],pc[1].offsetTree,pc[2])})));return Zg(Ye(oa,Fh(lc,Vb),sg(function(pc){var mc=pc[0],Jc=pc[1];pc=pc[2];if(0<Jc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Qc=Ya(Jc.sizeTree).reduce(function(td,he){return sa(td,Math.max(0,he.k+mc),he.v)},hj);return Bg({},Jc,{sizeTree:Qc},Ii(Jc.offsetTree,
0,Qc,pc))})),lc),{data:Lb,totalCount:E,sizeRanges:a,groupIndices:Qa,defaultItemSize:db,fixedItemSize:Xa,unshiftWith:ka,shiftWith:oa,shiftWithOffset:ac,beforeUnshiftWith:d,firstItemIndex:Fa,gap:Vb,sizes:lc,listRefresh:Qb,statefulTotalCount:W,trackItemSizes:xc,itemSize:kb}},Yh(Co,Qv),{singleton:!0}),Cu="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Iq=bi(function(a){function d(){xc&&(xc(),xc=null);pc&&(pc(),pc=null);ac&&(clearTimeout(ac),ac=null);Fa(0,!1)}var l=a[0],
E=l.sizes,W=l.totalCount,ka=l.listRefresh;l=l.gap;var oa=a[1],Fa=oa.scrollingInProgress,Qa=oa.viewportHeight,Xa=oa.scrollTo,db=oa.smoothScrollTargetReached,kb=oa.headerHeight,Lb=oa.footerHeight,Vb=oa.fixedHeaderHeight;oa=oa.fixedFooterHeight;a=a[2].log;var Qb=Cg(),lc=Yf(0),xc=null,ac=null,pc=null;return Zg(Ye(Qb,Fh(E,Qa,W,lc,kb,Lb,a),Fh(l,Vb,oa),sg(function(mc){var Jc=mc[0],Qc=Jc[0],td=Jc[1],he=Jc[2],ne=Jc[3],Ge=Jc[4],jf=Jc[5],rf=Jc[6],We=Jc[7],uf=mc[1];Jc=mc[2];mc=mc[3];var Qd=ki(Qc),nd=Qd.align,
qd=Qd.behavior,sd=Qd.offset;--ne;Qd=fh(Qd,td,ne);jf=qi(Qd,td.offsetTree,uf)+jf;"end"===nd?(jf+=Jc+wa(td.sizeTree,Qd)[1]-he+mc,Qd===ne&&(jf+=rf)):"center"===nd?jf+=(Jc+wa(td.sizeTree,Qd)[1]-he+mc)/2:jf-=Ge;sd&&(jf+=sd);var ke=function(Af){d();Af?(We("retrying to scroll to",{location:Qc},Km.DEBUG),Qb(0,Qc)):We("list did not change, scroll successful",{},Km.DEBUG)};if(d(),"smooth"===qd){var pf=!1;pc=lh(ka,function(Af){pf=pf||Af});xc=ci(db,function(){ke(pf)})}else xc=ci(Ye(ka,function(Af){var ng=setTimeout(function(){Af(!1)},
150);return function(Kf){Kf&&(Af(!0),clearTimeout(ng))}}),ke);ac=setTimeout(function(){d()},1200);Fa(0,!0);return We("scrolling from index to",{index:Qd,top:jf,behavior:qd},Km.DEBUG),{top:jf,behavior:qd}})),Xa),{scrollToIndex:Qb,topListHeight:lc}},Yh(Do,Qn,Co),{singleton:!0}),Du={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},kp=bi(function(a){var d=a[0],l=d.scrollContainerState;a=d.scrollTop;var E=d.viewportHeight,W=d.headerHeight,
ka=d.footerHeight,oa=d.scrollBy;d=Yf(!1);var Fa=Yf(!0),Qa=Cg(),Xa=Cg(),db=Yf(4),kb=Yf(0),Lb=Sj(Ye(Ji(Ye(Uh(a),zn(1),Ok(!0)),Ye(Uh(a),zn(1),Ok(!1),mn(100))),Mg()),!1),Vb=Sj(Ye(Ji(Ye(oa,Ok(!0)),Ye(oa,Ok(!1),mn(200))),Mg()),!1);Zg(Ye(Tj(Uh(a),Uh(kb)),sg(function(Qb){return Qb[0]<=Qb[1]}),Mg()),Fa);Zg(Ye(Fa,pj(50)),Xa);E=dk(Ye(Tj(l,Uh(E),Uh(W),Uh(ka),Uh(db)),em(function(Qb,lc){var xc,ac,pc=lc[0],mc=pc.scrollTop;pc=pc.scrollHeight;var Jc=lc[1],Qc={viewportHeight:Jc,scrollTop:mc,scrollHeight:pc};return mc+
Jc-pc>-lc[4]?(mc>Qb.state.scrollTop?(xc="SCROLLED_DOWN",ac=Qb.state.scrollTop-mc):(xc="SIZE_DECREASED",ac=Qb.state.scrollTop-mc||Qb.scrollTopDelta),{atBottom:!0,state:Qc,atBottomBecause:xc,scrollTopDelta:ac}):{atBottom:!1,notAtBottomBecause:Qc.scrollHeight>Qb.state.scrollHeight?"SIZE_INCREASED":Jc<Qb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":mc<Qb.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Qc}},Du),Mg(function(Qb,lc){return Qb&&Qb.atBottom===lc.atBottom})));
W=Sj(Ye(l,em(function(Qb,lc){var xc=lc.scrollTop,ac=lc.scrollHeight;lc=lc.viewportHeight;return 1.01>Math.abs(Qb.scrollHeight-ac)?{scrollTop:xc,scrollHeight:ac,jump:0,changed:!1}:Qb.scrollTop!==xc&&1>ac-(xc+lc)?{scrollHeight:ac,scrollTop:xc,jump:Qb.scrollTop-xc,changed:!0}:{scrollHeight:ac,scrollTop:xc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),qh(function(Qb){return Qb.changed}),sg(function(Qb){return Qb.jump})),0);Zg(Ye(E,sg(function(Qb){return Qb.atBottom})),d);Zg(Ye(d,
pj(50)),Qa);ka=Yf("down");Zg(Ye(l,sg(function(Qb){return Qb.scrollTop}),Mg(),em(function(Qb,lc){return Vb(4)?{direction:Qb.direction,prevScrollTop:lc}:{direction:lc<Qb.prevScrollTop?"up":"down",prevScrollTop:lc}},{direction:"down",prevScrollTop:0}),sg(function(Qb){return Qb.direction})),ka);Zg(Ye(l,pj(50),Ok("none")),ka);l=Yf(0);return Zg(Ye(Lb,qh(function(Qb){return!Qb}),Ok(0)),l),Zg(Ye(a,pj(100),Fh(Lb),qh(function(Qb){return!!Qb[1]}),em(function(Qb,lc){return[Qb[1],lc[0]]},[0,0]),sg(function(Qb){return Qb[1]-
Qb[0]})),l),{isScrolling:Lb,isAtTop:Fa,isAtBottom:d,atBottomState:E,atTopStateChange:Xa,atBottomStateChange:Qa,scrollDirection:ka,atBottomThreshold:db,atTopThreshold:kb,scrollVelocity:l,lastJumpDueToItemResize:W}},Yh(Qn)),sn=bi(function(a){var d=a[0].log;a=Yf(!1);var l=dk(Ye(a,qh(function(E){return E}),Mg()));return lh(a,function(E){E&&d(4)("props updated",{},Km.DEBUG)}),{propsReady:a,didMount:l}},Yh(Co),{singleton:!0}),Rv=bi(function(a){var d=a[0],l=d.sizes,E=d.listRefresh;d=d.defaultItemSize;var W=
a[1].scrollTop,ka=a[2].scrollToIndex;a=a[3].didMount;var oa=Yf(!0),Fa=Yf(0);return Zg(Ye(a,Fh(Fa),qh(function(Qa){return!!Qa[1]}),Ok(!1)),oa),lh(Ye(Tj(E,a),Fh(oa,l,d),qh(function(Qa){var Xa=Qa[1],db=Qa[3];return Qa[0][1]&&(Qa[2].sizeTree!==hj||void 0!==db)&&!Xa}),Fh(Fa)),function(Qa){var Xa=Qa[1];setTimeout(function(){ci(W,function(){oa(0,!0)});ka(0,Xa)})}),{scrolledToInitialItem:oa,initialTopMostItemIndex:Fa}},Yh(Do,Qn,Iq,sn),{singleton:!0}),Qo=bi(function(a){function d(lc){Qa(0,{index:"LAST",align:"end",
behavior:lc})}function l(lc){var xc=ci(Fa,function(ac){!lc||ac.atBottom||"SIZE_INCREASED"!==ac.notAtBottomBecause||Qb||(kb(4)("scrolling to bottom due to increased size",{},Km.DEBUG),d("auto"))});setTimeout(xc,100)}var E=a[0],W=E.totalCount,ka=E.listRefresh,oa=a[1];E=oa.isAtBottom;var Fa=oa.atBottomState,Qa=a[2].scrollToIndex;oa=a[3].scrolledToInitialItem;var Xa=a[4],db=Xa.propsReady;Xa=Xa.didMount;var kb=a[5].log;a=a[6].scrollingInProgress;var Lb=Yf(!1),Vb=Cg(),Qb=null;return lh(Ye(Tj(Ye(Uh(W),zn(1)),
Xa),Fh(Uh(Lb),E,oa,a),sg(function(lc){var xc=lc[0],ac=xc[0];xc=xc[1]&&lc[3];var pc="auto";xc&&(pc=lc[1],lc=lc[2]||lc[4],pc="function"==typeof pc?uh(pc(lc)):lc&&uh(pc),xc=xc&&!!pc);return{totalCount:ac,shouldFollow:xc,followOutputBehavior:pc}}),qh(function(lc){return lc.shouldFollow})),function(lc){var xc=lc.totalCount,ac=lc.followOutputBehavior;Qb&&(Qb(),Qb=null);Qb=ci(ka,function(){kb(4)("following output to ",{totalCount:xc},Km.DEBUG);d(ac);Qb=null})}),lh(Ye(Tj(Uh(Lb),W,db),qh(function(lc){return lc[0]&&
lc[2]}),em(function(lc,xc){xc=xc[1];return{refreshed:lc.value===xc,value:xc}},{refreshed:!1,value:0}),qh(function(lc){return lc.refreshed}),Fh(Lb,W)),function(lc){l(!1!==lc[1])}),lh(Vb,function(){l(!1!==Lb(4))}),lh(Tj(Uh(Lb),Fa),function(lc){var xc=lc[1];lc[0]&&!xc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===xc.notAtBottomBecause&&d("auto")}),{followOutput:Lb,autoscrollToBottom:Vb}},Yh(Do,kp,Iq,Rv,sn,Co,Qn)),ys=bi(function(a){var d=a[0],l=d.totalCount,E=d.groupIndices;d=d.sizes;var W=a[1];a=W.scrollTop;
W=W.headerHeight;var ka=Cg(),oa=Cg(),Fa=dk(Ye(ka,sg(gl)));return Zg(Ye(Fa,sg(function(Qa){return Qa.totalCount})),l),Zg(Ye(Fa,sg(function(Qa){return Qa.groupIndices})),E),Zg(Ye(Tj(a,d,W),qh(function(Qa){return Qa[1].groupOffsetTree!==hj}),sg(function(Qa){return wa(Qa[1].groupOffsetTree,Math.max(Qa[0]-Qa[2],0),"v")[0]}),Mg(),sg(function(Qa){return[Qa]})),oa),{groupCounts:ka,topItemsIndexes:oa}},Yh(Do,Qn)),Dt=bi(function(a){var d=a[0];a=d.scrollTop;var l=d.viewportHeight,E=d.deviation,W=d.headerHeight,
ka=d.fixedHeaderHeight;d=Cg();var oa=Yf(0),Fa=Yf(0),Qa=Yf(0);a=Sj(Ye(Tj(Uh(a),Uh(l),Uh(W),Uh(d,Jj),Uh(Qa),Uh(oa),Uh(ka),Uh(E),Uh(Fa)),sg(function(Xa){var db=Xa[0],kb=Xa[1],Lb=Xa[2],Vb=Xa[3],Qb=Vb[0];Vb=Vb[1];var lc=Xa[4],xc=Xa[6],ac=Xa[7],pc=Xa[8],mc=db-ac;Xa=Xa[5]+xc;var Jc=Math.max(Lb-mc,0),Qc="none",td="number"==typeof pc?pc:pc.top||0;pc="number"==typeof pc?pc:pc.bottom||0;return Qb-=ac,Vb+=Lb+xc,Qb+(Lb+xc)>db+Xa-td&&(Qc="up"),Vb-ac<db-Jc+kb+pc&&(Qc="down"),"none"!==Qc?[Math.max(mc-Lb-Om(lc,"top",
Qc)-td,0),mc-Jc-xc+kb+Om(lc,"bottom",Qc)+pc]:null}),qh(function(Xa){return null!=Xa}),Mg(Jj)),[0,0]);return{listBoundary:d,overscan:Qa,topListHeight:oa,increaseViewportBy:Fa,visibleRange:a}},Yh(Qn),{singleton:!0}),Jq={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},zs=bi(function(a){var d=a[0],l=d.sizes,E=d.totalCount,W=d.data,ka=d.firstItemIndex,oa=d.gap,Fa=a[1],Qa=a[2],Xa=Qa.visibleRange;d=Qa.listBoundary;Qa=Qa.topListHeight;var db=a[3],
kb=db.scrolledToInitialItem,Lb=db.initialTopMostItemIndex;db=a[4].topListHeight;var Vb=a[5],Qb=a[6].didMount,lc=a[7].recalcInProgress;a=Yf([]);var xc=Cg();Zg(Fa.topItemsIndexes,a);l=Sj(Ye(Tj(Qb,lc,Uh(Xa,Jj),Uh(E),Uh(l),Uh(Lb),kb,Uh(a),Uh(ka),Uh(oa),W),qh(function(ac){return ac[0]&&!ac[1]}),sg(function(ac){var pc=ac[2],mc=pc[0],Jc=pc[1];pc=ac[3];var Qc=ac[5],td=ac[6],he=ac[7],ne=ac[8],Ge=ac[9],jf=ac[10];ac=ac[4];var rf=ac.sizeTree,We=ac.offsetTree;if(0===pc||0===mc&&0===Jc)return Bg({},Jq,{totalCount:pc});
if(rf===hj)return Mn(function(Kf,$f,Wg){return $f.groupOffsetTree!==hj?(Kf=bg(Kf,$f),[{index:wa($f.groupOffsetTree,Kf)[0],size:0,offset:0},{index:Kf,size:0,offset:0,data:Wg&&Wg[0]}]):[{index:Kf,size:0,offset:0,data:Wg&&Wg[0]}]}("number"==typeof Qc?Qc:"LAST"===Qc.index?pc-1:Qc.index,ac,jf),[],pc,Ge,ac,ne);Qc=[];if(0<he.length){var uf,Qd=he[0],nd=he[he.length-1],qd=0;for(rf=vm(Gd(rf,Qd,nd));!(uf=rf()).done;){var sd=uf.value;uf=sd.value;var ke=Math.min(sd.end,nd);for(sd=Math.max(sd.start,Qd);sd<=ke;sd++)Qc.push({index:sd,
size:uf,offset:qd,data:jf&&jf[sd]}),qd+=uf}}if(!td)return Mn([],Qc,pc,Ge,ac,ne);var pf=0<he.length?he[he.length-1]+1:0,Af=function(Kf,$f,Wg,Of){return void 0===Of&&(Of=0),0<Of&&($f=Math.max($f,Kf[Lf(Kf,Of,Xj)].offset)),Nd((Lh=Wg,Jl=Lf(Bh=Kf,$f,Ej=Kg),Kl=Lf(Bh,Lh,Ej,Jl),Bh.slice(Jl,Kl+1)),Nh);var Bh,Lh,Ej,Jl,Kl}(We,mc,Jc,pf);if(0===Af.length)return null;var ng=pc-1;return Mn(Nl([],function(Kf){for(var $f,Wg=vm(Af);!($f=Wg()).done;){var Of=$f.value,Bh=Of.value;$f=Bh.offset;var Lh=Of.start,Ej=Bh.size;
Bh.offset<mc&&(Bh=(Lh+=Math.floor((mc-Bh.offset+Ge)/(Ej+Ge)))-Of.start,$f+=Bh*Ej+Bh*Ge);Lh<pf&&($f+=(pf-Lh)*Ej,Lh=pf);for(Of=Math.min(Of.end,ng);Lh<=Of&&!($f>=Jc);Lh++)Kf.push({index:Lh,size:Ej,offset:$f,data:jf&&jf[Lh]}),$f+=Ej+Ge}}),Qc,pc,Ge,ac,ne)}),qh(function(ac){return null!==ac}),Mg()),Jq);return Zg(Ye(W,qh(function(ac){return void 0!==ac}),sg(function(ac){return ac.length})),E),Zg(Ye(l,sg(function(ac){return ac.topListHeight})),db),Zg(db,Qa),Zg(Ye(l,sg(function(ac){return[ac.top,ac.bottom]})),
d),Zg(Ye(l,sg(function(ac){return ac.items})),xc),Bg({listState:l,topItemsIndexes:a,endReached:dk(Ye(l,qh(function(ac){return 0<ac.items.length}),Fh(E,W),qh(function(ac){var pc=ac[0].items;return pc[pc.length-1].originalIndex===ac[1]-1}),sg(function(ac){return[ac[1]-1,ac[2]]}),Mg(Jj),sg(function(ac){return ac[0]}))),startReached:dk(Ye(l,pj(200),qh(function(ac){var pc=ac.items;return 0<pc.length&&pc[0].originalIndex===ac.topItems.length}),sg(function(ac){return ac.items[0].index}),Mg())),rangeChanged:dk(Ye(l,
qh(function(ac){return 0<ac.items.length}),sg(function(ac){ac=ac.items;for(var pc=0,mc=ac.length-1;"group"===ac[pc].type&&pc<mc;)pc++;for(;"group"===ac[mc].type&&mc>pc;)mc--;return{startIndex:ac[pc].index,endIndex:ac[mc].index}}),Mg(Fk))),itemsRendered:xc},Vb)},Yh(Do,ys,Dt,Rv,Iq,kp,sn,Qv),{singleton:!0}),HB=bi(function(a){var d=a[0],l=d.sizes,E=d.firstItemIndex,W=d.data;d=d.gap;var ka=a[1].listState;a=a[2].didMount;var oa=Yf(0);return Zg(Ye(a,Fh(oa),qh(function(Fa){return 0!==Fa[1]}),Fh(l,E,d,W),
sg(function(Fa){var Qa=Fa[0][1],Xa=Fa[1],db=Fa[2],kb=Fa[3];Fa=Fa[4];var Lb=void 0===Fa?[]:Fa;Fa=0;if(0<Xa.groupIndices.length)for(var Vb,Qb=vm(Xa.groupIndices);!((Vb=Qb()).done||Vb.value-Fa>=Qa);)Fa++;Qa+=Fa;return Mn(Array.from({length:Qa}).map(function(lc,xc){return{index:xc,size:0,offset:0,data:Lb[xc]}}),[],Qa,kb,Xa,db)})),ka),{initialItemCount:oa}},Yh(Do,zs,sn),{singleton:!0}),Ox=bi(function(a){a=a[0].scrollVelocity;var d=Yf(!1),l=Cg(),E=Yf(!1);return Zg(Ye(a,Fh(E,d,l),qh(function(W){return!!W[1]}),
sg(function(W){var ka=W[0],oa=W[1],Fa=W[2];W=W[3];var Qa=oa.enter;if(Fa){if((0,oa.exit)(ka,W))return!1}else if(Qa(ka,W))return!0;return Fa}),Mg()),d),lh(Ye(Tj(d,a,l),Fh(E)),function(W){var ka=W[0];W=W[1];return ka[0]&&W&&W.change&&W.change(ka[1],ka[2])}),{isSeeking:d,scrollSeekConfiguration:E,scrollVelocity:a,scrollSeekRangeChanged:l}},Yh(kp),{singleton:!0}),tn=bi(function(a){a=a[0].topItemsIndexes;var d=Yf(0);return Zg(Ye(d,qh(function(l){return 0<l}),sg(function(l){return Array.from({length:l}).map(function(E,
W){return W})})),a),{topItemCount:d}},Yh(zs)),Eu=bi(function(a){var d=a[0],l=d.footerHeight,E=d.headerHeight,W=d.fixedHeaderHeight;d=d.fixedFooterHeight;var ka=a[1].listState;a=Cg();l=Sj(Ye(Tj(l,d,E,W,ka),sg(function(oa){var Fa=oa[4];return oa[0]+oa[1]+oa[2]+oa[3]+Fa.offsetBottom+Fa.bottom})),0);return Zg(Uh(l),a),{totalListHeight:l,totalListHeightChanged:a}},Yh(Qn,zs),{singleton:!0}),GB=sq(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),Eo=bi(function(a){function d(xc){0<
xc?(E(0,{top:-xc,behavior:"auto"}),ka(0,0)):(ka(0,0),E(0,{top:-xc,behavior:"auto"}))}var l=a[0],E=l.scrollBy,W=l.scrollTop,ka=l.deviation,oa=l.scrollingInProgress,Fa=a[1];l=Fa.isScrolling;var Qa=Fa.isAtBottom,Xa=Fa.scrollDirection,db=a[3],kb=db.beforeUnshiftWith,Lb=db.shiftWithOffset,Vb=db.sizes;db=db.gap;var Qb=a[4].log,lc=a[5].recalcInProgress;a=dk(Ye(a[2].listState,Fh(Fa.lastJumpDueToItemResize),em(function(xc,ac){var pc=xc[1],mc=ac[0],Jc=mc.items,Qc=mc.totalCount;mc=mc.bottom+mc.offsetBottom;
var td=0;return xc[2]===Qc&&0<pc.length&&0<Jc.length&&(0===Jc[0].originalIndex&&0===pc[0].originalIndex||0!=(td=mc-xc[3])&&(td+=ac[1])),[td,Jc,Qc,mc]},[0,[],0,0]),qh(function(xc){return 0!==xc[0]}),Fh(W,Xa,oa,Qa,Qb),qh(function(xc){return!xc[3]&&0!==xc[1]&&"up"===xc[2]}),sg(function(xc){var ac=xc[0][0];return(0,xc[5])("Upward scrolling compensation",{amount:ac},Km.DEBUG),ac})));return lh(Ye(a,Fh(ka,l)),function(xc){var ac=xc[0],pc=xc[1];xc[2]&&GB()?ka(0,pc-ac):d(-ac)}),lh(Ye(Tj(Sj(l,!1),ka,lc),qh(function(xc){return!xc[0]&&
!xc[2]&&0!==xc[1]}),sg(function(xc){return xc[1]}),pj(1)),d),Zg(Ye(Lb,sg(function(xc){return{top:-xc}})),E),lh(Ye(kb,Fh(Vb,db),sg(function(xc){var ac=xc[0];return ac*xc[1].lastSize+ac*xc[2]})),function(xc){ka(0,xc);requestAnimationFrame(function(){ok(E,{top:xc});requestAnimationFrame(function(){ka(0,0);lc(0,!1)})})}),{deviation:ka}},Yh(Qn,kp,zs,Do,Co,Qv)),Id=bi(function(a){var d=a[0].totalListHeight,l=a[1].didMount,E=a[2].scrollTo;a=Yf(0);return lh(Ye(l,Fh(a),qh(function(W){return 0!==W[1]}),sg(function(W){return{top:W[1]}})),
function(W){ci(Ye(d,qh(function(ka){return 0!==ka})),function(){setTimeout(function(){E(0,W)})})}),{initialScrollTop:a}},Yh(Eu,sn,Qn),{singleton:!0}),IB=bi(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var l=Yf(!1);return{alignToBottom:l,paddingTopAddition:Sj(Ye(Tj(l,d,a),qh(function(E){return E[0]}),sg(function(E){return Math.max(0,E[1]-E[2])}),Mg()),0)}},Yh(Qn,Eu),{singleton:!0}),ii=bi(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var l=Cg(),E=Cg(),W=Cg(),ka=Yf(!1),
oa=Yf(void 0);return Zg(Ye(Tj(l,E),sg(function(Fa){var Qa=Fa[0];return{scrollTop:Math.max(0,Qa.scrollTop-Fa[1].offsetTop),scrollHeight:Qa.scrollHeight,viewportHeight:Qa.viewportHeight}})),d),Zg(Ye(a,Fh(E),sg(function(Fa){var Qa=Fa[0];return Bg({},Qa,{top:Qa.top+Fa[1].offsetTop})})),W),{useWindowScroll:ka,customScrollParent:oa,windowScrollContainerState:l,windowViewportRect:E,windowScrollTo:W}},Yh(Qn)),Bi=["done","behavior","align"],JB=bi(function(a){var d=a[0],l=d.sizes,E=d.totalCount;d=d.gap;var W=
a[1],ka=W.scrollTop,oa=W.viewportHeight,Fa=W.headerHeight,Qa=W.fixedHeaderHeight,Xa=W.fixedFooterHeight,db=W.scrollingInProgress;a=a[2].scrollToIndex;W=Cg();return Zg(Ye(W,Fh(l,oa,E,Fa,Qa,Xa,ka),Fh(d),sg(function(kb){var Lb=kb[0],Vb=Lb[0],Qb=Lb[1],lc=Lb[2],xc=Lb[3],ac=Lb[4],pc=Lb[5],mc=Lb[6];Lb=Lb[7];var Jc=kb[1];kb=Vb.done;var Qc=Vb.behavior,td=Vb.align,he=eo(Vb,Bi),ne=null;Vb=fh(Vb,Qb,xc-1);ac=qi(Vb,Qb.offsetTree,Jc)+ac+pc;return ac<Lb+pc?ne=Bg({},he,{behavior:Qc,align:null!=td?td:"start"}):ac+
wa(Qb.sizeTree,Vb)[1]>Lb+lc-mc&&(ne=Bg({},he,{behavior:Qc,align:null!=td?td:"end"})),ne?kb&&ci(Ye(db,zn(1),qh(function(Ge){return!1===Ge})),kb):kb&&kb(),ne}),qh(function(kb){return null!==kb})),a),{scrollIntoView:W}},Yh(Do,Qn,Iq,zs,Co),{singleton:!0}),Fu=["listState","topItemsIndexes"],Sv=bi(function(a){return Bg({},a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},Yh(Dt,HB,sn,Ox,Eu,Id,IB,ii,JB)),Px=bi(function(a){var d=a[0],l=d.totalCount,E=d.sizeRanges,W=d.fixedItemSize,ka=d.defaultItemSize,oa=d.trackItemSizes,
Fa=d.itemSize,Qa=d.data,Xa=d.firstItemIndex,db=d.groupIndices,kb=d.statefulTotalCount;d=d.gap;var Lb=a[1],Vb=Lb.initialTopMostItemIndex;Lb=Lb.scrolledToInitialItem;var Qb=a[2],lc=a[3],xc=a[4],ac=xc.listState,pc=xc.topItemsIndexes;xc=eo(xc,Fu);var mc=a[5].scrollToIndex,Jc=a[7].topItemCount,Qc=a[8].groupCounts,td=a[9];a=a[10];return Zg(xc.rangeChanged,td.scrollSeekRangeChanged),Zg(Ye(td.windowViewportRect,sg(function(he){return he.visibleHeight})),Qb.viewportHeight),Bg({totalCount:l,data:Qa,firstItemIndex:Xa,
sizeRanges:E,initialTopMostItemIndex:Vb,scrolledToInitialItem:Lb,topItemsIndexes:pc,topItemCount:Jc,groupCounts:Qc,fixedItemHeight:W,defaultItemHeight:ka,gap:d},lc,{statefulTotalCount:kb,listState:ac,scrollToIndex:mc,trackItemSizes:oa,itemSize:Fa,groupIndices:db},xc,td,Qb,a)},Yh(Do,Rv,Qn,Qo,zs,Iq,Eo,tn,ys,Sv,Co)),KB=sq(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":
"sticky"}),As=rh.createContext(void 0),Qx=rh.createContext(void 0),LB=["placeholder"],Kq=["style","children"],MB=["style","children"],NB=bi(function(){var a=Yf(function(Qa){return"Item "+Qa}),d=Yf(null),l=Yf(function(Qa){return"Group "+Qa}),E=Yf({}),W=Yf(vh),ka=Yf("div"),oa=Yf(ml),Fa=function(Qa,Xa){return void 0===Xa&&(Xa=null),Sj(Ye(E,sg(function(db){return db[Qa]}),Mg()),Xa)};return{context:d,itemContent:a,groupContent:l,components:E,computeItemKey:W,headerFooterTag:ka,scrollerRef:oa,FooterComponent:Fa("Footer"),
HeaderComponent:Fa("Header"),TopItemListComponent:Fa("TopItemList"),ListComponent:Fa("List","div"),ItemComponent:Fa("Item","div"),GroupComponent:Fa("Group","div"),ScrollerComponent:Fa("Scroller","div"),EmptyPlaceholder:Fa("EmptyPlaceholder"),ScrollSeekPlaceholder:Fa("ScrollSeekPlaceholder")}}),OB=bi(function(a){function d(W,ka,oa){Zg(Ye(W,Fh(E.components),sg(function(Fa){var Qa,Xa=Fa[0];Fa=Fa[1];return console.warn("react-virtuoso: "+oa+" property is deprecated. Pass components."+ka+" instead."),
Bg({},Fa,((Qa={})[ka]=Xa,Qa))})),E.components)}var l=a[0],E=a[1];a={item:nn(E.itemContent,"Rename the %citem%c prop to %citemContent."),group:nn(E.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:nn(l.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:nn(l.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:nn(l.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Cg(),
maxHeightCacheSize:Cg(),footer:Cg(),header:Cg(),HeaderContainer:Cg(),FooterContainer:Cg(),ItemContainer:Cg(),ScrollContainer:Cg(),GroupContainer:Cg(),ListContainer:Cg(),emptyComponent:Cg(),scrollSeek:Cg()};return lh(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),lh(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
lh(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),lh(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),lh(a.scrollSeek,function(W){var ka=W.placeholder;
W=eo(W,LB);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Bg({},(0,E.components)(4),{ScrollSeekPlaceholder:ka});(0,E.components)(0,ka);(0,l.scrollSeekConfiguration)(0,W)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),d(a.emptyComponent,
"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),Bg({},l,E,a)},Yh(Px,NB)),PB=function(a){return rh.createElement("div",{style:{height:a.height}})},QB={position:KB(),zIndex:1,overflowAnchor:"none"},rr={overflowAnchor:"none"},Rx=rh.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=yj("listState"),l=Ro("sizeRanges"),E=yj("useWindowScroll"),W=yj("customScrollParent"),ka=Ro("windowScrollContainerState"),oa=Ro("scrollContainerState");E=W||E?ka:oa;var Fa=yj("itemContent"),
Qa=yj("context"),Xa=yj("groupContent");ka=yj("trackItemSizes");oa=yj("itemSize");var db=yj("log"),kb=Ro("gap");l=Gj(l,oa,ka,a?ml:E,db,kb,W).callbackRef;W=rh.useState(0);var Lb=W[0],Vb=W[1];Tx("deviation",function(Jc){Lb!==Jc&&Vb(Jc)});W=yj("EmptyPlaceholder");var Qb=yj("ScrollSeekPlaceholder")||PB;E=yj("ListComponent");var lc=yj("ItemComponent"),xc=yj("GroupComponent"),ac=yj("computeItemKey"),pc=yj("isSeeking"),mc=0<yj("groupIndices").length;ka=yj("paddingTopAddition");ka=a?{}:{boxSizing:"border-box",
paddingTop:d.offsetTop+ka,paddingBottom:d.offsetBottom,marginTop:Lb};return!a&&0===d.totalCount&&W?(0,wi.createElement)(W,Fi(W,Qa)):(0,wi.createElement)(E,Bg({},Fi(E,Qa),{ref:l,style:ka,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(Jc){var Qc=Jc.originalIndex,td=ac(Qc+d.firstItemIndex,Jc.data,Qa);return pc?(0,wi.createElement)(Qb,Bg({},Fi(Qb,Qa),{key:td,index:Jc.index,height:Jc.size,type:Jc.type||"item"},"group"===Jc.type?{}:{groupIndex:Jc.groupIndex})):
"group"===Jc.type?(0,wi.createElement)(xc,Bg({},Fi(xc,Qa),{key:td,"data-index":Qc,"data-known-size":Jc.size,"data-item-index":Jc.index,style:QB}),Xa(Jc.index)):(0,wi.createElement)(lc,Bg({},Fi(lc,Qa),{key:td,"data-index":Qc,"data-known-size":Jc.size,"data-item-index":Jc.index,"data-item-group-index":Jc.groupIndex,style:rr}),mc?Fa(Jc.index,Jc.groupIndex,Jc.data,Qa):Fa(Jc.index,Jc.data,Qa))}))}),RB={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},sr=
{width:"100%",height:"100%",position:"absolute",top:0},EG={width:"100%",position:KB(),top:0},Et=rh.memo(function(){var a=yj("HeaderComponent"),d=Ro("headerHeight"),l=yj("headerFooterTag"),E=Vh(function(ka){return d(Vm(ka,"height"))}),W=yj("context");return a?(0,wi.createElement)(l,{ref:E},(0,wi.createElement)(a,Fi(a,W))):null}),SB=rh.memo(function(){var a=yj("FooterComponent"),d=Ro("footerHeight"),l=yj("headerFooterTag"),E=Vh(function(ka){return d(Vm(ka,"height"))}),W=yj("context");return a?(0,wi.createElement)(l,
{ref:E},(0,wi.createElement)(a,Fi(a,W))):null}),FG=function(a){a=a.children;var d=(0,wi.useContext)(As),l=Ro("viewportHeight"),E=Ro("fixedItemHeight"),W=Vh(wj(l,function(ka){return Vm(ka,"height")}));return rh.useEffect(function(){d&&(l(d.viewportHeight),E(d.itemHeight))},[d,l,E]),rh.createElement("div",{style:sr,ref:W,"data-viewport-type":"element"},a)},Sx=function(a){a=a.children;var d=(0,wi.useContext)(As),l=Ro("windowViewportRect"),E=Ro("fixedItemHeight"),W=yj("customScrollParent");W=bo(l,W);
return rh.useEffect(function(){d&&(E(d.itemHeight),l({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,l,E]),rh.createElement("div",{ref:W,style:sr,"data-viewport-type":"window"},a)},GG=function(a){a=a.children;var d=yj("TopItemListComponent"),l=yj("headerHeight");l=Bg({},EG,{marginTop:l+"px"});var E=yj("context");return(0,wi.createElement)(d||"div",{style:l,context:E},a)},Gu=yn(OB,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},rh.memo(function(a){var d=yj("useWindowScroll"),l=0<yj("topItemsIndexes").length,E=yj("customScrollParent"),W=E||d?Sx:FG;return rh.createElement(E||d?IG:HG,Bg({},a),rh.createElement(W,null,rh.createElement(Et,null),rh.createElement(Rx,null),rh.createElement(SB,
null)),l&&rh.createElement(GG,null,rh.createElement(Rx,{showTopList:!0})))})),TB=Gu.Component,Ro=Gu.usePublisher,yj=Gu.useEmitterValue,Tx=Gu.useEmitter,HG=Uo({usePublisher:Ro,useEmitterValue:yj,useEmitter:Tx}),IG=Zn({usePublisher:Ro,useEmitterValue:yj,useEmitter:Tx}),UB={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},JG={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},VB=Math.round,WB=Math.ceil,Tv=Math.floor,Uv=Math.min,Bs=Math.max,
XB=bi(function(a){var d=a[0],l=d.overscan,E=d.visibleRange,W=d.listBoundary,ka=a[1];d=ka.scrollTop;var oa=ka.viewportHeight,Fa=ka.scrollBy,Qa=ka.scrollTo,Xa=ka.smoothScrollTargetReached,db=ka.scrollContainerState,kb=ka.footerHeight;ka=ka.headerHeight;var Lb=a[2],Vb=a[3],Qb=a[4],lc=Qb.propsReady,xc=Qb.didMount,ac=a[5];Qb=ac.windowViewportRect;var pc=ac.windowScrollTo,mc=ac.useWindowScroll,Jc=ac.customScrollParent;ac=ac.windowScrollContainerState;a=a[6];var Qc=Yf(0),td=Yf(0),he=Yf(UB),ne=Yf({height:0,
width:0}),Ge=Yf({height:0,width:0}),jf=Cg(),rf=Cg(),We=Yf(0),uf=Yf(void 0),Qd=Yf({row:0,column:0});Zg(Ye(Tj(xc,td,uf),qh(function(nd){return 0!==nd[1]}),sg(function(nd){return{items:Vo(0,nd[1]-1,nd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),he);Zg(Ye(Tj(Uh(Qc),E,Uh(Qd,Op),Uh(Ge,function(nd,qd){return nd&&nd.width===qd.width&&nd.height===qd.height}),uf),Fh(ne),sg(function(nd){var qd=nd[0],sd=qd[0],ke=qd[1],pf=ke[0],Af=ke[1],ng=qd[2],Kf=qd[3],$f=qd[4],Wg=nd[1];nd=ng.row;
var Of=ng.column;qd=Kf.height;ke=Kf.width;var Bh=Wg.width;if(0===sd||0===Bh)return UB;if(0===ke)return Bg({},JG,{items:Vo(0,0,$f)});Of=Bs(1,Tv((Bh+Of)/(ke+Of)));pf=Of*Tv((pf+nd)/(qd+nd));Af=Of*WB((Af+nd)/(qd+nd))-1;Af=Uv(sd-1,Bs(Af,Of-1));pf=Vo(Uv(Af,Bs(0,pf)),Af,$f);Kf=dn(Wg,ng,Kf,pf);ng=Kf.top;Kf=Kf.bottom;sd=WB(sd/Of);return{items:pf,offsetTop:ng,offsetBottom:sd*qd+(sd-1)*nd-Kf,top:ng,bottom:Kf,itemHeight:qd,itemWidth:ke}})),he);Zg(Ye(uf,qh(function(nd){return void 0!==nd}),sg(function(nd){return nd.length})),
Qc);Zg(Ye(ne,sg(function(nd){return nd.height})),oa);Zg(Ye(Tj(ne,Ge,he,Qd),sg(function(nd){nd=dn(nd[0],nd[3],nd[1],nd[2].items);return[nd.top,nd.bottom]}),Mg(Jj)),W);E=dk(Ye(Uh(he),qh(function(nd){return 0<nd.items.length}),Fh(Qc),qh(function(nd){var qd=nd[0].items;return qd[qd.length-1].index===nd[1]-1}),sg(function(nd){return nd[1]-1}),Mg()));W=dk(Ye(Uh(he),qh(function(nd){nd=nd.items;return 0<nd.length&&0===nd[0].index}),Ok(0),Mg()));oa=dk(Ye(Uh(he),qh(function(nd){return 0<nd.items.length}),sg(function(nd){nd=
nd.items;return{startIndex:nd[0].index,endIndex:nd[nd.length-1].index}}),Mg(Fk)));Zg(oa,Vb.scrollSeekRangeChanged);Zg(Ye(jf,Fh(ne,Ge,Qc,Qd),sg(function(nd){var qd=nd[1],sd=nd[2],ke=nd[3],pf=nd[4],Af=ki(nd[0]);nd=Af.align;var ng=Af.behavior,Kf=Af.offset;Af=Af.index;"LAST"===Af&&(Af=ke-1);ke=In(qd,pf,sd,Bs(0,Af,Uv(ke-1,Af)));return"end"===nd?ke=VB(ke-qd.height+sd.height):"center"===nd&&(ke=VB(ke-qd.height/2+sd.height/2)),Kf&&(ke+=Kf),{top:ke,behavior:ng}})),Qa);xc=Sj(Ye(he,sg(function(nd){return nd.offsetBottom+
nd.bottom})),0);return Zg(Ye(Qb,sg(function(nd){return{width:nd.visibleWidth,height:nd.visibleHeight}})),ne),Bg({data:uf,totalCount:Qc,viewportDimensions:ne,itemDimensions:Ge,scrollTop:d,scrollHeight:rf,overscan:l,scrollBy:Fa,scrollTo:Qa,scrollToIndex:jf,smoothScrollTargetReached:Xa,windowViewportRect:Qb,windowScrollTo:pc,useWindowScroll:mc,customScrollParent:Jc,windowScrollContainerState:ac,deviation:We,scrollContainerState:db,footerHeight:kb,headerHeight:ka,initialItemCount:td,gap:Qd},Vb,{gridState:he,
totalListHeight:xc},Lb,{startReached:W,endReached:E,rangeChanged:oa,propsReady:lc},a)},Yh(Dt,Qn,kp,Ox,sn,ii,Co)),KG=["placeholder"],LG=bi(function(){var a=Yf(function(Xa){return"Item "+Xa}),d=Yf({}),l=Yf(null),E=Yf("virtuoso-grid-item"),W=Yf("virtuoso-grid-list"),ka=Yf(vh),oa=Yf("div"),Fa=Yf(ml),Qa=function(Xa,db){return void 0===db&&(db=null),Sj(Ye(d,sg(function(kb){return kb[Xa]}),Mg()),db)};return{context:l,itemContent:a,components:d,computeItemKey:ka,itemClassName:E,listClassName:W,headerFooterTag:oa,
scrollerRef:Fa,FooterComponent:Qa("Footer"),HeaderComponent:Qa("Header"),ListComponent:Qa("List","div"),ItemComponent:Qa("Item","div"),ScrollerComponent:Qa("Scroller","div"),ScrollSeekPlaceholder:Qa("ScrollSeekPlaceholder","div")}}),MG=bi(function(a){function d(W,ka,oa){Zg(Ye(W,Fh(E.components),sg(function(Fa){var Qa,Xa=Fa[0];Fa=Fa[1];return console.warn("react-virtuoso: "+oa+" property is deprecated. Pass components."+ka+" instead."),Bg({},Fa,((Qa={})[ka]=Xa,Qa))})),E.components)}var l=a[0],E=a[1];
a={item:nn(E.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Cg(),ScrollContainer:Cg(),ListContainer:Cg(),emptyComponent:Cg(),scrollSeek:Cg()};return lh(a.scrollSeek,function(W){var ka=W.placeholder;W=eo(W,KG);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=Bg({},(0,E.components)(4),{ScrollSeekPlaceholder:ka});(0,E.components)(0,ka);(0,l.scrollSeekConfiguration)(0,
W)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),Bg({},l,E,a)},Yh(XB,LG)),NG=rh.memo(function(){var a=Hl("gridState"),d=Hl("listClassName"),l=Hl("itemClassName"),E=Hl("itemContent"),W=Hl("computeItemKey"),ka=Hl("isSeeking"),oa=lp("scrollHeight"),Fa=Hl("ItemComponent"),Qa=Hl("ListComponent"),Xa=Hl("ScrollSeekPlaceholder"),db=Hl("context"),kb=lp("itemDimensions"),Lb=lp("gap"),Vb=Hl("log"),Qb=Vh(function(lc){oa(lc.parentElement.parentElement.scrollHeight);
var xc=lc.firstChild;xc&&kb(xc.getBoundingClientRect());Lb({row:Pl("row-gap",getComputedStyle(lc).rowGap,Vb),column:Pl("column-gap",getComputedStyle(lc).columnGap,Vb)})});return(0,wi.createElement)(Qa,Bg({ref:Qb,className:d},Fi(Qa,db),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(lc){var xc=W(lc.index,lc.data,db);return ka?(0,wi.createElement)(Xa,Bg({key:xc},Fi(Xa,db),{index:lc.index,height:a.itemHeight,width:a.itemWidth})):(0,wi.createElement)(Fa,Bg({},Fi(Fa,
db),{className:l,"data-index":lc.index,key:xc}),E(lc.index,lc.data,db))}))}),Lq=rh.memo(function(){var a=Hl("HeaderComponent"),d=lp("headerHeight"),l=Hl("headerFooterTag"),E=Vh(function(ka){return d(Vm(ka,"height"))}),W=Hl("context");return a?(0,wi.createElement)(l,{ref:E},(0,wi.createElement)(a,Fi(a,W))):null}),Ux=rh.memo(function(){var a=Hl("FooterComponent"),d=lp("footerHeight"),l=Hl("headerFooterTag"),E=Vh(function(ka){return d(Vm(ka,"height"))}),W=Hl("context");return a?(0,wi.createElement)(l,
{ref:E},(0,wi.createElement)(a,Fi(a,W))):null}),Vv=function(a){a=a.children;var d=(0,wi.useContext)(Qx),l=lp("itemDimensions"),E=lp("viewportDimensions"),W=Vh(function(ka){E(ka.getBoundingClientRect())});return rh.useEffect(function(){d&&(E({height:d.viewportHeight,width:d.viewportWidth}),l({height:d.itemHeight,width:d.itemWidth}))},[d,E,l]),rh.createElement("div",{style:sr,ref:W},a)},Wv=function(a){a=a.children;var d=(0,wi.useContext)(Qx),l=lp("windowViewportRect"),E=lp("itemDimensions"),W=Hl("customScrollParent");
W=bo(l,W);return rh.useEffect(function(){d&&(E({height:d.itemHeight,width:d.itemWidth}),l({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,l,E]),rh.createElement("div",{ref:W,style:sr},a)},Hu=yn(MG,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},rh.memo(function(a){a=Bg({},a);var d=Hl("useWindowScroll"),l=Hl("customScrollParent"),E=l||d?Wv:Vv;return rh.createElement(l||d?tr:Cs,Bg({},a),rh.createElement(E,null,rh.createElement(Lq,null),rh.createElement(NG,null),rh.createElement(Ux,null)))})),lp=Hu.usePublisher,Hl=Hu.useEmitterValue,Xv=Hu.useEmitter,Cs=Uo({usePublisher:lp,useEmitterValue:Hl,useEmitter:Xv}),tr=Zn({usePublisher:lp,useEmitterValue:Hl,useEmitter:Xv}),Vx=bi(function(){var a=Yf(function(Qa){return rh.createElement("td",
null,"Item $",Qa)}),d=Yf(null),l=Yf(null),E=Yf(null),W=Yf({}),ka=Yf(vh),oa=Yf(ml),Fa=function(Qa,Xa){return void 0===Xa&&(Xa=null),Sj(Ye(W,sg(function(db){return db[Qa]}),Mg()),Xa)};return{context:d,itemContent:a,fixedHeaderContent:l,fixedFooterContent:E,components:W,computeItemKey:ka,scrollerRef:oa,TableComponent:Fa("Table","table"),TableHeadComponent:Fa("TableHead","thead"),TableFooterComponent:Fa("TableFoot","tfoot"),TableBodyComponent:Fa("TableBody","tbody"),TableRowComponent:Fa("TableRow","tr"),
ScrollerComponent:Fa("Scroller","div"),EmptyPlaceholder:Fa("EmptyPlaceholder"),ScrollSeekPlaceholder:Fa("ScrollSeekPlaceholder"),FillerRow:Fa("FillerRow")}}),YB=bi(function(a){return Bg({},a[0],a[1])},Yh(Px,Vx)),Iu=function(a){return rh.createElement("tr",null,rh.createElement("td",{style:{height:a.height}}))},OG=function(a){return rh.createElement("tr",null,rh.createElement("td",{style:{height:a.height,padding:0,border:0}}))},ZB=rh.memo(function(){var a=nk("listState"),d=mp("sizeRanges"),l=nk("useWindowScroll"),
E=nk("customScrollParent"),W=mp("windowScrollContainerState"),ka=mp("scrollContainerState");l=E||l?W:ka;var oa=nk("itemContent");W=nk("trackItemSizes");E=Gj(d,nk("itemSize"),W,l,nk("log"),void 0,E);d=E.callbackRef;var Fa=E.ref;E=rh.useState(0);var Qa=E[0],Xa=E[1];Ft("deviation",function(ac){Qa!==ac&&(Fa.current.style.marginTop=ac+"px",Xa(ac))});W=nk("EmptyPlaceholder");var db=nk("ScrollSeekPlaceholder")||Iu;l=nk("FillerRow")||OG;E=nk("TableBodyComponent");var kb=nk("TableRowComponent"),Lb=nk("computeItemKey"),
Vb=nk("isSeeking");ka=nk("paddingTopAddition");var Qb=nk("firstItemIndex"),lc=nk("statefulTotalCount"),xc=nk("context");if(0===lc&&W)return(0,wi.createElement)(W,Fi(W,xc));W=a.offsetTop+ka+Qa;ka=a.offsetBottom;W=0<W?rh.createElement(l,{height:W,key:"padding-top"}):null;l=0<ka?rh.createElement(l,{height:ka,key:"padding-bottom"}):null;a=a.items.map(function(ac){var pc=ac.originalIndex,mc=Lb(pc+Qb,ac.data,xc);return Vb?(0,wi.createElement)(db,Bg({},Fi(db,xc),{key:mc,index:ac.index,height:ac.size,type:ac.type||
"item"})):(0,wi.createElement)(kb,Bg({},Fi(kb,xc),{key:mc,"data-index":pc,"data-known-size":ac.size,"data-item-index":ac.index,style:{overflowAnchor:"none"}}),oa(ac.index,ac.data,xc))});return(0,wi.createElement)(E,Bg({ref:d,"data-test-id":"virtuoso-item-list"},Fi(E,xc)),[W].concat(a,[l]))}),kq=function(a){a=a.children;var d=(0,wi.useContext)(As),l=mp("viewportHeight"),E=mp("fixedItemHeight"),W=Vh(wj(l,function(ka){return Vm(ka,"height")}));return rh.useEffect(function(){d&&(l(d.viewportHeight),E(d.itemHeight))},
[d,l,E]),rh.createElement("div",{style:sr,ref:W,"data-viewport-type":"element"},a)},$B=function(a){a=a.children;var d=(0,wi.useContext)(As),l=mp("windowViewportRect"),E=mp("fixedItemHeight"),W=nk("customScrollParent");W=bo(l,W);return rh.useEffect(function(){d&&(E(d.itemHeight),l({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,l,E]),rh.createElement("div",{ref:W,style:sr,"data-viewport-type":"window"},a)},Ju=yn(YB,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},rh.memo(function(a){var d=nk("useWindowScroll"),l=nk("customScrollParent"),E=mp("fixedHeaderHeight"),W=mp("fixedFooterHeight"),ka=nk("fixedHeaderContent"),oa=nk("fixedFooterContent"),Fa=nk("context");E=Vh(wj(E,function(kb){return Vm(kb,
"height")}));var Qa=Vh(wj(W,function(kb){return Vm(kb,"height")}));W=l||d?lo:aC;d=l||d?$B:kq;l=nk("TableComponent");var Xa=nk("TableHeadComponent"),db=nk("TableFooterComponent");ka=ka?rh.createElement(Xa,Bg({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:E},Fi(Xa,Fa)),ka()):null;oa=oa?rh.createElement(db,Bg({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Qa},Fi(db,Fa)),oa()):null;return rh.createElement(W,Bg({},a),rh.createElement(d,null,rh.createElement(l,Bg({style:{borderSpacing:0}},
Fi(l,Fa)),[ka,rh.createElement(ZB,{key:"TableBody"}),oa])))})),mp=Ju.usePublisher,nk=Ju.useEmitterValue,Ft=Ju.useEmitter,aC=Uo({usePublisher:mp,useEmitterValue:nk,useEmitter:Ft}),lo=Zn({usePublisher:mp,useEmitterValue:nk,useEmitter:Ft}),bC=yf(V(22)),Fo=function(a){function d(l){l=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+l+" for more information.")||this;if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return l}to(d,a);return d}(sp(Error)),cC={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",
darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",
gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",
olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},PG=/^#[a-fA-F0-9]{6}$/,dC=/^#[a-fA-F0-9]{8}$/,Yv=/^#[a-fA-F0-9]{3}$/,Zv=/^#[a-fA-F0-9]{4}$/,Wx=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,eC=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,
fC=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,gC=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Ku=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},Xx=Qp(Rp,Rp.length,[]);sb=V(586);var Lm=yf(V(22)),pi=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||
0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const l=a.ownerDocument,E=l.activeElement;E!==a&&a.focus();l.execCommand("insertText",!1,d)||pi.insertTextFirefox(a,d);E===l.body?a.blur():E instanceof HTMLElement&&E!==a&&E.focus()}static set(a,d){a.select();pi.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:l}=a;return a.value.slice(d?d:void 0,l?l:void 0)}static wrapSelection(a,d,l){const {selectionStart:E,
selectionEnd:W}=a,ka=pi.getSelection(a);pi.insert(a,d+ka+(null!=l?l:d));a.selectionStart=(E||0)+d.length;a.selectionEnd=(W||0)+d.length}static replace(a,d,l){let E=0;a.value.replace(d,(...W)=>{const ka=E+W[W.length-2],oa=W[0].length;a.selectionStart=ka;a.selectionEnd=ka+oa;W="string"===typeof l?l:l(...W);pi.insert(a,W);a.selectionStart=ka;E+=W.length-oa;return W})}static findLineEnd(a,d){const l=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(l)?d:l+1}static indent(a){var d;const {selectionStart:l,
selectionEnd:E,value:W}=a;var ka=W.slice(l,E);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=W.lastIndexOf("\n",l-1)+1;var oa=a.value.slice(d,E-1);ka=oa.replace(/^|\n/g,"$\x26  ");oa=ka.length-oa.length;a.setSelectionRange(d,E-1);pi.insert(a,ka);a.setSelectionRange(l+1,E+oa)}else pi.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:l,value:E}=a;var W=E.lastIndexOf("\n",d-1)+1;const ka=pi.findLineEnd(E,l);var oa=a.value.slice(W,ka);const Fa=oa.replace(/(^|\n)(\t| {1,2})/g,
"$1");oa=oa.length-Fa.length;a.setSelectionRange(W,ka);pi.insert(a,Fa);W=(W=/\t| {1,2}/.exec(E.slice(W,d)))?W[0].length:0;a.setSelectionRange(d-W,Math.max(d-W,l-oa))}};sb=V(586);var Gp=a=>a.stopPropagation(),ur=Lm.memo(function({font:a,text:d,color:l,fontStyle:E,fontSize:W,fontWeight:ka,offsetX:oa=0,offsetY:Fa=0,scale:Qa=1,isEditing:Xa=!1,pointerEvents:db=!1,onBlur:kb,onChange:Lb}){const Vb=Lm.useRef(null),Qb=Lm.useRef(!1),lc=Lm.useCallback(Qc=>{Lb(nt.normalizeText(Qc.currentTarget.value))},[Lb]),
xc=Lm.useCallback(Qc=>{if("Escape"!==Qc.key)if("Tab"===Qc.key&&0===d.length)Qc.preventDefault();else{if("Meta"!==Qc.key&&!Qc.metaKey)Qc.stopPropagation();else if("z"===Qc.key&&Qc.metaKey){document.execCommand(Qc.shiftKey?"redo":"undo",!1);Qc.stopPropagation();Qc.preventDefault();return}"Tab"===Qc.key&&(Qc.preventDefault(),Qc.shiftKey?pi.unindent(Qc.currentTarget):pi.indent(Qc.currentTarget),null==Lb?void 0:Lb(nt.normalizeText(Qc.currentTarget.value)))}},[Lb]),ac=Lm.useCallback(Qc=>{Xa&&(Qc.currentTarget.setSelectionRange(0,
0),null==kb?void 0:kb())},[kb]),pc=Lm.useCallback(Qc=>{Xa&&Qb.current&&document.activeElement===Qc.currentTarget&&Qc.currentTarget.select()},[Xa]),mc=Lm.useCallback(Qc=>{Xa&&Qc.stopPropagation()},[Xa]);Lm.useEffect(()=>{Xa&&requestAnimationFrame(()=>{Qb.current=!0;const Qc=Vb.current;Qc&&(Qc.focus(),Qc.select())})},[Xa,kb]);const Jc=Lm.useRef(null);Lm.useLayoutEffect(()=>{const Qc=Jc.current;if(Qc){var td=Hj(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:W,lineHeight:1,fontWeight:ka},
4);Qc.style.transform=`scale(${Qa}, ${Qa}) translate(${oa}px, ${Fa}px)`;Qc.style.width=td[0]+1+"px";Qc.style.height=td[1]+1+"px"}},[d,ka,W,Fa,oa,Qa]);return(0,sb.jsx)("div",{className:"tl-text-label-wrapper",children:(0,sb.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Jc,style:{font:a,fontStyle:E,fontSize:W,fontWeight:ka,color:l,pointerEvents:db?"all":"none",userSelect:Xa?"text":"none"},children:[Xa?(0,sb.jsx)("textarea",{ref:Vb,style:{font:a,color:l,fontStyle:E,fontSize:W,fontWeight:ka},
className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:l,onFocus:pc,onChange:lc,onKeyDown:xc,onBlur:ac,onPointerDown:mc,onContextMenu:Gp,onCopy:Gp,onPaste:Gp,onCut:Gp}):d,"​"]})})});sb=V(586);var Lu={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Zm=class extends fo{constructor(){super(...arguments);gb(this,
"canEdit",!0);gb(this,"ReactComponent",ff(({events:a,isErasing:d,isBinding:l,isSelected:E,isEditing:W,onEditingEnd:ka})=>{const {props:{size:[oa,Fa],stroke:Qa,fill:Xa,noFill:db,strokeWidth:kb,strokeType:Lb,borderRadius:Vb,opacity:Qb,label:lc,italic:xc,fontWeight:ac,fontSize:pc}}=this;var mc=lc||W?Hj(lc,{fontFamily:"var(--ls-font-family)",fontSize:pc,lineHeight:1,fontWeight:ac},4):[0,0];const Jc=me.mul(this.props.size,.5);mc=Math.max(.5,Math.min(1,oa/mc[0],Fa/mc[1]));const Qc=this.getBounds(),td=bC.useMemo(()=>
me.sub(Jc,me.toFixed([Qc.width/2,Qc.height/2])),[Qc,mc,Jc]),he=bC.useCallback(ne=>{var Ge;null==(Ge=this.update)?void 0:Ge.call(this,{label:ne})},[lc]);return(0,sb.jsxs)("div",of(oe({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,sb.jsx)(ur,{font:"20px / 1 var(--ls-font-family)",text:lc,color:ah(Qa,"text"),offsetX:td[0],offsetY:td[1],fontSize:pc,scale:mc,isEditing:W,onChange:he,onBlur:ka,fontStyle:xc?"italic":"normal",fontWeight:ac,pointerEvents:!!lc}),
(0,sb.jsxs)(fp,{opacity:d?.2:Qb,children:[l&&(0,sb.jsx)(yp,{mode:"svg",strokeWidth:kb,size:[oa,Fa]}),(0,sb.jsx)("rect",{className:E||!db?"tl-hitarea-fill":"tl-hitarea-stroke",x:kb/2,y:kb/2,rx:Vb,ry:Vb,width:Math.max(.01,oa-kb),height:Math.max(.01,Fa-kb),pointerEvents:"all"}),(0,sb.jsx)("rect",{x:kb/2,y:kb/2,rx:Vb,ry:Vb,width:Math.max(.01,oa-kb),height:Math.max(.01,Fa-kb),strokeWidth:kb,stroke:ah(Qa,"stroke"),strokeDasharray:"dashed"===Lb?"8 2":void 0,fill:db?"none":ah(Xa,"background")})]})]}))}));
gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:Lu[null!=a?a:"md"],strokeWidth:Lu[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",ff(()=>{const {props:{size:[a,d],borderRadius:l,isLocked:E}}=this;return(0,sb.jsx)("g",{children:(0,sb.jsx)("rect",{width:a,height:d,rx:l,ry:l,fill:"transparent",strokeDasharray:E?"8 2":void 0})})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));
void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return Pm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};gb(Zm,"id","box");gb(Zm,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});ie([Ef],Zm.prototype,"scaleLevel",1);ie([wg],Zm.prototype,"setScaleLevel",2);var Yx=yf(V(22));sb=V(586);var $v=
{xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ds=class extends Dw{constructor(){super(...arguments);gb(this,"canEdit",!0);gb(this,"ReactComponent",ff(({isSelected:a,isErasing:d,events:l,isEditing:E,onEditingEnd:W})=>{const {size:[ka,oa],stroke:Fa,fill:Qa,noFill:Xa,strokeWidth:db,strokeType:kb,opacity:Lb,label:Vb,italic:Qb,fontWeight:lc,fontSize:xc}=this.props;var ac=Vb||E?Hj(Vb,{fontFamily:"var(--ls-font-family)",fontSize:xc,lineHeight:1,fontWeight:lc},4):[0,0];const pc=me.mul(this.props.size,.5);ac=Math.max(.5,
Math.min(1,ka/ac[0],oa/ac[1]));const mc=this.getBounds(),Jc=Yx.useMemo(()=>me.sub(pc,me.toFixed([mc.width/2,mc.height/2])),[mc,ac,pc]),Qc=Yx.useCallback(td=>{var he;null==(he=this.update)?void 0:he.call(this,{label:td})},[Vb]);return(0,sb.jsxs)("div",of(oe({},l),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,sb.jsx)(ur,{font:"18px / 1 var(--ls-font-family)",text:Vb,color:ah(Fa,"text"),offsetX:Jc[0],offsetY:Jc[1],scale:ac,isEditing:E,onChange:Qc,
onBlur:W,fontStyle:Qb?"italic":"normal",fontSize:xc,fontWeight:lc,pointerEvents:!!Vb}),(0,sb.jsxs)(fp,of(oe({},l),{opacity:d?.2:Lb,children:[(0,sb.jsx)("ellipse",{className:a||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ka/2,cy:oa/2,rx:Math.max(.01,(ka-db)/2),ry:Math.max(.01,(oa-db)/2)}),(0,sb.jsx)("ellipse",{cx:ka/2,cy:oa/2,rx:Math.max(.01,(ka-db)/2),ry:Math.max(.01,(oa-db)/2),strokeWidth:db,stroke:ah(Fa,"stroke"),strokeDasharray:"dashed"===kb?"8 2":void 0,fill:Xa?"none":ah(Qa,"background")})]}))]}))}));
gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:$v[null!=a?a:"md"],strokeWidth:$v[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",ff(()=>{const {size:[a,d],isLocked:l}=this.props;return(0,sb.jsx)("g",{children:(0,sb.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:l?"8 2":"undefined"})})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],
1));return Pm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,l],stroke:E,fill:W,noFill:ka,strokeWidth:oa,strokeType:Fa,opacity:Qa}=this.props;return(0,sb.jsxs)("g",{opacity:Qa,children:[(0,sb.jsx)("ellipse",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:l/2,rx:Math.max(.01,(d-oa)/2),ry:Math.max(.01,(l-oa)/2)}),(0,sb.jsx)("ellipse",{cx:d/2,cy:l/2,rx:Math.max(.01,(d-oa)/2),ry:Math.max(.01,(l-oa)/2),strokeWidth:oa,stroke:ah(E,
"stroke"),strokeDasharray:"dashed"===Fa?"8 2":void 0,fill:ka?"none":ah(W,"background")})]})}};gb(Ds,"id","ellipse");gb(Ds,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});ie([Ef],Ds.prototype,"scaleLevel",1);ie([wg],Ds.prototype,"setScaleLevel",2);sb=V(586);var Zx=class extends jv{constructor(){super(...arguments);gb(this,"ReactComponent",ff(({events:a})=>
{const d=this.getBounds(),l=ef(),E=l.selectedShapesArray.some(ka=>l.shapesInGroups([this]).includes(ka)),W=this.ReactIndicator;return(0,sb.jsxs)(fp,of(oe({},a),{className:"tl-group-container",children:[(0,sb.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),E&&(0,sb.jsx)("g",{stroke:"var(--color-selectedFill)",children:(0,sb.jsx)(W,{})})]}))}));gb(this,"ReactIndicator",ff(()=>{const a=this.getBounds();return(0,sb.jsx)("rect",
{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};gb(Zx,"id","group");gb(Zx,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});sb=V(586);var ck={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},np=class extends ft{constructor(a={}){super(a);gb(this,"ReactComponent",ff(({events:d,isErasing:l})=>{const {pointsPath:E,props:{stroke:W,strokeWidth:ka,opacity:oa}}=this;return(0,sb.jsx)(fp,of(oe({},d),{opacity:l?.2:1,children:(0,sb.jsx)("path",
{d:E,strokeWidth:16*ka,stroke:ah(W,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:oa})}))}));gb(this,"setScaleLevel",d=>yi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:ck[null!=d?d:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",ff(()=>{const {pointsPath:d,props:l}=this;return(0,sb.jsx)("path",{d,fill:"none",strokeDasharray:l.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",d=>{d=Pm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=
Math.max(d.strokeWidth,1));return d});Og(this)}get pointsPath(){const {points:a}=this.props;return St.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:l,opacity:E}}=this;return(0,sb.jsx)("path",{d:a,strokeWidth:16*l,stroke:ah(d,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:E})}};gb(np,"id","highlighter");gb(np,"defaultProps",{id:"highlighter",
parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});ie([Ef],np.prototype,"pointsPath",1);ie([Ef],np.prototype,"scaleLevel",1);ie([wg],np.prototype,"setScaleLevel",2);var Es=yf(V(22));sb=V(586);var $x={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Dj=class extends fo{constructor(){super(...arguments);gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"htmlAnchorRef",Es.createRef());
gb(this,"setScaleLevel",a=>yi(this,null,function*(){var d;const l=me.mul(this.props.size,$x[null!=a?a:"md"]/$x[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield Cl();this.update({size:l})}));gb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const l=this.htmlAnchorRef.current.getBoundingClientRect(),[E,W]=me.div([l.width,l.height],null!=(d=null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(E||400,1400),10),Math.max(Math.min(W||400,1400),10)]})}return this});
gb(this,"ReactComponent",ff(({events:a,isErasing:d,isEditing:l})=>{const {props:{html:E,scaleLevel:W}}=this,ka=vq(),oa=ef(),Fa=oa.selectedIds.has(this.id),Qa=ka||Fa&&!l||"select"!==oa.selectedTool.id,Xa=Es.useCallback(kb=>{Qa||kb.stopPropagation()},[Qa]),db=$x[null!=W?W:"md"];Es.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:oa.viewport.camera.zoom}),oa.persist(!0))},[]);return(0,sb.jsx)(ep,of(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,sb.jsx)("div",
{onWheelCapture:Xa,onPointerDown:Xa,onPointerUp:Xa,className:"tl-html-container",style:{pointerEvents:ka||!l&&!Fa?"none":"all",overflow:l?"auto":"hidden",width:`calc(100% / ${db})`,height:`calc(100% / ${db})`,transform:`scale(${db})`},children:(0,sb.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:E.trim()}})})}))}));gb(this,"ReactIndicator",ff(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,sb.jsx)("rect",{width:a,height:d,fill:"transparent",
strokeDasharray:l?"8 2":"undefined"})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Pm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};gb(Dj,"id","html");gb(Dj,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});ie([Ef],Dj.prototype,"scaleLevel",1);ie([wg],Dj.prototype,"setScaleLevel",2);var vr=yf(V(22));sb=V(586);var wr=class extends fo{constructor(){super(...arguments);
gb(this,"frameRef",vr.createRef());gb(this,"canEdit",!0);gb(this,"onIFrameSourceChange",a=>{this.update({url:a})});gb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});gb(this,"ReactComponent",ff(({events:a,isErasing:d,isEditing:l})=>{vr.useRef(null);const E=ef();return(0,sb.jsx)(ep,of(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,sb.jsx)("div",{className:"tl-iframe-container",
style:{pointerEvents:l||E.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,sb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,sb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));gb(this,"ReactIndicator",ff(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,sb.jsx)("rect",
{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:l?"8 2":"undefined"})}))}};gb(wr,"id","iframe");gb(wr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});ie([wg],wr.prototype,"onIFrameSourceChange",2);ie([wg],wr.prototype,"reload",2);var hC=yf(V(22));sb=V(586);var eh=class extends Ew{constructor(){super(...arguments);gb(this,"ReactComponent",ff(({events:a,isErasing:d,isBinding:l,asset:E})=>{const {props:{opacity:W,objectFit:ka,clipping:oa,size:[Fa,
Qa]}}=this,[Xa,db,kb,Lb]=Array.isArray(oa)?oa:[oa,oa,oa,oa],{handlers:Vb}=hC.useContext(Qk);return(0,sb.jsxs)(ep,of(oe({},a),{opacity:d?.2:W,children:[l&&(0,sb.jsx)(yp,{mode:"html",strokeWidth:4,size:[Fa,Qa]}),(0,sb.jsx)("div",{"data-asset-loaded":!!E,className:"tl-image-shape-container",children:E?(0,sb.jsx)("img",{src:Vb?Vb.makeAssetUrl(E.src):E.src,draggable:!1,style:{position:"relative",top:-Xa,left:-Lb,width:Fa+(Lb-db),height:Qa+(Xa-kb),objectFit:ka}}):"Asset is missing"})]}))}));gb(this,"ReactIndicator",
ff(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,sb.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:l?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,l;const E=this.getBounds(),{assetId:W,clipping:ka}=this.props;if(a=a.find(oa=>oa.id===W)){Array.isArray(ka);const oa=null==(l=null==(d=window.logseq)?void 0:d.api)?void 0:l.make_asset_url;return(0,sb.jsx)("image",{width:E.width,height:E.height,href:oa?oa(a.src):a.src})}return super.getShapeSVGJsx({})}};gb(eh,"id",
"image");gb(eh,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Gt=yf(V(22)),op=yf(V(22));sb=V(586);sb=V(586);var xr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Mu=op.memo(function({style:a,start:d,end:l,decorationStart:E,decorationEnd:W,scaleLevel:ka}){const oa=me.dist(d,l);if(2>oa)return null;const {strokeWidth:Fa}=a,Qa=1+Fa*xr[null!=ka?ka:"md"]/10,Xa="M"+me.toFixed(d)+"L"+me.toFixed(l);ka=
Math.min(oa/3,Fa*xr[null!=ka?ka:"md"]);E=E?Xo(d,l,ka):null;W=W?Xo(l,d,ka):null;return(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)("path",{className:"tl-stroke-hitarea",d:Xa}),(0,sb.jsx)("path",{d:Xa,strokeWidth:Qa,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),E&&(0,sb.jsx)(Jn,{left:E.left,middle:d,right:E.right,stroke:a.stroke,strokeWidth:Qa}),W&&(0,sb.jsx)(Jn,{left:W.left,middle:l,right:W.right,stroke:a.stroke,
strokeWidth:Qa})]})});sb=V(586);sb=V(586);var ay={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Fs=class extends du{constructor(){super(...arguments);gb(this,"hideSelection",!0);gb(this,"canEdit",!0);gb(this,"ReactComponent",ff(({events:a,isErasing:d,isEditing:l,onEditingEnd:E})=>{const {stroke:W,handles:{start:ka,end:oa},opacity:Fa,label:Qa,italic:Xa,fontWeight:db,fontSize:kb,id:Lb}=this.props,Vb=Qa||l?Hj(Qa||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:kb,lineHeight:1,fontWeight:db},6):[0,
0],Qb=me.med(ka.point,oa.point);var lc=me.dist(ka.point,oa.point);lc=Math.max(.5,Math.min(1,Math.max(lc/(Vb[1]+128),lc/(Vb[0]+128))));const xc=this.getBounds(),ac=Gt.useMemo(()=>me.sub(Qb,me.toFixed([xc.width/2,xc.height/2])),[xc,lc,Qb]),pc=Gt.useCallback(mc=>{var Jc;null==(Jc=this.update)?void 0:Jc.call(this,{label:mc})},[Qa]);return(0,sb.jsxs)("div",of(oe({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,sb.jsx)(ur,{font:"20px / 1 var(--ls-font-family)",
text:Qa,fontSize:kb,color:ah(W,"text"),offsetX:ac[0],offsetY:ac[1],scale:lc,isEditing:l,onChange:pc,onBlur:E,fontStyle:Xa?"italic":"normal",fontWeight:db,pointerEvents:!!Qa}),(0,sb.jsxs)(fp,{opacity:d?.2:Fa,id:Lb+"_svg",children:[(0,sb.jsx)(jm,{id:Lb,bounds:xc,labelSize:Vb,offset:ac,scale:lc}),(0,sb.jsx)("g",{pointerEvents:"none",mask:Qa||l?`url(#${Lb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:ay[null!=
a?a:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",ff(({isEditing:a})=>{const {id:d,decorations:l,label:E,strokeWidth:W,fontSize:ka,fontWeight:oa,handles:{start:Fa,end:Qa},isLocked:Xa}=this.props,db=this.getBounds(),kb=E||a?Hj(E,{fontFamily:"var(--ls-font-family)",fontSize:ka,lineHeight:1,fontWeight:oa},6):[0,0],Lb=me.med(Fa.point,Qa.point);var Vb=me.dist(Fa.point,Qa.point);Vb=Math.max(.5,Math.min(1,Math.max(Vb/(kb[1]+128),Vb/(kb[0]+128))));const Qb=Gt.useMemo(()=>me.sub(Lb,me.toFixed([db.width/
2,db.height/2])),[db,Vb,Lb]);return(0,sb.jsxs)("g",{children:[(0,sb.jsx)("path",{mask:E?`url(#${d}_clip)`:"",d:Wq({strokeWidth:W},Fa.point,Qa.point,null==l?void 0:l.start,null==l?void 0:l.end),strokeDasharray:Xa?"8 2":"undefined"}),E&&!a&&(0,sb.jsx)("rect",{x:db.width/2-kb[0]/2*Vb+Qb[0],y:db.height/2-kb[1]/2*Vb+Qb[1],width:kb[0]*Vb,height:kb[1]*Vb,rx:4*Vb,ry:4*Vb,fill:"transparent"})]})}));gb(this,"validateProps",a=>Pm(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,
fill:l,strokeWidth:E,strokeType:W,decorations:ka,label:oa,scaleLevel:Fa,handles:{start:Qa,end:Xa}}=this.props,db=me.med(Qa.point,Xa.point);return(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)(Mu,{style:{stroke:ah(d,"text"),fill:l,strokeWidth:E,strokeType:W},scaleLevel:Fa,start:Qa.point,end:Xa.point,decorationStart:null==ka?void 0:ka.start,decorationEnd:null==ka?void 0:ka.end}),a&&(0,sb.jsx)(sb.Fragment,{children:(0,sb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${db[0]}, ${db[1]})`,
textAnchor:"middle",fill:ah(d,"text"),stroke:ah(d,"text"),children:oa})})]})}};gb(Fs,"id","line");gb(Fs,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});ie([Ef],Fs.prototype,"scaleLevel",1);ie([wg],Fs.prototype,"setScaleLevel",2);var $m=yf(V(22));sb=
V(586);var yr={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Ht=ff(({type:a,fill:d,opacity:l,children:E})=>{const W="var(--ls-secondary-background-color)"!==d?ah(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?Vi(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,sb.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,sb.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",
style:{opacity:l,background:"P"===a?W:`linear-gradient(0deg, ${d}, ${W})`}}),(0,sb.jsx)("div",{className:"relative",children:E})]})}),bm=class extends fo{constructor(a={}){var d;super(a);gb(this,"hideRotateHandle",!0);gb(this,"canChangeAspectRatio",!0);gb(this,"canFlip",!0);gb(this,"canEdit",!0);gb(this,"persist",null);gb(this,"initialHeightCalculated",!0);gb(this,"getInnerHeight",null);gb(this,"setCollapsed",l=>yi(this,null,function*(){var E;if("B"===this.props.blockType){if(this.update({compact:l}),
this.canResize[1]=!l,!l)this.onResetBounds()}else{const W=this.props.size[1];this.canResize[1]=!l;this.update({isAutoResizing:!l,collapsed:l,size:[this.props.size[0],l?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:l?W:this.props.collapsedHeight})}null==(E=this.persist)?void 0:E.call(this)}));gb(this,"setScaleLevel",l=>yi(this,null,function*(){var E;const W=me.mul(this.props.size,yr[null!=l?l:"md"]/yr[null!=(E=this.props.scaleLevel)?E:"md"]);this.update({scaleLevel:l});yield Cl();
this.update({size:W})}));gb(this,"onResetBounds",l=>{l=this.getAutoResizeHeight();null!==l&&1<Math.abs(l-this.props.size[1])&&(this.update({size:[this.props.size[0],l]}),this.initialHeightCalculated=!0);return this});gb(this,"onResize",(l,E)=>{var W;const {bounds:ka,rotation:oa,scale:[Fa,Qa]}=E;l=[...this.scale];0>Fa&&(l[0]*=-1);0>Qa&&(l[1]*=-1);E=ka.height;this.props.isAutoResizing&&(E=null!=(W=this.getAutoResizeHeight())?W:E);return this.update({point:[ka.minX,ka.minY],size:[Math.max(1,ka.width),
Math.max(1,E)],scale:l,rotation:oa})});gb(this,"PortalComponent",ff(({})=>{const {props:{pageId:l,fill:E,opacity:W}}=this,{renderers:ka}=$m.useContext(Qk),oa=ef(),Fa=$m.useRef(null),[,Qa]=this.useComponentSize(Fa,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==ka||!ka.Page)return null;const {Page:Xa,Block:db}=ka,[kb,Lb]=$m.useState(!1);$m.useEffect(()=>{var Vb,Qb;if(this.props.isAutoResizing){const lc=(null!=(Qb=null==(Vb=this.getInnerHeight)?
void 0:Vb.call(this))?Qb:Qa)+this.getHeaderHeight();Qa&&1<Math.abs(lc-this.props.size[1])&&(this.update({size:[this.props.size[0],lc]}),kb&&oa.persist(!0))}},[Qa,this.props.isAutoResizing]);$m.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();oa.persist(!0)})},[this.initialHeightCalculated]);$m.useEffect(()=>{setTimeout(function(){Lb(!0)})},[]);return(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>
oa.viewport.camera.zoom?"optimizeSpeed":"auto",background:E&&"var(--ls-secondary-background-color)"!==E?Vi(E)?`var(--ls-highlight-color-${E})`:E:"var(--ls-secondary-background-color)",opacity:W}}),(0,sb.jsx)("div",{ref:Fa,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(kb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,sb.jsx)(db,{blockId:l}):(0,sb.jsx)(Xa,{pageName:l}))})]})}));gb(this,"ReactComponent",
ff(l=>{var E;const {events:W,isErasing:ka,isEditing:oa,isBinding:Fa}=l,{props:{opacity:Qa,pageId:Xa,fill:db,scaleLevel:kb,strokeWidth:Lb,size:Vb}}=this,Qb=ef(),{renderers:lc,handlers:xc}=$m.useContext(Qk);this.persist=()=>Qb.persist();const ac=vq(),pc=Qb.selectedIds.has(this.id)&&1===Qb.selectedIds.size,mc=Qb.isIn("logseq-portal.creating")&&!Xa,Jc=(ac||pc&&!oa||"select"!==Qb.selectedTool.id)&&!mc,Qc=$m.useCallback(nd=>{Jc||nd.stopPropagation()},[Jc]),td=1===Qb.selectedShapesArray.length&&Qb.selectedShapesArray.some(nd=>
"logseq-portal"===nd.type&&nd.props.id!==this.props.id&&Xa&&nd.props.pageId===Xa),he=yr[null!=kb?kb:"md"];$m.useEffect(()=>this.props.collapsed&&oa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[oa,this.props.collapsed]);$m.useEffect(()=>{if(mc){const nd=[Qb.viewport.bounds.width,Qb.viewport.bounds.height],qd=Qb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(qd[0]>nd[0]-400||qd[1]>nd[1]-
240||1.5<Qb.viewport.camera.zoom||.5>Qb.viewport.camera.zoom)&&Qb.viewport.zoomToBounds(of(oe({},this.bounds),{minY:this.bounds.maxY+25}))}},[Qb.viewport.bounds.height.toFixed(2)]);const ne=$m.useCallback(nd=>{this.initialHeightCalculated=!1;const qd=Gk(nd)?"B":"P";this.update({pageId:nd,size:[400,320],blockType:qd,compact:"B"===qd});Qb.selectTool("select");Qb.history.resume();Qb.history.persist()},[]),Ge=this.PortalComponent;var jf=$m.useMemo(()=>{var nd;if(Xa&&"B"===this.props.blockType)return null==
(nd=null==xc?void 0:xc.queryBlockByUUID(Xa))?void 0:nd.content},[null==xc?void 0:xc.queryBlockByUUID,Xa]);jf="B"===this.props.blockType&&"string"!==typeof jf;const rf=(!this.props.collapsed||oa)&&!jf;if(null==lc||!lc.Page)return null;const {Breadcrumb:We,PageName:uf}=lc,Qd={width:`calc(100% / ${he})`,height:`calc(100% / ${he})`,opacity:ka?.2:1};1!==he&&(Qd.transform=`scale(${he})`);return(0,sb.jsxs)(ep,of(oe({style:{pointerEvents:"all"}},W),{children:[Fa&&(0,sb.jsx)(yp,{mode:"html",strokeWidth:Lb,
size:Vb}),(0,sb.jsx)("div",{"data-inner-events":!Jc,onWheelCapture:Qc,onPointerDown:Qc,onPointerUp:Qc,style:{width:"100%",height:"100%",pointerEvents:ac||!oa&&!pc?"none":"all"},children:mc?(0,sb.jsx)(gy,{onChange:ne,onAddBlock:nd=>{setTimeout(()=>{var qd,sd,ke;Qb.api.editShape(this);null==(ke=null==(sd=null==(qd=window.logseq)?void 0:qd.api)?void 0:sd.edit_block)?void 0:ke.call(sd,nd)})},placeholder:"Create or search your graph..."}):(0,sb.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,
"data-page-id":Xa,"data-portal-selected":td,"data-editing":oa,style:Qd,children:[!this.props.compact&&!jf&&(0,sb.jsx)(Ht,{type:null!=(E=this.props.blockType)?E:"P",fill:db,opacity:Qa,children:"P"===this.props.blockType?(0,sb.jsx)(uf,{pageName:Xa}):(0,sb.jsx)(We,{blockId:Xa})}),jf&&(0,sb.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),rf&&(0,sb.jsx)(Ge,oe({},l))]})})]}))}));gb(this,"ReactIndicator",ff(()=>{const l=this.getBounds();return(0,sb.jsx)("rect",{width:l.width,height:l.height,
fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",l=>{var E;if(void 0!==l.size){const W=yr[null!=(E=this.props.scaleLevel)?E:"md"];l.size[0]=Math.max(l.size[0],60*W);l.size[1]=Math.max(l.size[1],40*W)}return Pm(this,l)});Og(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===
this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [l,E]=$m.useState([0,0]),W=ef();$m.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const ka=d?a.current.querySelector(d):a.current;if(ka){const oa=()=>{const {width:Qa,height:Xa}=ka.getBoundingClientRect(),db=me.div([Qa,Xa],W.viewport.camera.zoom);E(db);return db};oa();this.getInnerHeight=()=>oa()[1];const Fa=new ResizeObserver(()=>
{oa()});Fa.observe(ka);return()=>{Fa.disconnect()}}}return()=>{}},10)},[a,d]);return l}getHeaderHeight(){var a;const d=yr[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,l;const E=this.getBounds();return(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Vi(this.props.fill)?
`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:ah(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:E.width,rx:8,ry:8,height:E.height}),!this.props.compact&&(0,sb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?ah(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(l=this.props.opacity)?
l:.2,x:1,y:1,width:E.width-2,height:38,rx:8,ry:8}),(0,sb.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${E.width/2}, ${10+E.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};gb(bm,"id","logseq-portal");gb(bm,"defaultSearchQuery","");gb(bm,"defaultSearchFilter",null);gb(bm,"defaultProps",{id:"logseq-portal",
type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});ie([Ef],bm.prototype,"collapsed",1);ie([wg],bm.prototype,"setCollapsed",2);ie([Ef],bm.prototype,"scaleLevel",1);ie([wg],bm.prototype,"setScaleLevel",2);var {min:Gs,PI:mo}=Math,zr=mo+1E-4;sb=V(586);var by={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},cy={easing:a=>Math.sin(a*
Math.PI/2),simulatePressure:!0},iC={easing:a=>a*a,simulatePressure:!1},Ar=class extends ft{constructor(a={}){super(a);gb(this,"ReactComponent",ff(({events:d,isErasing:l})=>{const {props:{opacity:E}}=this;return(0,sb.jsx)(fp,of(oe({},d),{opacity:l?.2:E,children:this.getShapeSVGJsx()}))}));gb(this,"setScaleLevel",d=>yi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:by[null!=d?d:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",ff(()=>{const {pointsPath:d}=this;return(0,sb.jsx)("path",
{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));gb(this,"validateProps",d=>{d=Pm(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});Og(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=of(oe({size:1+1.5*a.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?cy:iC),{last:a.isComplete}),a=uc(a.points,d),d=St.getSvgPathFromStroke(Kb(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?
a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:l,strokeType:E}}=this;return(0,sb.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:l/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:ah(d,"text"),fill:ah(d,"text"),strokeDasharray:"dashed"===E?"12 4":void 0})}};gb(Ar,"id","pencil");gb(Ar,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});ie([Ef],Ar.prototype,
"pointsPath",1);ie([Ef],Ar.prototype,"scaleLevel",1);ie([wg],Ar.prototype,"setScaleLevel",2);var dy=yf(V(22));sb=V(586);var jC={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Hs=class extends gr{constructor(){super(...arguments);gb(this,"canEdit",!0);gb(this,"ReactComponent",ff(({events:a,isErasing:d,isSelected:l,isEditing:E,onEditingEnd:W})=>{const {offset:[ka,oa],props:{stroke:Fa,fill:Qa,noFill:Xa,strokeWidth:db,opacity:kb,strokeType:Lb,label:Vb,italic:Qb,fontWeight:lc,fontSize:xc}}=this,ac=this.getVertices(db/
2).join();var pc=Vb||E?Hj(Vb,{fontFamily:"var(--ls-font-family)",fontSize:xc,lineHeight:1,fontWeight:lc},4):[0,0];const mc=[this.props.size[0]/2,2*this.props.size[1]/3];pc=Math.max(.5,Math.min(1,this.props.size[0]/(2*pc[0]),this.props.size[1]/(2*pc[1])));const Jc=this.getBounds(),Qc=dy.useMemo(()=>me.sub(mc,me.toFixed([Jc.width/2,Jc.height/2])),[Jc,pc,mc]),td=dy.useCallback(he=>{var ne;null==(ne=this.update)?void 0:ne.call(this,{label:he})},[Vb]);return(0,sb.jsxs)("div",of(oe({},a),{style:{width:"100%",
height:"100%",overflow:"hidden"},children:[(0,sb.jsx)(ur,{font:"20px / 1 var(--ls-font-family)",text:Vb,fontSize:xc,color:ah(Fa,"text"),offsetX:Qc[0],offsetY:Qc[1]/pc,scale:pc,isEditing:E,onChange:td,onBlur:W,fontStyle:Qb?"italic":"normal",fontWeight:lc,pointerEvents:!!Vb}),(0,sb.jsx)(fp,{opacity:d?.2:kb,children:(0,sb.jsxs)("g",{transform:`translate(${ka}, ${oa})`,children:[(0,sb.jsx)("polygon",{className:l||!Xa?"tl-hitarea-fill":"tl-hitarea-stroke",points:ac}),(0,sb.jsx)("polygon",{points:ac,stroke:ah(Fa,
"stroke"),fill:Xa?"none":ah(Qa,"background"),strokeWidth:db,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Lb?"8 2":void 0})]})})]}))}));gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:jC[null!=a?a:"md"],strokeWidth:jC[null!=a?a:"md"]/10});this.onResetBounds()}));gb(this,"ReactIndicator",ff(()=>{const {offset:[a,d],props:{strokeWidth:l,isLocked:E}}=this;return(0,sb.jsx)("g",{children:(0,sb.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(l/
2).join(),strokeDasharray:E?"8 2":"undefined"})})}));gb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return Pm(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,l],props:{stroke:E,fill:W,noFill:ka,strokeWidth:oa,opacity:Fa,strokeType:Qa}}=this;a=this.getVertices(oa/2).join();return(0,sb.jsxs)("g",{transform:`translate(${d}, ${l})`,opacity:Fa,children:[(0,sb.jsx)("polygon",{className:ka?"tl-hitarea-stroke":
"tl-hitarea-fill",points:a}),(0,sb.jsx)("polygon",{points:a,stroke:ah(E,"stroke"),fill:ka?"none":ah(W,"background"),strokeWidth:oa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Qa?"8 2":void 0})]})}};gb(Hs,"id","polygon");gb(Hs,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});ie([Ef],Hs.prototype,"scaleLevel",
1);ie([wg],Hs.prototype,"setScaleLevel",2);var Go=yf(V(22));sb=V(586);var Br={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Cr=class extends Fw{constructor(){super(...arguments);gb(this,"ReactComponent",ff(({events:a,isErasing:d,isEditing:l,onEditingEnd:E})=>{const {props:{opacity:W,fontFamily:ka,fontSize:oa,fontWeight:Fa,italic:Qa,lineHeight:Xa,text:db,stroke:kb,padding:Lb}}=this,Vb=Go.useRef(null),Qb=Go.useRef(!1),lc=Go.useRef(null),xc=Go.useCallback(Qc=>{const {isSizeLocked:td}=this.props;Qc=nt.normalizeText(Qc.currentTarget.value);
td?this.update({text:Qc,size:this.getAutoSizedBoundingBox({text:Qc})}):this.update({text:Qc})},[]),ac=Go.useCallback(Qc=>{if("Escape"!==Qc.key)if("Tab"===Qc.key&&0===db.length)Qc.preventDefault();else{if("Meta"!==Qc.key&&!Qc.metaKey)Qc.stopPropagation();else if("z"===Qc.key&&Qc.metaKey){Qc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Qc.stopPropagation();Qc.preventDefault();return}"Tab"===Qc.key&&(Qc.preventDefault(),Qc.shiftKey?pi.unindent(Qc.currentTarget):pi.indent(Qc.currentTarget),
this.update({text:nt.normalizeText(Qc.currentTarget.value)}))}},[]),pc=Go.useCallback(Qc=>{l&&(Qc.currentTarget.setSelectionRange(0,0),null==E?void 0:E())},[E]),mc=Go.useCallback(Qc=>{l&&Qb.current&&document.activeElement===Qc.currentTarget&&Qc.currentTarget.select()},[l]),Jc=Go.useCallback(Qc=>{l&&Qc.stopPropagation()},[l]);Go.useEffect(()=>{l&&requestAnimationFrame(()=>{Qb.current=!0;const Qc=Vb.current;Qc&&(Qc.focus(),Qc.select())})},[l,E]);Go.useLayoutEffect(()=>{if(0===this.props.size[0]||0===
this.props.size[1])this.onResetBounds()},[]);return(0,sb.jsx)(ep,of(oe({},a),{opacity:d?.2:W,children:(0,sb.jsx)("div",{ref:lc,className:"tl-text-shape-wrapper","data-hastext":!!db,"data-isediting":l,style:{fontFamily:ka,fontStyle:Qa?"italic":"normal",fontSize:oa,fontWeight:Fa,padding:Lb,lineHeight:Xa,color:ah(kb,"text")},children:l?(0,sb.jsx)("textarea",{ref:Vb,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",
placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:db,onFocus:mc,onChange:xc,onKeyDown:ac,onBlur:pc,onPointerDown:Jc}):(0,sb.jsxs)(sb.Fragment,{children:[db,"​"]})})}))}));gb(this,"setScaleLevel",a=>yi(this,null,function*(){this.update({scaleLevel:a,fontSize:Br[null!=a?a:"md"]});this.onResetBounds()}));gb(this,"ReactIndicator",ff(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:l},bounds:E}=this;return a?null:(0,sb.jsx)("rect",{width:E.width,height:E.height,
rx:d,ry:d,fill:"transparent",strokeDasharray:l?"8 2":"undefined"})}));gb(this,"validateProps",a=>Pm(this,a));gb(this,"getBounds",()=>{const [a,d]=this.props.point,[l,E]=this.props.size;return{minX:a,minY:d,maxX:a+l,maxY:d+E,width:l,height:E}});gb(this,"onResizeStart",({isSingle:a})=>{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});gb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;
return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:l=this.props.fontFamily,fontSize:E=this.props.fontSize,fontWeight:W=this.props.fontWeight,lineHeight:ka=this.props.lineHeight,padding:oa=this.props.padding}=a,[Fa,Qa]=Hj(d,{fontFamily:l,fontSize:E,lineHeight:ka,fontWeight:W},oa);return[Fa,Qa]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);
const {props:{text:d,stroke:l,fontSize:E,fontFamily:W}}=this;a=this.getBounds();return(0,sb.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,sb.jsx)("div",{style:{color:ah(l,"text"),fontSize:E,fontFamily:W,display:"contents"},children:d})})}};gb(Cr,"id","text");gb(Cr,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",
fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});ie([Ef],Cr.prototype,"scaleLevel",1);ie([wg],Cr.prototype,"setScaleLevel",2);var ey=yf(V(22));sb=V(586);var Nu=class extends fo{constructor(){super(...arguments);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"canChangeAspectRatio",!1);gb(this,"ReactComponent",ff(({events:a,isErasing:d,asset:l,isEditing:E})=>{const {props:{opacity:W}}=this,ka=vq();var oa=ef();const Fa=oa.selectedIds.has(this.id),Qa=ka||Fa&&!E||"select"!==oa.selectedTool.id;
oa=ey.useCallback(db=>{Qa||db.stopPropagation()},[Qa]);const {handlers:Xa}=ey.useContext(Qk);return(0,sb.jsx)(ep,of(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:W}},a),{children:(0,sb.jsx)("div",{onWheelCapture:oa,onPointerDown:oa,onPointerUp:oa,className:"tl-video-container",style:{pointerEvents:ka||!E&&!Fa?"none":"all",overflow:E?"auto":"hidden"},children:l&&(0,sb.jsx)("video",{controls:!0,src:Xa?Xa.makeAssetUrl(l.src):l.src})})}))}));gb(this,"ReactIndicator",ff(()=>{const {props:{size:[a,
d],isLocked:l}}=this;return(0,sb.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:l?"8 2":"undefined"})}))}};gb(Nu,"id","video");gb(Nu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});sb=V(586);var aw=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,Ho=class extends fo{constructor(){super(...arguments);gb(this,"aspectRatio",
480/853);gb(this,"canChangeAspectRatio",!1);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:Ho.defaultProps.size})});gb(this,"ReactComponent",ff(({events:a,isErasing:d,isEditing:l})=>{const E=ef();return(0,sb.jsx)(ep,of(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,sb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:l||E.readOnly?"all":
"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,sb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,sb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,
title:"Embedded youtube"})}):(0,sb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,sb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,sb.jsxs)("g",{children:[(0,sb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,sb.jsx)("g",{children:(0,sb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,sb.jsxs)("g",{fill:"#fff",children:[(0,sb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,sb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));gb(this,"ReactIndicator",ff(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,sb.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:l?"8 2":"undefined"})}));gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return Pm(this,a)})}get embedId(){var a,d;const l=this.props.url,
E=l.match(aw);return null!=(d=null!=(a=null==E?void 0:E[1])?a:l)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,sb.jsxs)("g",{children:[(0,sb.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,sb.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,sb.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Hp=Ho;gb(Hp,"id","youtube");gb(Hp,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});ie([Ef],Hp.prototype,"embedId",1);ie([wg],Hp.prototype,"onYoutubeLinkChange",2);var cm=yf(V(22));sb=V(586);var Ou=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,It=class extends fo{constructor(){super(...arguments);gb(this,"canFlip",!1);gb(this,"canEdit",!0);gb(this,"initialHeightCalculated",
!0);gb(this,"getInnerHeight",null);gb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:It.defaultProps.size})});gb(this,"ReactComponent",ff(({events:a,isErasing:d,isEditing:l})=>{const {renderers:{Tweet:E}}=cm.useContext(Qk),W=ef(),ka=cm.useRef(null),[,oa]=this.useComponentSize(ka);cm.useEffect(()=>{var Fa,Qa;const Xa=null!=(Qa=null==(Fa=this.getInnerHeight)?void 0:Fa.call(this))?Qa:oa;oa&&1<Math.abs(Xa-this.props.size[1])&&(this.update({size:[this.props.size[0],Xa]}),W.persist(!0))},[oa]);
cm.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();W.persist(!0)})},[this.initialHeightCalculated]);return(0,sb.jsx)(ep,of(oe({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,sb.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:l||W.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,sb.jsx)("div",{ref:ka,children:(0,sb.jsx)(E,{tweetId:this.embedId})}):null})}))}));
gb(this,"ReactIndicator",ff(()=>{const {props:{size:[a,d],isLocked:l}}=this;return(0,sb.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:l?"8 2":"undefined"})}));gb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});gb(this,"onResize",(a,d)=>{var l;const {bounds:E,rotation:W,scale:[ka,oa]}=d;a=[...this.scale];0>ka&&(a[0]*=-1);0>oa&&(a[1]*=
-1);d=null!=(l=this.getAutoResizeHeight())?l:E.height;return this.update({point:[E.minX,E.minY],size:[Math.max(1,E.width),Math.max(1,d)],scale:a,rotation:W})});gb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return Pm(this,a)})}get embedId(){var a,d;const l=this.props.url,E=l.match(Ou);return null!=(d=null!=(a=null==E?void 0:E[1])?a:l)?d:""}useComponentSize(a,d=""){const [l,E]=cm.useState([0,0]),W=ef();cm.useEffect(()=>
{if(null==a?0:a.current){const ka=d?a.current.querySelector(d):a.current;if(ka){const oa=()=>{const {width:Qa,height:Xa}=ka.getBoundingClientRect(),db=me.div([Qa,Xa],W.viewport.camera.zoom);E(db);return db};oa();this.getInnerHeight=()=>oa()[1];const Fa=new ResizeObserver(()=>{oa()});Fa.observe(ka);return()=>{Fa.disconnect()}}}return()=>{}},[a,d]);return l}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,sb.jsxs)("g",
{children:[(0,sb.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,sb.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,sb.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Rn=It;gb(Rn,"id","tweet");gb(Rn,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});ie([Ef],Rn.prototype,"embedId",1);ie([wg],Rn.prototype,"onTwitterLinkChange",2);sb=V(586);var Qj=[Zm,Ds,np,eh,Nu,Fs,Ar,Hs,Cr,Hp,Rn,wr,Dj,bm,Zx],Is=class extends yq{constructor(){super(...arguments);gb(this,"Shape",Zm)}};gb(Is,"id","box");gb(Is,"shortcut","whiteboard/rectangle");var lq=class extends yq{constructor(){super(...arguments);
gb(this,"Shape",Ds)}};gb(lq,"id","ellipse");gb(lq,"shortcut","whiteboard/ellipse");var bw=class extends kv{};gb(bw,"id","erase");gb(bw,"shortcut","whiteboard/eraser");var cw=class extends eu{constructor(){super(...arguments);gb(this,"Shape",np);gb(this,"simplify",!0);gb(this,"simplifyTolerance",.618)}};gb(cw,"id","highlighter");gb(cw,"shortcut","whiteboard/highlighter");var Pu=class extends lv{constructor(){super(...arguments);gb(this,"Shape",Fs)}};gb(Pu,"id","line");gb(Pu,"shortcut","whiteboard/connector");
var Qu=class extends eu{constructor(){super(...arguments);gb(this,"Shape",Ar);gb(this,"simplify",!1)}};gb(Qu,"id","pencil");gb(Qu,"shortcut","whiteboard/pencil");var Jt=class extends yq{constructor(){super(...arguments);gb(this,"Shape",Hs)}};gb(Jt,"id","polygon");var no=class extends mv{constructor(){super(...arguments);gb(this,"Shape",Cr)}};gb(no,"id","text");gb(no,"shortcut","whiteboard/text");var Ip=class extends yq{constructor(){super(...arguments);gb(this,"Shape",Hp)}};gb(Ip,"id","youtube");
var dw=class extends aj{constructor(){super(...arguments);gb(this,"creatingShape");gb(this,"offset",[0,0]);gb(this,"onEnter",()=>{this.app.history.pause();zd(()=>{const a=new bm({id:el(),parentId:this.app.currentPage.id,point:me.sub(this.app.inputs.originPoint,this.offset),size:bm.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=a;this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});gb(this,"onPointerDown",
a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});gb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};gb(dw,"id","creating");var ew=class extends aj{constructor(){super(...arguments);
gb(this,"cursor","crosshair");gb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};gb(ew,"id","idle");var Dr=class extends hr{constructor(){super(...arguments);gb(this,"Shape",bm);gb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};gb(Dr,"id","logseq-portal");gb(Dr,"shortcut","whiteboard/portal");gb(Dr,"states",[ew,dw]);gb(Dr,"initial","idle");var fy=class extends yq{constructor(){super(...arguments);gb(this,"Shape",Dj)}};gb(fy,"id","youtube");var Ru=class extends yq{constructor(){super(...arguments);
gb(this,"Shape",wr)}};gb(Ru,"id","iframe");var kC=yf(V(589));sb=V(586);var lC=new Map(Qj.map(a=>[a.id,a])),Su=class{constructor(a){gb(this,"shapes");gb(this,"pageId");gb(this,"assets");a&&this.load(a)}load(a){var d;const l=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==l?void 0:l.id;this.assets=a.assets;this.shapes=null==l?void 0:l.shapes.map(E=>{var W=E.type;if(!W)throw Error("No shape type provided.");const ka=lC.get(W);if(!ka)throw Error(`Could not find shape class for ${W}`);return new ka(E)}).filter(E=>
"group"!==E.type)}generatePreviewJsx(a,d){var l,E;const W=[...(null!=(l=this.shapes)?l:[]).map(Xa=>Xa.getRotatedBounds())];(l=null==a?void 0:a.currentView)&&W.push(l);let ka=Bf.getCommonBounds(W);if(!ka)return null;ka=Bf.expandBounds(ka,16);ka=d?Bf.ensureRatio(ka,d):ka;const oa=Xa=>[(Xa[0]-ka.minX).toFixed(2),(Xa[1]-ka.minY).toFixed(2)],[Fa,Qa]=l?oa([l.minX,l.minY]):[0,0];return ka&&(0,sb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ka.minX.toFixed(2),"data-common-bound-y":ka.minY.toFixed(2),
"data-common-bound-width":ka.width.toFixed(2),"data-common-bound-height":ka.height.toFixed(2),viewBox:[0,0,ka.width,ka.height].join(" "),children:[(0,sb.jsx)("defs",{children:l&&(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Fa}, ${Qa})`,width:l.width,height:l.height}),(0,sb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,sb.jsx)("rect",{width:ka.width,height:ka.height,fill:"white"}),(0,sb.jsx)("use",{href:`#${this.pageId}-camera-rect`,
fill:"black"})]})]})}),(0,sb.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(E=this.shapes)?void 0:E.map(Xa=>{var db,kb;const {bounds:Lb,props:{rotation:Vb}}=Xa,[Qb,lc]=oa([Lb.minX,Lb.minY]),xc=+(180*((null!=Vb?Vb:0)+(null!=(db=Lb.rotation)?db:0))/Math.PI).toFixed(2),[ac,pc]=[(Lb.width/2).toFixed(2),(Lb.height/2).toFixed(2)];return(0,sb.jsx)("g",{transform:[`translate(${Qb}, ${lc})`,`rotate(${xc}, ${ac}, ${pc})`].join(" "),children:Xa.getShapeSVGJsx({assets:null!=(kb=this.assets)?kb:[]})},
Xa.id)})}),(0,sb.jsx)("rect",{mask:l?`url(#${this.pageId}-camera-mask)`:"",width:ka.width,height:ka.height,fill:"transparent"}),l&&(0,sb.jsx)("use",{id:"minimap-camera-rect","data-x":Fa,"data-y":Qa,"data-width":l.width,"data-height":l.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?kC.default.renderToString(a):""}},mC=yf(V(22));sb=V(586);var Er=mC.forwardRef((a,d)=>{var {value:l,className:E}=
a;a=If(a,["autoResize","value","className"]);return(0,sb.jsx)("div",{className:"tl-input"+(E?" "+E:""),children:(0,sb.jsxs)("div",{className:"tl-input-sizer",children:[(0,sb.jsx)("div",{className:"tl-input-hidden",children:l}),(0,sb.jsx)("input",oe({ref:d,value:l,className:"tl-text-input",type:"text"},a))]})})});sb=V(586);var gf=({type:a,active:d})=>(0,sb.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,sb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",
PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),gh=(a,d)=>(0,sb.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((l,E)=>1===E%2?(0,sb.jsx)("mark",{className:"tl-highlighted",children:l}):l).map((l,E)=>(0,sb.jsx)(rn.default.Fragment,{children:l},E))}),fw=(a,d)=>{const {handlers:l}=rn.default.useContext(Qk),[E,W]=rn.default.useState(null),ka=Sm(a,200);rn.default.useEffect(()=>{let oa=!1;if(0<ka.length){const Fa=
{"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?Fa["pages?"]=!1:"P"===d&&(Fa["blocks?"]=!1);l.search(ka,Fa).then(Qa=>{oa||W(Qa)})}else W(null);return()=>{oa=!0}},[ka,null==l?void 0:l.search]);return E},gy=ff(({className:a,style:d,placeholder:l,onChange:E,onBlur:W,onAddBlock:ka})=>{const [oa,Fa]=rn.default.useState(bm.defaultSearchQuery),[Qa,Xa]=rn.default.useState(bm.defaultSearchFilter),db=rn.default.useRef(null),{handlers:kb,renderers:Lb}=rn.default.useContext(Qk),Vb=rn.default.useCallback(ne=>{var Ge;
E(ne);null==(Ge=db.current)?void 0:Ge.blur();ne&&(bm.defaultSearchQuery="",bm.defaultSearchFilter=null)},[]),Qb=rn.default.useCallback(ne=>{if(ne=null==kb?void 0:kb.addNewBlock(ne))Vb(ne),null==ka?void 0:ka(ne);return ne},[ka]),lc=rn.default.useRef(null),[xc,ac]=rn.default.useState(0),pc=fw(oa,Qa),[mc,Jc]=rn.default.useState("circle-plus"),[Qc,td]=rn.default.useState(!1);rn.default.useEffect(()=>{setTimeout(()=>{var ne;null==(ne=db.current)?void 0:ne.focus()})},[Qa]);rn.default.useEffect(()=>{bm.defaultSearchQuery=
oa;bm.defaultSearchFilter=Qa},[oa,Qa]);const he=rn.default.useMemo(()=>{var ne;const Ge=[],jf=null==Lb?void 0:Lb.Breadcrumb;if(!jf||!kb)return[];ka&&Ge.push({actionIcon:"circle-plus",onChosen:()=>!!Qb(oa),element:(0,sb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,sb.jsx)(gf,{active:!0,type:"BA"}),0<oa.length?(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)("strong",{children:"New block:"}),oa]}):(0,sb.jsx)("strong",{children:"New block"})]})});(null==(ne=null==pc?void 0:pc.pages)?
0:ne.some(rf=>rf.toLowerCase()===oa.toLowerCase()))||!oa||Ge.push({actionIcon:"circle-plus",onChosen:()=>{Vb(oa);return!0},element:(0,sb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,sb.jsx)(gf,{active:!0,type:"PA"}),(0,sb.jsx)("strong",{children:"New page:"}),oa]})},{actionIcon:"circle-plus",onChosen:()=>{null==kb?void 0:kb.addNewWhiteboard(oa);Vb(oa);return!0},element:(0,sb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,sb.jsx)(gf,{active:!0,type:"WA"}),(0,sb.jsx)("strong",
{children:"New whiteboard:"}),oa]})});0===oa.length&&null===Qa&&Ge.push({actionIcon:"search",onChosen:()=>{Xa("B");return!0},element:(0,sb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,sb.jsx)(gf,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{Xa("P");return!0},element:(0,sb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,sb.jsx)(gf,{type:"PS"}),"Search only pages"]})});Qa&&"P"!==Qa||!pc||!pc.pages||Ge.push(...pc.pages.map(rf=>({actionIcon:"search",
onChosen:()=>{Vb(rf);return!0},element:(0,sb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,sb.jsx)(gf,{type:kb.isWhiteboardPage(rf)?"WP":"P"}),gh(rf,oa)]})})));Qa&&"B"!==Qa||!pc||!pc.blocks||Ge.push(...pc.blocks.filter(rf=>rf.content&&rf.uuid).map(({content:rf,uuid:We})=>{const uf=kb.queryBlockByUUID(We);return{actionIcon:"search",onChosen:()=>{var Qd,nd,qd;return uf?(Vb(We),null==(qd=null==(nd=null==(Qd=window.logseq)?void 0:Qd.api)?void 0:nd.set_blocks_id)?void 0:qd.call(nd,[We]),
!0):!1},element:uf?(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,sb.jsx)(gf,{type:"B"}),(0,sb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,sb.jsx)(jf,{blockId:We})})]}),(0,sb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,sb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),gh(rf,oa)]})]}):(0,sb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));
return Ge},[oa,Qa,pc,null==Lb?void 0:Lb.Breadcrumb,kb]);rn.default.useEffect(()=>{const ne=Ge=>{var jf,rf;let We=xc;"ArrowDown"===Ge.key?We=Math.min(he.length-1,xc+1):"ArrowUp"===Ge.key?We=Math.max(0,xc-1):"Enter"===Ge.key?(null==(jf=he[xc])?void 0:jf.onChosen(),Ge.stopPropagation(),Ge.preventDefault()):"Backspace"===Ge.key&&0===oa.length?Xa(null):"Escape"===Ge.key&&Vb("");We!==xc&&(jf=he[We],ac(We),Jc(jf.actionIcon),Ge.stopPropagation(),Ge.preventDefault(),(Ge=null==(rf=lc.current)?void 0:rf.querySelector(".tl-quick-search-option:nth-child("+
(We+1)+")"))&&(null==Ge?void 0:Ge.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",ne,!0);return()=>{document.removeEventListener("keydown",ne,!0)}},[he,xc,oa]);return(0,sb.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,sb.jsx)(QF,{icon:mc,onClick:()=>{var ne;null==(ne=he[xc])?void 0:ne.onChosen()}}),(0,sb.jsxs)("div",{className:"tl-quick-search-input-container",children:[Qa&&(0,sb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,sb.jsx)(gf,
{type:Qa}),"B"===Qa?"Search blocks":"Search pages",(0,sb.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Xa(null),children:(0,sb.jsx)(Wh,{name:"x"})})]}),(0,sb.jsx)(Er,{ref:db,type:"text",value:oa,className:"tl-quick-search-input",placeholder:null!=l?l:"Create or search your graph...",onChange:ne=>Fa(ne.target.value),onKeyDown:ne=>{"Enter"===ne.key&&Vb(oa);ne.stopPropagation()},onFocus:()=>{td(!0)},onBlur:()=>{td(!1);null==W?void 0:W()}})]}),0<he.length&&(0,sb.jsx)("div",{onWheelCapture:ne=>
ne.stopPropagation(),className:"tl-quick-search-options",ref:lc,style:{visibility:Qc?"visible":"hidden",pointerEvents:Qc?"all":"none"},children:(0,sb.jsx)(TB,{style:{height:40*Math.min(Math.max(1,he.length),12)},totalCount:he.length,itemContent:ne=>{const {actionIcon:Ge,onChosen:jf,element:rf}=he[ne];return(0,sb.jsx)("div",{"data-focused":ne===xc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Jc(Ge);ac(ne)},onPointerDownCapture:We=>{jf()&&(We.stopPropagation(),We.preventDefault())},
children:rf},ne)}})})]})});sb=V(586);var nC=ff(function(a){var {pageId:d,portalType:l,refs:E,side:W,onRefsChange:ka}=a;a=If(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const oa=E.length+(d?1:0),Fa=0===E.length,Qa=db=>{db&&!E.includes(db)&&Fa&&ka([...E,db])},Xa=!(!d||!l);return(0,sb.jsx)(Dx,of(oe({},a),{side:W,align:"start",alignOffset:-6,label:(0,sb.jsx)(gc,{content:"Link",sideOffset:14,children:(0,sb.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",
children:[(0,sb.jsx)(Wh,{name:0<oa?"link":"add-link"}),0<oa&&(0,sb.jsx)("div",{className:"tl-shape-links-count",children:oa})]})}),children:(0,sb.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":Xa,children:[Xa&&(0,sb.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,sb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,sb.jsx)(Wh,{className:"opacity-50",name:"internal-link"}),"References"]}),(0,sb.jsx)(le,{type:l,id:d})]}),
(0,sb.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,sb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,sb.jsx)(Wh,{className:"opacity-50",name:"add-link"}),"Link to any page or block"]}),Fa&&(0,sb.jsx)(gy,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:"Start typing to search...",onChange:Qa}),0<E.length&&(0,sb.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:E.map((db,kb)=>(0,sb.jsx)(le,{id:db,type:Gk(db)?
"B":"P",onRemove:()=>{ka(E.filter((Lb,Vb)=>kb!==Vb))},showContent:!0},db))})]})]})}))}),Bl=yf(V(22)),gw=V(22),hy=(0,gw.forwardRef)((a,d)=>{const {pressed:l,defaultPressed:E=!1,onPressedChange:W}=a,ka=If(a,["pressed","defaultPressed","onPressedChange"]),[oa=!1,Fa]=ai({prop:l,onChange:W,defaultProp:E});return(0,gw.createElement)(Gl.button,Ze({type:"button","aria-pressed":oa,"data-state":oa?"on":"off","data-disabled":a.disabled?"":void 0},ka,{ref:d,onClick:Vf(a.onClick,()=>{a.disabled||Fa(!oa)})}))}),
oC=hy,[vj]=jk("ToggleGroup",[xv]),iy=xv(),pC=Bl.default.forwardRef((a,d)=>{const {type:l}=a;a=If(a,["type"]);if("single"===l)return Bl.default.createElement(Kt,Ze({},a,{ref:d}));if("multiple"===l)return Bl.default.createElement(rC,Ze({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[Tu,qC]=vj("ToggleGroup"),Kt=Bl.default.forwardRef((a,d)=>{const {value:l,defaultValue:E,onValueChange:W=()=>{}}=a,ka=If(a,["value","defaultValue","onValueChange"]),[oa,Fa]=ai({prop:l,defaultProp:E,
onChange:W});return Bl.default.createElement(Tu,{scope:a.__scopeToggleGroup,type:"single",value:oa?[oa]:[],onItemActivate:Fa,onItemDeactivate:Bl.default.useCallback(()=>Fa(""),[Fa])},Bl.default.createElement(jy,Ze({},ka,{ref:d})))}),rC=Bl.default.forwardRef((a,d)=>{const {value:l,defaultValue:E,onValueChange:W=()=>{}}=a,ka=If(a,["value","defaultValue","onValueChange"]),[oa=[],Fa]=ai({prop:l,defaultProp:E,onChange:W}),Qa=Bl.default.useCallback(db=>Fa((kb=[])=>[...kb,db]),[Fa]),Xa=Bl.default.useCallback(db=>
Fa((kb=[])=>kb.filter(Lb=>Lb!==db)),[Fa]);return Bl.default.createElement(Tu,{scope:a.__scopeToggleGroup,type:"multiple",value:oa,onItemActivate:Qa,onItemDeactivate:Xa},Bl.default.createElement(jy,Ze({},ka,{ref:d})))}),[sC,Fr]=vj("ToggleGroup"),jy=Bl.default.forwardRef((a,d)=>{const {__scopeToggleGroup:l,disabled:E=!1,rovingFocus:W=!0,orientation:ka,dir:oa,loop:Fa=!0}=a;var Qa=If(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=iy(l);const Xa=Wb(oa);Qa=oe({role:"group",
dir:Xa},Qa);return Bl.default.createElement(sC,{scope:l,rovingFocus:W,disabled:E},W?Bl.default.createElement(XA,Ze({asChild:!0},a,{orientation:ka,dir:Xa,loop:Fa}),Bl.default.createElement(Gl.div,Ze({},Qa,{ref:d}))):Bl.default.createElement(Gl.div,Ze({},Qa,{ref:d})))}),tC=Bl.default.forwardRef((a,d)=>{var l=qC("ToggleGroupItem",a.__scopeToggleGroup);const E=Fr("ToggleGroupItem",a.__scopeToggleGroup),W=iy(a.__scopeToggleGroup);l=l.value.includes(a.value);const ka=E.disabled||a.disabled;a=of(oe({},a),
{pressed:l,disabled:ka});const oa=Bl.default.useRef(null);return E.rovingFocus?Bl.default.createElement(YA,Ze({asChild:!0},W,{focusable:!ka,active:l,ref:oa}),Bl.default.createElement(Mq,Ze({},a,{ref:d}))):Bl.default.createElement(Mq,Ze({},a,{ref:d}))}),Mq=Bl.default.forwardRef((a,d)=>{const {__scopeToggleGroup:l,value:E}=a,W=If(a,["__scopeToggleGroup","value"]),ka=qC("ToggleGroupItem",l);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return Bl.default.createElement(hy,Ze({},"single"===
ka.type?a:void 0,W,{ref:d,onPressedChange:oa=>{if(oa)ka.onItemActivate(E);else ka.onItemDeactivate(E)}}))}),Nq=pC,pp=tC;sb=V(586);sb=V(586);sb=V(586);var Uu="LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),Lt=["YoutubeLink","TwitterLink","IFrameSource","Links"],oo=new Map,Js={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],
tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing",
"Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"]},ky=Object.entries(Js).filter(([,a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),Jp=ff(()=>{const a=ef(),d=Ua("AutoResizing"),l=d.every(E=>E.props.isAutoResizing);return(0,sb.jsx)(ua,{tooltip:"Auto Resize",toggle:d.every(E=>"logseq-portal"===E.props.type),className:"tl-button",pressed:l,onPressedChange:E=>{d.forEach(W=>{if("logseq-portal"===W.props.type)W.update({isAutoResizing:E});else W.onResetBounds({zoom:a.viewport.camera.zoom})});
a.persist()},children:(0,sb.jsx)(Wh,{name:"dimensions"})})}),Ks=ff(()=>{const a=ef(),d=Ua("LogseqPortalViewMode"),l=d.every(W=>W.collapsed);if(!l&&!d.every(W=>!W.collapsed))return null;const E=(0,sb.jsxs)("div",{className:"flex",children:[l?"Expand":"Collapse",(0,sb.jsx)(am,{action:l?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,sb.jsx)(ua,{tooltip:E,toggle:d.every(W=>"logseq-portal"===W.props.type),className:"tl-button",pressed:l,onPressedChange:()=>a.api.setCollapsed(!l),
children:(0,sb.jsx)(Wh,{name:l?"object-expanded":"object-compact"})})}),ly=ff(()=>{const {handlers:{isMobile:a}}=jq.default.useContext(Qk);var d=Ua("ScaleLevel");d=1<(new Set(d.map(l=>l.scaleLevel))).size?"":d[0].scaleLevel;return(0,sb.jsx)(Hi,{scaleLevel:d,compact:a()})}),Rg=ff(()=>{const a=ef(),d=Ua("IFrameSource")[0],l=jq.default.useCallback(W=>{d.onIFrameSourceChange(W.target.value.trim().toLowerCase());a.persist()},[]),E=jq.default.useCallback(()=>{d.reload()},[]);return(0,sb.jsxs)("span",{className:"flex gap-3",
children:[(0,sb.jsx)(ja,{tooltip:"Reload",type:"button",onClick:E,children:(0,sb.jsx)(Wh,{name:"refresh"})}),(0,sb.jsx)(Er,{title:"Website Url",className:"tl-iframe-src",value:`${d.props.url}`,onChange:l}),(0,sb.jsx)(ja,{tooltip:"Open website url",type:"button",onClick:()=>window.open(d.props.url),children:(0,sb.jsx)(Wh,{name:"external-link"})})]})}),hw=ff(()=>{const a=ef(),d=Ua("YoutubeLink")[0],l=jq.default.useCallback(E=>{d.onYoutubeLinkChange(E.target.value);a.persist()},[]);return(0,sb.jsxs)("span",
{className:"flex gap-3",children:[(0,sb.jsx)(Er,{title:"YouTube Link",className:"tl-youtube-link",value:`${d.props.url}`,onChange:l}),(0,sb.jsx)(ja,{tooltip:"Open YouTube Link",type:"button",onClick:()=>{var E,W,ka;return null==(ka=null==(W=null==(E=window.logseq)?void 0:E.api)?void 0:W.open_external_link)?void 0:ka.call(W,d.props.url)},children:(0,sb.jsx)(Wh,{name:"external-link"})})]})}),my=ff(()=>{const a=ef(),d=Ua("TwitterLink")[0],l=jq.default.useCallback(E=>{d.onTwitterLinkChange(E.target.value);
a.persist()},[]);return(0,sb.jsxs)("span",{className:"flex gap-3",children:[(0,sb.jsx)(Er,{title:"Twitter Link",className:"tl-twitter-link",value:`${d.props.url}`,onChange:l}),(0,sb.jsx)(ja,{tooltip:"Open Twitter Link",type:"button",onClick:()=>{var E,W,ka;return null==(ka=null==(W=null==(E=window.logseq)?void 0:E.api)?void 0:W.open_external_link)?void 0:ka.call(W,d.props.url)},children:(0,sb.jsx)(Wh,{name:"external-link"})})]})}),Gr=ff(()=>{const a=ef();var d=Ua("NoFill");const l=jq.default.useCallback(E=>
{a.selectedShapesArray.forEach(W=>W.update({noFill:E}));a.persist()},[]);d=d.every(E=>E.props.noFill);return(0,sb.jsx)(ua,{tooltip:"Fill",className:"tl-button",pressed:d,onPressedChange:l,children:(0,sb.jsx)(Wh,{name:d?"droplet-off":"droplet"})})}),Hr=ff(()=>{const a=ef(),d=Ua("Swatch"),l=jq.default.useCallback(W=>{a.selectedShapesArray.forEach(ka=>{ka.update({fill:W,stroke:W})});a.persist()},[]),E=jq.default.useCallback(W=>{a.selectedShapesArray.forEach(ka=>{ka.update({opacity:W})});a.persist()},
[]);return(0,sb.jsx)(zg,{popoverSide:"top",color:d[0].props.noFill?d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:E,setColor:l})}),ny=ff(()=>{const a=ef(),d=jq.default.useCallback(l=>{a.api.convertShapes(l.currentTarget.dataset.tool)},[]);return(0,sb.jsx)(yx,{popoverSide:"top",chevron:!1,setGeometry:d})}),Kp=ff(()=>{const a=ef(),d=Ua("StrokeType"),l=d.every(E=>"dashed"===E.props.strokeType)?"dashed":d.every(E=>"line"===E.props.strokeType)?"line":"mixed";return(0,sb.jsx)(Ke,
{title:"Stroke Type",options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:l,onValueChange:E=>{d.forEach(W=>{W.update({strokeType:E})});a.persist()}})}),uC=ff(()=>{const a=ef(),d=Ua("ArrowMode");var l=d.every(W=>{var ka;return"arrow"===(null==(ka=W.props.decorations)?void 0:ka.start)});const E=d.every(W=>{var ka;return"arrow"===(null==(ka=W.props.decorations)?void 0:ka.end)});l=[l?"start":null,E?"end":null].filter(fg);return(0,sb.jsx)(ea,
{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:l,onValueChange:W=>{d.forEach(ka=>{var oa=ka.update;var Fa={start:W.includes("start")?"arrow":null,end:W.includes("end")?"arrow":null};oa.call(ka,{decorations:Fa})});a.persist()}})}),qp=ff(()=>{const a=ef(),d=Ua("TextStyle"),l=d.every(W=>500<W.props.fontWeight),E=d.every(W=>W.props.italic);return(0,sb.jsxs)("span",{className:"flex gap-1",children:[(0,sb.jsx)(ua,{tooltip:"Bold",className:"tl-button",
pressed:l,onPressedChange:W=>{d.forEach(ka=>{ka.update({fontWeight:W?700:400});ka.onResetBounds()});a.persist()},children:(0,sb.jsx)(Wh,{name:"bold"})}),(0,sb.jsx)(ua,{tooltip:"Italic",className:"tl-button",pressed:E,onPressedChange:W=>{d.forEach(ka=>{ka.update({italic:W});ka.onResetBounds()});a.persist()},children:(0,sb.jsx)(Wh,{name:"italic"})})]})}),Mt=ff(()=>{var a;const d=ef(),l=d.selectedShapesArray[0];return(0,sb.jsx)(nC,{onRefsChange:E=>{l.update({refs:E});d.persist()},refs:null!=(a=l.props.refs)?
a:[],shapeType:l.props.type,side:"right",pageId:"logseq-portal"===l.props.type?l.props.pageId:void 0,portalType:"logseq-portal"===l.props.type?l.props.blockType:void 0})});oo.set("Geometry",ny);oo.set("AutoResizing",Jp);oo.set("LogseqPortalViewMode",Ks);oo.set("ScaleLevel",ly);oo.set("YoutubeLink",hw);oo.set("TwitterLink",my);oo.set("IFrameSource",Rg);oo.set("NoFill",Gr);oo.set("Swatch",Hr);oo.set("StrokeType",Kp);oo.set("ArrowMode",uC);oo.set("TextStyle",qp);oo.set("Links",Mt);var iw=a=>{var d;return(null!=
(d=Js[a])?d:[]).filter(fg)},Vu=a=>{const d=a.map(E=>E.props.type),l=new Set(0<a.length?iw(d[0]):[]);for(let E=1;E<d.length&&0<l.size;E++){const W=iw(d[E]);l.forEach(ka=>{W.includes(ka)||l.delete(ka)})}1<a.length&&Lt.forEach(E=>{l.has(E)&&l.delete(E)});return Array.from(l).sort((E,W)=>Uu.indexOf(E)-Uu.indexOf(W)).map(E=>oo.get(E))};sb=V(586);var oy=ff(({shapes:a,offsets:d,hidden:l})=>{const E=ef(),W=Pj.useRef(null),ka=Pj.useRef(null);Pj.useLayoutEffect(()=>{setTimeout(()=>{const Fa=ka.current;if(Fa){var {offsetWidth:Qa,
offsetHeight:Xa}=Fa;W.current=[Qa,Xa]}})});Pj.useLayoutEffect(()=>{var Fa;const Qa=ka.current;if(Qa){var Xa=null!=(Fa=W.current)?Fa:[0,0];Fa=0;if(116>d.top){var db=d.height/2+40;140>d.bottom&&(db+=d.bottom-140)}else db=-(d.height/2+40);16>d.left+d.width/2-Xa[0]/2?Fa+=-(d.left+d.width/2-Xa[0]/2-16):16>d.right+d.width/2-Xa[0]/2&&(Fa+=d.right+d.width/2-Xa[0]/2-16);var [kb,Lb]=[Fa,db];Qa.style.transform=`translateX(${kb}px) translateY(${Lb}px)`}},[d]);if(!E)return null;const oa=Vu(a);return(0,sb.jsx)(ep,
{centered:!0,children:0<oa.length&&(0,sb.jsx)("div",{ref:ka,className:"tl-toolbar tl-context-bar",style:{visibility:l?"hidden":"visible",pointerEvents:l?"none":"all"},children:oa.map((Fa,Qa)=>(0,sb.jsxs)(Pj.Fragment,{children:[(0,sb.jsx)(Fa,{}),Qa<oa.length-1&&(0,sb.jsx)(mr,{className:"tl-toolbar-separator",orientation:"vertical"})]},Qa))})})}),Nt=yf(V(22)),Il=V(22),[py]=jk("ContextMenu",[Ev]),Ls=Ev(),[vC,jw]=py("ContextMenu"),wC=(0,Il.forwardRef)((a,d)=>{const {__scopeContextMenu:l,disabled:E=!1}=
a,W=If(a,["__scopeContextMenu","disabled"]),ka=jw("ContextMenuTrigger",l),oa=Ls(l),Fa=(0,Il.useRef)({x:0,y:0}),Qa=(0,Il.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(oe({width:0,height:0},Fa.current))}),Xa=(0,Il.useRef)(0),db=(0,Il.useCallback)(()=>window.clearTimeout(Xa.current),[]);(0,Il.useEffect)(()=>db,[db]);(0,Il.useEffect)(()=>void(E&&db()),[E,db]);return(0,Il.createElement)(Il.Fragment,null,(0,Il.createElement)(Iy,Ze({},oa,{virtualRef:Qa})),(0,Il.createElement)(Gl.span,Ze({"data-state":ka.open?
"open":"closed","data-disabled":E?"":void 0},W,{ref:d,style:oe({WebkitTouchCallout:"none"},a.style),onContextMenu:E?a.onContextMenu:Vf(a.onContextMenu,kb=>{db();Fa.current={x:kb.clientX,y:kb.clientY};ka.onOpenChange(!0);kb.preventDefault()}),onPointerDown:E?a.onPointerDown:Vf(a.onPointerDown,wb(kb=>{db();Xa.current=window.setTimeout(()=>{Fa.current={x:kb.clientX,y:kb.clientY};ka.onOpenChange(!0)},700)})),onPointerMove:E?a.onPointerMove:Vf(a.onPointerMove,wb(db)),onPointerCancel:E?a.onPointerCancel:
Vf(a.onPointerCancel,wb(db)),onPointerUp:E?a.onPointerUp:Vf(a.onPointerUp,wb(db))})))}),xC=(0,Il.forwardRef)((a,d)=>{var {__scopeContextMenu:l}=a;const E=If(a,["__scopeContextMenu"]),W=jw("ContextMenuContent",l);l=Ls(l);const ka=(0,Il.useRef)(!1);return(0,Il.createElement)(cv,Ze({},l,E,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:oa=>{var Fa;null===(Fa=a.onCloseAutoFocus)||void 0===Fa||Fa.call(a,oa);!oa.defaultPrevented&&ka.current&&oa.preventDefault();ka.current=!1},onInteractOutside:oa=>
{var Fa;null===(Fa=a.onInteractOutside)||void 0===Fa||Fa.call(a,oa);oa.defaultPrevented||W.modal||(ka.current=!0)},style:of(oe({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),xm=(0,Il.forwardRef)((a,d)=>{var {__scopeContextMenu:l}=a;a=If(a,["__scopeContextMenu"]);l=Ls(l);return(0,Il.createElement)(tx,Ze({},l,a,{ref:d}))}),mq=(0,Il.forwardRef)((a,d)=>{var {__scopeContextMenu:l}=a;a=If(a,["__scopeContextMenu"]);l=Ls(l);return(0,Il.createElement)(XC,
Ze({},l,a,{ref:d}))}),Ms=a=>{const {__scopeContextMenu:d,children:l,onOpenChange:E,dir:W,modal:ka=!0}=a,[oa,Fa]=(0,Il.useState)(!1);a=Ls(d);const Qa=Gf(E),Xa=(0,Il.useCallback)(db=>{Fa(db);Qa(db)},[Qa]);return(0,Il.createElement)(vC,{scope:d,open:oa,onOpenChange:Xa,modal:ka},(0,Il.createElement)(Yt,Ze({},a,{dir:W,open:oa,onOpenChange:Xa,modal:ka}),l))};sb=V(586);var qy=ff(function({children:a,collisionRef:d}){var l,E,W,ka,oa,Fa,Qa,Xa,db,kb,Lb,Vb,Qb,lc,xc,ac,pc;const mc=ef(),{handlers:Jc}=Nt.useContext(Qk),
Qc=Nt.useRef(null),td=ne=>{ne();mc.transition("select")},he=Nt.useMemo(()=>Hf(),[]);return(0,sb.jsxs)(Ms,{onOpenChange:ne=>{ne&&!mc.isIn("select.contextMenu")?mc.transition("select").selectedTool.transition("contextMenu"):!ne&&mc.isIn("select.contextMenu")&&mc.selectedTool.transition("idle")},children:[(0,sb.jsx)(wC,{disabled:mc.editingShape&&0!==Object.keys(mc.editingShape).length,children:a}),(0,sb.jsx)(xC,{className:"tl-menu tl-context-menu",ref:Qc,onEscapeKeyDown:()=>mc.transition("select"),collisionBoundary:d.current,
asChild:!0,tabIndex:-1,children:(0,sb.jsxs)("div",{children:[1<(null==(l=mc.selectedShapes)?void 0:l.size)&&!mc.readOnly&&(null==(E=mc.selectedShapesArray)?void 0:E.some(ne=>!ne.props.isLocked))&&(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsxs)(xm,{children:[(0,sb.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,sb.jsx)(ja,{tooltip:"Align left",onClick:()=>td(()=>mc.align("left")),children:(0,sb.jsx)(Wh,{name:"layout-align-left"})}),(0,sb.jsx)(ja,{tooltip:"Align center horizontally",onClick:()=>
td(()=>mc.align("centerHorizontal")),children:(0,sb.jsx)(Wh,{name:"layout-align-center"})}),(0,sb.jsx)(ja,{tooltip:"Align right",onClick:()=>td(()=>mc.align("right")),children:(0,sb.jsx)(Wh,{name:"layout-align-right"})}),(0,sb.jsx)(mr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,sb.jsx)(ja,{tooltip:"Distribute horizontally",onClick:()=>td(()=>mc.distribute("horizontal")),children:(0,sb.jsx)(Wh,{name:"layout-distribute-vertical"})})]}),(0,sb.jsxs)("div",{className:"tl-menu-button-row pt-0",
children:[(0,sb.jsx)(ja,{tooltip:"Align top",onClick:()=>td(()=>mc.align("top")),children:(0,sb.jsx)(Wh,{name:"layout-align-top"})}),(0,sb.jsx)(ja,{tooltip:"Align center vertically",onClick:()=>td(()=>mc.align("centerVertical")),children:(0,sb.jsx)(Wh,{name:"layout-align-middle"})}),(0,sb.jsx)(ja,{tooltip:"Align bottom",onClick:()=>td(()=>mc.align("bottom")),children:(0,sb.jsx)(Wh,{name:"layout-align-bottom"})}),(0,sb.jsx)(mr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,sb.jsx)(ja,
{tooltip:"Distribute vertically",onClick:()=>td(()=>mc.distribute("vertical")),children:(0,sb.jsx)(Wh,{name:"layout-distribute-horizontal"})})]})]}),(0,sb.jsx)(mq,{className:"menu-separator"}),(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(mc.packIntoRectangle),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,sb.jsx)(mq,{className:"menu-separator"})]}),0<(null==(W=mc.selectedShapes)?void 0:W.size)&&(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsxs)(xm,
{className:"tl-menu-item",onClick:()=>td(mc.api.zoomToSelection),children:["Zoom to fit",(0,sb.jsx)(am,{action:"whiteboard/zoom-to-fit"})]}),(0,sb.jsx)(mq,{className:"menu-separator"})]}),(mc.selectedShapesArray.some(ne=>"group"===ne.type||mc.getParentGroup(ne))||1<mc.selectedShapesArray.length)&&(null==(ka=mc.selectedShapesArray)?void 0:ka.some(ne=>!ne.props.isLocked))&&!mc.readOnly&&(0,sb.jsxs)(sb.Fragment,{children:[mc.selectedShapesArray.some(ne=>"group"===ne.type||mc.getParentGroup(ne))&&(0,sb.jsxs)(xm,
{className:"tl-menu-item",onClick:()=>td(mc.api.unGroup),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"ungroup"}),"Ungroup",(0,sb.jsx)(am,{action:"whiteboard/ungroup"})]}),1<mc.selectedShapesArray.length&&(null==(oa=mc.selectedShapesArray)?void 0:oa.some(ne=>!ne.props.isLocked))&&(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(mc.api.doGroup),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"group"}),"Group",(0,sb.jsx)(am,{action:"whiteboard/group"})]}),(0,sb.jsx)(mq,{className:"menu-separator"})]}),
0<(null==(Fa=mc.selectedShapes)?void 0:Fa.size)&&(null==(Qa=mc.selectedShapesArray)?void 0:Qa.some(ne=>!ne.props.isLocked))&&(0,sb.jsxs)(sb.Fragment,{children:[!mc.readOnly&&(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(mc.cut),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"cut"}),"Cut"]}),(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(mc.copy),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,sb.jsx)(am,{action:"editor/copy"})]})]}),!mc.readOnly&&
(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(mc.paste),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,sb.jsx)("div",{className:"tl-menu-right-slot",children:(0,sb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,sb.jsx)("code",{children:Nz})," ",(0,sb.jsx)("code",{children:"v"})]})})]}),1===(null==(Xa=mc.selectedShapes)?void 0:Xa.size)&&!mc.readOnly&&(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(()=>mc.paste(void 0,!0)),children:["Paste as link",
(0,sb.jsx)("div",{className:"tl-menu-right-slot",children:(0,sb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,sb.jsx)("code",{children:Nz})," ",(0,sb.jsx)("code",{children:"⇧"})," ",(0,sb.jsx)("code",{children:"v"})]})})]}),0<(null==(db=mc.selectedShapes)?void 0:db.size)&&(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)(mq,{className:"menu-separator"}),(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(()=>{var ne,Ge;return Jc.exportToImage(mc.currentPageId,{x:mc.selectionBounds.minX+
mc.viewport.camera.point[0]-8,y:mc.selectionBounds.minY+mc.viewport.camera.point[1]-8,width:(null==(ne=mc.selectionBounds)?void 0:ne.width)+16,height:(null==(Ge=mc.selectionBounds)?void 0:Ge.height)+16,zoom:mc.viewport.camera.zoom})}),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"file-export"}),"Export",(0,sb.jsx)("div",{className:"tl-menu-right-slot",children:(0,sb.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,sb.jsx)(mq,{className:"menu-separator"}),(0,sb.jsxs)(xm,{className:"tl-menu-item",
onClick:()=>td(mc.api.selectAll),children:["Select all",(0,sb.jsx)(am,{action:"editor/select-parent"})]}),1<(null==(kb=mc.selectedShapes)?void 0:kb.size)&&(0,sb.jsx)(xm,{className:"tl-menu-item",onClick:()=>td(mc.api.deselectAll),children:"Deselect all"}),!mc.readOnly&&0<(null==(Lb=mc.selectedShapes)?void 0:Lb.size)&&(null==(Vb=mc.selectedShapesArray)?void 0:Vb.some(ne=>!ne.props.isLocked))&&(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(()=>mc.setLocked(!0)),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",
name:"lock"}),"Lock",(0,sb.jsx)(am,{action:"whiteboard/lock"})]}),!mc.readOnly&&0<(null==(Qb=mc.selectedShapes)?void 0:Qb.size)&&(null==(lc=mc.selectedShapesArray)?void 0:lc.some(ne=>ne.props.isLocked))&&(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(()=>mc.setLocked(!1)),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"lock-open"}),"Unlock",(0,sb.jsx)(am,{action:"whiteboard/unlock"})]}),0<(null==(xc=mc.selectedShapes)?void 0:xc.size)&&!mc.readOnly&&(null==(ac=mc.selectedShapesArray)?
void 0:ac.some(ne=>!ne.props.isLocked))&&(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(mc.api.deleteShapes),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,sb.jsx)(am,{action:"editor/delete"})]}),1<(null==(pc=mc.selectedShapes)?void 0:pc.size)&&!mc.readOnly&&(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)(mq,{className:"menu-separator"}),(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(mc.flipHorizontal),children:[(0,sb.jsx)(Wh,
{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(mc.flipVertical),children:[(0,sb.jsx)(Wh,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),!mc.readOnly&&(0,sb.jsxs)(sb.Fragment,{children:[(0,sb.jsx)(mq,{className:"menu-separator"}),(0,sb.jsxs)(xm,{className:"tl-menu-item",onClick:()=>td(mc.bringToFront),children:["Move to front",(0,sb.jsx)(am,{action:"whiteboard/bring-to-front"})]}),(0,sb.jsxs)(xm,
{className:"tl-menu-item",onClick:()=>td(mc.sendToBack),children:["Move to back",(0,sb.jsx)(am,{action:"whiteboard/send-to-back"})]})]}),he&&(0,sb.jsx)(xm,{className:"tl-menu-item",onClick:()=>{1===mc.selectedShapesArray.length?console.log(Bb(mc.selectedShapesArray[0].serialized)):console.log(mc.selectedShapesArray.map(ne=>Bb(ne.serialized)))},children:"(Dev) Print shape props"})]})]})})]})}),Gn=yf(V(22));sb=V(586);var Wu=ff(({shape:a})=>{const d=ef(),{handlers:l}=Gn.default.useContext(Qk),E=Gn.default.useMemo(()=>
{var W;const ka=[...(null!=(W=a.props.refs)?W:[])].map(oa=>[oa,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&ka.unshift([a.props.pageId,!1]);return ka.filter(oa=>oa[0].toLowerCase()!==d.currentPage.name&&l.getBlockPageName(oa[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===E.length?null:(0,sb.jsx)("div",{className:"tl-quick-links",title:"Shape Quick Links",children:E.map(([W,ka])=>(0,sb.jsx)("div",{className:"tl-quick-links-row",children:(0,sb.jsx)(Hq,
{id:W,showReferenceContent:ka})},W))})}),po=yf(V(22)),yC=yf(V(22)),Sn=[".png",".svg",".jpg",".jpeg",".gif"],nq=[".mp4",".webm",".ogg"],zC=(a,d,l)=>yi(void 0,[a,d,l],function*(E,{point:W,shiftKey:ka,dataTransfer:oa,fromDrop:Fa},Qa){function Xa(qd,sd){return yi(this,null,function*(){const ke=Object.values(E.assets).find(pf=>pf.src===qd);return ke?ke:{id:el(),type:sd?"video":"image",src:qd,size:yield jj(Qa.makeAssetUrl(qd),sd)}})}function db(qd){return yi(this,null,function*(){const sd=qd.filter(ke=>
"unknown"!==fc(ke.name)).map(ke=>yi(this,null,function*(){try{const pf=yield Qa.saveAsset(ke);return yield Xa(pf,"video"===fc(ke.name))}catch(pf){console.error(pf)}return null}));return(yield Promise.all(sd)).filter(fg)})}function kb(qd){return[of(oe({},Dj.defaultProps),{html:qd,point:[W[0],W[1]]})]}function Lb(qd){return yi(this,null,function*(){return yc(Qb,ac,xc,pc,lc,he)(qd)})}function Vb(){return yi(this,null,function*(){const qd=yield navigator.clipboard.read(),sd=yc(pc,lc,he);return(yield Promise.all(qd.map(ke=>
sd(ke)))).flat().filter(fg)})}function Qb(qd){return yi(this,null,function*(){var sd=Array.from(qd.files);return 0<sd.length?(jf=sd=yield db(sd),sd.map((ke,pf)=>{const Af=of(oe({},"video"===ke.type?Nu.defaultProps:eh.defaultProps),{id:el(),assetId:ke.id,opacity:1});ke.size&&Object.assign(Af,{point:[W[0]-ke.size[0]/4+16*pf,W[1]-ke.size[1]/4+16*pf],size:me.div(ke.size,2)});return Af})):null})}function lc(qd){return yi(this,null,function*(){if(qd.types.includes("text/plain")&&(ka||Fa))return null;const sd=
yield Vc(qd,"text/html");return sd?yc(mc,kb)(sd):null})}function xc(qd){return yi(this,null,function*(){var sd,ke,pf,Af,ng,Kf,$f=qd.getData("block-uuid");if($f){$f=$f.trim();const Wg=null==(pf=null==(ke=null==(sd=window.logseq)?void 0:sd.api)?void 0:ke.get_selected_blocks)?void 0:pf.call(ke);sd=Wg&&1<(null==Wg?void 0:Wg.length)?Wg.map(Of=>Of.uuid):[$f];null==(Kf=null==(ng=null==(Af=window.logseq)?void 0:Af.api)?void 0:ng.set_blocks_id)?void 0:Kf.call(ng,sd);Af=sd.map(Of=>td(`((${Of}))`));return(yield Promise.all(Af)).flat().filter(fg).map((Of,
Bh)=>of(oe({},Of),{point:[W[0]+(bm.defaultProps.size[0]+16)*Bh,W[1]]}))}return null})}function ac(qd){return yi(this,null,function*(){var sd=qd.getData("page-name");return sd?(sd=sd.trim(),td(`[[${sd}]]`)):null})}function pc(qd){return yi(this,null,function*(){var sd=yield Vc(qd,"text/plain");return sd?(sd=sd.trim(),yc(Jc,Qc)(sd)):null})}function mc(qd){if(qd=E.api.getClonedShapesFromTldrString(decodeURIComponent(qd),W)){const {shapes:sd,assets:ke,bindings:pf}=qd;rf.push(...ke);We.push(...pf);return sd}return null}
function Jc(qd){return yi(this,null,function*(){try{const ke=new URL(qd);var sd=ke.host&&["http:","https:"].includes(ke.protocol)}catch(ke){sd=!1}return sd&&!ka?aw.test(qd)?[of(oe({},Hp.defaultProps),{url:qd,point:[W[0],W[1]]})]:Ou.test(qd)?[of(oe({},Rn.defaultProps),{url:qd,point:[W[0],W[1]]})]:[of(oe({},wr.defaultProps),{url:qd,point:[W[0],W[1]]})]:null})}function Qc(qd){return qd.startsWith("\x3ciframe")?[of(oe({},Dj.defaultProps),{html:qd,point:[W[0],W[1]]})]:null}function td(qd){return yi(this,
null,function*(){if(/^\(\(.*\)\)$/.test(qd)&&40===qd.length){var sd=qd.slice(2,-2);if(Gk(sd))return[of(oe({},bm.defaultProps),{point:[W[0],W[1]],size:[400,0],pageId:sd,fill:E.settings.color,stroke:E.settings.color,scaleLevel:E.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(qd))return sd=qd.slice(2,-2),[of(oe({},bm.defaultProps),{point:[W[0],W[1]],size:[400,0],pageId:sd,fill:E.settings.color,stroke:E.settings.color,scaleLevel:E.settings.scaleLevel,blockType:"P"})];return null})}function he(qd){return yi(this,
null,function*(){var sd=yield Vc(qd,"text/plain");return sd&&(sd=sd.trim(),sd=null==Qa?void 0:Qa.addNewBlock(sd))?[of(oe({},bm.defaultProps),{size:[400,0],point:[W[0],W[1]],pageId:sd,fill:E.settings.color,stroke:E.settings.color,scaleLevel:E.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var ne,Ge;let jf=[],rf=[];const We=[];E.cursors.setCursor("progress");let uf=[];try{oa?uf.push(...(null!=(ne=yield Lb(oa))?ne:[])):uf.push(...(null!=(Ge=yield Vb())?Ge:[]))}catch(qd){console.error(qd)}const Qd=
uf.map(qd=>of(oe({},qd),{parentId:E.currentPageId,isLocked:!1,id:Gk(qd.id)?qd.id:el()})),nd=null==oa?void 0:oa.types.every(qd=>"Files"===qd);E.wrapUpdate(()=>{var qd=[...jf,...rf];0<qd.length&&E.createAssets(qd);0<Qd.length&&E.createShapes(Qd);E.currentPage.updateBindings(Object.fromEntries(We.map(sd=>[sd.id,sd])));if(1===E.selectedShapesArray.length&&1===Qd.length&&Fa){qd=E.selectedShapesArray[0];const sd=E.getShapeById(Qd[0].id);E.createNewLineBinding(qd,sd)}E.setSelectedShapes(Qd.map(sd=>sd.id));
E.selectedTool.transition("idle");E.cursors.setCursor("default");(Fa||nd)&&E.packIntoRectangle()})}),AC=yf(V(22)),QG=yf(V(22));sb=V(586);var ym=[Is,lq,Jt,bw,cw,Pu,Qu,no,Ip,Ru,fy,Dr],Ir=a=>{const {renderers:d}=pt.useContext(Qk);return(0,sb.jsx)(d.BacklinksCount,of(oe({},a),{options:{"portal?":!1}}))},So=()=>{const a=pt.useRef(null),d=ef(),l=pt.useMemo(()=>({ContextBar:oy,BacklinksCount:Ir,QuickLinks:Wu}),[]);return(0,sb.jsx)(qy,{collisionRef:a,children:(0,sb.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper",
"data-tlapp":d.uuid,children:(0,sb.jsx)(YE,{components:l,children:(0,sb.jsx)(qr,{})})})})},BC=a=>{var {onPersist:d,readOnly:l,model:E}=a;a=If(a,["onPersist","readOnly","model"]);const W=yd(),ka=kd(),oa=Ud(),Fa=l?null:Be(),Qa=pt.useCallback((Xa,db)=>{null==d?void 0:d(Xa,db)},[E]);return(0,sb.jsx)(WE,of(oe({Shapes:Qj,Tools:ym,onDrop:W,onPaste:ka,onCopy:oa,readOnly:l,onCanvasDBClick:Fa,onPersist:Qa,model:E},a),{children:(0,sb.jsx)(So,{})}))},ji=function(a){var {renderers:d,handlers:l}=a;a=If(a,["renderers",
"handlers"]);const E={renderers:pt.useMemo(()=>Object.fromEntries(Object.entries(d).map(([W,ka])=>[W,pt.memo(ka)])),[]),handlers:l};return(0,sb.jsx)(Qk.Provider,{value:E,children:(0,sb.jsx)(BC,oe({},a))})}};
'use strict';var Tmd=function(a){return a},Umd=function(a,b){return $APP.vh.j(function(c){var d=$APP.kf(c);c=$APP.G.j(d,$APP.wD);d=$APP.G.j(d,$APP.SG);return new $APP.m(null,2,[$APP.tl,$APP.u.C(c),$APP.NGb,$APP.Xy.j(d,new $APP.O(null,2,5,$APP.R,[$APP.eF,$APP.NGb],null))],null)},$APP.Pf.j(function(c){return $APP.eF.C($APP.SG.C(c))},$APP.OH(a,b,new $APP.m(null,1,[$APP.Ft,new $APP.O(null,2,5,$APP.R,[$APP.wD,$APP.SG],null)],null))))},Vmd=function(a){return $APP.Hq.G(a,$APP.F([$APP.Iq,!0]))},Wmd=function(a,
b,c,d){var e=$APP.UH(a);b=new $APP.m(null,2,[$APP.fF,$APP.Qib,$APP.hF,new $APP.m(null,6,[$APP.tl,$APP.wa(b,"id"),$APP.W,$APP.wa(b,"name"),$APP.SI,Vmd($APP.wa(b,"bindings")),$APP.NGb,$APP.wa(b,"nonce"),$APP.OGb,Vmd(c),$APP.KGb,d],null)],null);c=$APP.qx();e=$APP.sI.C(e);e=$APP.n(e)?e:$APP.qx();return new $APP.m(null,5,[$APP.Br,a,$APP.uH,"whiteboard",$APP.SG,b,$APP.tI,c,$APP.sI,e],null)},Xmd=function(a,b,c,d,e,f){a=Vmd(a.getCleanUpAssets());var g=b.shapes,h=$APP.vh.j(function(E){return $APP.wa(E,"id")},
g),l=$APP.bh(h,$APP.qj.C(g.length));g=$APP.Zg($APP.vh.j(function(E){E=$APP.kf(E);E=$APP.G.j(E,$APP.tl);return $APP.T.F(Vmd(b.getShapeById(E).serialized),$APP.my,$APP.G.j(l,E))},$APP.VA.j(c,d)));d=$APP.Zg($APP.vh.j($APP.tl,d));var p=$APP.Zg($APP.vh.j($APP.tl,c)),q=$APP.Zg($APP.Gm.j($APP.Uj,$APP.VA.j(p,d)));c=$APP.Zg($APP.Pf.j(function(E){E=$APP.tl.C(E);return q.C?q.C(E):q.call(null,E)},g));var r=$APP.Gm.j($APP.Uj,$APP.VA.j(d,p)),t=$APP.sC();d=$APP.x(r)?$APP.vh.j(function(E){return $APP.Xy.j(E,new $APP.O(null,
2,5,$APP.R,[$APP.SG,$APP.eF],null))},function(){var E=new $APP.O(null,1,5,$APP.R,[$APP.Gz],null),H=$APP.pj.j(function(K){return new $APP.O(null,2,5,$APP.R,[$APP.wD,$APP.Wh(K)],null)},r);return $APP.RF?$APP.RF(t,E,H):$APP.SF.call(null,t,E,H)}()):null;p=$APP.pj.j(function(E){return new $APP.O(null,2,5,$APP.R,[$APP.fLa,new $APP.O(null,2,5,$APP.R,[$APP.wD,$APP.Wh(E)],null)],null)},r);var y=$APP.VA.j(g,c),z=$APP.x(y)?function(){var E=new $APP.O(null,1,5,$APP.R,[$APP.Gz],null),H=$APP.pj.j(function(K){return new $APP.O(null,
2,5,$APP.R,[$APP.wD,$APP.Wh($APP.tl.C(K))],null)},y);return $APP.RF?$APP.RF(t,E,H):$APP.SF.call(null,t,E,H)}():null;return new $APP.m(null,4,[$APP.wtc,Wmd(e,b,a,h),$APP.SIc,$APP.vh.j(function(E){return $APP.Wd(q,$APP.u.C($APP.wD.C(E)))?$APP.T.F(E,$APP.tI,$APP.qx()):$APP.Htb(E)},$APP.vh.j(function(E){E=new $APP.m(null,2,[$APP.fF,$APP.aO,$APP.eF,E],null);E=new $APP.m(null,3,[$APP.PF,new $APP.m(null,1,[$APP.Br,$APP.Ar.C?$APP.Ar.C(e):$APP.Ar.call(null,e)],null),$APP.bG,new $APP.m(null,1,[$APP.Br,e],null),
$APP.SG,E],null);var H=$APP.Wib(E,e);return $APP.Nl.G($APP.F([E,H]))},g)),$APP.qG,p,$APP.nYb,new $APP.m(null,3,[$APP.zDb,$APP.Hb(f),$APP.Wsb,f,$APP.tw,new $APP.m(null,5,[$APP.cO,e,$APP.dHb,d,$APP.eHb,c,$APP.fHb,y,$APP.gHb,z],null)],null)],null)},Ymd=function(a,b,c){var d=$APP.$c($APP.A(b.pages)),e=d.shapes,f=$APP.UH(a);f=$APP.Xy.j(f,new $APP.O(null,3,5,$APP.R,[$APP.SG,$APP.hF,$APP.KGb],null));var g=$APP.bh(f,$APP.qj.C($APP.Vc(f)));e=$APP.Zg($APP.Sn.j(function(q,r){var t=r.id;return new $APP.m(null,
2,[$APP.tl,t,$APP.NGb,$APP.B.j(q,$APP.G.j(g,t))?r.nonce:Date.now()],null)},e));var h=$APP.sC();f=function(){var q=$APP.Xy.j($APP.v($APP.Z8c),new $APP.O(null,2,5,$APP.R,[h,a],null));return $APP.n(q)?q:$APP.Zg($APP.vh.j(function(r){return $APP.Kr.F(r,$APP.tl,$APP.u)},Umd(h,a)))}();b=Xmd(b,d,e,f,a,c);f=$APP.kf(b);d=$APP.G.j(f,$APP.wtc);b=$APP.G.j(f,$APP.SIc);c=$APP.G.j(f,$APP.qG);f=$APP.G.j(f,$APP.nYb);d=$APP.Vk.G(c,new $APP.O(null,1,5,$APP.R,[d],null),$APP.F([b]));var l=$APP.Xy.j(f,new $APP.O(null,
2,5,$APP.R,[$APP.tw,$APP.eHb],null)),p=$APP.Xy.j(f,new $APP.O(null,2,5,$APP.R,[$APP.tw,$APP.dHb],null));l=$APP.n($APP.xf(function(q){return $APP.B.j("group",$APP.Jm.C(q))},l))?$APP.T.F(f,$APP.hHb,$APP.jw):$APP.n(function(){var q=$APP.lf(p);return $APP.n(q)?$APP.wf(function(r){return $APP.B.j("group",$APP.Jm.C(r))},p):q}())?$APP.T.F(f,$APP.hHb,$APP.Auc):$APP.n($APP.xf(function(q){return $APP.B.j("line",$APP.Jm.C(q))&&$APP.B.j("arrow ",$APP.To.C($APP.tsc.C(q)))},l))?$APP.T.F(f,$APP.hHb,$APP.eFc):f;
b=$APP.x($APP.Vk.j(b,c))?l:$APP.T.F(f,$APP.fYa,!0);$APP.Ih.R($APP.Z8c,$APP.Iv,new $APP.O(null,2,5,$APP.R,[h,a],null),e);if($APP.Wd(new $APP.Vg(null,new $APP.m(null,1,[$APP.eFc,null],null),null),$APP.hHb.C(b)))return $APP.vC($APP.BVc,new $APP.m(null,2,[$APP.dz,d,$APP.nYb,b],null));e=$APP.BVc.C($APP.v($APP.tC));$APP.Vk.j($APP.dz.C(e),d);$APP.Nl.G($APP.F([b,$APP.nYb.C(e)]));$APP.vC($APP.BVc,$APP.jf);return null},Zmd=function(a){a=$APP.NH(a);return $APP.Gm.j($APP.Oib,a)},$md=function(a){var b=$APP.ez.C($APP.UH(a));
a=Zmd(a);a=$APP.Pf.j(function(d){return $APP.B.j(b,$APP.ez.C($APP.bG.C(d)))},a);var c=$APP.Zg($APP.Gm.j($APP.Db,$APP.vh.j(function(d){return $APP.Xy.F(d,new $APP.O(null,2,5,$APP.R,[$APP.cG,$APP.ez],null),null)},a)));a=$APP.Gm.j(function(d){d=$APP.ez.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},and=function(){return $APP.em(null,function(){return $APP.em(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.em(a.text(),function(b){return $APP.em($APP.Hr($APP.jf,
b),function(c){return $APP.Xl(c)})})})})},bnd=function(a){var b=$APP.L0a();return($APP.od(b)||$APP.B.j(1,$APP.Vc(b))&&$APP.B.j(a,$APP.Br.C($APP.A(b))))&&$APP.Hb($APP.Xy.j($APP.v($APP.tC),new $APP.O(null,1,5,$APP.R,[$APP.bfc],null)))},cnd=function(a){return null!=a?$APP.hm($APP.em(null,function(){return $APP.em(and(),function(b){var c=$APP.kf(b);b=$APP.G.j(c,$APP.qI);c=$APP.G.j(c,$APP.nx);var d=$APP.A(b);b=$APP.LGb(d,c);d=$APP.Nib(d);c=$APP.OGb.C(d);d=$APP.SI.C(d);a.cloneShapesIntoCurrentPage($APP.Gi(new $APP.m(null,
3,[$APP.WGb,b,$APP.OGb,c,$APP.SI,d],null)));$APP.vC($APP.bfc,!0);b=$APP.cC($APP.Ijc,!0);return $APP.Xl(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},dnd=function(a){a.cleanup($APP.vh.j(function(b){return b.id},a.shapes))},gnd=function(a,b){b=$APP.Hq.G(b,$APP.F([new $APP.m(null,1,[$APP.Iq,!0],null)]));b=$APP.kf(b);var c=$APP.G.j(b,end),d=$APP.G.j(b,$APP.FK),e=$APP.G.j(b,fnd),f=$APP.sC();return $APP.em(null,function(){return $APP.em($APP.n(d)?$APP.pdb(f,
a,new $APP.m(null,1,[$APP.Ox,100],null)):null,function(g){return $APP.em($APP.n(c)?$APP.udb(a,10):null,function(h){return $APP.em($APP.n(e)?$APP.vdb(a,100):null,function(l){return $APP.Xl($APP.Gi(new $APP.m(null,3,[$APP.qI,h,$APP.nx,g,$APP.pL,l],null)))})})})})},hnd=function(a){return $APP.dm($APP.GAb($APP.sC(),new $APP.O(null,1,5,$APP.R,[$APP.Hq.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.C.F(c,0,null),$APP.C.F(c,1,null),c=$APP.C.F(c,2,null),$APP.IAb($APP.n(c)?
c:b)):null})},ind=function(){return $APP.EDb(null)},jnd=function(){return $APP.HDb(null)},ynd=function(a){return $APP.Hg([knd,lnd,mnd,nnd,ond,pnd,$APP.WD,qnd,rnd,snd,tnd,und,vnd,wnd,xnd],[function(b){return $APP.Br.C($APP.c_a($APP.sC(),$APP.xi(b)))},function(b){return $APP.VH(b,!1)},function(b){return $APP.PGb(b)},$APP.Kx,function(b){return $APP.Jzb(b,new $APP.m(null,1,[$APP.ZS,!1],null))},$APP.oI,gnd,hnd,Tmd,function(b,c){return $APP.kx(b,$APP.F([$APP.mx,c]))},function(b){var c=$APP.u,d=c.C,e=$APP.AB(),
f=$APP.UH(a),g=$md(a);b=new $APP.m(null,6,[$APP.cG,$APP.Ug($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.R,[$APP.ez],null)),$APP.wD,e,$APP.tD,$APP.n(b)?b:"",$APP.uG,$APP.Cr,$APP.PF,new $APP.m(null,2,[$APP.Br,$APP.Ar.C?$APP.Ar.C(a):$APP.Ar.call(null,a),$APP.ux,a],null),$APP.bG,new $APP.m(null,1,[$APP.Br,a],null)],null);$APP.TF(new $APP.O(null,1,5,$APP.R,[b],null));return d.call(c,e)},function(b,c){return $APP.QD(function(){return(0,$APP.zSb)(b,$APP.Nl.G($APP.F([$APP.Hq.G(c,$APP.F([$APP.Iq,!0])),new $APP.m(null,
1,[$APP.$S,!0],null)])))})},function(b,c){return $APP.rD($APP.sC(),$APP.ez.C($APP.UH(b)),$APP.wh.C(c))},function(b){var c=$APP.Kw(b)?$APP.Br.C($APP.c_a($APP.sC(),$APP.xi(b))):null;c=$APP.n(c)?c:b;var d=$APP.PH(c),e=$APP.oI(c);return $APP.n(d)?$APP.n(e)?$APP.BN(c,new $APP.m(null,1,[$APP.AN,b],null)):$APP.yN($APP.VH(b,!1)):null},function(b){return $APP.Gi($APP.jH($APP.xi(b)))}])},xnd=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),und=new $APP.N(null,"exportToImage","exportToImage",
-154356643),tnd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),znd=new $APP.N(null,"KeyboardShortcut","KeyboardShortcut",1250004264),fnd=new $APP.N(null,"files?","files?",-1267491104),knd=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),And=new $APP.N(null,"renderers","renderers",-1460292282),Bnd=new $APP.N(null,"model","model",331153215),lnd=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),nnd=new $APP.N(null,"isMobile","isMobile",-2043133877),Cnd=
new $APP.N(null,"onMount","onMount",-876858467),ond=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),rnd=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),Dnd=new $APP.N(null,"onPersist","onPersist",-1848738852),End=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),snd=new $APP.N(null,"copyToClipboard","copyToClipboard",1092115063),wnd=new $APP.N(null,"redirectToPage","redirectToPage",87147838),mnd=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),
qnd=new $APP.N(null,"saveAsset","saveAsset",-668047853),Fnd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),Gnd=new $APP.N(null,"Block","Block",-1959785792),vnd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),Hnd=new $APP.N(null,"Page","Page",-1267059506),end=new $APP.N(null,"pages?","pages?",-2065014049),Ind=new $APP.N(null,"PageName","PageName",-164991013),Jnd=new $APP.N(null,"Tweet","Tweet",-452258680),pnd=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),
Knd=new $APP.N(null,"BlockReference","BlockReference",-120254741);$APP.bda("tldraw");var Lnd=$APP.om(590);var Mnd,Nnd;$APP.Rdd={};Mnd=$APP.vT($APP.wa(Lnd,"App"));$APP.Udd=$APP.wa(Lnd,"generateJSXFromModel");
Nnd=new $APP.m(null,8,[Hnd,$APP.gs($APP.ks,function(a){return(0,$APP.add)(new $APP.m(null,2,[$APP.cO,$APP.VH($APP.wa(a,"pageName"),!1),$APP.$S,!0],null))},null,"frontend.extensions.tldraw/page-cp"),Gnd,$APP.gs($APP.ks,function(a){a=$APP.Wh($APP.wa(a,"blockId"));var b=$APP.LTa($APP.G9b);a=b.C?b.C(a):b.call(null,a);return $APP.Qr(a)},null,"frontend.extensions.tldraw/block-cp"),End,$APP.gs($APP.ks,function(a){return $APP.Qr($APP.kW(new $APP.m(null,1,[$APP.TZ,!0],null),$APP.sC(),$APP.Wh($APP.wa(a,"blockId")),
new $APP.m(null,2,[$APP.k_b,$APP.wa(a,"endSeparator"),$APP.l_b,$APP.wa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),Jnd,$APP.gs($APP.ks,function(a){return(0,$APP.aZb)($APP.wa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),Ind,$APP.gs($APP.ks,function(a){return(0,$APP.YV)(new $APP.m(null,1,[$APP.TZ,!0],null),new $APP.m(null,1,[$APP.Br,$APP.wa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),Fnd,function(a){return $APP.zf.j($APP.Xdd,$APP.vh.j(function(b){return $APP.Hq.G($APP.wa(a,
b),$APP.F([new $APP.m(null,1,[$APP.Iq,!0],null)]))},new $APP.O(null,3,5,$APP.R,["id","className","options"],null)))},Knd,$APP.gs($APP.ks,function(a){return(0,$APP.jYb)($APP.jf,$APP.wa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),znd,$APP.gs($APP.ks,function(a){a=$APP.pIb($APP.wh.C($APP.wa(a,"action")));return $APP.Qr($APP.yT(a))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.Sdd=$APP.gs($APP.ks,function(a,b){function c(l){if($APP.n(l)){l.appUndo=ind;l.appRedo=jnd;var p=$APP.wa(l,"api");return $APP.n(p)?$APP.dm(d?cnd(p):null,function(){dnd(l.currentPage);$APP.FUa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=bnd(a),e=$APP.XGb(a),f=$APP.ts(null),g=$APP.C.F(f,0,null),h=$APP.C.F(f,1,null);$APP.us(function(){$APP.n($APP.n(g)?b:g)&&$APP.FUa(g,b);return function(){return $APP.Ec}},new $APP.O(null,2,5,$APP.R,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.wa(l,"target").tagName;var p=new $APP.Vg(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.vD():null},onWheel:$APP.ex,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Hb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Qr($APP.FT("Loading onboarding whiteboard ..."))]):null,$APP.Qr(function(){var l=new $APP.m(null,6,[And,Nnd,$APP.UB,
ynd(a),Cnd,c,$APP.oKc,!0,Dnd,function(p,q){$APP.vC(new $APP.O(null,2,5,$APP.R,[$APP.oMc,$APP.sC()],null),$APP.qx());return $APP.n(!1)?(console.time("tldraw persist"),p=Ymd(a,p,q.replace),console.timeEnd("tldraw persist"),p):Ymd(a,p,q.replace)},Bnd,e],null);return Mnd.C?Mnd.C(l):Mnd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Ya.Xi();
}).call(this);